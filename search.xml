<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>前端 vue2 leaflet 离线地图(以百度地图为例)</title>
      <link href="/post/df3e.html"/>
      <url>/post/df3e.html</url>
      
        <content type="html"><![CDATA[<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>下载地图瓦片⇒瓦片存项目中⇒leaflet接入地图，简单配置一下</p><p>参考文档：<a href="https://juejin.cn/post/7102330662425722894">https://juejin.cn/post/7102330662425722894</a>  如果觉得难操作可以看本文的详细操作步骤。</p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>离线地图最好确定好缩放级别和地图的范围，不然瓦片数量会特别多，项目打包直接指数爆炸</p><blockquote><p>前置信息：leaflet的缩放级别从1到18，越大越近。使用leaflet时候一定记得引入其.css文件，不然瓦片错位，这个不用担心，具体代码放在下面了。</p><p>leaflet文档: <a href="https://leafletjs.cn/reference.html">https://leafletjs.cn/reference.html</a></p></blockquote><h2 id="具体操作"><a href="#具体操作" class="headerlink" title="具体操作"></a>具体操作</h2><ol><li><p>下载瓦片</p><ol><li>运行程序下载地址：<a href="https://github.com/muddyrain/vue-ol-map">https://github.com/muddyrain/vue-ol-map</a>     全能地图下载器-MapTileDownloader.rar<img src="../images/%E5%89%8D%E7%AB%AF-vue2-leaflet-%E7%A6%BB%E7%BA%BF%E5%9C%B0%E5%9B%BE-%E4%BB%A5%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E4%B8%BA%E4%BE%8B/img_v3_02ih_79e1fb7c-be34-460f-86e4-eb31aa918c1g.jpg" alt="img_v3_02ih_79e1fb7c-be34-460f-86e4-eb31aa918c1g"></li><li>选择地图<img src="../images/%E5%89%8D%E7%AB%AF-vue2-leaflet-%E7%A6%BB%E7%BA%BF%E5%9C%B0%E5%9B%BE-%E4%BB%A5%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E4%B8%BA%E4%BE%8B/img_v3_02ih_1293936b-08e3-4998-a2fa-6adeb952699g.jpg" alt="img_v3_02ih_1293936b-08e3-4998-a2fa-6adeb952699g"></li><li>选择地理范围<img src="../images/%E5%89%8D%E7%AB%AF-vue2-leaflet-%E7%A6%BB%E7%BA%BF%E5%9C%B0%E5%9B%BE-%E4%BB%A5%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E4%B8%BA%E4%BE%8B/img_v3_02ih_22f81d98-f507-4748-8202-4ad0608394eg.jpg" alt="img_v3_02ih_22f81d98-f507-4748-8202-4ad0608394eg"></li><li>选择地图级别<img src="../images/%E5%89%8D%E7%AB%AF-vue2-leaflet-%E7%A6%BB%E7%BA%BF%E5%9C%B0%E5%9B%BE-%E4%BB%A5%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E4%B8%BA%E4%BE%8B/img_v3_02ih_5e121bdd-d3a6-49a8-8661-263b7372ebdg.jpg" alt="img_v3_02ih_5e121bdd-d3a6-49a8-8661-263b7372ebdg"></li><li>下载，不需要下一步的拼接环节<img src="../images/%E5%89%8D%E7%AB%AF-vue2-leaflet-%E7%A6%BB%E7%BA%BF%E5%9C%B0%E5%9B%BE-%E4%BB%A5%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E4%B8%BA%E4%BE%8B/img_v3_02ih_5649f686-4795-4e00-9e1d-3199aec949eg.png" alt="img_v3_02ih_5649f686-4795-4e00-9e1d-3199aec949eg"></li><li>查看下载结果<img src="../images/%E5%89%8D%E7%AB%AF-vue2-leaflet-%E7%A6%BB%E7%BA%BF%E5%9C%B0%E5%9B%BE-%E4%BB%A5%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E4%B8%BA%E4%BE%8B/img_v3_02ih_4633f09a-8f70-47ee-ad14-9b1e26d96a7g.jpg" alt="img_v3_02ih_4633f09a-8f70-47ee-ad14-9b1e26d96a7g"></li></ol></li><li><p>瓦片存放</p><p>把/16/17/18这些文件夹给复制到项目/public/map里</p><p><img src="../images/%E5%89%8D%E7%AB%AF-vue2-leaflet-%E7%A6%BB%E7%BA%BF%E5%9C%B0%E5%9B%BE-%E4%BB%A5%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E4%B8%BA%E4%BE%8B/image-20250114193401872.png" alt="image-20250114193401872"></p></li><li><p>接入leaflet：通过各种方式下载包到项目。记得引入.css文件。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在项目入口文件引入</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;leaflet/dist/leaflet.css&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>使用leaflet</p><ol><li><p>连接本地瓦片的util，有两个注意的点，请看代码注释👇  (文件 tileLayer.baidu.js 需要整个copy)</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 两个包：proj4.js 和 proj4leaflet.js，需要给项目加一下</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;proj4&#x27;</span>)</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;proj4leaflet&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> L = <span class="built_in">require</span>(<span class="string">&#x27;leaflet&#x27;</span>)</span><br><span class="line"><span class="comment">// 2. 瓦片文件位置：本地百度地图离线瓦片地图</span></span><br><span class="line"><span class="keyword">const</span> titleD = <span class="string">&#x27;/map/&#123;z&#125;/&#123;x&#125;/&#123;y&#125;.png&#x27;</span></span><br><span class="line"><span class="keyword">var</span> urlPath = titleD</span><br><span class="line"></span><br><span class="line">L.<span class="property">CRS</span>.<span class="property">Baidu</span> = <span class="keyword">new</span> L.<span class="property">Proj</span>.<span class="title function_">CRS</span>(</span><br><span class="line">  <span class="string">&#x27;EPSG:900913&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;+proj=merc +a=6378206 +b=6356584.314245179 +lat_ts=0.0 +lon_0=0.0 +x_0=0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs&#x27;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">resolutions</span>: (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> level = <span class="number">19</span></span><br><span class="line">      <span class="keyword">var</span> res = []</span><br><span class="line">      res[<span class="number">0</span>] = <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>, <span class="number">18</span>)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; level; i++) &#123;</span><br><span class="line">        res[i] = <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>, <span class="number">18</span> - i)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    &#125;)(),</span><br><span class="line">    <span class="attr">origin</span>: [<span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">    <span class="attr">bounds</span>: L.<span class="title function_">bounds</span>([<span class="number">20037508.342789244</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">20037508.342789244</span>]),</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">L.<span class="property">tileLayer</span>.<span class="property">baidu</span> = <span class="keyword">function</span> (<span class="params">option</span>) &#123;</span><br><span class="line">  option = option || &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> layer</span><br><span class="line">  <span class="keyword">var</span> subdomains = <span class="string">&#x27;0123456789&#x27;</span></span><br><span class="line">  <span class="keyword">switch</span> (option.<span class="property">layer</span>) &#123;</span><br><span class="line">    <span class="comment">//单图层</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;vec&#x27;</span>:</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      layer = L.<span class="title function_">tileLayer</span>(urlPath, &#123;</span><br><span class="line">        <span class="attr">name</span>: option.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">subdomains</span>: subdomains,</span><br><span class="line">        <span class="attr">tms</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;img_d&#x27;</span>:</span><br><span class="line">      layer = L.<span class="title function_">tileLayer</span>(</span><br><span class="line">        <span class="string">&#x27;&lt;http://shangetu&gt;&#123;s&#125;.map.bdimg.com/it/u=x=&#123;x&#125;;y=&#123;y&#125;;z=&#123;z&#125;;v=009;type=sate&amp;fm=46&#x27;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">name</span>: option.<span class="property">name</span>,</span><br><span class="line">          <span class="attr">subdomains</span>: subdomains,</span><br><span class="line">          <span class="attr">tms</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;img_z&#x27;</span>:</span><br><span class="line">      layer = L.<span class="title function_">tileLayer</span>(</span><br><span class="line">        <span class="string">&#x27;&lt;http://online&gt;&#123;s&#125;.map.bdimg.com/tile/?qt=tile&amp;x=&#123;x&#125;&amp;y=&#123;y&#125;&amp;z=&#123;z&#125;&amp;styles=&#x27;</span> +</span><br><span class="line">          (option.<span class="property">bigfont</span> ? <span class="string">&#x27;sh&#x27;</span> : <span class="string">&#x27;sl&#x27;</span>) +</span><br><span class="line">          <span class="string">&#x27;&amp;v=020&#x27;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">name</span>: option.<span class="property">name</span>,</span><br><span class="line">          <span class="attr">subdomains</span>: subdomains,</span><br><span class="line">          <span class="attr">tms</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;custom&#x27;</span>: <span class="comment">//Custom 各种自定义样式</span></span><br><span class="line">      <span class="comment">//可选值：dark,midnight,grayscale,hardedge,light,redalert,googlelite,grassgreen,pink,darkgreen,bluish</span></span><br><span class="line">      option.<span class="property">customid</span> = option.<span class="property">customid</span> || <span class="string">&#x27;midnight&#x27;</span></span><br><span class="line">      <span class="comment">// layer = L.tileLayer(&#x27;&lt;http://api&gt;&#123;s&#125;.map.bdimg.com/customimage/tile?&amp;x=&#123;x&#125;&amp;y=&#123;y&#125;&amp;z=&#123;z&#125;&amp;scale=1&amp;customid=&#x27; + option.customid, &#123;</span></span><br><span class="line">      <span class="comment">//     name: option.name, subdomains: &quot;012&quot;, tms: true</span></span><br><span class="line">      <span class="comment">// &#125;);</span></span><br><span class="line">      layer = L.<span class="title function_">tileLayer</span>(urlPath, &#123;</span><br><span class="line">        <span class="attr">name</span>: option.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">subdomains</span>: subdomains,</span><br><span class="line">        <span class="attr">tms</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;time&#x27;</span>: <span class="comment">//实时路况</span></span><br><span class="line">      <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()</span><br><span class="line">      layer = L.<span class="title function_">tileLayer</span>(</span><br><span class="line">        <span class="string">&#x27;&lt;http://its.map.baidu.com:8002/traffic/TrafficTileService?x=&#123;x&#125;&amp;y=&#123;y&#125;&amp;level=&#123;z&#125;&amp;time=&gt;&#x27;</span> +</span><br><span class="line">          time +</span><br><span class="line">          <span class="string">&#x27;&amp;label=web2D&amp;v=017&#x27;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">name</span>: option.<span class="property">name</span>,</span><br><span class="line">          <span class="attr">subdomains</span>: subdomains,</span><br><span class="line">          <span class="attr">tms</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//合并</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;img&#x27;</span>:</span><br><span class="line">      layer = L.<span class="title function_">layerGroup</span>([</span><br><span class="line">        L.<span class="property">tileLayer</span>.<span class="title function_">baidu</span>(&#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;底图&#x27;</span>,</span><br><span class="line">          <span class="attr">layer</span>: <span class="string">&#x27;img_d&#x27;</span>,</span><br><span class="line">          <span class="attr">bigfont</span>: option.<span class="property">bigfont</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        L.<span class="property">tileLayer</span>.<span class="title function_">baidu</span>(&#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;注记&#x27;</span>,</span><br><span class="line">          <span class="attr">layer</span>: <span class="string">&#x27;img_z&#x27;</span>,</span><br><span class="line">          <span class="attr">bigfont</span>: option.<span class="property">bigfont</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">      ])</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> layer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在文件中创建map，要点请看代码中的注释👇</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.创建id为map的容器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// <span class="number">2</span>.必要的样式</span><br><span class="line"><span class="selector-id">#map</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3. 引入leaflet 引入刚才创建的工具函数</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> L <span class="keyword">from</span> <span class="string">&quot;leaflet&quot;</span>;</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;@/utils/tileLayer.baidu&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 创建map</span></span><br><span class="line"><span class="title function_">setMap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> latitude = <span class="number">36.0671</span>;</span><br><span class="line">  <span class="keyword">let</span> longitude = <span class="number">120.3826</span>;</span><br><span class="line">  <span class="comment">// 5. 根据需求配置</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">map</span> = L.<span class="title function_">map</span>(<span class="string">&quot;map&quot;</span>, &#123;</span><br><span class="line">      <span class="comment">// 地图中心 </span></span><br><span class="line">    <span class="attr">center</span>: [latitude, longitude],</span><br><span class="line">    <span class="comment">// 当前底图缩放级别</span></span><br><span class="line">    <span class="attr">zoom</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="comment">// 禁止缩放</span></span><br><span class="line">    <span class="attr">zoomControl</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">attributionControl</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 禁止拖拽</span></span><br><span class="line">    <span class="attr">dragging</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 最小缩放级别</span></span><br><span class="line">    <span class="attr">minZoom</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="comment">// 最大缩放级别</span></span><br><span class="line">    <span class="attr">maxZoom</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">crs</span>: L.<span class="property">CRS</span>.<span class="property">Baidu</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  L.<span class="property">tileLayer</span>.<span class="title function_">baidu</span>(&#123; <span class="attr">layer</span>: <span class="string">&quot;vec&quot;</span> &#125;).<span class="title function_">addTo</span>(<span class="variable language_">this</span>.<span class="property">map</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> urlStr = <span class="built_in">require</span>(<span class="string">&quot;@/assets/image/device/device_icon.png&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> <span class="title class_">Icon</span> = L.<span class="title function_">icon</span>(&#123;</span><br><span class="line">    <span class="attr">iconUrl</span>: urlStr,</span><br><span class="line">    <span class="attr">iconSize</span>: [<span class="number">60</span>],</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> marker = L.<span class="title function_">marker</span>([latitude, longitude], &#123;</span><br><span class="line">    <span class="attr">icon</span>: <span class="title class_">Icon</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  marker</span><br><span class="line">    .<span class="title function_">addTo</span>(<span class="variable language_">this</span>.<span class="property">map</span>)</span><br><span class="line">    .<span class="title function_">bindPopup</span>(<span class="string">`经度:<span class="subst">$&#123;longitude&#125;</span>&lt;br&gt; 纬度:<span class="subst">$&#123;latitude&#125;</span>`</span>)</span><br><span class="line">    .<span class="title function_">openPopup</span>();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>这样就可以了</p></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> 绘图 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leaflet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打算规范一下博客</title>
      <link href="/post/7abf.html"/>
      <url>/post/7abf.html</url>
      
        <content type="html"><![CDATA[<h2 id="为什么想重新规范一下博客呢？"><a href="#为什么想重新规范一下博客呢？" class="headerlink" title="为什么想重新规范一下博客呢？"></a>为什么想重新规范一下博客呢？</h2><p>最近业余时间经常会看周刊，机缘巧合下又捕获到了几个不错的文章站点。</p><p>一个站点是<a href="https://juejin.cn/user/3579665587900030/posts">XboxYan大佬的纯CSS实现功能合集</a>，另一个站点是<a href="https://spacexcode.com/">范兄特别简明且优雅的个人博客</a>。</p><p>跟着两位大佬写了不少小功能，而且看完范兄的2023年度总结文章心潮澎湃。</p><p>转眼看看自己的博客，营养价值极低，而且有的太啰嗦了（学生时代写的东西让现在的自己感到一头问号），所以打算把自己的博客翻修一下。</p><p>计划赶不上变化，从这里动态记录盖房子装修过程吧。</p><ol><li>文章的分类和标签整理一下√</li><li>没用的文章得删一下了</li></ol>]]></content>
      
      
      <categories>
          
          <category> 思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用leaflet绘制地图，地图包含站点</title>
      <link href="/post/4922.html"/>
      <url>/post/4922.html</url>
      
        <content type="html"><![CDATA[<ol><li><p>创建一个容器</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = L.<span class="title function_">map</span>(<span class="string">&quot;map&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">center</span>: [<span class="number">41.486904</span>, <span class="number">122.621087</span>], <span class="comment">// 中心lo&amp;la</span></span><br><span class="line">        <span class="attr">zoom</span>: <span class="number">7.25</span>, <span class="comment">// 缩放级别</span></span><br><span class="line">        <span class="attr">zoomControl</span>: <span class="literal">false</span>, <span class="comment">// 是否将zoom控件放入图中</span></span><br><span class="line">        <span class="attr">minZoom</span>: <span class="number">7</span>,</span><br><span class="line">        <span class="attr">maxZoom</span>: <span class="number">11</span>,</span><br><span class="line">        <span class="attr">zoomSnap</span>: <span class="number">0.25</span>, <span class="comment">// 缩放级别倍数，默认接近整数，这里允许更大颗粒度</span></span><br><span class="line">        <span class="attr">scrollWheelZoom</span>: <span class="literal">false</span>, <span class="comment">// can scroll everywhere</span></span><br><span class="line">        <span class="attr">smoothWheelZoom</span>: <span class="literal">true</span>, <span class="comment">// enable smooth zoom ?这个文档里没找到</span></span><br><span class="line">        <span class="attr">smoothSensitivity</span>: <span class="number">0.4</span>, <span class="comment">// zoom speed. default is 1 同上</span></span><br><span class="line">        <span class="attr">attributionControl</span>: <span class="literal">false</span>, <span class="comment">// 是否显示归属版权</span></span><br><span class="line">        <span class="attr">maxBounds</span>: [ <span class="comment">// 指定边界，超出弹回</span></span><br><span class="line">          [<span class="number">47.709761542666</span>, <span class="number">139.81201171875</span>],</span><br><span class="line">          [<span class="number">33.063924198121</span>, <span class="number">104.21630859375</span>],</span><br><span class="line">        ],</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure></li><li><p>创建栅格图层<code>const BaseLayer = L.tileLayer(url)</code></p></li><li><p>将栅格图层放入容器<code>BaseLsyer.addTo(map)</code></p></li><li><p>根据地图文件创建地图对象，放入容器<code>L.geoJson(json数据, &#123;style: ()⇒&#123;&#125;, onEachFeature: 绑定事件回调&#125;).addTo(map)</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 部分事件回调 */</span></span><br><span class="line"><span class="comment">// 高亮图层事件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">highlightFeature</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">shadowLayer</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">removeLayer</span>(<span class="variable language_">this</span>.<span class="property">shadowLayer</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">city</span> = e.<span class="property">target</span>.<span class="property">feature</span>.<span class="property">properties</span>.<span class="property">name</span>;</span><br><span class="line">  <span class="comment">// 阴影层</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">shadowLayer</span> = L.<span class="title function_">geoJson</span>(e.<span class="property">target</span>.<span class="title function_">toGeoJSON</span>(), &#123;</span><br><span class="line">    <span class="attr">style</span>: &#123;</span><br><span class="line">      <span class="attr">fillColor</span>: <span class="string">&quot;#f2f9ff&quot;</span>,</span><br><span class="line">      <span class="attr">fillOpacity</span>: <span class="number">0.4</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&quot;#f2f9ff&quot;</span>,</span><br><span class="line">      <span class="attr">weight</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;).<span class="title function_">addTo</span>(<span class="variable language_">this</span>.<span class="property">map</span>);</span><br><span class="line">  <span class="keyword">let</span> obj = <span class="variable language_">this</span>.<span class="property">shadowLayer</span>.<span class="property">_layers</span>;</span><br><span class="line">  <span class="keyword">const</span> values = <span class="title class_">Object</span>.<span class="title function_">values</span>(obj);</span><br><span class="line">  <span class="keyword">const</span> container = values[<span class="number">0</span>].<span class="property">_path</span>;</span><br><span class="line">  container.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&quot;translateY(10px)&quot;</span>; <span class="comment">// 使立体</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">shadowLayer</span>.<span class="title function_">bringToFront</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 高亮层</span></span><br><span class="line">  <span class="keyword">let</span> originalLayer = e.<span class="property">target</span>;</span><br><span class="line">  originalLayer.<span class="title function_">setStyle</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&quot;#C2F7FF &quot;</span>, <span class="comment">// 边界线颜色</span></span><br><span class="line">    <span class="attr">fillColor</span>: <span class="string">&quot;#82E0FF&quot;</span>, <span class="comment">// 区域填充颜色</span></span><br><span class="line">    <span class="attr">fillOpacity</span>: <span class="number">0.5</span>, <span class="comment">// 区域填充的透明度</span></span><br><span class="line">    <span class="attr">weight</span>: <span class="number">2</span>, <span class="comment">// 边界线宽度</span></span><br><span class="line">  &#125;);</span><br><span class="line">  originalLayer.<span class="title function_">bringToFront</span>();</span><br><span class="line">&#125;;</span><br><span class="line">   </span><br><span class="line"><span class="comment">// 祛除高亮事件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resetHighlight</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">  geojson.<span class="title function_">resetStyle</span>(e.<span class="property">target</span>); <span class="comment">// 还原地图样式</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">shadowLayer</span>) &#123; <span class="comment">// 删去阴影层</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">removeLayer</span>(<span class="variable language_">this</span>.<span class="property">shadowLayer</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 鼠标事件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onEachFeature</span> = (<span class="params">feature, layer</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">cityLayerMap</span>[feature.<span class="property">properties</span>.<span class="property">name</span>] = layer;</span><br><span class="line">  layer.<span class="title function_">on</span>(&#123;</span><br><span class="line">    <span class="attr">mouseover</span>: highlightFeature,</span><br><span class="line">    <span class="attr">mouseout</span>: resetHighlight,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>将需要的图层至于顶层<code>geoLayer.bringToFront()</code></p></li><li><p>根据数据显示merker: 获取数据; 处理数据; 遍历生成marker👇</p><ol><li>普通marker: <code>for()&#123;const aIcon = L.icon(iconUrl, className); L.marker([lo, la], &#123;icon: aIcon&#125;).addTo(map)&#125;</code></li><li>自定义marker: <code>....; const icon = L.divIcon(&#123;html: 自己拼接的图标模板字符串&#125;); ....</code></li></ol></li><li><p>给marker绑定监听 <code>marker.on(&#39;click/dblclick/....&#39;, () =&gt; &#123;active-shadow(👇)/open/flyTo/cancelBefore&#125;)</code></p><ol><li>marker高亮 <code>activeMarkerArr.push(marker); document.querySelector(…).classList.toggle(’active); </code></li><li>所在地图块高亮 <code>const combineLayer = L.layerGroup([activeLayer, shadowLayer]); map.addLayer(combineLayer)</code></li><li>取消marker高亮 <code>toggle(&#39;active&#39;)</code></li><li>取消地图块高亮 <code>map.removeLayer(combineLayer )</code></li></ol></li><li><p>若结合多选框，则需<code>activeList.…; activeMarkerArr….;</code></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 绘图 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leaflet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>el-upload实现图片列表展示上传删除</title>
      <link href="/post/f90b.html"/>
      <url>/post/f90b.html</url>
      
        <content type="html"><![CDATA[<h1 id="elementui-el-upload实现图片列表展示、上传和删除"><a href="#elementui-el-upload实现图片列表展示、上传和删除" class="headerlink" title="elementui el-upload实现图片列表展示、上传和删除"></a>elementui el-upload实现图片列表展示、上传和删除</h1><p>halohalohalo好久不见</p><h2 id="业务需求"><a href="#业务需求" class="headerlink" title="业务需求"></a><strong>业务需求</strong></h2><p>增加和修改内容中包含一个图片路径列表，需要对图片列表进行展示和操作（添加、预览、查看大图、下载、删除）</p><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a><strong>分析</strong></h2><ul><li>弹出框中使用<code>el-upload</code>组件展示和操作图片列表，参考效果：<a href="https://element.eleme.io/#/zh-CN/component/upload#wen-jian-suo-lue-tu">https://element.eleme.io/#/zh-CN/component/upload#wen-jian-suo-lue-tu</a></li><li>关闭弹出框/点击取消时，需要将此次图片列表新增的图片删去，释放存储空间</li><li>相较于新增弹出框，修改弹出框需要事先展示从后端获取到的图片列表，因此需要两个<code>el-upload</code>标签来分类</li></ul><h2 id="接口需求"><a href="#接口需求" class="headerlink" title="接口需求"></a><strong>接口需求</strong></h2><ul><li>添加图片POST</li><li>删除图片DELETE</li><li>查询图片GET</li></ul><p>其中，<code>el-upload</code>添加图片使用组件参数方式设置，查询亦是无需手动获取。删除需要手动。</p><p><img src="../images/el-upload%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA%E4%B8%8A%E4%BC%A0%E5%88%A0%E9%99%A4/image-20241021201854790.png" alt="image-20241021201854790"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">imgUrl</span>: process.<span class="property">env</span>.<span class="property">VUE_APP_BASE_API</span> + <span class="string">&quot;/system/deviceFault/uploadPhoto&quot;</span></span><br></pre></td></tr></table></figure><p>接下来分新增和修改两种来阐述代码构建过程</p><h3 id="新增"><a href="#新增" class="headerlink" title="新增"></a><strong>新增</strong></h3><p>首先，这是一个图片列表，可以上传多张图片，所以设置好multiple支持多张图片\list-type图片展示方式\file-list绑定图片列表数据\limit图片数量限制@exceed超出限制回调。</p><p>其次，像后端上传图片有指定路径，且一般有认证请求头，所以设置好header请求头\imgUrl路径。</p><p>随后，图片上传成功需要有一个回调来展示回显图片列表，所以设置好@success上传成功后回调。</p><p>然后，对图片的操作需要几个回调，分别是查看大图、下载和删除。</p><p>最后，弹出框关闭或点击取消时，上传成功的文件列表需要删掉。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"> &lt;-! 可以使用 v-<span class="keyword">else</span> 分一波新增upload还是删除uplaod --&gt;</span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">el-upload</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:action</span>=<span class="string">&quot;imgUrl&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:headers</span>=<span class="string">&quot;&#123; Token: Token &#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">list-type</span>=<span class="string">&quot;picture-card&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:on-success</span>=<span class="string">&quot;handleUploadSuccess&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">multiple</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:file-list</span>=<span class="string">&quot;picList&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:limit</span>=<span class="string">&quot;4&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:on-exceed</span>=<span class="string">&quot;handleExceed&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">&quot;default&quot;</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-plus&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;file&quot;</span> <span class="attr">slot-scope</span>=<span class="string">&quot;&#123; file &#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-thumbnail&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:src</span>=<span class="string">&quot;file.url&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-actions&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-preview&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        @<span class="attr">click</span>=<span class="string">&quot;handlePictureCardPreview(file)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-zoom-in&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-delete&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        @<span class="attr">click</span>=<span class="string">&quot;handleDownload(file)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-download&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-delete&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        @<span class="attr">click</span>=<span class="string">&quot;handleRemove(file)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-delete&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;-! 大图预览弹框 --&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;previewOpen&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;previewImgUrl&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            </span></span><br><span class="line"><span class="language-xml">    /* 添加/修改弹框中的附件处理 */</span></span><br><span class="line"><span class="language-xml">    // 添加-@success</span></span><br><span class="line"><span class="language-xml">    handleUploadSuccess(response, file, fileList) &#123;</span></span><br><span class="line"><span class="language-xml">      this.picList = fileList;</span></span><br><span class="line"><span class="language-xml">    &#125;,</span></span><br><span class="line"><span class="language-xml">    // 添加-@delete</span></span><br><span class="line"><span class="language-xml">    handleRemove(file) &#123;</span></span><br><span class="line"><span class="language-xml">      this.picList.forEach((item, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        if (item.name == file.name) &#123;</span></span><br><span class="line"><span class="language-xml">          let pos = item.response.data.lastIndexOf(&quot;/&quot;);</span></span><br><span class="line"><span class="language-xml">          let name = item.response.data.slice(pos + 1);</span></span><br><span class="line"><span class="language-xml">          // 接口-根据文件名删除图片</span></span><br><span class="line"><span class="language-xml">          deletePhoto(name).then((res) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">            this.picList.splice(index, 1);</span></span><br><span class="line"><span class="language-xml">          &#125;);</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      &#125;);</span></span><br><span class="line"><span class="language-xml">    &#125;,</span></span><br><span class="line"><span class="language-xml">    // 附件数量超出</span></span><br><span class="line"><span class="language-xml">    handleExceed() &#123;</span></span><br><span class="line"><span class="language-xml">      this.$message(&#123;</span></span><br><span class="line"><span class="language-xml">        message: &quot;最多只能上传4张照片&quot;,</span></span><br><span class="line"><span class="language-xml">        type: &quot;warning&quot;,</span></span><br><span class="line"><span class="language-xml">      &#125;);</span></span><br><span class="line"><span class="language-xml">      return;</span></span><br><span class="line"><span class="language-xml">    &#125;,</span></span><br><span class="line"><span class="language-xml">    // 图片预览</span></span><br><span class="line"><span class="language-xml">    handlePictureCardPreview(file) &#123;</span></span><br><span class="line"><span class="language-xml">      this.previewImgUrl = file.url;</span></span><br><span class="line"><span class="language-xml">      this.previewOpen = true;</span></span><br><span class="line"><span class="language-xml">    &#125;,</span></span><br><span class="line"><span class="language-xml">    // 图片下载</span></span><br><span class="line"><span class="language-xml">    handleDownload(file) &#123;</span></span><br><span class="line"><span class="language-xml">      if (file.url.startsWith(&quot;blob&quot;)) &#123;</span></span><br><span class="line"><span class="language-xml">        // 添加</span></span><br><span class="line"><span class="language-xml">        var link = document.createElement(&quot;a&quot;);</span></span><br><span class="line"><span class="language-xml">        link.href = file.url;</span></span><br><span class="line"><span class="language-xml">        link.download = &quot;附件图片.png&quot;;</span></span><br><span class="line"><span class="language-xml">        link.click();</span></span><br><span class="line"><span class="language-xml">        link.remove();</span></span><br><span class="line"><span class="language-xml">      &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">      // 修改</span></span><br><span class="line"><span class="language-xml">        fetch(file.url)</span></span><br><span class="line"><span class="language-xml">          .then((response) =&gt; response.blob())</span></span><br><span class="line"><span class="language-xml">          .then((blob) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">            const url = URL.createObjectURL(blob);</span></span><br><span class="line"><span class="language-xml">            const link = document.createElement(&quot;a&quot;);</span></span><br><span class="line"><span class="language-xml">            link.href = url;</span></span><br><span class="line"><span class="language-xml">            link.download = &quot;附件图片.png&quot;;</span></span><br><span class="line"><span class="language-xml">            link.click();</span></span><br><span class="line"><span class="language-xml">            link.remove();</span></span><br><span class="line"><span class="language-xml">            URL.revokeObjectURL(url);</span></span><br><span class="line"><span class="language-xml">          &#125;)</span></span><br><span class="line"><span class="language-xml">          .catch((error) =&gt; console.error(error));</span></span><br><span class="line"><span class="language-xml">      &#125;</span></span><br><span class="line"><span class="language-xml">    &#125;, </span></span><br><span class="line"><span class="language-xml">    // 非确认操作式关闭对话框回调</span></span><br><span class="line"><span class="language-xml">    cancel() &#123;</span></span><br><span class="line"><span class="language-xml">    this.open = false; // 关闭对话框</span></span><br><span class="line"><span class="language-xml">    // 清除增加弹框中的图片列表</span></span><br><span class="line"><span class="language-xml">    if (this.picList &amp;&amp; this.picList.length &gt; 0) &#123;</span></span><br><span class="line"><span class="language-xml">    cancelAndDelete(this.picList)</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">    // 同样的方式清除修改弹框中的新增的图片列表addUpdateFileList(省略)</span></span><br><span class="line"><span class="language-xml">    function cancelAndDelete(list) &#123;</span></span><br><span class="line"><span class="language-xml">        let deletePromises = list.map((item) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          let pos = item.response.data.lastIndexOf(&quot;/&quot;);</span></span><br><span class="line"><span class="language-xml">          let name = item.response.data.slice(pos + 1);</span></span><br><span class="line"><span class="language-xml">          return deletePhoto(name);</span></span><br><span class="line"><span class="language-xml">        &#125;);</span></span><br><span class="line"><span class="language-xml">        Promise.all(deletePromises).catch((error) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          console.error(error);</span></span><br><span class="line"><span class="language-xml">        &#125;);</span></span><br><span class="line"><span class="language-xml">      &#125;</span></span><br><span class="line"><span class="language-xml">    &#125;    </span></span><br></pre></td></tr></table></figure><h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a><strong>修改</strong></h3><p>与新增稍有出入的是：修改弹出框需要先展示已存在的图片链接。</p><p>因此，删除当删除这样一个图片列表中的数据时，需要现根据当前图片是否属于本地图片来分类操作。</p><p>特别的，因为表单非确认式关闭实际上是不进行增改操作的，所以这里el-upload中绑定的回调实际是伪删除，当确认/非确认时，再批量执行真实请求。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取</span></span><br><span class="line"><span class="title function_">getRow</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="title function_">getRow</span>(id).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">updateList</span> = res.<span class="property">pics</span>.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: item.<span class="property">name</span>,</span><br><span class="line">            <span class="attr">url</span>: item.<span class="property">url</span></span><br><span class="line">        &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 修改故障-@success</span></span><br><span class="line"><span class="title function_">handleUploadSuccess1</span>(<span class="params">response, file, fileList</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">updateFileList</span> = fileList;</span><br><span class="line">  <span class="comment">// 新增的图片列表，为了方便点非确认式关闭对话框时把新增的图片删去</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">addUpdateFileList</span>.<span class="title function_">push</span>(file);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 修改故障-@delete</span></span><br><span class="line"><span class="title function_">handleRemove1</span>(<span class="params">file</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">updateFileList</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">name</span> == file.<span class="property">name</span>) &#123;</span><br><span class="line">        <span class="comment">// 更新等待删除列表</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">deleteUpdateFileList</span>.<span class="title function_">push</span>(</span><br><span class="line">          <span class="comment">// 更新图片列表</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">updateFileList</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 确认式</span></span><br><span class="line"><span class="title function_">saveForm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 1.修改</span></span><br><span class="line">    <span class="comment">// 保存表单请求...</span></span><br><span class="line">    <span class="comment">// 👆updateFileList这个list由两种图片数据组成，一种是已存在的后端链接，一种是新增本地的链接</span></span><br><span class="line">    <span class="comment">// 👆所以要有一个判断，是使用.response.data还是.url</span></span><br><span class="line">    <span class="comment">// 👆记得把数据处理成请求参数格式</span></span><br><span class="line">    <span class="comment">// 删除等待删除列表中的所有图片，将deleteUpdateFileList遍历删除</span></span><br><span class="line">    <span class="comment">// 关闭对话框</span></span><br><span class="line">    <span class="comment">// 清理一下表单数据</span></span><br><span class="line">    <span class="comment">// 2.添加</span></span><br><span class="line">    <span class="comment">// 保存表单请求，清理表单数据，也就是把这个弹出框所用到的数据给置空</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> elementui </category>
          
      </categories>
      
      
        <tags>
            
            <tag> el-upload </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快速有效使用nvm控制node版本（手动操作，有效）</title>
      <link href="/post/5821.html"/>
      <url>/post/5821.html</url>
      
        <content type="html"><![CDATA[<p><img src="../images/%E5%BF%AB%E9%80%9F%E6%9C%89%E6%95%88%E4%BD%BF%E7%94%A8nvm%E6%8E%A7%E5%88%B6node%E7%89%88%E6%9C%AC%EF%BC%88%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%9C%89%E6%95%88%EF%BC%89/MM5KZQDFLD9EXJLWVYJV710.gif" alt="MM5KZQDFLD9EXJLWVYJV710"></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>工作中遇到项目使用的node版本比较早，这个时候一般会选择两种方式解决：</p><ol><li>直接安装一个指定版本的node，比较直接，但是不方便切换</li><li>使用nvm管理node版本，可以随时切换node版本，但是安装配置有可能出点问题</li></ol><p><img src="../images/%E5%BF%AB%E9%80%9F%E6%9C%89%E6%95%88%E4%BD%BF%E7%94%A8nvm%E6%8E%A7%E5%88%B6node%E7%89%88%E6%9C%AC%EF%BC%88%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%9C%89%E6%95%88%EF%BC%89/image-20240910183708549.png" alt="image-20240910183708549"></p><p>我就遇到了上图的问题，查了很多地方，没啥用，最后找到了这个方法👇</p><p>别跟我说要删干净node再下载nvm，install不成功需要配置镜像什么什么的。</p><p>直接下载node包，解压重命名，放nvm文件夹里，谢谢qvq</p><h2 id="详细步骤"><a href="#详细步骤" class="headerlink" title="详细步骤"></a>详细步骤</h2><ol><li><p>下载安装nvm，参考fcc给出的流程：<a href="https://www.freecodecamp.org/chinese/news/node-version-manager-nvm-install-guide/">https://www.freecodecamp.org/chinese/news/node-version-manager-nvm-install-guide/</a></p></li><li><p>手动下载node包 <a href="https://nodejs.org/zh-cn/download/prebuilt-binaries">https://nodejs.org/zh-cn/download/prebuilt-binaries</a></p><p><img src="../images/%E5%BF%AB%E9%80%9F%E6%9C%89%E6%95%88%E4%BD%BF%E7%94%A8nvm%E6%8E%A7%E5%88%B6node%E7%89%88%E6%9C%AC%EF%BC%88%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%9C%89%E6%95%88%EF%BC%89/image-20240910183800305.png" alt="image-20240910183800305"></p></li><li><p>解压node包，重命名，放入nvm目录下</p><p>重命名：v+版本，见下图</p><p>注意检查一下解压是怎么解的，别目录套目录了</p><p><img src="../images/%E5%BF%AB%E9%80%9F%E6%9C%89%E6%95%88%E4%BD%BF%E7%94%A8nvm%E6%8E%A7%E5%88%B6node%E7%89%88%E6%9C%AC%EF%BC%88%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%9C%89%E6%95%88%EF%BC%89/image-20240910183919506.png" alt="image-20240910183919506"></p><p><img src="../images/%E5%BF%AB%E9%80%9F%E6%9C%89%E6%95%88%E4%BD%BF%E7%94%A8nvm%E6%8E%A7%E5%88%B6node%E7%89%88%E6%9C%AC%EF%BC%88%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%9C%89%E6%95%88%EF%BC%89/image-20240910184014644.png" alt="image-20240910184014644"></p><p><img src="../images/%E5%BF%AB%E9%80%9F%E6%9C%89%E6%95%88%E4%BD%BF%E7%94%A8nvm%E6%8E%A7%E5%88%B6node%E7%89%88%E6%9C%AC%EF%BC%88%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%9C%89%E6%95%88%EF%BC%89/image-20240910183952672.png" alt="image-20240910183952672"></p></li><li><p>检查成没成功</p><p><img src="../images/%E5%BF%AB%E9%80%9F%E6%9C%89%E6%95%88%E4%BD%BF%E7%94%A8nvm%E6%8E%A7%E5%88%B6node%E7%89%88%E6%9C%AC%EF%BC%88%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%9C%89%E6%95%88%EF%BC%89/image-20240910184059498.png" alt="image-20240910184059498"></p><p>成功了。</p></li></ol><p><img src="../images/%E5%BF%AB%E9%80%9F%E6%9C%89%E6%95%88%E4%BD%BF%E7%94%A8nvm%E6%8E%A7%E5%88%B6node%E7%89%88%E6%9C%AC%EF%BC%88%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%9C%89%E6%95%88%EF%BC%89/Z_YTEMQ@%25_3PKXMM$D$F77Y.gif" alt="Z_YTEMQ@%_3PKXMM$D$F77Y"></p><p>可以仿照这个思路试一试捏，如果有效，欢迎赞助我一瓶矿泉水qvq（或者你自己多喝一点水哦！）</p>]]></content>
      
      
      <categories>
          
          <category> 项目配置 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>适用于ruoyi vue2的cesium配置</title>
      <link href="/post/4de9.html"/>
      <url>/post/4de9.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>​    本人ruoyi vue2模板搭建的管理项目中集成Cesium，踩了诸多坑。</p><p>​    各种查阅和看Demo，测试出来了可行的配置。特来分享，或许可以减少各位同伴踩到的坑（如果可以，麻烦在文章底部留个言，我想知道有多少朋友也在做这个工作）。</p><h2 id="配置步骤"><a href="#配置步骤" class="headerlink" title="配置步骤"></a>配置步骤</h2><ol><li><p>版本道传版本要<strong>≤1.95.0</strong>，这里参考<a href="https://github.com/syzdev/vue-cesium-start%E4%BD%BF%E7%94%A8%E4%BA%861.80.0%E7%89%88%E6%9C%AC">https://github.com/syzdev/vue-cesium-start使用了1.80.0版本</a></p></li><li><p>添加一个loader: @open-wc/webpack-import-meta-loader</p></li><li><p>vue.config.js配置</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>)</span><br><span class="line"><span class="comment">// ....省略，不知道你能否理解俺下面写的注释，有问题可以留言问，俺看到会回复的</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CopyPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="comment">// ....</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ....</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="comment">// ....</span></span><br><span class="line">      <span class="comment">// cesium-copy-plugin[copyplugin prop type is array]</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CopyPlugin</span>([&#123;</span><br><span class="line">        <span class="attr">from</span>: <span class="string">&#x27;node_modules/cesium/Build/Cesium/Workers&#x27;</span>,</span><br><span class="line">        <span class="attr">to</span>: <span class="string">&#x27;cesium/Workers&#x27;</span></span><br><span class="line">      &#125;]), <span class="keyword">new</span> <span class="title class_">CopyPlugin</span>([&#123;</span><br><span class="line">        <span class="attr">from</span>: <span class="string">&#x27;node_modules/cesium/Build/Cesium/ThirdParty&#x27;</span>,</span><br><span class="line">        <span class="attr">to</span>: <span class="string">&#x27;cesium/ThirdParty&#x27;</span></span><br><span class="line">      &#125;]), <span class="keyword">new</span> <span class="title class_">CopyPlugin</span>([&#123;</span><br><span class="line">        <span class="attr">from</span>: <span class="string">&#x27;node_modules/cesium/Build/Cesium/Assets&#x27;</span>,</span><br><span class="line">        <span class="attr">to</span>: <span class="string">&#x27;cesium/Assets&#x27;</span></span><br><span class="line">      &#125;]), <span class="keyword">new</span> <span class="title class_">CopyPlugin</span>([&#123;</span><br><span class="line">        <span class="attr">from</span>: <span class="string">&#x27;node_modules/cesium/Build/Cesium/Widgets&#x27;</span>,</span><br><span class="line">        <span class="attr">to</span>: <span class="string">&#x27;cesium/Widgets&#x27;</span></span><br><span class="line">      &#125;]), </span><br><span class="line">      <span class="comment">// cesium-resource-path</span></span><br><span class="line">      <span class="keyword">new</span> webpack.<span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">        <span class="attr">CESIUM_BASE_URL</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&#x27;./cesium&#x27;</span>), </span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// cesium-meta-loader</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">      <span class="attr">unknownContextCritical</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">rules</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/.js$/</span>,</span><br><span class="line">          <span class="attr">use</span>: &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;@open-wc/webpack-import-meta-loader&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">          <span class="attr">include</span>: <span class="regexp">/src/</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/.js$/</span>,</span><br><span class="line">          <span class="attr">use</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ceisum-multi-line</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">sourcePrefix</span>: <span class="string">&quot; &quot;</span>, </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// cesium-better-require</span></span><br><span class="line">    <span class="attr">amd</span>: &#123;</span><br><span class="line">      <span class="attr">toUrlUndefined</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">chainWebpack</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// ....</span></span><br><span class="line">    <span class="comment">// cesium-babel-loader</span></span><br><span class="line">    config.<span class="property">module</span></span><br><span class="line">      .<span class="title function_">rule</span>(<span class="string">&#x27;babel&#x27;</span>)</span><br><span class="line">      .<span class="title function_">test</span>(<span class="regexp">/\\.js$/</span>)</span><br><span class="line">      .<span class="property">include</span></span><br><span class="line">      .<span class="title function_">add</span>(<span class="regexp">/node_modules\\/</span>@cesium/)</span><br><span class="line">      .<span class="title function_">end</span>()</span><br><span class="line">      .<span class="title function_">use</span>(<span class="string">&#x27;babel-loader&#x27;</span>)</span><br><span class="line">      .<span class="title function_">loader</span>(<span class="string">&#x27;babel-loader&#x27;</span>)</span><br><span class="line">      .<span class="title function_">options</span>(&#123;</span><br><span class="line">        <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>],</span><br><span class="line">        <span class="attr">plugins</span>: [</span><br><span class="line">          <span class="string">&#x27;@babel/plugin-proposal-optional-chaining&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;@babel/plugin-proposal-nullish-coalescing-operator&#x27;</span>,</span><br><span class="line">        ]</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// cesium-pile-deps</span></span><br><span class="line">  <span class="attr">transpileDependencies</span>: [</span><br><span class="line">    <span class="string">&#x27;@cesium&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><img src="../images/%E9%80%82%E7%94%A8%E4%BA%8Eruoyi-vue2%E7%9A%84cesium%E9%85%8D%E7%BD%AE/Z_YTEMQ@%25_3PKXMM$D$F77Y.gif" alt="Z_YTEMQ@%_3PKXMM$D$F77Y"></p><p>好了这就是全部配置内容了，希望你的配置过程超级顺利，如果本文对你有所帮助，或许可以资助我买一瓶矿泉水qvq（或者你自己多喝一点水哦！）</p>]]></content>
      
      
      <categories>
          
          <category> 项目配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ruoyi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>手搓——实现多角标的颜色/值滑动条</title>
      <link href="/post/5502.html"/>
      <url>/post/5502.html</url>
      
        <content type="html"><![CDATA[<h1 id="MyVisualMap实现思路（不包含完整代码）"><a href="#MyVisualMap实现思路（不包含完整代码）" class="headerlink" title="MyVisualMap实现思路（不包含完整代码）"></a>MyVisualMap实现思路（不包含完整代码）</h1><p>效果类似这种，实现方式想必非常多，接下来仅讲解我的思路，可做一种参考。</p><p><img src="../images/%E6%89%8B%E6%90%93%E2%80%94%E2%80%94%E5%AE%9E%E7%8E%B0%E5%A4%9A%E8%A7%92%E6%A0%87%E7%9A%84%E9%A2%9C%E8%89%B2-%E5%80%BC%E6%BB%91%E5%8A%A8%E6%9D%A1/img_v3_02e8_87c910d1-37c0-4302-8028-af56849c74bg.jpg" alt="img_v3_02e8_87c910d1-37c0-4302-8028-af56849c74bg"></p><h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a><strong>描述</strong></h2><p>实现一个类echarts visualMap的工具bar，可以调整一个高度自定义的echarts图形的values和colors</p><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a><strong>分析</strong></h2><p>实现一个带两种模式的多角标(网上普遍叫法是multiple handles)Slider。</p><p>模式一（渐变模式）是固定values，修改对应的colors，此时滑动条是一个渐变色块；</p><p>模式二（非渐变模式）是固定colors，修改对应的values，此时滑动条是一个多个色块组成的均匀条。</p><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a><strong>思路</strong></h2><p>咱们慢慢来，手挫肯定是要画点时间的，喝口水慢慢来。</p><h3 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h3><ul><li>前置共识：values和colors一一对应，拖拽牵扯到的变动属性(top/height等)在绘图的时候需要考虑到，别框死了。</li><li>固定一个div作为盛放色块和角标的容器，灵活使用css-position-relative/absolute，对应给div两块子元素。<ul><li>颜色块-colorRef<ul><li>渐变模式时，可以直接给colorRef设置一个<code>linear-gradient(to bottom, $&#123;colorStr&#125;)</code>的背景色。</li><li>非渐变模式，可以给colorRef均分成colors.length数量的色块，也就是若干个高度为height/len的不同颜色的div，其top值为idx * height/len。</li></ul></li><li>角标块-textRef<ul><li>渐变模式时，textRef均分成height/(len-1)个，那么每个角标的top就 *idx 有了。</li><li>非渐变模式，textRef均分成height/len个，同样页确定好了每个角标的位置。</li></ul></li></ul></li><li>画角标图形：一般使用绘制三角形的方法，或者使用clip-path: polygon()，接下来简单介绍一下后者的使用方法<ul><li>每一个’,’为一组，每组结构是(x长度 y长度)：<code>clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);</code></li></ul></li><li>其他</li></ul><h3 id="不带计算的交互"><a href="#不带计算的交互" class="headerlink" title="不带计算的交互"></a>不带计算的交互</h3><ul><li>前置共识：最上角标和最下角标不可拖拽，每个角标的拖拽区域在其前后角标位置之间。</li><li>给遍历的角标孩子添加mousedown监听，绑定开始拖拽函数</li><li>开始拖拽(startDrag)<ul><li>记录当前角标index</li><li>记录当前角标距视口顶部距离event.clientY</li><li>记录当前角标style.top，从textRef.children[index].style.top中拿</li><li>给当前角标添加mousemove和mouseup监听，分别绑定拖拽中和结束拖拽函数</li></ul></li><li>拖拽中(Drag)<ul><li>根据当前新event.clientY和之前记录的初始clientY，计算偏移量</li><li>根据偏移量和之前记录的角标top，计算出新的top值</li><li>边界判定（最前后两个不拖拽，）给当前角标的style.top赋新top值</li></ul></li><li>结束拖拽(endDrag)<ul><li>将开始拖拽函数中涉及到的几个状态重置</li><li>将mousemove和mouseup两个监听销毁</li></ul></li></ul><h3 id="计算"><a href="#计算" class="headerlink" title="计算"></a>计算</h3><ul><li><p>非渐变模式，拖拽更新color对应的value</p><ul><li>根据其上下角标间距(top1-top2)和其相对上角标间距(top-)，计算新value值。这里注意数据类型和精确度，精确度完全可以作为一个组件配置项</li><li>显示：将角标文本部分的innerText更新为新value值</li><li>显示：将牵扯到的色块高度变一下，角标的上下色块，也就是children[index]和[index-1]</li></ul></li><li><p>渐变模式，拖拽更新value对应的color</p><ul><li><p>判断角标在哪个区间移动，根据移动量、平均高度、两头的颜色来计算插值颜色</p></li><li><p>判断移动区间：根据角标的newtop距原top的偏移，确定上下颜色，也能确定偏移的区间。想象一下，如果是向下偏移，那么上下颜色就是本颜色和下颜色；如果是向上偏移，那么上下颜色就是上颜色和本颜色，偏移量一正一负很方便代入计算</p></li><li><p>插值颜色：可能用到hex-rgb的相互转换，插值计算就是将rgb格式颜色按照比例计算，整点源代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> interpolateColor = <span class="keyword">function</span> (<span class="params">color1, color2, factor</span>) &#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> 这里还需要将factor规范一下，使其介于0-1范围</span></span><br><span class="line">  <span class="comment">// hex =&gt; rgb 1上颜色2下颜色</span></span><br><span class="line">  <span class="keyword">const</span> color1RGB = <span class="title function_">hexToRgb</span>(color1);</span><br><span class="line">  <span class="keyword">const</span> color2RGB = <span class="title function_">hexToRgb</span>(color2);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 线性插值 比例-factor要根据偏移量和区间总高度来计算</span></span><br><span class="line">  <span class="keyword">const</span> result = color1RGB.<span class="title function_">map</span>(<span class="function">(<span class="params">val, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">round</span>(val + (color2RGB[index] - val) * factor);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// rgb =&gt; hex</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">rgbToHex</span>(result[<span class="number">0</span>], result[<span class="number">1</span>], result[<span class="number">2</span>]);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hexToRgb = <span class="keyword">function</span> (<span class="params">hex</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> shorthandRegex = <span class="regexp">/^#?([a-f\d])([a-f\d])([a-f\d])$/i</span>;</span><br><span class="line">  hex = hex.<span class="title function_">replace</span>(shorthandRegex, <span class="function">(<span class="params">m, r, g, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r + r + g + g + b + b;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = <span class="regexp">/^#?([a-f\d]&#123;2&#125;)([a-f\d]&#123;2&#125;)([a-f\d]&#123;2&#125;)$/i</span>.<span class="title function_">exec</span>(hex);</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">    ? [</span><br><span class="line">        <span class="built_in">parseInt</span>(result[<span class="number">1</span>], <span class="number">16</span>),</span><br><span class="line">        <span class="built_in">parseInt</span>(result[<span class="number">2</span>], <span class="number">16</span>),</span><br><span class="line">        <span class="built_in">parseInt</span>(result[<span class="number">3</span>], <span class="number">16</span>),</span><br><span class="line">      ]</span><br><span class="line">    : <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> rgbToHex = <span class="keyword">function</span> (<span class="params">r, g, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;#&quot;</span> + ((<span class="number">1</span> &lt;&lt; <span class="number">24</span>) + (r &lt;&lt; <span class="number">16</span>) + (g &lt;&lt; <span class="number">8</span>) + b).<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">slice</span>(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 手搓 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 视觉映射 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>elementui(vue2)--table样式自定义</title>
      <link href="/post/2b16.html"/>
      <url>/post/2b16.html</url>
      
        <content type="html"><![CDATA[<h1 id="elementui-vue2版本如何给el-table-el-pagination等组件进行样式自定义"><a href="#elementui-vue2版本如何给el-table-el-pagination等组件进行样式自定义" class="headerlink" title="elementui vue2版本如何给el-table/el-pagination等组件进行样式自定义"></a>elementui vue2版本如何给el-table/el-pagination等组件进行样式自定义</h1><h2 id="el-table"><a href="#el-table" class="headerlink" title="el-table"></a>el-table</h2><ol><li><p>现有组件描述</p><p>直见官网：<a href="https://element.eleme.io/#/zh-CN/component/table#table-column-scoped-slot">https://element.eleme.io/#/zh-CN/component/table#table-column-scoped-slot</a></p></li><li><p>场景描述</p><ul><li>背景透明</li><li>hover有点颜色（半透明）</li></ul></li><li><p>代码：</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">        &lt;el-table class=&quot;right-table&quot;&gt;</span><br><span class="line">              &lt;el-table-column&gt;....&lt;/el-table-column&gt;</span><br><span class="line">              ....</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">/** 给el-table自定义样式-按照本人认为的主次顺序排列的。另外，关于样式穿透和层级，取决于你的项目，仅作参考 **/</span><br><span class="line">// 0.表格父容器-仔细检查你的el-table外层有可能会影响其背景效果的父级元素，我这里外卖就包了一个el-card</span><br><span class="line">::v-deep .el-card &#123;</span><br><span class="line">  border: none;</span><br><span class="line">  background-color: transparent; // card背景也透明了，你当然可以在此设置颜色</span><br><span class="line">&#125;</span><br><span class="line">::v-deep .el-card__body &#123;</span><br><span class="line">  padding: 8px 16px 16px 16px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 1-1.表格中表头的背景</span><br><span class="line">::v-deep .el-table th &#123;</span><br><span class="line">  background-color: rgba(72, 143, 249, 0.18);</span><br><span class="line">&#125;</span><br><span class="line">// 1-2.表头文字</span><br><span class="line">::v-deep .is-leaf .cell &#123;</span><br><span class="line">  font-size: 14px !important;</span><br><span class="line">  color: white;</span><br><span class="line">  padding-left: 0px;</span><br><span class="line">&#125;</span><br><span class="line">// 2-1.表格所有行</span><br><span class="line">::v-deep .el-table tr &#123;</span><br><span class="line">  background-color: transparent !important;</span><br><span class="line">&#125;</span><br><span class="line">// 2-2.表内容单元格</span><br><span class="line">::v-deep .el-table .cell &#123;</span><br><span class="line">  background-color: transparent; // 所有行背景透明</span><br><span class="line">  color: white; // 字体颜色</span><br><span class="line">&#125;</span><br><span class="line">// 3.表格行hover背景</span><br><span class="line">::v-deep .el-table tbody tr:hover &gt; td &#123;</span><br><span class="line">  // 该元素非常非常非常难找</span><br><span class="line">  background-color: rgba(108, 141, 192, 0.18);</span><br><span class="line">&#125;</span><br><span class="line">// 4.表格hover指针</span><br><span class="line">::v-deep .el-table tr:hover &#123;</span><br><span class="line">  cursor: pointer; // 小手指针</span><br><span class="line">&#125;</span><br><span class="line">// 5.其他的，比如设置了斑马条纹/想设置状态颜色等，建议f12点一点看一看测试测试，总能找到，相信自己</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="el-pagination"><a href="#el-pagination" class="headerlink" title="el-pagination"></a>el-pagination</h2><p>continue…</p>]]></content>
      
      
      <categories>
          
          <category> elementui </category>
          
      </categories>
      
      
        <tags>
            
            <tag> el-pagination </tag>
            
            <tag> el-table </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>echarts回顾与进阶</title>
      <link href="/post/47c4.html"/>
      <url>/post/47c4.html</url>
      
        <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>最近在换工作，投了特别喜欢的一家公司，正在等意向（更新后续，目前成功入职了，十分感恩），等待时间是不能浪费的，所以我打算先熟悉一下公司的技术。echarts就是其中之一，之前有用过Echarts，但是这家公司的业务是需要高度自定义的。那么就开始吧！</p><p>项目链接在这儿👉<a href="https://github.com/Ra-Liz/vue-echarts-test">https://github.com/Ra-Liz/vue-echarts-test</a></p><p>以下的练手项目使用vue3搭建。（顺便回顾了vue3，没想到上手这么快）</p><h1 id="一个简单的自定义饼图"><a href="#一个简单的自定义饼图" class="headerlink" title="一个简单的自定义饼图"></a>一个简单的自定义饼图</h1><p><img src="../images/echarts%E5%9B%9E%E9%A1%BE%E4%B8%8E%E8%BF%9B%E9%98%B6/image-20240730112451189.png" alt="image-20240730112451189"></p><p>思路：</p><ol><li>使用ref绑定图容器</li><li>初始化echart画布</li><li>配置画布内元素<ol><li>标题、工具文本、整体样式</li><li>数据排序、细节样式</li></ol></li><li>挂载监听器</li><li>测试数据实时更新逻辑<ol><li>btn绑定回调，watch监听数据变化</li><li>优化函数声明，分块，拼接</li></ol></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;w-full h-full&quot;&gt;</span><br><span class="line">    &lt;button class=&quot;w-1/2 h-20 rounded bg-blue-200 hover:bg-blue-400&quot; @click=&quot;handleChangeData&quot;&gt;</span><br><span class="line">      点击更新数据</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;div id=&quot;chart&quot; ref=&quot;chartContainer&quot; class=&quot;w-1/2 h-1/2 bg-pink-200&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;</span><br><span class="line">import &#123; onBeforeUnmount, onMounted, reactive, ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const fakeData = reactive([</span><br><span class="line">  &#123; value: 335, name: &#x27;Direct&#x27; &#125;,</span><br><span class="line">  &#123; value: 310, name: &#x27;Email&#x27; &#125;,</span><br><span class="line">  &#123; value: 274, name: &#x27;Union Ads&#x27; &#125;,</span><br><span class="line">  &#123; value: 235, name: &#x27;Video Ads&#x27; &#125;,</span><br><span class="line">  &#123; value: 400, name: &#x27;Search Engine&#x27; &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">const chartContainer = ref(null)</span><br><span class="line">let myChart = null</span><br><span class="line"></span><br><span class="line">const initChart = () =&gt; &#123;</span><br><span class="line">  if (chartContainer.value) &#123;</span><br><span class="line">    myChart = echarts.init(chartContainer.value)</span><br><span class="line">    setChartOptions()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const setChartOptions = () =&gt; &#123;</span><br><span class="line">  if (myChart) &#123;</span><br><span class="line">    const option = &#123;</span><br><span class="line">      backgroundColor: &#x27;#2c343c&#x27;,</span><br><span class="line">      title: &#123;</span><br><span class="line">        text: &#x27;Customized Pie&#x27;,</span><br><span class="line">        left: &#x27;center&#x27;,</span><br><span class="line">        top: 20,</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">          color: &#x27;#ccc&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      tooltip: &#123;</span><br><span class="line">        trigger: &#x27;item&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      visualMap: &#123;</span><br><span class="line">        show: false,</span><br><span class="line">        min: 80,</span><br><span class="line">        max: 600,</span><br><span class="line">        inRange: &#123;</span><br><span class="line">          colorLightness: [0, 1]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      series: [</span><br><span class="line">        &#123;</span><br><span class="line">          name: &#x27;Access From&#x27;,</span><br><span class="line">          type: &#x27;pie&#x27;,</span><br><span class="line">          radius: &#x27;55%&#x27;,</span><br><span class="line">          center: [&#x27;50%&#x27;, &#x27;50%&#x27;],</span><br><span class="line">          data: fakeData.sort((a, b) =&gt; a.value - b.value),</span><br><span class="line">          roseType: &#x27;radius&#x27;,</span><br><span class="line">          label: &#123;</span><br><span class="line">            color: &#x27;rgba(255, 255, 255, 0.3)&#x27;</span><br><span class="line">          &#125;,</span><br><span class="line">          labelLine: &#123;</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">              color: &#x27;rgba(255, 255, 255, 0.3)&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            smooth: 0.2,</span><br><span class="line">            length: 10,</span><br><span class="line">            length2: 20</span><br><span class="line">          &#125;,</span><br><span class="line">          itemStyle: &#123;</span><br><span class="line">            color: &#x27;#c23531&#x27;,</span><br><span class="line">            shadowBlur: 200,</span><br><span class="line">            shadowColor: &#x27;rgba(0, 0, 0, 0.5)&#x27;</span><br><span class="line">          &#125;,</span><br><span class="line">          animationType: &#x27;scale&#x27;,</span><br><span class="line">          animationEasing: &#x27;elasticOut&#x27;,</span><br><span class="line">          animationDelay: (idx) =&gt; Math.random() * 200</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">    myChart.setOption(option)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleChangeData = () =&gt; &#123;</span><br><span class="line">  fakeData.forEach((item) =&gt; &#123;</span><br><span class="line">    item.value = Math.floor(Math.random() * 500)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  initChart()</span><br><span class="line">  window.addEventListener(&#x27;resize&#x27;, () =&gt; myChart &amp;&amp; myChart.resize())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">onBeforeUnmount(() =&gt; &#123;</span><br><span class="line">  window.removeEventListener(&#x27;resize&#x27;, () =&gt; myChart &amp;&amp; myChart.resize())</span><br><span class="line">  if (myChart) &#123;</span><br><span class="line">    myChart.dispose()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">watch(</span><br><span class="line">  fakeData,</span><br><span class="line">  () =&gt; &#123;</span><br><span class="line">    setChartOptions()</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; deep: true &#125;</span><br><span class="line">)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="自定义柱状图趋势"><a href="#自定义柱状图趋势" class="headerlink" title="自定义柱状图趋势"></a>自定义柱状图趋势</h1><p><img src="../images/echarts%E5%9B%9E%E9%A1%BE%E4%B8%8E%E8%BF%9B%E9%98%B6/image-20240730112509879.png" alt="image-20240730112509879"></p><p>思路：</p><ol><li>同上</li><li>使用api….进行样式自定义</li><li>使用分区缩放</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;w-full h-full&quot;&gt;</span><br><span class="line">    &lt;h1 class=&quot;text-3xl text-black&quot;&gt;Test 2&lt;/h1&gt;</span><br><span class="line">    &lt;div ref=&quot;containerRef&quot; class=&quot;w-1/2 h-1/2 rounded bg-blue-300&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, onMounted, nextTick &#125; from &#x27;vue&#x27;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;</span><br><span class="line"></span><br><span class="line">let myChart: echarts.ECharts | null = null</span><br><span class="line">const containerRef = ref&lt;HTMLDivElement | null&gt;(null)</span><br><span class="line"></span><br><span class="line">const originYear: number = 2020</span><br><span class="line">const years: number = 10</span><br><span class="line">const cnt: number = 7</span><br><span class="line">const legendData: string[] = [&#x27;trend&#x27;]</span><br><span class="line">const xAxisData: string[] = []</span><br><span class="line">const customData: any[] = []</span><br><span class="line">const encodeY: any = []</span><br><span class="line">const dataList: any = []</span><br><span class="line"></span><br><span class="line">for (let i = 0; i &lt; cnt; i++) &#123;</span><br><span class="line">  legendData.push(`$&#123;originYear + i&#125;`)</span><br><span class="line">  dataList.push([])</span><br><span class="line">  encodeY.push(1 + i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for (let i = 0; i &lt; years; i++) &#123;</span><br><span class="line">  xAxisData.push(&#x27;category&#x27; + i)</span><br><span class="line"></span><br><span class="line">  const customVal = [i]</span><br><span class="line">  customData.push(customVal)</span><br><span class="line"></span><br><span class="line">  let val = Math.random() * 1000</span><br><span class="line">  for (let j = 0; j &lt; dataList.length; j++) &#123;</span><br><span class="line">    let value =</span><br><span class="line">      j === 0</span><br><span class="line">        ? echarts.number.round(val, 2)</span><br><span class="line">        : echarts.number.round(Math.max(0, dataList[j - 1][i] + (Math.random() - 0.5) * 200), 2)</span><br><span class="line">    dataList[j].push(value)</span><br><span class="line">    customVal.push(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const initChart = () =&gt; &#123;</span><br><span class="line">  if (containerRef.value) &#123;</span><br><span class="line">    myChart = echarts.init(containerRef.value)</span><br><span class="line">    setChartOptions()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const setChartOptions = async () =&gt; &#123;</span><br><span class="line">  if (myChart) &#123;</span><br><span class="line">    const options = &#123;</span><br><span class="line">      tooltip: &#123;</span><br><span class="line">        trigger: &#x27;axis&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      legend: &#123;</span><br><span class="line">        data: legendData</span><br><span class="line">      &#125;,</span><br><span class="line">      dataZoom: [</span><br><span class="line">        &#123;</span><br><span class="line">          type: &#x27;slider&#x27;,</span><br><span class="line">          start: 50,</span><br><span class="line">          end: 70</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          type: &#x27;inside&#x27;,</span><br><span class="line">          start: 50,</span><br><span class="line">          end: 70</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      xAxis: &#123;</span><br><span class="line">        type: &#x27;category&#x27;,</span><br><span class="line">        data: xAxisData</span><br><span class="line">      &#125;,</span><br><span class="line">      yAxis: &#123;&#125;,</span><br><span class="line">      series: [</span><br><span class="line">        &#123;</span><br><span class="line">          name: &#x27;trend&#x27;,</span><br><span class="line">          type: &#x27;custom&#x27;,</span><br><span class="line">          renderItem: (params: any, api: any) =&gt; &#123;</span><br><span class="line">            let xValue = api.value(0)</span><br><span class="line">            let currentSeriesIndices = api.currentSeriesIndices()</span><br><span class="line">            let barLayout = api.barLayout(&#123;</span><br><span class="line">              barGap: &#x27;30%&#x27;,</span><br><span class="line">              barCategoryGap: &#x27;20%&#x27;,</span><br><span class="line">              count: currentSeriesIndices.length - 1</span><br><span class="line">            &#125;)</span><br><span class="line">            let points = []</span><br><span class="line"></span><br><span class="line">            for (let i = 0; i &lt; currentSeriesIndices.length; i++) &#123;</span><br><span class="line">              let seriesIndex = currentSeriesIndices[i]</span><br><span class="line">              if (seriesIndex !== params.seriesIndex) &#123;</span><br><span class="line">                let point = api.coord([xValue, api.value(seriesIndex)])</span><br><span class="line">                point[0] += barLayout[i - 1].offsetCenter</span><br><span class="line">                point[1] -= 20</span><br><span class="line">                points.push(point)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            let style = api.style(&#123;</span><br><span class="line">              stroke: api.visual(&#x27;color&#x27;),</span><br><span class="line">              fill: &#x27;none&#x27;</span><br><span class="line">            &#125;)</span><br><span class="line">            return &#123;</span><br><span class="line">              type: &#x27;polyline&#x27;,</span><br><span class="line">              shape: &#123;</span><br><span class="line">                points: points</span><br><span class="line">              &#125;,</span><br><span class="line">              style: style</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          data: customData,</span><br><span class="line">          encode: &#123;</span><br><span class="line">            x: 0,</span><br><span class="line">            y: encodeY</span><br><span class="line">          &#125;,</span><br><span class="line">          z: 100</span><br><span class="line">        &#125;,</span><br><span class="line">        ...dataList.map((data: any, index: any) =&gt; &#123;</span><br><span class="line">          return &#123;</span><br><span class="line">            type: &#x27;bar&#x27;,</span><br><span class="line">            animation: false,</span><br><span class="line">            name: legendData[index + 1],</span><br><span class="line">            data: data</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    myChart.setOption(options)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  nextTick(() =&gt; &#123;</span><br><span class="line">    if (containerRef.value) &#123;</span><br><span class="line">      console.log(containerRef.value)</span><br><span class="line">      initChart()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="自定义绘制风场"><a href="#自定义绘制风场" class="headerlink" title="自定义绘制风场"></a>自定义绘制风场</h1>]]></content>
      
      
      <categories>
          
          <category> 绘图 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> echarts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tailwindcss处理背景渐变</title>
      <link href="/post/5f8d.html"/>
      <url>/post/5f8d.html</url>
      
        <content type="html"><![CDATA[<h1 id="Tailwindcss-处理背景渐变"><a href="#Tailwindcss-处理背景渐变" class="headerlink" title="Tailwindcss 处理背景渐变"></a>Tailwindcss 处理背景渐变</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在开发中，我们经常需要使用背景渐变，但是 Tailwindcss 默认并没有提供背景渐变的工具类，所以我们需要自己来实现。</p><h2 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h2><ol><li>在<code>tailwind.config.js</code>中添加自定义工具类：</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">theme</span>: &#123;</span><br><span class="line">    <span class="attr">extend</span>: &#123;</span><br><span class="line">      <span class="attr">backgroundImage</span>: &#123;</span><br><span class="line">        <span class="string">&quot;gradient-to-r&quot;</span>: <span class="string">&quot;linear-gradient(to right, var(--tw-gradient-stops))&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">colors</span>: &#123;</span><br><span class="line">      <span class="string">&quot;start-color&quot;</span>: <span class="string">&quot;#FD7A61&quot;</span>,</span><br><span class="line">      <span class="string">&quot;end-color&quot;</span>: <span class="string">&quot;#FF934D&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li>在需要使用背景渐变的地方，使用<code>bg-gradient</code>工具类：</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-gradient-to-r from-start-color to-end-color&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 项目配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tailwindcss </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nextjs中使用tailwindcss添加自定义字体</title>
      <link href="/post/cc29.html"/>
      <url>/post/cc29.html</url>
      
        <content type="html"><![CDATA[<h1 id="nextjs中使用tailwindcss添加自定义字体"><a href="#nextjs中使用tailwindcss添加自定义字体" class="headerlink" title="nextjs中使用tailwindcss添加自定义字体"></a>nextjs中使用tailwindcss添加自定义字体</h1><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p><a href="https://tailwindcss.com/docs/font-family#providing-default-font-settings">指路官方文档</a></p><p>项目框架</p><ul><li>next.js</li><li>tailwindcss</li><li>app router</li></ul><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol><li><p>在public目录中添加字体文件（我的是个.TTF文件）</p><p><img src="../images/nextjs%E4%B8%AD%E4%BD%BF%E7%94%A8tailwindcss%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93/image-20231221114910144.png" alt="image-20231221114910144"></p></li><li><p>在global.css文件中添加字体</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 自定义字体，注意这里url()中路径已然是public目录下 */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;lcd-font&quot;</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;/DS-DIGIB.TTF&quot;</span>) <span class="built_in">format</span>(<span class="string">&quot;truetype&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在tailwind.config.js中配置字体</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">theme</span>: &#123;</span><br><span class="line">    <span class="attr">extend</span>: &#123;</span><br><span class="line">      <span class="attr">fontFamily</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;sans-serif&#x27;</span>: <span class="string">&#x27;Helvetica, Arial, sans-serif&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;serif&#x27;</span>: <span class="string">&#x27;Georgia, &quot;Times New Roman&quot;, Times, serif&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;monospace&#x27;</span>: <span class="string">&#x27;Courier New, monospace&#x27;</span>,</span><br><span class="line">        <span class="comment">// 👇在这里添加好刚才的字体</span></span><br><span class="line">        <span class="string">&#x27;lcd&#x27;</span>: <span class="string">&quot;lcd-font&quot;</span>, </span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 省略</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 省略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用字体</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=<span class="string">&quot;font-lcd&quot;</span>&gt;内容&lt;/div&gt;</span><br></pre></td></tr></table></figure></li></ol><p>椰丝成功了😊</p>]]></content>
      
      
      <categories>
          
          <category> Next.js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tailwindcss </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS验证URL的新方法</title>
      <link href="/post/aad0.html"/>
      <url>/post/aad0.html</url>
      
        <content type="html"><![CDATA[<p><img src="../images/JS%E9%AA%8C%E8%AF%81URL%E7%9A%84%E6%96%B0%E6%96%B9%E6%B3%95/image-20231213145139677.png" alt="image-20231213145139677"></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/canParse_static">MDN URL.carParse()</a></p><p><a href="https://www.stefanjudis.com/blog/validate-urls-in-javascript/">文章摘自</a></p>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>瀑布流布局Demo</title>
      <link href="/post/20fa.html"/>
      <url>/post/20fa.html</url>
      
        <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>早上我查了很多瀑布流实现的方法，展示逻辑都不是很喜欢。</p><p>纸鹤给我看了一个使用了瀑布流布局的网页，网页利用<code>transform</code>对每个条目进行定位……恍然大悟。</p><p>中午做饭的时候看了<a href="https://www.bilibili.com/video/BV12u4y187FD/?share_source=copy_web&vd_source=23714ab7b0dd0417fa8c1283e9c4b36f">B站一up主的瀑布流实现视频</a>(麦克阿瑟还是有点实力的)，大概知道怎样实现了。</p><h2 id="瀑布流布局雏形"><a href="#瀑布流布局雏形" class="headerlink" title="瀑布流布局雏形"></a>瀑布流布局雏形</h2><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>用一个定长数组存放第n列某行条目的top值，每次便利找最小top值所在元素，添加一条新条目，并更新top值。等我去画个图。</p><p><img src="../images/%E7%80%91%E5%B8%83%E6%B5%81%E5%B8%83%E5%B1%80Demo/image-20231211112404970.png" alt="image-20231211112404970"></p><h3 id="不完整的代码-仅提供一种思路"><a href="#不完整的代码-仅提供一种思路" class="headerlink" title="不完整的代码(仅提供一种思路)"></a>不完整的代码(仅提供一种思路)</h3><p>使用react实现，和原生JS有些差别（是哟个原生JS实现可以直接看上面那个视频）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> defualt <span class="title function_">testPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 创建一个布局容器</span></span><br><span class="line">    <span class="keyword">const</span> boxRef = <span class="title function_">useRef</span>(<span class="literal">null</span>); </span><br><span class="line">    <span class="comment">// 存放条目列表</span></span><br><span class="line">    <span class="keyword">const</span> [list, setList] = <span class="title function_">useState</span>([])</span><br><span class="line">    <span class="comment">// 判断列表图片是否加载完成</span></span><br><span class="line">    <span class="keyword">const</span> [imagesLoaded, setImagesLoaded] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取list</span></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">getList</span>(); <span class="comment">// 该函数中应该确保获取到的列表图片全部加载完成</span></span><br><span class="line">    &#125;, [])</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 判断图片是否全部加载完成</span></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      imagesLoaded === list?.<span class="property">length</span> &amp;&amp; <span class="title function_">layout</span>();</span><br><span class="line">    &#125;, [imagesLoaded, list]);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 绑定layout</span></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> resizeObserver = <span class="keyword">new</span> <span class="title class_">ResizeObserver</span>(<span class="function">(<span class="params">entries</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> entries) &#123;</span><br><span class="line">          <span class="title function_">layout</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (boxRef.<span class="property">current</span>) &#123;</span><br><span class="line">        resizeObserver.<span class="title function_">observe</span>(boxRef.<span class="property">current</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        resizeObserver.<span class="title function_">disconnect</span>();</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;, [boxRef.<span class="property">current</span>]);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 布局函数</span></span><br><span class="line">    funciton <span class="title function_">layout</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> box = boxRef.<span class="property">current</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 计算容器参数</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">getInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 计算当前容器能存放多少列条目 cardWidth-每个条目的宽度</span></span><br><span class="line">            <span class="keyword">let</span> boxWidth = box.<span class="property">offsetWidth</span>;</span><br><span class="line">            <span class="keyword">let</span> col = <span class="title class_">Math</span>.<span class="title function_">floor</span>(boxWidth / cardWidth); </span><br><span class="line">            </span><br><span class="line">            <span class="comment">// gap-条目间距</span></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                boxWidth,</span><br><span class="line">                col,</span><br><span class="line">                gap,  <span class="comment">// 你可以定值或者计算gap值，推荐定值</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取top值最小的列</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">getMinTop</span>(<span class="params">nextTop</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> min = nextTop[<span class="number">0</span>],</span><br><span class="line">                minIdx = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = nextTop.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">                <span class="comment">// ...</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                min,</span><br><span class="line">                minIdx</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取top值最大的列</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">getMaxTop</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> info = <span class="title function_">getInfo</span>()</span><br><span class="line">        <span class="keyword">let</span> nextTop = <span class="keyword">new</span> <span class="title class_">Array</span>(info.<span class="property">col</span>).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 遍历每一个条目</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = box.<span class="property">children</span>.<span class="property">length</span>; i &lt; len; i++ &#123;</span><br><span class="line">            <span class="keyword">const</span> card = box.<span class="property">children</span>[i];</span><br><span class="line">            <span class="keyword">let</span> minTop = <span class="title function_">getMinTop</span>(nextTop);</span><br><span class="line">            <span class="keyword">const</span> dirstX = <span class="number">0</span>; <span class="comment">// 你可以设置一个初始值使得所有元素居中</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 卡片定位</span></span><br><span class="line">            card.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`translate(<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">             firstX + minTop.minIdx * (cardWidth + info.gap)</span></span></span><br><span class="line"><span class="subst"><span class="string">             &#125;</span>px, <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">             minTop.min + info.gap / <span class="number">2</span></span></span></span><br><span class="line"><span class="subst"><span class="string">             &#125;</span>px)`</span>;</span><br><span class="line">             </span><br><span class="line">            <span class="comment">// 更新数组</span></span><br><span class="line">            nextTop[minTop.<span class="property">minIdx</span>] = nextTop[minTop.<span class="property">minIdx</span>] + card.<span class="property">offsetHeight</span> + info.<span class="property">gap</span>;</span><br><span class="line">            <span class="comment">// 更新容器</span></span><br><span class="line">            <span class="keyword">let</span> maxTop = <span class="title function_">getMaxTop</span>(nextTop);</span><br><span class="line">            box.<span class="property">style</span>.<span class="property">height</span> = maxTop.<span class="property">max</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">             </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">ul</span> <span class="attr">className</span>=<span class="string">&quot;w-full relative&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  &#123;list.map(item =&gt; (</span></span><br><span class="line"><span class="language-xml">                     <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;&#125;</span> <span class="attr">className</span>=<span class="string">&#123;absolute</span> <span class="attr">transition-all</span> <span class="attr">w-</span>[]&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                      <span class="tag">&lt;<span class="name">CardItem</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  ))&#125;</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结合无限列表"><a href="#结合无限列表" class="headerlink" title="结合无限列表"></a>结合无限列表</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [curPage, setCurPage] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> [totalPages, setTotalPages] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> containerRef = <span class="title function_">useRef</span>(contianerRef)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleScroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!contianerRef?.<span class="property">current</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> current = containerRef.<span class="property">current</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (current.<span class="property">scrollTop</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//到顶</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">      current.<span class="property">scrollTop</span> + current.<span class="property">clientHeight</span> ===</span><br><span class="line">      current.<span class="property">scrollHeight</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="comment">// 触底</span></span><br><span class="line">      <span class="keyword">if</span> (curPage &gt;= totalPages) &#123;</span><br><span class="line">        <span class="comment">//没有更多</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">setCurPage</span>(curPage + <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页数改变时请求新一组分页数据</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (curPage &gt; totalPages) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getList</span>();</span><br><span class="line">&#125;, [curPage]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;containerRef&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#x27;h-full w-full flex flex-col overflow-x-hidden overflow-y-auto&#x27;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onScroll</span>=<span class="string">&#123;handleScroll&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;list &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;list.map(item) =&gt; (<span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;&#125;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span>)&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            )&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="实现中：抽成瀑布流无线列表组件"><a href="#实现中：抽成瀑布流无线列表组件" class="headerlink" title="实现中：抽成瀑布流无线列表组件"></a>实现中：抽成瀑布流无线列表组件</h2><h1 id="求交流各种妙的实现方法！"><a href="#求交流各种妙的实现方法！" class="headerlink" title="求交流各种妙的实现方法！"></a>求交流各种妙的实现方法！</h1>]]></content>
      
      
      <categories>
          
          <category> 手搓组件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 瀑布流布局 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>无限列表Demo</title>
      <link href="/post/edde.html"/>
      <url>/post/edde.html</url>
      
        <content type="html"><![CDATA[<h1 id="无限列表Demo"><a href="#无限列表Demo" class="headerlink" title="无限列表Demo"></a>无限列表Demo</h1><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>工组中遇到的，想手搓一个，慢慢优化吧。</p><p>React实现，在这里仅分享逻辑。</p><h2 id="简单的一个实现方法"><a href="#简单的一个实现方法" class="headerlink" title="简单的一个实现方法"></a>简单的一个实现方法</h2><h2 id="实现中：如何抽成一个组件呢？"><a href="#实现中：如何抽成一个组件呢？" class="headerlink" title="实现中：如何抽成一个组件呢？"></a>实现中：如何抽成一个组件呢？</h2><h2 id="实现中：结合图片瀑布流"><a href="#实现中：结合图片瀑布流" class="headerlink" title="实现中：结合图片瀑布流"></a>实现中：结合图片瀑布流</h2>]]></content>
      
      
      <categories>
          
          <category> 手搓 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 无限列表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为什么要问我如何用CSS实现三角形啊</title>
      <link href="/post/6529.html"/>
      <url>/post/6529.html</url>
      
        <content type="html"><![CDATA[<h1 id="为什么要问我如何用CSS实现三角形啊？"><a href="#为什么要问我如何用CSS实现三角形啊？" class="headerlink" title="为什么要问我如何用CSS实现三角形啊？"></a>为什么要问我如何用CSS实现三角形啊？</h1><blockquote><p>在前端面试中，被问及如何使用CSS实现一个三角形的问题可能有几个不同的目的和价值：</p><ol><li><p>基本CSS知识测试：这个问题可以用来测试面试者对基本的CSS属性和技巧是否熟悉。实现一个三角形通常涉及使用CSS的一些常见属性，例如<code>width</code>、<code>height</code>、<code>border</code>、<code>border-color</code>和<code>transparent</code>等。如果面试者能够正确回答这个问题，表明他们掌握了基本的CSS技能。</p></li><li><p>问题解决能力：这个问题也可以用来测试面试者的问题解决能力。即使他们之前没有直接实现过三角形，但如果他们能够通过分析和试验找到解决方法，这显示了他们的思维方式和解决问题的能力。</p></li><li><p>CSS的 kung fu 水平：实现一个三角形可以有多种方法，包括使用<code>border</code>、<code>transform</code>、伪元素（<code>::before</code>或<code>::after</code>）等。通过问这个问题两次，面试官可能想要了解面试者在CSS方面的深度和广度。如果第一次问的方法是使用<code>border</code>，而第二次问的是使用伪元素，那么面试者需要展示他们对多种CSS技巧的了解。</p></li><li><p>检验经验：在前端开发中，有时需要实现各种各样的形状和效果。问关于实现三角形的问题可能是为了了解面试者是否有实际项目经验，并且是否能够应对实际工作中的常见需求。</p></li></ol><p>虽然这个问题可能在多次面试中反复出现，但每次可能会有不同的变化或深度，以测试不同层次的知识和技能。如果你多次被问到这个问题，建议你在准备面试时重点复习一下与CSS相关的知识，包括各种CSS属性和技巧，以确保能够应对这类问题。此外，你还可以考虑了解更高级的CSS概念，以在面试中展示更广泛的知识。</p></blockquote><h2 id="如何用CSS实现三角形？"><a href="#如何用CSS实现三角形？" class="headerlink" title="如何用CSS实现三角形？"></a>如何用CSS实现三角形？</h2><h3 id="border"><a href="#border" class="headerlink" title="border"></a>border</h3><p>一边隐藏，两边透明，三边设宽</p><p><img src="../images/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E9%97%AE%E6%88%91%E5%A6%82%E4%BD%95%E7%94%A8CSS%E5%AE%9E%E7%8E%B0%E4%B8%89%E8%A7%92%E5%BD%A2%E5%95%8A/triangle.png" alt="A CSS Triangle"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#triangle</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">40px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">40px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border</span>-buttom: <span class="number">80px</span> solid lightblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="伪类元素"><a href="#伪类元素" class="headerlink" title="伪类元素"></a>伪类元素</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.triangle-container</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative; <span class="comment">/* 父容器设置为相对定位，以便子元素伪元素参考 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.triangle</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">50px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">50px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">50px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.triangle</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">30px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">30px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">30px</span> solid blue;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">10px</span>; <span class="comment">/* 负值定位伪元素在父容器的上方 */</span></span><br><span class="line">    <span class="attribute">left</span>: <span class="number">10px</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="clip-path属性"><a href="#clip-path属性" class="headerlink" title="clip-path属性"></a>clip-path属性</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#triangle</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">    <span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">0%</span> <span class="number">0%</span>, <span class="number">100%</span> <span class="number">0%</span>, <span class="number">50%</span> <span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><p>clip-path &amp; shape-outside</p><p><img src="../images/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E9%97%AE%E6%88%91%E5%A6%82%E4%BD%95%E7%94%A8CSS%E5%AE%9E%E7%8E%B0%E4%B8%89%E8%A7%92%E5%BD%A2%E5%95%8A/image-20230911204015854.png" alt="image-20230911204015854" style="zoom: 67%;" /><img src="../images/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E9%97%AE%E6%88%91%E5%A6%82%E4%BD%95%E7%94%A8CSS%E5%AE%9E%E7%8E%B0%E4%B8%89%E8%A7%92%E5%BD%A2%E5%95%8A/image-20230911204042645.png" alt="image-20230911204042645" style="zoom:80%;" /></p><p>前者规定哪些显示哪些不显示，后者类似于裁剪出可以显示的地方，给内联元素提供一个形状边界。</p><p>搭配使用。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.circle</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">shape-outside</span>: <span class="built_in">circle</span>();</span><br><span class="line">    <span class="attribute">clip-path</span>: <span class="built_in">circle</span>();</span><br><span class="line">    <span class="attribute">background</span>: lightblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS实现三角形 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Next.js中间件的使用探索</title>
      <link href="/post/7609.html"/>
      <url>/post/7609.html</url>
      
        <content type="html"><![CDATA[<h1 id="Next-js中间件的使用探索"><a href="#Next-js中间件的使用探索" class="headerlink" title="Next.js中间件的使用探索"></a>Next.js中间件的使用探索</h1><p>至于为啥探索，因为牵扯到一些新的东西，广泛搜索查不到对胃口的，只能自行探索记录。</p><p>中间件是啥？</p><blockquote><p>​    Middleware allows you to run code before a request is completed. Then, based on the incoming request, you can modify the response by rewriting, redirecting, modifying the request or response headers, or responding directly.</p><p>​    中间件允许您在请求完成之前运行代码。然后，根据传入的请求，您可以通过重写、重定向、修改请求或响应标头或直接响应来修改响应。</p></blockquote><h2 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h2><p>创建middleware.js文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&quot;next/server&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 尝试写一下中间件，中间件主要作用是：在请求完成之前修改对请求的响应。</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;抓到了路由名单上的request&quot;</span>, request.<span class="property">nextUrl</span>.<span class="property">pathname</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="comment">// 适配器：筛选出特定的路径允许中间件执行</span></span><br><span class="line">    <span class="attr">matcher</span>: <span class="string">&quot;/views/:path*&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// =&gt; 抓到了路由名单上的request /views/today</span></span><br></pre></td></tr></table></figure><h2 id="放置文件"><a href="#放置文件" class="headerlink" title="放置文件"></a>放置文件</h2><blockquote><p> 官网</p><p>Use the file middleware.ts (or .js) in the root of your project to define Middleware. For example, at the same level as pages or app, or inside src if applicable.</p><p>翻译</p><p>使用项目根目录中的文件 middleware.ts（或 .js）来定义中间件。例如，与页面或应用程序处于同一级别，或者在 src 内部（如果适用）</p></blockquote><p>我的项目要放在src中是起效的。</p><p><img src="../images/Next-js%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8E%A2%E7%B4%A2/image-20230904103146821.png" alt="image-20230904103146821"></p><h2 id="引入NextResponse"><a href="#引入NextResponse" class="headerlink" title="引入NextResponse"></a>引入NextResponse</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&quot;next/server&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; validateUserToken &#125; <span class="keyword">from</span> <span class="string">&quot;./lib/validateUserToken&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;抓到了路由名单上的&quot;</span>, request.<span class="property">nextUrl</span>.<span class="property">pathname</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (request.<span class="property">nextUrl</span>.<span class="property">pathname</span>.<span class="title function_">startsWith</span>(<span class="string">&quot;/views&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_">validateUserToken</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">rewrite</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;/&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (request.<span class="property">nextUrl</span>.<span class="property">pathname</span>.<span class="title function_">startsWith</span>(<span class="string">&quot;/signin&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">validateUserToken</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">rewrite</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;/views/today&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">matcher</span>: [<span class="string">&quot;/views/:path*&quot;</span>, <span class="string">&quot;/signin&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="一些API"><a href="#一些API" class="headerlink" title="一些API"></a>一些API</h3><p>见名知意，不知意可看官网。</p><ul><li>cookies<ul><li>get</li><li>getAll</li><li>set </li><li>delete</li></ul></li><li>redirect()</li><li>rewrite()</li><li>next()</li></ul><h3 id="重定向和重写"><a href="#重定向和重写" class="headerlink" title="重定向和重写"></a>重定向和重写</h3><blockquote><pre><code> URL 重写（URL rewriting）和重定向（redirect）是两个在 Web 开发中经常被使用的概念，它们的作用是改变浏览器请求的 URL，但它们的实现方式和作用略有不同。</code></pre></blockquote><p>实现↓</p><h4 id="redirect重定向"><a href="#redirect重定向" class="headerlink" title="redirect重定向"></a>redirect重定向</h4><blockquote><p>​    URL 重写是指将浏览器请求的 URL 路径或参数进行修改，以便于服务器端能够识别和处理请求。例如，将 <code>http://example.com/user?id=1</code> 的请求路径重写为 <code>http://example.com/user/1</code>，这样服务器端就可以通过解析 URL 路径来获取用户 ID。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;路径&#x27;</span>, req.<span class="property">url</span>))</span><br></pre></td></tr></table></figure><p>不好意思下面这块跟上面没啥联系，看错了，但是觉得有意思，先放在这吧</p><h5 id="重定向类型"><a href="#重定向类型" class="headerlink" title="重定向类型"></a><a href="https://developers.google.com/search/docs/crawling-indexing/301-redirects?hl=zh-cn#overview-of-redirect-types">重定向类型</a></h5><blockquote><p>​    URL 重定向则是指当浏览器请求一个 URL 时，服务器告诉浏览器将请求转到另一个 URL。重定向可以分为两类：永久重定向（301 Moved Permanently）和临时重定向（302 Found）。永久重定向表示请求的 URL 已经永久移动到了另一个 URL，搜索引擎会把原有的权重转移到新的 URL 上；而临时重定向表示请求的 URL 只是暂时性地移动到了另一个 URL，搜索引擎会继续保留原有的权重。</p></blockquote><ul><li>永久性重定向<ul><li>HTTP 301 设置服务器端重定向</li><li>HTTP 308</li><li>meta refresh 设置meta refrash重定向</li><li>HTTP刷新 </li><li>JS location </li><li>Crypto重定向</li></ul></li><li>临时重定向<ul><li>HTTP 302 设置服务器重定向</li><li>HTTP 303</li><li>HTTP 307</li><li>meta refrash 设置meta refrash重定向</li><li>HTTP refrash</li></ul></li></ul><h4 id="rewrite重写"><a href="#rewrite重写" class="headerlink" title="rewrite重写"></a>rewrite重写</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">NextResponse</span>.<span class="title function_">rewrite</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;路径&#x27;</span>, req.<span class="property">url</span>))</span><br></pre></td></tr></table></figure><h4 id="两者区别"><a href="#两者区别" class="headerlink" title="两者区别"></a>两者区别</h4><pre><code> URL 重写主要是为了方便服务器端的处理， URL 重定向主要是为了更好的用户体验和搜索引擎优化(我去，什么大坑)。</code></pre>]]></content>
      
      
      <categories>
          
          <category> Next.js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 中间件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>啃犀牛书——类</title>
      <link href="/post/8ed5.html"/>
      <url>/post/8ed5.html</url>
      
        <content type="html"><![CDATA[<h1 id="三种实例化对象的方式"><a href="#三种实例化对象的方式" class="headerlink" title="三种实例化对象的方式"></a>三种实例化对象的方式</h1><h2 id="两种形式定义类"><a href="#两种形式定义类" class="headerlink" title="两种形式定义类"></a>两种形式定义类</h2><h3 id="工厂函数"><a href="#工厂函数" class="headerlink" title="工厂函数"></a>工厂函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">range</span>(<span class="params"><span class="keyword">from</span>, to</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> r = <span class="title class_">Object</span>.<span class="title function_">create</span>(range.<span class="property">methods</span>) <span class="comment">// 挂上方法</span></span><br><span class="line">    r.<span class="property">from</span> = <span class="keyword">from</span> <span class="comment">// 公有属性</span></span><br><span class="line">    r.<span class="property">to</span> = to</span><br><span class="line">    <span class="keyword">return</span> r <span class="comment">// 返回创建好的对象</span></span><br><span class="line">&#125;</span><br><span class="line">range.<span class="property">methods</span> = &#123;</span><br><span class="line">    <span class="title function_">includes</span>(<span class="params">x</span>) &#123; <span class="comment">// 一个判断范围的方法</span></span><br><span class="line">        <span class="keyword">return</span> x &gt;= <span class="variable language_">this</span>.<span class="property">from</span> &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">to</span></span><br><span class="line">    &#125;,</span><br><span class="line">    *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123; <span class="comment">// 一个设置可迭代的生成器方法</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">from</span>); i &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; i ++) &#123;</span><br><span class="line">            <span class="keyword">yield</span> i</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123; <span class="comment">// 每个对象都有的toString函数</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`[<span class="subst">$&#123;<span class="variable language_">this</span>.<span class="keyword">from</span>&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.to&#125;</span>]`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r = <span class="title function_">range</span>(<span class="number">1</span>, <span class="number">3</span>) <span class="comment">// 用r接住了一个使用工厂函数创建好的对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r.<span class="title function_">includes</span>(<span class="number">2</span>)) <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r.<span class="title function_">toString</span>()) <span class="comment">// =&gt; [1, 3]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([...r]) <span class="comment">// =&gt;[1,2,3]</span></span><br></pre></td></tr></table></figure><h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Range</span>(<span class="params"><span class="keyword">from</span>, to</span>) &#123; <span class="comment">// 注意构造函数的命名规范，首字母大写，类名亦是</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">from</span> = <span class="keyword">from</span> <span class="comment">// 公有属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">to</span> = to</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123; <span class="comment">// 原型上挂方法</span></span><br><span class="line">    <span class="attr">includes</span>: <span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x &gt;= <span class="variable language_">this</span>.<span class="property">from</span> &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">to</span></span><br><span class="line">    &#125;,</span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]: <span class="keyword">function</span>*() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">from</span>); i &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">yield</span> i</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; ,</span><br><span class="line">    <span class="attr">toString</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`[<span class="subst">$&#123;<span class="variable language_">this</span>.<span class="keyword">from</span>&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.to&#125;</span>]`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r = <span class="keyword">new</span> <span class="title class_">Range</span>(<span class="number">1</span>, <span class="number">3</span>) <span class="comment">// 实例化一个对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r.<span class="title function_">toString</span>()) <span class="comment">// =&gt; [1, 3]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r.<span class="title function_">includes</span>(<span class="number">2</span>)) <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([...r]) <span class="comment">// =&gt; [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>趁机回顾一下new 一个新对象的过程</p><ul><li>创建一个空对象</li><li><code>__proto__</code>指向构造函数的<code>prototype</code></li><li><code>this</code>指向该对象</li></ul><p>趁机回顾一下构造函数和普通函数调用的区别</p><ul><li>this：构造函数通过new调用，this指向新建的空对象(指向实例对象)；而普通函数调用this往往参照所在上下文，一般是window，反正谁调用这个函数，这个函数的this就指向谁。</li><li>返回值：构造函数不需要显示地返回值，调用的时候自动返回一个实例对象；普通函数必须要有返回值，且返回值取决于函数内部的return语句，不然undefined。</li></ul><h2 id="一种ES6船新的class关键字类"><a href="#一种ES6船新的class关键字类" class="headerlink" title="一种ES6船新的class关键字类"></a>一种ES6船新的class关键字类</h2><p>实际上是语法糖啦~</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Range</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">from</span>, to</span>) &#123; <span class="comment">// 关键一脚</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">from</span> = <span class="keyword">from</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">to</span> = to</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">includes</span>(<span class="params">x</span>) &#123; </span><br><span class="line">        <span class="keyword">return</span> x &gt;= <span class="variable language_">this</span>.<span class="property">from</span> &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">to</span></span><br><span class="line">    &#125;</span><br><span class="line">    *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">from</span>); i &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">yield</span> i</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`[<span class="subst">$&#123;<span class="variable language_">this</span>.<span class="keyword">from</span>&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.to&#125;</span>]`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r = <span class="keyword">new</span> <span class="title class_">Range</span>(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r.<span class="title function_">toString</span>()) <span class="comment">// =&gt; [1, 3]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r.<span class="title function_">includes</span>(<span class="number">2</span>)) <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([...r]) <span class="comment">// =&gt; [1, 2, 3]</span></span><br></pre></td></tr></table></figure><blockquote><p>原型对象是类的关键特性，构造函数是类的公共标识</p></blockquote><h1 id="先熟悉一下class"><a href="#先熟悉一下class" class="headerlink" title="先熟悉一下class"></a>先熟悉一下class</h1><h2 id="继承类语法"><a href="#继承类语法" class="headerlink" title="继承类语法"></a>继承类语法</h2><p>extends咯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Span</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Range</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">start, length</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (length &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">super</span>(start, start + length)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">super</span>(start + length, start)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="类定义表达式语法"><a href="#类定义表达式语法" class="headerlink" title="类定义表达式语法"></a>类定义表达式语法</h2><p>这种情况蛮少，还是上面的比较舒服</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> square = <span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">square</span>(<span class="number">3</span>) <span class="comment">// 9</span></span><br><span class="line">↓↓↓</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Square</span> = <span class="keyword">class</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">area</span> = x * x</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Square</span>(<span class="number">3</span>).<span class="property">area</span> <span class="comment">// 9</span></span><br></pre></td></tr></table></figure><h2 id="class声明"><a href="#class声明" class="headerlink" title="class声明"></a>class声明</h2><p>类声明不会像函数声明一样有声明提升。必须先声明再初始化操作。</p><h2 id="class声明体内"><a href="#class声明体内" class="headerlink" title="class声明体内"></a>class声明体内</h2><p>声明体内所有代码默认处于严格模式下，也就是说不能使用八进制整数字面量、with语句啥啥啥的，那当然如果你在声明一个变量前使用了这个变量，g咯。</p><h1 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h1><p>所谓静态方法，是作为构造函数而非原型对象的属性定义的——静态方法是构造函数的方法。</p><p>静态方法也被称为’类方法’，因为要通过类名/构造函数名调用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Range</span> &#123;</span><br><span class="line">    ....</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">parse</span>(<span class="params">s</span>) &#123; <span class="comment">// 类中的静态方法</span></span><br><span class="line">        <span class="keyword">let</span> matches = s.<span class="title function_">matches</span>(<span class="regexp">/^\(\d+)\.\.\.(\d+)\$/</span>)</span><br><span class="line">        <span class="keyword">if</span> (!matches) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&#x27;NoNo&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Range</span>(<span class="built_in">parseInt</span>(matches[<span class="number">1</span>]), <span class="built_in">parseInt</span>(matches[<span class="number">2</span>]))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r = <span class="title class_">Range</span>.<span class="title function_">parse</span>(<span class="string">&#x27;(1...10)&#x27;</span>) <span class="comment">// 椰丝，是这样字调用的，而不是这个类的原型的方法</span></span><br><span class="line">r.<span class="title function_">parse</span>(<span class="string">&#x27;(1...10)&#x27;</span>) <span class="comment">// TypeError: parse is not a function 这样调用大错特错</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyClass</span>(<span class="params">....</span>) &#123;....&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MyClass</span>.<span class="property">staticMethod</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;构造函数中的静态方法&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MyClass</span>.<span class="title function_">staticMethod</span>()</span><br></pre></td></tr></table></figure><p>在静态方法中使用this没啥意义，因为本身就是靠类/构造函数调用，而非实例对象。</p><h1 id="获取、设置等方法"><a href="#获取、设置等方法" class="headerlink" title="获取、设置等方法"></a>获取、设置等方法</h1><p>对象字面量支持的所有简写的方法定义语法都可以在类体中使用。且包括一些特殊的方法定义，比如生成器方法，名字为方括号中表达式值的方法等</p><h1 id="公有、私有、静态字段"><a href="#公有、私有、静态字段" class="headerlink" title="公有、私有、静态字段"></a>公有、私有、静态字段</h1><ul><li>public fields 公有字段 在类中直接声明的属性，可以在类的实例中访问，包含各种数据类型</li><li>privite fields  私有字段 只能在类内部访问的属性，对外部不可见，前有<code>#</code>标识符，一般用来放类里敏感数据/要隐藏的细节的</li><li>static fileds 静态字段  属于类本身的属性，在所有类实例间共享，前有<code>static</code>关键字，一般用来类级别上存储状态/计数</li></ul><h2 id="ES6-class风格"><a href="#ES6-class风格" class="headerlink" title="ES6 class风格"></a>ES6 class风格</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name <span class="comment">// 公有字段</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`hi~<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    #qvq = <span class="string">&#x27;114514&#x27;</span> <span class="comment">// 私有字段</span></span><br><span class="line">    <span class="title function_">saying</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.#qvq</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">updateSaying</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.#qvq = s</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> cnt = <span class="number">0</span> <span class="comment">// 静态字段</span></span><br><span class="line">    <span class="title function_">calculator</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">Person</span>.<span class="property">cnt</span>++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">getCnt</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Person</span>.<span class="property">cnt</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;raliz&#x27;</span>, <span class="number">21</span>)</span><br><span class="line">p.<span class="title function_">sayHi</span>() <span class="comment">// =&gt; hi~raliz</span></span><br><span class="line">p.<span class="title function_">saying</span>() <span class="comment">// 114514</span></span><br><span class="line">p.#qvq <span class="comment">// 无法访问</span></span><br><span class="line">p.<span class="title function_">updateSaying</span>(<span class="string">&#x27;555&#x27;</span>) <span class="comment">// 114514-&gt;555</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="title function_">getCnt</span>() <span class="comment">// 1</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">cnt</span> <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;qzhihe&#x27;</span>, <span class="number">21</span>)</span><br><span class="line"><span class="title class_">Person</span>.<span class="title function_">getCnt</span>() <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h2 id="ES5-构造函数风格"><a href="#ES5-构造函数风格" class="headerlink" title="ES5 构造函数风格"></a>ES5 构造函数风格</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name <span class="comment">// 公有字段</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> qvq = <span class="string">&#x27;114514&#x27;</span> <span class="comment">// 私有字段</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">saying</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">qvq</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title class_">Person</span>.<span class="property">cnt</span>++ <span class="comment">// 静态字段</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHi</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    cosole.<span class="title function_">log</span>(<span class="string">`hi~<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">cnt</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;raliz&#x27;</span>, <span class="number">21</span>)</span><br><span class="line">p.<span class="property">qvq</span> <span class="comment">// undefiend，不可访问</span></span><br><span class="line">p.<span class="title function_">saying</span>() <span class="comment">// =&gt; 114514</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">cnt</span> <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h1 id="为已有的类添加方法"><a href="#为已有的类添加方法" class="headerlink" title="为已有的类添加方法"></a>为已有的类添加方法</h1><p>JS基于原型机制是动态的，对象从它的原型继承属性，更改该原型中的属性后，对象会继承更改后的属性。</p><p>基于这一点，给已有的类增加方法不算难了↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对比新旧版本熟悉一下</span></span><br><span class="line"><span class="comment">// 旧的，nooooooooot goooooooooood 重名冲突、for/in可见</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="title class_">String</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">startsWith</span>) &#123;</span><br><span class="line">    <span class="title class_">String</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">satrtsWith</span> = <span class="keyword">function</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">indexOf</span>(s) === <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExternP</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="title function_">newMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;添加一个新方法&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="子类"><a href="#子类" class="headerlink" title="子类"></a>子类</h1><h2 id="子类和原型"><a href="#子类和原型" class="headerlink" title="子类和原型"></a>子类和原型</h2><p>让我们来用构造函数的方式实现一个Range的子类</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Range</span>(<span class="params"><span class="keyword">from</span>, to</span>) &#123; <span class="comment">// 注意构造函数的命名规范，首字母大写，类名亦是</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">from</span> = <span class="keyword">from</span> <span class="comment">// 公有属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">to</span> = to</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123; <span class="comment">// 原型上挂方法</span></span><br><span class="line">    <span class="attr">includes</span>: <span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x &gt;= <span class="variable language_">this</span>.<span class="property">from</span> &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">to</span></span><br><span class="line">    &#125;,</span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]: <span class="keyword">function</span>*() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">from</span>); i &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">yield</span> i</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; ,</span><br><span class="line">    <span class="attr">toString</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`[<span class="subst">$&#123;<span class="variable language_">this</span>.<span class="keyword">from</span>&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.to&#125;</span>]`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Range子类Span构造函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Span</span>(<span class="params">start, span</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (span &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">from</span> = start</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">to</span> = start + span</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">from</span> = start + span</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">to</span> = start</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 确保Span的原型继承Range原型------关键一脚------！</span></span><br><span class="line"><span class="title class_">Span</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line"><span class="comment">// constructor指向构造函数</span></span><br><span class="line"><span class="title class_">Span</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Span</span></span><br><span class="line"><span class="comment">// 如果不想继承原型的toString，那就定义覆盖成自己的toString</span></span><br><span class="line"><span class="title class_">Span</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`哈哈[<span class="subst">$&#123;<span class="variable language_">this</span>.<span class="keyword">from</span>&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.to&#125;</span>]哈哈`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="创建子类"><a href="#创建子类" class="headerlink" title="创建子类"></a>创建子类</h2><h3 id="通过extends和super创建子类"><a href="#通过extends和super创建子类" class="headerlink" title="通过extends和super创建子类"></a>通过extends和super创建子类</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个Array的子类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EZArray</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Array</span> &#123;</span><br><span class="line">    <span class="comment">// 添加了两种获取函数</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">first</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>[<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">last</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>[<span class="variable language_">this</span>.<span class="property">length</span> - <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="title class_">EZArray</span>()</span><br><span class="line"></span><br><span class="line">a <span class="keyword">instanceof</span> <span class="title class_">EZArray</span> <span class="comment">// true</span></span><br><span class="line">a <span class="keyword">instanceof</span> <span class="title class_">Array</span> <span class="comment">// true</span></span><br><span class="line">a.<span class="title function_">push</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">a.<span class="title function_">pop</span>() <span class="comment">// 2</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">isArray</span>(a) <span class="comment">// true</span></span><br><span class="line"><span class="title class_">EZArray</span>.<span class="title function_">isArray</span>(a) <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(<span class="title class_">EZArray</span>.<span class="property"><span class="keyword">prototype</span></span>) <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">isPrototypeOf</span>(<span class="title class_">EZArray</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="整一个检查键值类型的Map子类"><a href="#整一个检查键值类型的Map子类" class="headerlink" title="整一个检查键值类型的Map子类"></a>整一个检查键值类型的Map子类</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这个类很适合改装成私有字段，这样可以防止用户更改来跳过类型检查！</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TypedMap</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Map</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">keyType, valType, entries</span>) &#123;</span><br><span class="line">        <span class="comment">// 判断是否指定条目</span></span><br><span class="line">        <span class="keyword">if</span> (entries) &#123; </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> [k, v] <span class="keyword">of</span> entries) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> k !== keyType || <span class="keyword">typeof</span> v !== valType) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">`存在不符合类型限制的键值对[<span class="subst">$&#123;k&#125;</span>, <span class="subst">$&#123;v&#125;</span>]`</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 初始化父类</span></span><br><span class="line">        <span class="variable language_">super</span>(entries)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 初始化子类，</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyType</span> = keyType</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">valType</span> = valType</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key, val</span>) &#123;</span><br><span class="line">        <span class="comment">// 添加前新增键值类型判断</span></span><br><span class="line">        <span class="keyword">if</span> (keyType &amp;&amp; <span class="keyword">typeof</span> key !== <span class="variable language_">this</span>.<span class="property">keyType</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">`存在不符合类型限制的键<span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (valType &amp;&amp; <span class="keyword">typeof</span> val !== <span class="variable language_">this</span>.<span class="property">valType</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">`存在不符合类型限制的值<span class="subst">$&#123;val&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 调用父类的set方法，确保类型检查通过的键值对能加进去</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">set</span>(key, val)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在构造函数中使用Super需要注意的规则"><a href="#在构造函数中使用Super需要注意的规则" class="headerlink" title="在构造函数中使用Super需要注意的规则"></a>在构造函数中使用Super需要注意的规则</h3><ul><li>如果使用extends继承一个类，那么必须要使用super来初始化调用一下父类构造函数</li><li>如果子类中没有写构造函数，那么解释器会自动创建一个空构造函数，隐式地获取传值和调用</li><li>在调用super()之前，不能在构造函数中初始化子类状态(使用this关键字)，这种强制规则确保了父类先于子类得到初始化</li><li>当子类构造函数被调用且super调用父类构造函数时，父类构造函数可以通过new.target获取到子类构造函数。<ul><li>没有new调用的函数中，new.target是undefiend；构造函数中new.target引用的是被调用的构造函数。</li><li>一个设计良好的父类不需要直到自己的子类，不过可以通过new.target.name来记录日志消息。</li><li>↑根据单一职责原则，开方封闭原则，依赖倒置原则，低耦合，重用，抽象…父类不应依赖于子类，so↑</li></ul></li></ul><h2 id="委托"><a href="#委托" class="headerlink" title="委托"></a>委托</h2><h3 id="能组合不继承"><a href="#能组合不继承" class="headerlink" title="能组合不继承"></a>能组合不继承</h3><p>如果有个类和另一个类有相同的行为，可以通过创建子类来继承该行为，但是在类中创建另一个类的实例，并在需要的时候委托该实例去做希望做的事情反而是更方便灵活。也就是说这时候不需要创建子类，而是包装/组合其他类即可。</p><p>以上这种委托策略 被称为’组合composition’。</p><p>实现一个直方图类↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Histogram</span> &#123;</span><br><span class="line">    <span class="title function_">ocnstructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 创建一个要委托的Map对象</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">map</span> = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">count</span>(<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">get</span>(key) ||<span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">has</span>(<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">count</span>(key) &gt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">size</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="property">size</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">set</span>(key, <span class="variable language_">this</span>.<span class="title function_">count</span>(key) + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">delete</span>(<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> cnt = <span class="variable language_">this</span>.<span class="title function_">count</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (cnt === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">delete</span>(key)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">set</span>(key, cnt - <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">keys</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">keys</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">keys</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">values</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">keys</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">entries</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">entries</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>正式的继承关系虽好，可不要贪杯哦(doge)</p><h2 id="类层次和抽象类"><a href="#类层次和抽象类" class="headerlink" title="类层次和抽象类"></a>类层次和抽象类</h2><p>我觉得和设计模式结合来看比较好。</p><h1 id="一道算法题"><a href="#一道算法题" class="headerlink" title="一道算法题"></a>一道算法题</h1><p><a href="https://leetcode.cn/problems/minimum-operations-to-halve-array-sum/">2208. 将数组和减半的最少操作次数</a></p><p>给你一个正整数数组 <code>nums</code> 。每一次操作中，你可以从 <code>nums</code> 中选择 <strong>任意</strong> 一个数并将它减小到 <strong>恰好</strong> 一半。（注意，在后续操作中你可以对减半过的数继续执行操作）</p><p>请你返回将 <code>nums</code> 数组和 <strong>至少</strong> 减少一半的 <strong>最少</strong> 操作数。</p><p><strong>示例 1：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [5,19,8,1]</span><br><span class="line">输出：3</span><br><span class="line">解释：初始 nums 的和为 5 + 19 + 8 + 1 = 33 。</span><br><span class="line">以下是将数组和减少至少一半的一种方法：</span><br><span class="line">选择数字 19 并减小为 9.5 。</span><br><span class="line">选择数字 9.5 并减小为 4.75 。</span><br><span class="line">选择数字 8 并减小为 4 。</span><br><span class="line">最终数组为 [5, 4.75, 4, 1] ，和为 5 + 4.75 + 4 + 1 = 14.75 。</span><br><span class="line">nums 的和减小了 33 - 14.75 = 18.25 ，减小的部分超过了初始数组和的一半，18.25 &gt;= 33/2 = 16.5 。</span><br><span class="line">我们需要 3 个操作实现题目要求，所以返回 3 。</span><br><span class="line">可以证明，无法通过少于 3 个操作使数组和减少至少一半。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [3,8,20]</span><br><span class="line">输出：3</span><br><span class="line">解释：初始 nums 的和为 3 + 8 + 20 = 31 。</span><br><span class="line">以下是将数组和减少至少一半的一种方法：</span><br><span class="line">选择数字 20 并减小为 10 。</span><br><span class="line">选择数字 10 并减小为 5 。</span><br><span class="line">选择数字 3 并减小为 1.5 。</span><br><span class="line">最终数组为 [1.5, 8, 5] ，和为 1.5 + 8 + 5 = 14.5 。</span><br><span class="line">nums 的和减小了 31 - 14.5 = 16.5 ，减小的部分超过了初始数组和的一半， 16.5 &gt;= 31/2 = 16.5 。</span><br><span class="line">我们需要 3 个操作实现题目要求，所以返回 3 。</span><br><span class="line">可以证明，无法通过少于 3 个操作使数组和减少至少一半。</span><br></pre></td></tr></table></figure><p> <strong>提示：</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 105</code></li><li><code>1 &lt;= nums[i] &lt;= 107</code></li></ul><p><strong>解题：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这个优先队列类看得我瞳孔扩散</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Heap</span> &#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">data, compare</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">data</span> = data;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">compare</span> = compare;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 确定要堆化的范围-数组一半以后的都是叶子结点，无需堆化</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = (data.<span class="property">length</span> &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>; i &gt;=<span class="number">0</span> ; i--) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">heapify</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// 堆化操作</span></span><br><span class="line"><span class="title function_">heapify</span>(<span class="params">index</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> target = index;</span><br><span class="line"><span class="keyword">let</span> left = index * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> right = index * <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// 确定父左右中最小的节点</span></span><br><span class="line"><span class="keyword">if</span> (left &lt; <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">length</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">compare</span>(<span class="variable language_">this</span>.<span class="property">data</span>[left], <span class="variable language_">this</span>.<span class="property">data</span>[target])) &#123;</span><br><span class="line">target = left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (right &lt; <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">length</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">compare</span>(<span class="variable language_">this</span>.<span class="property">data</span>[right], <span class="variable language_">this</span>.<span class="property">data</span>[target])) &#123;</span><br><span class="line">target = right;</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">// 如果节点不是父节点，进行父子置换，在置换后的子处继续堆化</span></span><br><span class="line"><span class="keyword">if</span> (target !== index) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">swap</span>(target, index);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">heapify</span>(target);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// 两数置换</span></span><br><span class="line"><span class="title function_">swap</span>(<span class="params">l, r</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> data = <span class="variable language_">this</span>.<span class="property">data</span>;</span><br><span class="line">[data[l], data[r]] = [data[r], data[l]];</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// 添加新元素到数组末尾</span></span><br><span class="line"><span class="title function_">push</span>(<span class="params">item</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">push</span>(item);</span><br><span class="line"><span class="keyword">let</span> index = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> father = ((index + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 确保进来之后数组元素依旧是升序排序</span></span><br><span class="line"><span class="keyword">while</span> (father &gt;= <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">compare</span>(<span class="variable language_">this</span>.<span class="property">data</span>[index], <span class="variable language_">this</span>.<span class="property">data</span>[father])) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">swap</span>(index, father);</span><br><span class="line">index = father;</span><br><span class="line">father = ((index + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// ？？？</span></span><br><span class="line"><span class="title function_">pop</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">swap</span>(<span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">length</span> - <span class="number">1</span>); <span class="comment">// 怎么换了</span></span><br><span class="line"><span class="keyword">let</span> ret = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">pop</span>(); </span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">heapify</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> halveArray = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    <span class="comment">// 按照从小到大排序方式实例化一个队列</span></span><br><span class="line">    <span class="keyword">let</span> pq = <span class="keyword">new</span> <span class="title class_">Heap</span>(nums, <span class="function">(<span class="params">lower, higher</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> lower &gt; higher;</span><br><span class="line">&#125;);</span><br><span class="line">    <span class="keyword">let</span> total = nums.<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, item</span>) =&gt;</span> total + item);</span><br><span class="line">    <span class="keyword">let</span> now = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> times = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (now &lt; total / <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> tmp = pq.<span class="title function_">pop</span>();</span><br><span class="line">        now += tmp / <span class="number">2</span>;</span><br><span class="line">        pq.<span class="title function_">push</span>(tmp / <span class="number">2</span>);</span><br><span class="line">        times++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> times;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">题解链接：<span class="attr">https</span>:<span class="comment">//leetcode.cn/problems/minimum-operations-to-halve-array-sum/solutions/1352690/zhou-sai-t3-by-lianxin-n8pt/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 犀牛书 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>蒜法-二叉树DFS</title>
      <link href="/post/c05d.html"/>
      <url>/post/c05d.html</url>
      
        <content type="html"><![CDATA[<h1 id="979-在二叉树中分配硬币"><a href="#979-在二叉树中分配硬币" class="headerlink" title="979. 在二叉树中分配硬币"></a><a href="https://leetcode.cn/problems/distribute-coins-in-binary-tree/">979. 在二叉树中分配硬币</a></h1><p>邪门二叉树+DFS，根本设计不出来，图解那么巧妙，我直接大口啃菜。<img src="../images/%E8%92%9C%E6%B3%95-DFS%E5%92%8CBFS/%E8%8F%9C%E7%8B%97.gif" alt="菜狗" style="zoom:50%;" /></p><p>题目要求大致：</p><p>给你一个二叉树，每个节点有随机数量个硬币，要求通过父子传递一次一硬币的方式使二叉树内节点上的硬币数量全部分成<code>1</code>。</p><p>先放代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">TreeNode</span>&#125; <span class="variable">root</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> distributeCoins = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">dfs</span>(<span class="params">node</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (node === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> leftMove = <span class="number">0</span>,</span><br><span class="line">            rightMove = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> (node.<span class="property">left</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">            leftMove = <span class="title function_">dfs</span>(node.<span class="property">left</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.<span class="property">right</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">            rightMove = <span class="title function_">dfs</span>(node.<span class="property">right</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sum += <span class="title class_">Math</span>.<span class="title function_">abs</span>(leftMove) + <span class="title class_">Math</span>.<span class="title function_">abs</span>(rightMove)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> nodeMove = leftMove + rightMove + node.<span class="property">val</span> - <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">dfs</span>(root)</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>后顺思路：</p><ul><li>自下而上确定变量<ul><li>叶子结点：自身需要向父节点移动(拿/出)多少次硬币</li><li>每层根节点：左孩子需要从根节点移动多少次硬币，右孩子需要从根节点移动多少次硬币，出来好孩子的事情后自己还需要向父节点移动多少次硬币</li><li>sum值：用来记录每层移动硬币次数和</li></ul></li><li>确定变量之间的关系<ul><li>子节点会向父节点拉扯一下，举个例子：(0)-2-(0)，那么左上入1右上入1，父下出2，剩0，此时父需要上入1。</li><li>以此类推往上排</li></ul></li><li>确定函数实现方式<ul><li>函数递归：深搜啦~</li><li>全局sum记录：放在全局，调用的函数会操作它，程序最后返回</li><li>处理特殊情况：null/边界值(名词乱用了属于是)</li></ul></li></ul><p>想画点图：</p><img src="../images/%E8%92%9C%E6%B3%95-DFS%E5%92%8CBFS/%E4%BA%8C%E5%8F%89%E6%A0%91%E4%BE%8B%E5%AD%90.jpg" alt="二叉树例子" style="zoom: 50%;" /><h1 id="834-树中距离之和"><a href="#834-树中距离之和" class="headerlink" title="834. 树中距离之和"></a><a href="https://leetcode.cn/problems/sum-of-distances-in-tree/">834. 树中距离之和</a></h1><p>笨死我了，两次深搜，还是二叉树，又是啃菜的一天……<img src="../images/%E8%92%9C%E6%B3%95-DFS%E5%92%8CBFS/%E8%8F%9C%E7%8B%97.gif" alt="菜狗" style="zoom:50%;" />可恶不信多看几遍题解多敲一下脑子一点褶皱都不长！</p><p><a href="https://leetcode.cn/problems/sum-of-distances-in-tree/solution/shou-hua-tu-jie-shu-zhong-ju-chi-zhi-he-shu-xing-d/">大佬题解</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">n</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[][]</span>&#125; <span class="variable">edges</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number[]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> sumOfDistancesInTree = <span class="keyword">function</span>(<span class="params">n, edges</span>) &#123;</span><br><span class="line">    <span class="comment">// 邻接关系表</span></span><br><span class="line">    <span class="keyword">const</span> graph = <span class="keyword">new</span> <span class="title class_">Array</span>(n)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; graph.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        graph[i] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> edge <span class="keyword">of</span> edges) &#123;</span><br><span class="line">        <span class="keyword">const</span> [<span class="keyword">from</span>, to] = edge</span><br><span class="line">        graph[<span class="keyword">from</span>].<span class="title function_">push</span>(to)</span><br><span class="line">        graph[to].<span class="title function_">push</span>(<span class="keyword">from</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 节点所在子树的节点个数</span></span><br><span class="line">    <span class="keyword">let</span> nodeNum = <span class="keyword">new</span> <span class="title class_">Array</span>(n).<span class="title function_">fill</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="comment">// 节点到其所在子树节点的距离和 节点到其他所有节点的距离和</span></span><br><span class="line">    <span class="keyword">let</span> distNum = <span class="keyword">new</span> <span class="title class_">Array</span>(n).<span class="title function_">fill</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 子节点距离-后序-递归</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">postOrder</span> = (<span class="params">root, parent</span>) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 该节点的所有邻居节点</span></span><br><span class="line">        <span class="keyword">const</span> neighbors = graph[root]</span><br><span class="line">        <span class="comment">// 该节点每个子节点递归</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> neighbor <span class="keyword">of</span> neighbors) &#123;</span><br><span class="line">            <span class="keyword">if</span> (neighbor === parent) &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">postOrder</span>(neighbor, root)</span><br><span class="line"></span><br><span class="line">            nodeNum[root] += nodeNum[neighbor]</span><br><span class="line">            distNum[root] += distNum[neighbor] + nodeNum[neighbor]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 节点先序-递归</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">preOrder</span> = (<span class="params">root, parent</span>) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 该节点的所有邻居节点</span></span><br><span class="line">        <span class="keyword">const</span> neighbors = graph[root]</span><br><span class="line">        <span class="comment">// 该节点每个子节点递归</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> neighbor <span class="keyword">of</span> neighbors) &#123;</span><br><span class="line">            <span class="keyword">if</span> (neighbor === parent) &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            distNum[neighbor] = distNum[root] - nodeNum[neighbor] + (n - nodeNum[neighbor])</span><br><span class="line">            <span class="title function_">preOrder</span>(neighbor, root)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">postOrder</span>(<span class="number">0</span>, -<span class="number">1</span>)</span><br><span class="line">    <span class="title function_">preOrder</span>(<span class="number">0</span>, -<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> distNum</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 蒜法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DFS </tag>
            
            <tag> 二叉树 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蒜法-数字各种和</title>
      <link href="/post/a24d.html"/>
      <url>/post/a24d.html</url>
      
        <content type="html"><![CDATA[<p>先开个头，今天和前天的题涉及到了数的加和处理。</p><p>打算再整一个数字加和系列算法题汇总，前提是我的股票算法之旅能够善终（第四个卡壳了）</p>]]></content>
      
      
      <categories>
          
          <category> 蒜法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>蒜法-买卖股票</title>
      <link href="/post/e4f3.html"/>
      <url>/post/e4f3.html</url>
      
        <content type="html"><![CDATA[<h1 id="买卖股票"><a href="#买卖股票" class="headerlink" title="买卖股票"></a>买卖股票</h1><p>最近做了一个动规算法题（1911），发现有一个买卖股票系列很值得循序渐进地上手动规，于是做了做 汇总了一下。</p><blockquote><p>LeeCode教你学炒股： </p><p>1.<a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/">买卖股票的最佳时机</a> </p><p>2.<a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/">买卖股票的最佳时机 II</a> </p><p>3.<a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii/">买卖股票的最佳时机 III</a> </p><p>4.<a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iv/">买卖股票的最佳时机 IV</a> </p><p>5.<a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/">买卖股票的最佳时机含手续费</a> </p><p>6.<a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/">最佳买卖股票时机含冷冻期</a></p><p>最后做一下1911，会发现简单好多</p></blockquote><h2 id="121-买卖股票的最佳时机"><a href="#121-买卖股票的最佳时机" class="headerlink" title="121. 买卖股票的最佳时机"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/">121. 买卖股票的最佳时机</a></h2><p>只有一次购入和一次出售，找到一个最大利润方案。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">prices</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> now = -prices[<span class="number">0</span>], <span class="comment">// 假设如果第一天买入，手里还有这么多钱（负成本）</span></span><br><span class="line">    max = <span class="number">0</span> <span class="comment">// 假设第一天买了接着卖出，利润为0（利润初始值）</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = prices.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        now = <span class="title class_">Math</span>.<span class="title function_">max</span>(now, -prices[i]) <span class="comment">// 目前手里还有多少钱  其实是找一个最低成本</span></span><br><span class="line">        max = <span class="title class_">Math</span>.<span class="title function_">max</span>(max, prices[i] + now) <span class="comment">// 最大利润  找一个最大的价钱，减去最小成本</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="122-买卖股票的最佳时机-II"><a href="#122-买卖股票的最佳时机-II" class="headerlink" title="122. 买卖股票的最佳时机 II"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/">122. 买卖股票的最佳时机 II</a></h2><p>可以有多次购入和售出，没有次数限制，找到一个最大利润和。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">prices</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;    </span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span>,</span><br><span class="line">        cost = -prices[<span class="number">0</span>] <span class="comment">// 负利润</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = prices.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="comment">// 实在是难设计，实在是妙啊！</span></span><br><span class="line">        max = <span class="title class_">Math</span>.<span class="title function_">max</span>(max, prices[i] + cost) <span class="comment">// 关系1：利润 = 当前价格 - 成本</span></span><br><span class="line">        cost = <span class="title class_">Math</span>.<span class="title function_">max</span>(cost, max - prices[i]) <span class="comment">// 关系2：成本 = 当前价格 - 利润</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> max</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="123-买卖股票的最佳时机-III"><a href="#123-买卖股票的最佳时机-III" class="headerlink" title="123. 买卖股票的最佳时机 III"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/">123. 买卖股票的最佳时机 III</a></h2><p>最多两次购入和售出，直到一个最大利润和。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">prices</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">    <span class="comment">// 分析状态 - 啥都没买、买了一股、卖了一股、没有操作、买了第二股、卖了第二股</span></span><br><span class="line">    <span class="comment">// 根据状态分析变量 - 买一的钱、卖一的钱、买二的钱、卖二的钱</span></span><br><span class="line">    <span class="comment">// 确定边界值↓全都当做第一次就买入卖出</span></span><br><span class="line">    <span class="keyword">let</span> buy1 = -prices[<span class="number">0</span>], </span><br><span class="line">        sell1 = <span class="number">0</span>, </span><br><span class="line">        buy2 = -prices[<span class="number">0</span>], </span><br><span class="line">        sell2 = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 枚举</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = prices.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="comment">// 根据每个变量的公式进行枚举</span></span><br><span class="line">        buy1 = <span class="title class_">Math</span>.<span class="title function_">max</span>(buy1, -prices[i]) <span class="comment">// 最少的买入钱</span></span><br><span class="line">        sell1 = <span class="title class_">Math</span>.<span class="title function_">max</span>(sell1, buy1 + prices[i]) <span class="comment">// 最多的卖出钱 - 最少的买入钱</span></span><br><span class="line">        buy2 = <span class="title class_">Math</span>.<span class="title function_">max</span>(buy2, sell1 - prices[i]) <span class="comment">// 最多的买二之后剩下的钱</span></span><br><span class="line">        sell2 = <span class="title class_">Math</span>.<span class="title function_">max</span>(sell2, buy2 + prices[i]) <span class="comment">// 最多的卖出钱 + 剩下的钱</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sell2</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="188-买卖股票的最佳时机-IV"><a href="#188-买卖股票的最佳时机-IV" class="headerlink" title="188. 买卖股票的最佳时机 IV"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/">188. 买卖股票的最佳时机 IV</a></h2><p>先扔一端通不过的代码，我好菜啊</p><p><img src="../images/%E8%92%9C%E6%B3%95-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8/image-20230711203442875.png" alt="image-20230711203442875"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">k</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">prices</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">k, prices</span>) &#123;</span><br><span class="line">    <span class="comment">// 有一个不受次数限制的情况</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">hasNoLimit</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> cost = -nums[<span class="number">0</span>],</span><br><span class="line">            max = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = nums.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">            cost = <span class="title class_">Math</span>.<span class="title function_">max</span>(cost, max - nums[i])</span><br><span class="line">            max = <span class="title class_">Math</span>.<span class="title function_">max</span>(max, cost + nums[i])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 去掉一个特殊情况</span></span><br><span class="line">    <span class="keyword">if</span> (!prices.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 去掉另一个情况</span></span><br><span class="line">    <span class="keyword">if</span>(k &gt;= prices.<span class="property">length</span> / <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">hasNoLimit</span>(prices)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开一个长度为k的变量二维数组</span></span><br><span class="line">    <span class="keyword">let</span> dp = <span class="keyword">new</span> <span class="title class_">Array</span>(k).<span class="title function_">fill</span>(<span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">2</span>).<span class="title function_">fill</span>(<span class="number">0</span>))</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = -prices[<span class="number">0</span>]</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>, len = prices.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; k; j++) &#123;</span><br><span class="line">            dp[j][<span class="number">0</span>] = <span class="title class_">Math</span>.<span class="title function_">max</span>(dp[j - <span class="number">1</span>][<span class="number">0</span>], dp[j - <span class="number">1</span>][<span class="number">1</span>] - prices[i])</span><br><span class="line">            dp[j][<span class="number">1</span>] = <span class="title class_">Math</span>.<span class="title function_">max</span>(dp[j - <span class="number">1</span>][<span class="number">1</span>], dp[j][<span class="number">0</span>] + prices[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[k - <span class="number">1</span>][<span class="number">1</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>算了一遍测试用例，似乎是次数把控的问题。</p><p>受不了了，理应我说理应，无论多少次，都是那么个状态表达式，但是就不行，但是我找不出错来！然后没辙了分情况吧，还有有一些臭臭长长的测试用例通不过！！！！！啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊！！！！！</p><p><img src="../images/%E8%92%9C%E6%B3%95-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8/image-20230711212016410.png" alt="image-20230711212016410"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">k</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">prices</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">k, prices</span>) &#123;</span><br><span class="line">    <span class="comment">// 有一个不受次数限制的情况</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">hasNoLimit</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> cost = -nums[<span class="number">0</span>],</span><br><span class="line">            max = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = nums.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">            cost = <span class="title class_">Math</span>.<span class="title function_">max</span>(cost, max - nums[i])</span><br><span class="line">            max = <span class="title class_">Math</span>.<span class="title function_">max</span>(max, cost + nums[i])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 有一个仅限两次的情况</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">hasOnlyTwo</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> buy1 = -nums[<span class="number">0</span>], buy2 = -nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">let</span> sell1 = <span class="number">0</span>, sell2 = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = nums.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">            buy1 = <span class="title class_">Math</span>.<span class="title function_">max</span>(buy1, -nums[i])</span><br><span class="line">            sell1 = <span class="title class_">Math</span>.<span class="title function_">max</span>(sell1, buy1 + nums[i])</span><br><span class="line">            buy2 = <span class="title class_">Math</span>.<span class="title function_">max</span>(buy2, sell1 - nums[i])</span><br><span class="line">            sell2 = <span class="title class_">Math</span>.<span class="title function_">max</span>(sell2, buy2 + nums[i])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell2</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 有一个仅限一次的情况</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">hasOnlyOne</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> cost = -nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">let</span> max = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = nums.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">            cost = <span class="title class_">Math</span>.<span class="title function_">max</span>(cost, -nums[i])</span><br><span class="line">            max = <span class="title class_">Math</span>.<span class="title function_">max</span>(max, nums[i] + cost)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 空数组，排除</span></span><br><span class="line">    <span class="keyword">if</span> (!prices.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 无限次，换方法</span></span><br><span class="line">    <span class="keyword">if</span>(k &gt;= prices.<span class="property">length</span> / <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">hasNoLimit</span>(prices)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 仅限一次，换方法</span></span><br><span class="line">    <span class="keyword">if</span> (k === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">hasOnlyOne</span>(prices)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 仅限两次，换方法</span></span><br><span class="line">    <span class="keyword">if</span> (k === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">hasOnlyTwo</span>(prices)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开一个长度为k的变量二维数组</span></span><br><span class="line">    <span class="keyword">let</span> dp = <span class="keyword">new</span> <span class="title class_">Array</span>(k + <span class="number">1</span>).<span class="title function_">fill</span>([-prices[<span class="number">0</span>], <span class="number">0</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = prices.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= k; j++) &#123;</span><br><span class="line">            dp[j][<span class="number">0</span>] = <span class="title class_">Math</span>.<span class="title function_">max</span>(dp[j - <span class="number">1</span>][<span class="number">0</span>], dp[j - <span class="number">1</span>][<span class="number">1</span>] - prices[i])</span><br><span class="line">            dp[j][<span class="number">1</span>] = <span class="title class_">Math</span>.<span class="title function_">max</span>(dp[j - <span class="number">1</span>][<span class="number">1</span>], dp[j][<span class="number">0</span>] + prices[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[k - <span class="number">1</span>][<span class="number">1</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>明天再看看，太难顶了。</p><p>最终看了一眼题解，果然漏了一步↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">k</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">prices</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">k, prices</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = prices.<span class="property">length</span></span><br><span class="line">    k = <span class="title class_">Math</span>.<span class="title function_">min</span>(k, <span class="title class_">Math</span>.<span class="title function_">floor</span>(len / <span class="number">2</span>)) <span class="comment">// k &gt;len/2时，实际上是不限次数的，为什么呢？自己想！</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> buy = <span class="keyword">new</span> <span class="title class_">Array</span>(len).<span class="title function_">fill</span>(<span class="number">0</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">Array</span>(k + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>)), <span class="comment">// 注意这种初始化写法</span></span><br><span class="line">        sell = <span class="keyword">new</span> <span class="title class_">Array</span>(len).<span class="title function_">fill</span>(<span class="number">0</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">Array</span>(k + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    buy[<span class="number">0</span>][<span class="number">0</span>] = -prices[<span class="number">0</span>]</span><br><span class="line">    sell[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= k; i++) &#123; <span class="comment">// 给所有次数的buy和sell都初始化一下</span></span><br><span class="line">        buy[<span class="number">0</span>][i] = -<span class="title class_">Infinity</span></span><br><span class="line">        sell[<span class="number">0</span>][i] = -<span class="title class_">Infinity</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        buy[i][<span class="number">0</span>] = <span class="title class_">Math</span>.<span class="title function_">max</span>(buy[i - <span class="number">1</span>][<span class="number">0</span>], sell[i - <span class="number">1</span>][<span class="number">0</span>] - prices[i])</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= k; j++) &#123;</span><br><span class="line">            buy[i][j] = <span class="title class_">Math</span>.<span class="title function_">max</span>(buy[i - <span class="number">1</span>][j], sell[i - <span class="number">1</span>][j] - prices[i])</span><br><span class="line">            sell[i][j] = <span class="title class_">Math</span>.<span class="title function_">max</span>(sell[i - <span class="number">1</span>][j], buy[i - <span class="number">1</span>][j - <span class="number">1</span>] + prices[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(...sell[len - <span class="number">1</span>])</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="714-买卖股票的最佳时机含手续费"><a href="#714-买卖股票的最佳时机含手续费" class="headerlink" title="714. 买卖股票的最佳时机含手续费"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/">714. 买卖股票的最佳时机含手续费</a></h2><p>无限次，但是每次售出要交手续费。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">prices</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">fee</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices, fee</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> cost = -prices[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = prices.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        cost = <span class="title class_">Math</span>.<span class="title function_">max</span>(cost, max - prices[i])</span><br><span class="line">        max = <span class="title class_">Math</span>.<span class="title function_">max</span>(max, cost + prices[i] - fee)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="309-最佳买卖股票时机含冷冻期"><a href="#309-最佳买卖股票时机含冷冻期" class="headerlink" title="309. 最佳买卖股票时机含冷冻期"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/">309. 最佳买卖股票时机含冷冻期</a></h2><p>买卖不限次数，但是卖后的一天不能接着买，美其名曰“冷冻期”。</p><h3 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h3><p>状态：手里攥着股票，手里没攥股票</p><p>状态情况分析：</p><ul><li>手里攥着股票：今天刚买；昨天买了今天啥事没干</li><li>手里没攥股票：今天刚卖，昨天卖了今天搁这冷冻</li></ul><p>状态变量分析：</p><ul><li>手里剩的钱：昨天计算出来剩的钱/今天就买计算出来剩的钱（买前的钱应该是前天的）</li><li>卖出之后挣的钱：昨天计算出来挣的钱/今天就卖计算出来挣的钱（卖前的钱应该是截止到昨天剩的）</li></ul><p>状态转移表达式：</p><p><code>剩后 = max(昨日剩后, 前日挣后 - 价钱)</code></p><p><code>挣后 = max(昨日挣后, 昨日剩后 + 价钱)</code></p><p>临界值：</p><p>涉及到跨一天，so</p><ul><li>初始天：当天买当天卖 剩后=-价钱 挣后=0</li><li>第二天：与初始天的两变量比出较大值  剩后=-价钱(昨天不如不买，今天买)/昨天的剩后  挣后=(今天啥也不干)0/(不如今天卖)价钱+昨日剩</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">prices</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = prices.<span class="property">length</span></span><br><span class="line">    <span class="keyword">if</span>(len &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> dp = <span class="keyword">new</span> <span class="title class_">Array</span>(len) </span><br><span class="line">    dp[<span class="number">0</span>] = [-prices[<span class="number">0</span>], <span class="number">0</span>]</span><br><span class="line">    dp[<span class="number">1</span>] = [<span class="title class_">Math</span>.<span class="title function_">max</span>(dp[<span class="number">0</span>][<span class="number">0</span>], -prices[<span class="number">1</span>]), <span class="title class_">Math</span>.<span class="title function_">max</span>(dp[<span class="number">0</span>][<span class="number">1</span>], dp[<span class="number">0</span>][<span class="number">0</span>] + prices[<span class="number">1</span>])]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt; len; i++) &#123;</span><br><span class="line">        dp[i] = [<span class="title class_">Math</span>.<span class="title function_">max</span>(dp[i-<span class="number">1</span>][<span class="number">0</span>], dp[i-<span class="number">2</span>][<span class="number">1</span>] - prices[i]), <span class="title class_">Math</span>.<span class="title function_">max</span>(dp[i-<span class="number">1</span>][<span class="number">1</span>], dp[i-<span class="number">1</span>][<span class="number">0</span>] + prices[i])]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[len - <span class="number">1</span>][<span class="number">1</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>说真的，一复杂了我就设计不出来，没办法准确找到变量之间的关系</p><h3 id="状态机"><a href="#状态机" class="headerlink" title="状态机"></a>状态机</h3><p>题解里看到的一个新方法↑↓</p><p>状态机四要素：状态、条件、动作、转换</p><p>该题状态机图解：</p><img src="../images/%E8%92%9C%E6%B3%95-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8/image-20230712152616080.png" alt="image-20230712152616080" style="zoom: 67%;" /><p>定义三个关键变量：当前手中持有的钱、当前卖出后持有的钱、一次买卖结束后持有的钱。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">prices</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> hold = -prices[<span class="number">0</span>],</span><br><span class="line">        sold = <span class="number">0</span>,</span><br><span class="line">        rest = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = prices.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> preHold = hold,</span><br><span class="line">            preSold = sold</span><br><span class="line">        hold = <span class="title class_">Math</span>.<span class="title function_">max</span>(preHold, rest - prices[i])</span><br><span class="line">        sold = <span class="title class_">Math</span>.<span class="title function_">max</span>(preSold, preHold + prices[i])</span><br><span class="line">        rest = <span class="title class_">Math</span>.<span class="title function_">max</span>(preSold, rest)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(rest, sold)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="拓展巩固"><a href="#拓展巩固" class="headerlink" title="拓展巩固"></a>拓展巩固</h1><h2 id="1911-最大子序列交替和"><a href="#1911-最大子序列交替和" class="headerlink" title="1911. 最大子序列交替和"></a><a href="https://leetcode.cn/problems/maximum-alternating-subsequence-sum/">1911. 最大子序列交替和</a></h2><p>状态：加了，减了</p><p>状态关系：加了该减，减了该加</p><p>特殊：仅需奇数个数字，因为加后减就变小了</p><p>状态方程：<code>和 = 减后的和 + 新数</code>    <code>减后的和 = 和 - 新数</code></p><p>临界值：<code>和 = 第一个数</code>    <code>减后的和 = 0 (第一个数+-)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxAlternatingSum = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = nums[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">let</span> dec = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 奇数个数就够用，因为根本不可能后面再减一个</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = nums.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        ans  = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans, dec + nums[i]) <span class="comment">// 减后面紧接着是加，看看哪个加后更大</span></span><br><span class="line">        dec = <span class="title class_">Math</span>.<span class="title function_">max</span>(dec, ans - nums[i]) <span class="comment">// 加后面紧接着是减，看看哪个减后更大</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="931-下降路径最小和"><a href="#931-下降路径最小和" class="headerlink" title="931. 下降路径最小和"></a><a href="https://leetcode.cn/problems/minimum-falling-path-sum/">931. 下降路径最小和</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[][]</span>&#125; <span class="variable">matrix</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> minFallingPathSum = <span class="keyword">function</span>(<span class="params">matrix</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> col = matrix[<span class="number">0</span>].<span class="property">length</span></span><br><span class="line">    <span class="keyword">const</span> row = matrix.<span class="property">length</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; row; i++) &#123;</span><br><span class="line">        matrix[i][<span class="number">0</span>] += <span class="title class_">Math</span>.<span class="title function_">min</span>(matrix[i-<span class="number">1</span>][<span class="number">0</span>], matrix[i-<span class="number">1</span>][<span class="number">1</span>])</span><br><span class="line">        matrix[i][col-<span class="number">1</span>] += <span class="title class_">Math</span>.<span class="title function_">min</span>(matrix[i-<span class="number">1</span>][col-<span class="number">1</span>], matrix[i-<span class="number">1</span>][col-<span class="number">2</span>])</span><br><span class="line">        <span class="keyword">if</span> (col &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; col - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            matrix[i][j] += <span class="title class_">Math</span>.<span class="title function_">min</span>(matrix[i-<span class="number">1</span>][j-<span class="number">1</span>], matrix[i-<span class="number">1</span>][j], matrix[i-<span class="number">1</span>][j+<span class="number">1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">min</span>(...matrix[row - <span class="number">1</span>])</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 蒜法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动规 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>啃犀牛书——浏览器中的JS</title>
      <link href="/post/9cd6.html"/>
      <url>/post/9cd6.html</url>
      
        <content type="html"><![CDATA[<p>犀牛书这里太杂了，我有点跟不上，先去看红宝书理顺一下了。</p><p>(面了很多次试，和面试官们的交谈中发现这一块蛮重要的，特来回看(实习时间这个事情真的难以在招聘者和应聘者间达成完美一致，真难受))</p><h1 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h1><p>browser object model 浏览器对象模型，提供了与网页无关的浏览器功能对象，这些是可以与浏览器进行交互的对象。</p><p>BOM对象有很多↓</p><h2 id="window"><a href="#window" class="headerlink" title="window"></a>window</h2><p>window对象是BOM的核心，表示浏览器的实例。window对象被复用为ES中的Global对象，又是浏览器窗口中的JS接口。（强烈建议自己F12输出看一下）</p><h3 id="Global作用域"><a href="#Global作用域" class="headerlink" title="Global作用域"></a>Global作用域</h3><p>通过var声明的所有全局变量和函数都会变成window对象的属性和方法。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">saySth</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;Sth&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">saySth</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> newVal = <span class="variable language_">window</span>.<span class="property">oldVal</span> <span class="comment">// undefined 虽然没有但是undefined</span></span><br></pre></td></tr></table></figure><h3 id="窗口关系"><a href="#窗口关系" class="headerlink" title="窗口关系"></a>窗口关系</h3><p>对象<code>top</code>始终指向最上层窗口，<code>parent</code>指向当前窗口的父窗口，<code>self</code>始终指向window(两者是同一个对象)。</p><p>多个窗口window对象可串联。</p><h3 id="窗口位置与像素比"><a href="#窗口位置与像素比" class="headerlink" title="窗口位置与像素比"></a>窗口位置与像素比</h3><p>window对象的位置可以属性和方法来确定。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">screenTop <span class="comment">// 窗口相对于屏幕左侧和顶部的位置</span></span><br><span class="line">screenLeft <span class="comment">// 窗口相对于屏幕顶部的位置</span></span><br><span class="line"><span class="title function_">moveTo</span>(x, y) <span class="comment">// 移动到(x, y)处</span></span><br><span class="line"><span class="title function_">moveBy</span>(x, y) <span class="comment">// 向右移动x向下移动y(负值就是反方向的)</span></span><br><span class="line">devicePixelRatio <span class="comment">// 举例：分辨率此部分1920*1080转换到640*320的设备，此值为3</span></span><br></pre></td></tr></table></figure><p>像素比：一个奇异的角度0.0213°，屏幕距离人眼一臂长时CSS像素越1/96英寸。</p><p>物理分辨率：硬件固有的分辨率</p><p>逻辑分辨率：算法得出的分辨率，是肉眼可以感知的分辨率，一般比物理分辨率小</p><h3 id="窗口大小"><a href="#窗口大小" class="headerlink" title="窗口大小"></a>窗口大小</h3><p>确定浏览器窗口大小是一个基本操作。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pageWidth = <span class="variable language_">window</span>.<span class="property">innerWidth</span>, </span><br><span class="line">pageHeight = <span class="variable language_">window</span>.<span class="property">innerHeight</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> pageWidth !== <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">compateMode</span> === <span class="string">&#x27;CSSCompat&#x27;</span>) &#123;</span><br><span class="line">        pageWidth = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span></span><br><span class="line">        pageHeight = <span class="variable language_">document</span>.<span class="property">documentElment</span>.<span class="property">clientHeight</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pageWidth = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span></span><br><span class="line">        pageHeight = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>窗口缩放</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">resizeTo</span>(<span class="number">100</span>, <span class="number">100</span>) <span class="comment">// 缩放到100*100</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">resizeBy</span>(<span class="number">100</span>, <span class="number">50</span>) <span class="comment">// 缩放+100+50 =&gt; 200*150</span></span><br></pre></td></tr></table></figure><h3 id="视口位置"><a href="#视口位置" class="headerlink" title="视口位置"></a>视口位置</h3><p>移动窗口</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollBy</span>(<span class="number">40</span>, <span class="number">100</span>) <span class="comment">// →40, ↓100</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="number">0</span>) <span class="comment">// =&gt; (0, 0)</span></span><br><span class="line"><span class="comment">// ScrollToOptions字典写法</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(&#123; <span class="comment">// 顺滑移动到(100, 100)</span></span><br><span class="line">    <span class="attr">left</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">top</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">behavior</span>: <span class="string">&#x27;smooth&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="导航与打开新窗口"><a href="#导航与打开新窗口" class="headerlink" title="导航与打开新窗口"></a>导航与打开新窗口</h3><p>我们可以这样弹出窗口：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="variable constant_">URL</span>, 窗口名, 特性字符串)</span><br><span class="line"><span class="comment">// URL：目的窗口地址</span></span><br><span class="line"><span class="comment">// 窗口名：如果第二参数不是已有窗口，则打开新窗口</span></span><br><span class="line"><span class="comment">// 特性字符串：用于指定新窗口的配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 特性用的时候去搜吧,这里提供几个比较基本的</span></span><br><span class="line">resizable 是否可以拖动改变新窗口大小</span><br><span class="line">top/left</span><br><span class="line">height/width</span><br><span class="line"><span class="comment">// 基本用法如下：</span></span><br><span class="line"><span class="keyword">let</span> wroxWin = <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&#x27;http://wrox.com&#x27;</span>, </span><br><span class="line">           <span class="string">&#x27;wroxWindow&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;height=400, width=400, top=10, left=10, resizable=yes&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="variable language_">window</span> === wroxWin.<span class="property">opener</span>) <span class="comment">// =&gt; true 这个属性可以查看这个窗口的打开者</span></span><br><span class="line"></span><br><span class="line">wroxWin.<span class="property">opener</span> = <span class="literal">null</span> <span class="comment">// 将打开者设置为空，使得标签独立通信，切断连接，无法恢复</span></span><br></pre></td></tr></table></figure><p>我们需要一些安全限制：弹出窗口存在一些安全隐患，比如广告之类的。因此浏览器在优化的时候会对其做一些限制。</p><p>弹窗屏蔽程序：浏览器内置屏蔽弹窗的程序↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检测弹窗是否被屏蔽</span></span><br><span class="line"><span class="keyword">let</span> blocked = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> wroxWin = <span class="variable language_">window</span>.<span class="title function_">open</span>(...)</span><br><span class="line">    <span class="keyword">if</span> (wroxWin === <span class="literal">null</span>) &#123;</span><br><span class="line">        blocked = <span class="literal">true</span></span><br><span class="line">    &#125;                  </span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    blocked = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (blocked) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;nono&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h3><p>setTimeout()：一定时间后执行代码</p><p>setInterval() ：每隔一段时间执行代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本使用方式</span></span><br><span class="line"><span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">alert</span>(<span class="string">&#x27;hh&#x27;</span>), <span class="number">1000</span>)</span><br><span class="line"><span class="built_in">clearTimeout</span>(timer)</span><br><span class="line"></span><br><span class="line">timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> <span class="title function_">alert</span>(<span class="string">&#x27;hh&#x27;</span>), <span class="number">1000</span>)</span><br><span class="line"><span class="built_in">clearInterval</span>(timer)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 另一种使用方式，可对比查看</span></span><br><span class="line"><span class="comment">// 定时器</span></span><br><span class="line"><span class="keyword">let</span> num = <span class="number">0</span>, max = <span class="number">10</span>, timer = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> incrementNumber = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    num ++</span><br><span class="line">    <span class="keyword">if</span> (num &gt;= max) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;done&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">timer = <span class="built_in">setInterval</span>(incrementNumber, <span class="number">500</span>)</span><br><span class="line"><span class="comment">// 延时器</span></span><br><span class="line"><span class="keyword">let</span> num = <span class="number">0</span>, max = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> incrementNumber = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    num ++</span><br><span class="line">    <span class="keyword">if</span> (num &gt;= max) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;done&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">setTimout</span>(incrementNumber, <span class="number">500</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(incrementNumber, <span class="number">500</span>)</span><br></pre></td></tr></table></figure><h3 id="系统对话框"><a href="#系统对话框" class="headerlink" title="系统对话框"></a>系统对话框</h3><p>alert confirm prompt 简单用法示例↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;haha&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> confirm = <span class="title function_">confirm</span>(<span class="string">&#x27;确定？&#x27;</span>) <span class="comment">// true/false</span></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">prompt</span>(<span class="string">&#x27;吃啥？&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示打印对话框</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">print</span>()</span><br><span class="line"><span class="comment">// 显示查找对话框</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">find</span>()</span><br></pre></td></tr></table></figure><h2 id="location"><a href="#location" class="headerlink" title="location"></a>location</h2><p>location对象是一个非常有用的BOM对象。同样可以输出一下看看。</p><p>以下是书中列出的一些属性值，具体再需要什么去MDN自己查</p><p><img src="../images/%E5%95%83%E7%8A%80%E7%89%9B%E4%B9%A6%E2%80%94%E2%80%94%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84JS/image-20230709201436228.png" alt="image-20230709201436228"></p><h3 id="查询字符串"><a href="#查询字符串" class="headerlink" title="查询字符串"></a>查询字符串</h3><h4 id="解析查询字符串"><a href="#解析查询字符串" class="headerlink" title="解析查询字符串"></a>解析查询字符串</h4><p>解析查询字符串，转换为查询属性对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> getArgs = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> qs = location.<span class="property">search</span>.<span class="property">length</span> &gt; <span class="number">0</span> ? location.<span class="property">search</span> : <span class="string">&#x27;&#x27;</span> <span class="comment">// 获取查询字符串</span></span><br><span class="line">    <span class="keyword">let</span> args = &#123;&#125; <span class="comment">// 开辟空对象</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> qs.<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>).<span class="title function_">map</span>(<span class="function"><span class="params">val</span> =&gt;</span> val.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>))) &#123; <span class="comment">// 将每个属性和属性值拆分后成数组</span></span><br><span class="line">        <span class="keyword">let</span> name = <span class="built_in">decodeURIComponent</span>(item[<span class="number">0</span>]) <span class="comment">// 键</span></span><br><span class="line">        <span class="keyword">let</span> value = <span class="built_in">decodeURIComponent</span>(item[<span class="number">1</span>]) <span class="comment">// 值</span></span><br><span class="line">        <span class="keyword">if</span> (name.<span class="property">length</span>) &#123; <span class="comment">// 存入查询属性对象中</span></span><br><span class="line">            args[name] = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> args <span class="comment">// 返回处理好的对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="URLSearchParams"><a href="#URLSearchParams" class="headerlink" title="URLSearchParams"></a>URLSearchParams</h4><p>这个接口提供了一组可以简化上述操作的api</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> qs = location.<span class="property">search</span></span><br><span class="line"><span class="keyword">let</span> searchParams = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(qs)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主要api</span></span><br><span class="line"><span class="title function_">alert</span>(searchParams.<span class="property">toString</span>) <span class="comment">// =&gt; ?后面的内容</span></span><br><span class="line">searchParams.<span class="title function_">has</span>(<span class="string">&#x27;q&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">searchParams.<span class="title function_">get</span>(<span class="string">&#x27;q&#x27;</span>) <span class="comment">// ...</span></span><br><span class="line">searchParams.<span class="title function_">set</span>(<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;haha&#x27;</span>) <span class="comment">// 看这一个个的小方法，map起来了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 此外，大多支持该接口的浏览器视其为可迭代对象</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> searchParams) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [&quot;q&quot;,&quot;javascript&quot;] 这输出，能看出来这个数据类型是类似于map的</span></span><br><span class="line"><span class="comment">// [&quot;num&quot;,&quot;10&quot;]</span></span><br></pre></td></tr></table></figure><h3 id="操作地址"><a href="#操作地址" class="headerlink" title="操作地址"></a>操作地址</h3><p>通过修改location对象修改地址。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">location.<span class="title function_">assign</span>(<span class="string">&#x27;url地址&#x27;</span>) <span class="comment">// 显示调用</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span> = <span class="string">&#x27;url地址&#x27;</span> <span class="comment">// 诶嘿</span></span><br><span class="line">location.<span class="property">href</span> = <span class="string">&#x27;url地址&#x27;</span> <span class="comment">// 最为常用！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 另外，location这些属性被更改的时候也会修改当前的URL地址，并且重新加载</span></span><br><span class="line"><span class="comment">// 把 URL 修改为 http://www.wrox.com/WileyCDA/?q=javascript</span></span><br><span class="line">location.<span class="property">search</span> = <span class="string">&quot;?q=javascript&quot;</span>;</span><br><span class="line"><span class="comment">// 把 URL 修改为 http://www.somewhere.com/WileyCDA/</span></span><br><span class="line">location.<span class="property">hostname</span> = <span class="string">&quot;www.somewhere.com&quot;</span>;</span><br><span class="line"><span class="comment">// 把 URL 修改为 http://www.somewhere.com/mydir/</span></span><br><span class="line">location.<span class="property">pathname</span> = <span class="string">&quot;mydir&quot;</span>;</span><br><span class="line"><span class="comment">// 把 URL 修改为 http://www.somewhere.com:8080/WileyCDA/</span></span><br><span class="line">location.<span class="property">port</span> = <span class="number">8080</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// hash修改后页面不会重新加载</span></span><br><span class="line"><span class="comment">// 把 URL 修改为 http://www.wrox.com/WileyCDA/#section1</span></span><br><span class="line">location.<span class="property">hash</span> = <span class="string">&quot;#section1&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一种不会添加一条历史记录的更改URL方法</span></span><br><span class="line">location.<span class="title function_">replace</span>(<span class="string">&#x27;url地址&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一种通过重新加载页面的方式修改url方法</span></span><br><span class="line">location.<span class="title function_">reload</span>() <span class="comment">// 不传参数默认先从缓存里找</span></span><br><span class="line">location.<span class="title function_">reload</span>(<span class="literal">true</span>) <span class="comment">// 强制从服务器找然后刷新</span></span><br></pre></td></tr></table></figure><h2 id="navigator"><a href="#navigator" class="headerlink" title="navigator"></a>navigator</h2><p>该对象是客户端标识浏览器的标准。（比较重要的一个是navigator.userAgent）</p><p>该对象提供一些属性和方法，通过这些属性方法，向我们传递浏览器信息↓，方便我们确定浏览器类型。</p><img src="../images/%E5%95%83%E7%8A%80%E7%89%9B%E4%B9%A6%E2%80%94%E2%80%94%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84JS/image-20230710193832928.png" alt="image-20230710193832928" style="zoom:67%;" /><img src="../images/%E5%95%83%E7%8A%80%E7%89%9B%E4%B9%A6%E2%80%94%E2%80%94%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84JS/image-20230710193852246.png" alt="image-20230710193852246" style="zoom:67%;" /><h3 id="检测插件"><a href="#检测插件" class="headerlink" title="检测插件"></a>检测插件</h3><p>自己去浏览器输出看看</p><p><img src="../images/%E5%95%83%E7%8A%80%E7%89%9B%E4%B9%A6%E2%80%94%E2%80%94%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84JS/image-20230710203743912.png" alt="image-20230710203743912"></p><h3 id="注册处理程序"><a href="#注册处理程序" class="headerlink" title="注册处理程序"></a>注册处理程序</h3><p>把一个网站注册为处理某种特定类型信息应用程序  </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigator.<span class="title function_">registerProtocolHandler</span>(协议名, <span class="variable constant_">URL</span>)</span><br></pre></td></tr></table></figure><h2 id="screen"><a href="#screen" class="headerlink" title="screen"></a>screen</h2><p>该对象展示的是客户端的能力信息。</p><p><img src="../images/%E5%95%83%E7%8A%80%E7%89%9B%E4%B9%A6%E2%80%94%E2%80%94%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84JS/image-20230710205113043.png" alt="image-20230710205113043"></p><h2 id="history"><a href="#history" class="headerlink" title="history"></a>history</h2><p>这个对象虽然不会向用户暴露历史记录中URL地址，但是可以通过调用方法使得前进/回退等。</p><h3 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">history.<span class="title function_">go</span>(-<span class="number">1</span>) <span class="comment">// 回退</span></span><br><span class="line">history.<span class="title function_">go</span>(<span class="number">1</span>) <span class="comment">// 前进</span></span><br><span class="line">history.<span class="title function_">go</span>(<span class="number">2</span>) <span class="comment">// 前进两次</span></span><br><span class="line">history.<span class="title function_">go</span>(<span class="string">&#x27;wrox.com&#x27;</span>) <span class="comment">// 跳转到最近的wrox.com页面</span></span><br><span class="line">↓</span><br><span class="line">history.<span class="title function_">back</span>() <span class="comment">// 后退</span></span><br><span class="line">history.<span class="title function_">forward</span>() <span class="comment">// 前进</span></span><br><span class="line"></span><br><span class="line">history.<span class="property">length</span> <span class="comment">// 如果是1说明当前是第一个页面</span></span><br></pre></td></tr></table></figure><h3 id="历史状态管理"><a href="#历史状态管理" class="headerlink" title="历史状态管理"></a>历史状态管理</h3><p>HTML5中有对history对象增加一些方便状态管理的特性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">history.<span class="title function_">pushState</span>(state对象, 新状态的标题, 可选的相对<span class="variable constant_">URL</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> state = &#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span> &#125;</span><br><span class="line">history.<span class="title function_">pushState</span>(state, <span class="string">&#x27;Title&#x27;</span>, <span class="string">&#x27;baz.com&#x27;</span>) <span class="comment">// 会添加一条新的历史记录</span></span><br><span class="line">history.<span class="title function_">replaceState</span>(...) <span class="comment">// 而这个不会</span></span><br></pre></td></tr></table></figure><p>好了！BOM就先到这里吧！</p><h1 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h1><p>document object model 文档对象模型，是HTML XML文档的编程接口。表示由多层节点构成的文档，我们可以通过对DOM的获取操作来动态操作HTML。</p><blockquote><p> DOM是现在真正实现跨平台、语言无关的表示操作网页的方式。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 犀牛书 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>啃犀牛书——JS标准库</title>
      <link href="/post/23cf.html"/>
      <url>/post/23cf.html</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>基础不牢地动山摇吃不好饭睡不好觉。</p><p>↓一些之前没提到的有趣数据结构和API。</p><h1 id="Set集合-amp-Map映射"><a href="#Set集合-amp-Map映射" class="headerlink" title="Set集合&amp;Map映射"></a>Set集合&amp;Map映射</h1><p>众所周知，Object类型是一种万能数据结构，可以把字符串映射为任意值。但是这明显限制了映射和集合的发挥（字符串的约束+不必要的<code>toString</code>属性）。ES6新增了两类数据结构↓</p><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul><li>没有索引</li><li>不重复</li><li>可迭代(for/of√；forEach(val)√)</li><li>非常之快</li></ul><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br><span class="line"><span class="keyword">let</span> set1 = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="string">&#x27;w&#x27;</span>]) <span class="comment">// 构造函数参数必须是可迭代对象(包括其他集合)</span></span><br></pre></td></tr></table></figure><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> len = set .<span class="property">size</span> <span class="comment">// 获取集合长度，确实有点像数组的length属性</span></span><br></pre></td></tr></table></figure><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">s.<span class="title function_">add</span>(<span class="number">1</span>) <span class="comment">// 增 =&gt; [1, 2, 3]</span></span><br><span class="line">s.<span class="title function_">delete</span>(<span class="number">1</span>) <span class="comment">// 删 =&gt; false</span></span><br><span class="line">s.<span class="title function_">has</span>(<span class="number">1</span>) <span class="comment">// 查 =&gt; false</span></span><br></pre></td></tr></table></figure><p>需要注意的是：Set成员根据严格相等<code>===</code>判断重复。因此，如果值是对象类型的话，也会根据全等来判重，所以如果我们↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br><span class="line">s.<span class="title function_">add</span>(arr)</span><br><span class="line">s.<span class="title function_">delete</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>是删不掉s中的arr的！如果真想删的话，需要保证<code>delete</code>传入参数的引用与<code>arr</code>引用相同。不过遇到这种，我们一般会提前对数组进行一些原始值化操作（个人理解），比如<code>let str = arr.join(&#39;-&#39;); s.add(str)</code>。</p><h3 id="集合之于数组"><a href="#集合之于数组" class="headerlink" title="集合之于数组"></a>集合之于数组</h3><p>集合专门为成员测试做了优化(具体啥优化咱不清楚)，<code>has()</code>速度非常之快，这比数组的<strong>执行速度和数组大小成反比</strong><code>includes()</code>，快！</p><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h3><ul><li>键值映射</li><li>可迭代(forEach((val, key) =&gt; …)这个顺序一定记得用的时候颠过来√；for [key, val] of map这个顺序√)</li><li>非常之快</li></ul><h3 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> map1 = <span class="keyword">new</span> <span class="title class_">Map</span>([ <span class="comment">// 参数可以为一个可迭代对象</span></span><br><span class="line">    [<span class="string">&#x27;one&#x27;</span>, <span class="number">1</span>],</span><br><span class="line">    [<span class="string">&#x27;two&#x27;</span>, <span class="number">2</span>]</span><br><span class="line">])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map1) <span class="comment">// Map(2) &#123; &#x27;one&#x27; =&gt; 1, &#x27;two&#x27; =&gt; 2 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">c</span>: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> map2 = <span class="keyword">new</span> <span class="title class_">Map</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(obj))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map2) <span class="comment">// =&gt; Map(3) &#123; &#x27;a&#x27; =&gt; 1, &#x27;b&#x27; =&gt; 2, &#x27;c&#x27; =&gt; 3 &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map2.<span class="title function_">has</span>(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure><p>（废话：起初用codepen在线编辑器进行的输出测试，结果map全输出空，我很疑惑，然后用本地node环境跑，输出正常了…还得是本地啊！）</p><h3 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map.<span class="property">size</span> <span class="comment">// map大小</span></span><br></pre></td></tr></table></figure><h3 id="方法-1"><a href="#方法-1" class="headerlink" title="方法"></a>方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">c</span>: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(obj))</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">4</span>) <span class="comment">// 增</span></span><br><span class="line">map.<span class="title function_">has</span>(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// 查</span></span><br><span class="line">map.<span class="title function_">get</span>(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// 拿</span></span><br><span class="line">map.<span class="title function_">delete</span>(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// 删</span></span><br></pre></td></tr></table></figure><h3 id="映射之于数组"><a href="#映射之于数组" class="headerlink" title="映射之于数组"></a>映射之于数组</h3><p>同样也是啪的一下很快。</p><h2 id="WeakSet-amp-WeakMap"><a href="#WeakSet-amp-WeakMap" class="headerlink" title="WeakSet  &amp; WeakMap"></a>WeakSet  &amp; WeakMap</h2><p>奇妙变体之——弱集合&amp;若映射。</p><h3 id="为啥是‘弱’呢？"><a href="#为啥是‘弱’呢？" class="headerlink" title="为啥是‘弱’呢？"></a>为啥是‘弱’呢？</h3><blockquote><p> 因为它们不会阻止键值被当做垃圾收集。（说实话我看这句解释后就像看到了这句解释）</p></blockquote><p>发现了一个大坑——垃圾回收机制（另开一节吧，看吧好多空文章就是这么来的5555）。不过让我们先接着看解释↓</p><p>WeakMap不会阻止键值被当做垃圾收集。垃圾收集是JS解释器回收内存空间的过程，凡是因无法访问而无法被使用的对象都会被当做垃圾回收。常规映射对自己的键值对保持着比较强的引用，所以及时它那些引用不存在了，也可以通过映射来访问键。但是WeakMap就不一样了，它是弱引用，所以说没了就真的拿不到了。WeakSet同理。</p><h3 id="创建-属性-算法"><a href="#创建-属性-算法" class="headerlink" title="创建/属性/算法"></a>创建/属性/算法</h3><p>弱哥们俩和强哥们俩在构造函数使用上有差别。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="title class_">WeakSet</span>() <span class="comment">// 不能传参</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="title class_">WeakMap</span>() <span class="comment">// 不能传参</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 弱哥们俩都没有size</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// set的三个用法（仅）</span></span><br><span class="line">set.<span class="title function_">add</span>(非原始值)</span><br><span class="line">set.<span class="title function_">has</span>(...)</span><br><span class="line">set.<span class="title function_">delete</span>(...)</span><br><span class="line"><span class="comment">// map的四个用法（仅）</span></span><br><span class="line">map.<span class="title function_">get</span>()</span><br><span class="line">map.<span class="title function_">set</span>(key, 非原始值)</span><br><span class="line">map.<span class="title function_">has</span>()</span><br><span class="line">map.<span class="title function_">delete</span>()</span><br></pre></td></tr></table></figure><h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><p>暂时能想到的有：我想给一些对象打标记，可以扔在一个WeakSet里。</p><p>书中：WeakMap的话，主要是实现值与对象的关联而不导致内存泄漏，但是我想不到例子。。。</p><h1 id="TypedArray定型数组"><a href="#TypedArray定型数组" class="headerlink" title="TypedArray定型数组"></a>TypedArray定型数组</h1>]]></content>
      
      
      <categories>
          
          <category> 犀牛书 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>14Days-JS-Pra</title>
      <link href="/post/8633.html"/>
      <url>/post/8633.html</url>
      
        <content type="html"><![CDATA[<h2 id="Day1"><a href="#Day1" class="headerlink" title="Day1"></a>Day1</h2><p><a href="https://leetcode.cn/problems/counter/">计数器</a></p><blockquote><p>闭包 </p></blockquote><p><a href="https://leetcode.cn/problems/create-hello-world-function/">创建 Hello World 函数</a></p><blockquote><p>闭包 </p></blockquote><h2 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h2><p><a href="https://leetcode.cn/problems/counter-ii/">计数器 II</a></p><blockquote><p>闭包</p></blockquote><p><a href="https://leetcode.cn/problems/apply-transform-over-each-element-in-array/">转换数组中的每个元素</a></p><blockquote><p>数组转换</p></blockquote><h2 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h2><p><a href="https://leetcode.cn/problems/filter-elements-from-array/">过滤数组中的元素</a></p><blockquote><p>数组转换</p></blockquote><p><a href="https://leetcode.cn/problems/array-reduce-transformation/">数组归约运算</a></p><blockquote><p>数组转换</p></blockquote><h2 id="Day4"><a href="#Day4" class="headerlink" title="Day4"></a>Day4</h2><p><a href="https://leetcode.cn/problems/function-composition/">复合函数</a></p><blockquote><p>输入输出</p></blockquote><p><a href="https://leetcode.cn/problems/allow-one-function-call/">只允许一次函数调用</a></p><blockquote><p>输入输出</p></blockquote><h2 id="Day5-可以多回顾一下"><a href="#Day5-可以多回顾一下" class="headerlink" title="Day5-可以多回顾一下"></a>Day5-可以多回顾一下</h2><p><a href="https://leetcode.cn/problems/memoize/"> 记忆函数</a></p><blockquote><p>输入输出</p></blockquote><p><a href="https://leetcode.cn/problems/curry/">柯里化</a></p><blockquote><p>输入输出</p></blockquote><p>↑这个需要会员，我没做，不过看了一些柯里化函数的使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一个接收三个参数的普通函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 柯里化</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">func</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">curried</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (func.<span class="property">length</span> &lt;= args.<span class="property">length</span>) &#123;</span><br><span class="line">            <span class="comment">// 当参数个数满足要求时，即可带着参数返回函数执行</span></span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">func</span>(...args)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 参数不够时，返回带着部分参数的函数，继续接收参数</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...nextArgs</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="title function_">curried</span>(...args, ...nextArgs)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> curried = <span class="title function_">curry</span>(add)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curried</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)) <span class="comment">// =&gt; 6</span></span><br></pre></td></tr></table></figure><h2 id="Day6-promise需要多回顾"><a href="#Day6-promise需要多回顾" class="headerlink" title="Day6-promise需要多回顾"></a>Day6-promise需要多回顾</h2><p><a href="https://leetcode.cn/problems/sleep/">睡眠函数</a></p><blockquote><p> Promise （异步）</p></blockquote><p><a href="https://leetcode.cn/problems/promise-time-limit/">有时间限制的 Promise 对象</a></p><blockquote><p> Promise （异步）</p></blockquote><h2 id="Day7-promise、延时器"><a href="#Day7-promise、延时器" class="headerlink" title="Day7-promise、延时器"></a>Day7-promise、延时器</h2><p><a href="https://leetcode.cn/problems/promise-pool/">Promise 对象池</a></p><blockquote><p>Promise （异步）</p></blockquote><p>又是一个会员专享。。。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个存放Promise对象的结构，使得可以复用这些Promise对象，减少了Promise创建/销毁开销</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建对象池</span></span><br><span class="line"><span class="keyword">const</span> promisePool = []</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个Promise</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">asyncOperation</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">res</span>(<span class="string">&#x27;花1秒 创建了一个新的Promise&#x27;</span>)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象池拿出操作-如果已存在，从对象池拿出；如果不存在，新建一个</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPromiseFromPool</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (promisePool.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> promisePool.<span class="title function_">pop</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">asyncOperation</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象池添加操作</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">recyclePromise</span>(<span class="params">promise</span>) &#123;</span><br><span class="line">    promisePool.<span class="title function_">push</span>(promise)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用对象池操作</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">performAsyncOperation</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> promise = <span class="title function_">getPromiseFromPool</span>() <span class="comment">// 拿出</span></span><br><span class="line">    promise.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 后续</span></span><br><span class="line">        <span class="title function_">recyclePromise</span>(promise) <span class="comment">// 重新放入</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="title function_">performAsyncOperation</span>()</span><br><span class="line"><span class="title function_">performAsyncOperation</span>()</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/cache-with-time-limit/">有时间限制的缓存</a></p><blockquote><p>Time</p></blockquote><p>这个真的很有意思，直接把延时器作为对象中元素存入到了map中。这样一来，就可以轻松处理过期删除问题了！</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">TimeLimitedCache</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">map</span> = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">TimeLimitedCache</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">set</span> = <span class="keyword">function</span>(<span class="params">key, value, duration</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> existed = <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">has</span>(key)</span><br><span class="line">    <span class="keyword">if</span> (existed) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">get</span>(key)</span><br><span class="line">        <span class="built_in">clearTimeout</span>(temp.<span class="property">timer</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 过期自动删除</span></span><br><span class="line">    <span class="keyword">let</span> timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">delete</span>(key)</span><br><span class="line">    &#125;, duration)</span><br><span class="line">    <span class="comment">// 添加/覆盖存储中的键值对</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">set</span>(key, &#123;</span><br><span class="line">        <span class="attr">value</span>: value,</span><br><span class="line">        <span class="attr">timer</span>: timer</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> existed</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">TimeLimitedCache</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">get</span> = <span class="keyword">function</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> existed = <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">has</span>(key)</span><br><span class="line">    <span class="keyword">if</span> (existed) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">get</span>(key).<span class="property">value</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">TimeLimitedCache</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">count</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="property">size</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your TimeLimitedCache object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * var obj = new TimeLimitedCache()</span></span><br><span class="line"><span class="comment"> * obj.set(1, 42, 1000); // false</span></span><br><span class="line"><span class="comment"> * obj.get(1) // 42</span></span><br><span class="line"><span class="comment"> * obj.count() // 1</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h2 id="Day8"><a href="#Day8" class="headerlink" title="Day8"></a>Day8</h2><p><a href="https://leetcode.cn/problems/debounce/">函数防抖</a></p><blockquote><p>Time</p></blockquote><p>使用延时器实现一个简单的防抖效果。</p><p><a href="https://leetcode.cn/problems/throttle/">节流</a></p><blockquote><p>Time</p></blockquote><p>又是个会员题。。。我去自己找点节流题做好了。。。找不到，自己实现一个吧！</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttled</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">let</span> func = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                fn.<span class="title function_">apply</span>(func, args)</span><br><span class="line">                timer = <span class="literal">null</span></span><br><span class="line">            &#125;, delay)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Day9"><a href="#Day9" class="headerlink" title="Day9"></a>Day9</h2><p><a href="https://leetcode.cn/problems/json-deep-equal/">完全相等的 JSON 字符串</a></p><p><a href="https://leetcode.cn/problems/convert-object-to-json-string/">将对象转换为 JSON 字符串</a></p><p>这俩全是会员题。。。。</p><blockquote><p>JSON / 递归 / 相关实现常见业务函数方法</p></blockquote><h2 id="Day10"><a href="#Day10" class="headerlink" title="Day10"></a>Day10</h2><p><a href="https://leetcode.cn/problems/array-of-objects-to-matrix/">将对象数组转换为矩阵</a></p><p><a href="https://leetcode.cn/problems/differences-between-two-objects/">两个对象之间的差异</a></p><p>这俩也是。。。</p><p><a href="https://codepen.io/3879055132-qq-com/pen/OJayaEy">自学自码</a></p><h2 id="Day11"><a href="#Day11" class="headerlink" title="Day11"></a>Day11</h2><p><a href="https://leetcode.cn/problems/chunk-array/">分块数组</a></p><p><a href="https://leetcode.cn/problems/flatten-deeply-nested-array/">扁平化嵌套数组</a></p><p>诶嘿最喜欢的凹双百了，时间和内存均100%</p><h2 id="Day12-原型"><a href="#Day12-原型" class="headerlink" title="Day12-原型"></a>Day12-原型</h2><p><a href="https://leetcode.cn/problems/array-prototype-last/">数组原型对象的最后一个元素</a></p><p><a href="https://leetcode.cn/problems/group-by/">分组</a></p><blockquote><p>对象引用（原型链）</p></blockquote><h2 id="Day13-原型"><a href="#Day13-原型" class="headerlink" title="Day13-原型"></a>Day13-原型</h2><p><a href="https://leetcode.cn/problems/check-if-object-instance-of-class/">检查是否是类的对象实例</a></p><p><a href="https://leetcode.cn/problems/call-function-with-custom-context/">使用自定义上下文调用函数</a></p><blockquote><p>对象引用（原型链）</p></blockquote><h2 id="Day14-有趣"><a href="#Day14-有趣" class="headerlink" title="Day14-有趣"></a>Day14-有趣</h2><p><a href="https://leetcode.cn/problems/generate-fibonacci-sequence/">生成斐波那契数列</a></p><p><a href="https://leetcode.cn/problems/nested-array-generator/">嵌套数组生成器</a></p><blockquote><p>Generators（生成器）</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>啃犀牛书——函数</title>
      <link href="/post/2532.html"/>
      <url>/post/2532.html</url>
      
        <content type="html"><![CDATA[<p>函数是啥？</p><p>函数大致划分？</p><p>普通函数</p><p>有初始值的函数 </p><p>构造函数</p><p>箭头函数（变量）</p><p>作用域</p><p>上下文</p><p>闭包</p>]]></content>
      
      
      <categories>
          
          <category> 犀牛书 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JS——异步</title>
      <link href="/post/cd24.html"/>
      <url>/post/cd24.html</url>
      
        <content type="html"><![CDATA[<p>试着将学到的东西讲出来。</p><h4 id="什么是异步编程"><a href="#什么是异步编程" class="headerlink" title="什么是异步编程"></a>什么是异步编程</h4><p>​        异步编程是一种编程模式。我们知道，JS是单线程的，如果处理器要处理一个耗时很长的业务，比如说一个到1e10的叠加函数，很容易导致进程阻塞。那么这个时候就可以将一些类似的业务先拿到进程以外，通过一些特定的方式去调用它们，同时又能保证其之后的同步代码可以继续正常运行。</p><h4 id="JS中如何处理同步和异步"><a href="#JS中如何处理同步和异步" class="headerlink" title="JS中如何处理同步和异步"></a>JS中如何处理同步和异步</h4><p>所以说通常JS对于一段代码的运行处理时这样子的：</p><p>​        首先将栈内的所有同步代码挨个执行然后抛出。在这个过程中遇到的异步代码对应放入红宏任务或微任务队列中。当同步代码全部执行完毕后，我们先将微任务队列里的代码执行清空，然后从宏任务队列中拿到一个宏任务块。我们将这个宏任务块放进栈中执行，将里面的微任务再次拿到微任务队列中。执行完毕后再次清除微任务队列。这样不断反复，直到栈和两个队列全部清空，这样JS这一部分的代码就执行完毕了。</p><h4 id="异步操作主要有哪些"><a href="#异步操作主要有哪些" class="headerlink" title="异步操作主要有哪些"></a>异步操作主要有哪些</h4><p>​        如果对异步操作按照上述过程所述的话可以划分为像setTimeout,setInterval这样的宏任务，以及Promise,MutationObserver这样的微任务。</p><h4 id="异步编程的应用场景"><a href="#异步编程的应用场景" class="headerlink" title="异步编程的应用场景"></a>异步编程的应用场景</h4><p>我所了解的异步编程的应用场景主要有：</p><p>​        异步网络请求，在SHOPPING中有用到过axios进行向后端发送请求、接收响应。当我在发请求的时候，我并不想在等待服务器响应的时候阻塞项目其他进程，所以我选择使用这种方式，在保证发送请求之后的工作正常进行的同时获取到相应信息，再去处理对应的信息。</p>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 同步和异步 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>细小功能收纳盒</title>
      <link href="/post/2af9.html"/>
      <url>/post/2af9.html</url>
      
        <content type="html"><![CDATA[<h1 id="细小功能收纳盒"><a href="#细小功能收纳盒" class="headerlink" title="细小功能收纳盒"></a>细小功能收纳盒</h1><h2 id="简单的"><a href="#简单的" class="headerlink" title="简单的"></a>简单的</h2><h3 id="猜想-网站迁移提示"><a href="#猜想-网站迁移提示" class="headerlink" title="猜想-网站迁移提示"></a>猜想-网站迁移提示</h3><p>给点信息提示，然后条性重定向一下↓</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">....</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        ....</span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> location.<span class="title function_">replace</span>(<span class="string">&#x27;新网页&#x27;</span>), <span class="number">1000</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="简易悼念模式-filter-grayscale-100"><a href="#简易悼念模式-filter-grayscale-100" class="headerlink" title="简易悼念模式-filter: grayscale(100%);"></a>简易悼念模式-filter: grayscale(100%);</h3><blockquote><p>悼念模式 是指在某些特殊场合下，例如国家哀悼、重大灾难等，为了表达对逝者的哀悼和敬意，网站或应用程序会采用特定的方式展示，例如改变网站或应用程序的主题色、添加悼念标志等。</p></blockquote><p>实现哀悼模式的方式可以因具体情况而异，但通常可以通过以下方法之一来实现：</p><ol><li>CSS样式变更：使用CSS样式来改变网站或应用程序的主题色、字体颜色、背景图像等，以呈现悼念的氛围。</li><li>图像或标志添加：在网站或应用程序中添加悼念标志或图像，例如黑色绸带、蜡烛等，以表达对逝者的哀悼和敬意。</li><li>功能限制：在某些场合下，为了避免影响哀悼活动的进行，网站或应用程序会限制一些功能，例如禁止发布带有娱乐性质的内容。</li></ol><p>以上方法可以单独使用，也可以组合使用，根据具体情况来选择合适的方式来实现哀悼模式。</p><p>但最为简易的悼念模式当属找个办法给网页蒙一层灰↓</p><h4 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h4><img src="../images/CSS%E6%A0%B7%E5%BC%8F%E6%94%B6%E7%BA%B3%E7%9B%92%E2%80%94%E2%80%94%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84%E6%A0%B7%E5%BC%8F%E5%AE%9E%E7%8E%B0/image-20230510104845170.png" alt="image-20230510104845170" style="zoom: 50%;" /><h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>filter：用于对元素应用图形效果，比如模糊、饱和等。</p><p>grayscale: 将元素变为灰度图像。</p><h3 id="选中内容色彩-selection"><a href="#选中内容色彩-selection" class="headerlink" title="选中内容色彩-::selection {}"></a>选中内容色彩-::selection {}</h3><p>当我们访问一个极具特色的网站，选中网站中一些文本内容时往往会发现：被选中后的部分色调非常符合该网站特色（语言艺术hhh）</p><p>其实就是diy了一下选中后文本的颜色和背景色等。我们不妨拿自己的项目试试手。</p><h4 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a>效果</h4><img src="../images/CSS%E6%A0%B7%E5%BC%8F%E6%94%B6%E7%BA%B3%E7%9B%92%E2%80%94%E2%80%94%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84%E6%A0%B7%E5%BC%8F%E5%AE%9E%E7%8E%B0/image-20230508160842545.png" alt="image-20230508160842545" style="zoom:50%;" /><h4 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">background-color</span>: brown;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>::selection</code> 是一个 CSS 伪元素，用于设置文本选中时的样式。</p><h3 id="自定义滚动条-webkit-scrollbar"><a href="#自定义滚动条-webkit-scrollbar" class="headerlink" title="自定义滚动条-::-webkit-scrollbar"></a>自定义滚动条-::-webkit-scrollbar</h3><p>为了确保浏览器的兼容性，在使用 <code>::-webkit-scrollbar</code> 属性时，建议同时提供一个标准的 CSS 属性作为备选方案，例如 <code>scrollbar-width</code> 属性和 <code>scrollbar-color</code> 属性。</p><h4 id="效果-2"><a href="#效果-2" class="headerlink" title="效果"></a>效果</h4><img src="../images/CSS%E6%A0%B7%E5%BC%8F%E6%94%B6%E7%BA%B3%E7%9B%92%E2%80%94%E2%80%94%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84%E6%A0%B7%E5%BC%8F%E5%AE%9E%E7%8E%B0/image-20230508165539768.png" alt="image-20230508165539768" style="zoom:67%;" /><h4 id="实现-2"><a href="#实现-2" class="headerlink" title="实现"></a>实现</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  <span class="attribute">background</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="毛玻璃-backdrop-filter"><a href="#毛玻璃-backdrop-filter" class="headerlink" title="毛玻璃-backdrop-filter"></a>毛玻璃-backdrop-filter</h3><p>就是一个块块，模模糊糊透透明明（要是讲这种需求会不会被追着打）。</p><p>实现毛玻璃特效可以使用CSS的backdrop-filter属性，该属性可以为元素添加一个背景过滤器，可以实现模糊、灰度、透明度等效果。</p><h4 id="效果-3"><a href="#效果-3" class="headerlink" title="效果"></a>效果</h4><img src="../images/CSS%E6%A0%B7%E5%BC%8F%E6%94%B6%E7%BA%B3%E7%9B%92%E2%80%94%E2%80%94%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84%E6%A0%B7%E5%BC%8F%E5%AE%9E%E7%8E%B0/image-20230508164110933.png" alt="image-20230508164110933" style="zoom: 67%;" /><h4 id="实现-3"><a href="#实现-3" class="headerlink" title="实现"></a>实现</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;under&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;glass&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个带毛玻璃特效的块<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.glass</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">10px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.under</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="较为复杂的"><a href="#较为复杂的" class="headerlink" title="较为复杂的"></a>较为复杂的</h2><h3 id="来搭建一个轮播图吧！！"><a href="#来搭建一个轮播图吧！！" class="headerlink" title="来搭建一个轮播图吧！！"></a>来搭建一个轮播图吧！！</h3><h4 id="第一步：先来一个不加空间的简单实现。"><a href="#第一步：先来一个不加空间的简单实现。" class="headerlink" title="第一步：先来一个不加空间的简单实现。"></a>第一步：先来一个不加空间的简单实现。</h4><p>实现了最基本图片无限循环播放</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slideshow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;slide active&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://w.wallhaven.cc/full/1p/wallhaven-1ppld1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Image 1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://w.wallhaven.cc/full/j3/wallhaven-j3m8y5.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Image 2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://w.wallhaven.cc/full/kx/wallhaven-kx82d6.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Image 3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.slideshow</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-class">.slide</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">5s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-class">.slide</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> slides = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.slideshow .slide&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> currentSlide = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">showSlide</span>(<span class="params">index</span>) &#123;            </span><br><span class="line">    slides[currentSlide].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    slides[index].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    currentSlide = index;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">nextSlide</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> nextIndex = currentSlide + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (nextIndex &gt;= slides.<span class="property">length</span>) &#123;</span><br><span class="line">          nextIndex = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">showSlide</span>(nextIndex);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">setInterval</span>(nextSlide, <span class="number">3000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="第二步：初次完善功能，我见到最多的是有左右两箭头来手动控制上下页。"><a href="#第二步：初次完善功能，我见到最多的是有左右两箭头来手动控制上下页。" class="headerlink" title="第二步：初次完善功能，我见到最多的是有左右两箭头来手动控制上下页。"></a>第二步：初次完善功能，我见到最多的是有左右两箭头来手动控制上下页。</h4><p>完善了前后页手动切换功能，维护了一下样式和逻辑。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slideshow&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;prevBtn&quot;</span>&gt;</span>←<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;nextBtn&quot;</span>&gt;</span>→<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;slide active&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://w.wallhaven.cc/full/1p/wallhaven-1ppld1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Image 1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://w.wallhaven.cc/full/j3/wallhaven-j3m8y5.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Image 2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://w.wallhaven.cc/full/kx/wallhaven-kx82d6.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Image 3&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.slideshow</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 首先是一个典型的图片在盒子中的自适应 */</span></span><br><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-class">.slide</span> &#123;</span><br><span class="line">    <span class="comment">/* 相对于父元素绝对定位 */</span></span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* 专门添加了一个透明度过渡，其实不添加也没啥问题，而且一般轮播图似乎是左右衔接切换的.... */</span></span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">5s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-class">.slide</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-class">.controls</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="comment">/* 左右按键展到两侧 */</span></span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-class">.controls</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">105</span>, <span class="number">105</span>, <span class="number">105</span>, .<span class="number">5</span>);</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> slides = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.slideshow .slide&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> currentSlide = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> prevBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;prevBtn&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> nextBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;nextBtn&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制轮播图展示，删除旧一个active，添加新一个active</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showSlide</span>(<span class="params">index</span>) &#123;</span><br><span class="line">    slides[currentSlide].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    slides[index].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    currentSlide = index;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一下两个函数主要实现前后一页的切换，第一个函数要被用到自动轮播中</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">nextSlide</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 当前索引+1（存储到新的参数中，方便控制轮播展示）</span></span><br><span class="line">    <span class="keyword">let</span> nextIndex = currentSlide + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 若到底则回到首个</span></span><br><span class="line">    <span class="keyword">if</span> (nextIndex &gt;= slides.<span class="property">length</span>) &#123;</span><br><span class="line">        nextIndex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 给轮播控制函数传参操作</span></span><br><span class="line">    <span class="title function_">showSlide</span>(nextIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">prevSlide</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> prevIndex = currentSlide - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (prevIndex &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        prevIndex = slides.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">showSlide</span>(prevIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按钮监听</span></span><br><span class="line">nextBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 清空计时器</span></span><br><span class="line">    <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">    <span class="comment">// 执行一次按键对应操作</span></span><br><span class="line">    <span class="title function_">nextSlide</span>()</span><br><span class="line">    <span class="comment">// 继续自动轮播</span></span><br><span class="line">    timer = <span class="built_in">setInterval</span>(nextSlide, <span class="number">3000</span>)</span><br><span class="line">&#125;);</span><br><span class="line">prevBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">    <span class="title function_">prevSlide</span>()</span><br><span class="line">    timer = <span class="built_in">setInterval</span>(nextSlide, <span class="number">3000</span>)</span><br><span class="line">&#125;);</span><br><span class="line">timer = <span class="built_in">setInterval</span>(nextSlide, <span class="number">3000</span>)</span><br></pre></td></tr></table></figure><h4 id="第三步：图片怼到顶上太难看了，还是居中展示吧，这里修改了一下布局。"><a href="#第三步：图片怼到顶上太难看了，还是居中展示吧，这里修改了一下布局。" class="headerlink" title="第三步：图片怼到顶上太难看了，还是居中展示吧，这里修改了一下布局。"></a>第三步：图片怼到顶上太难看了，还是居中展示吧，这里修改了一下布局。</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-class">.slide</span> &#123;</span><br><span class="line">    ....</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.slideshow</span> <span class="selector-class">.controls</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="第四步：我想加一个鼠标滑动切换。"><a href="#第四步：我想加一个鼠标滑动切换。" class="headerlink" title="第四步：我想加一个鼠标滑动切换。"></a>第四步：我想加一个鼠标滑动切换。</h4>]]></content>
      
      
      <categories>
          
          <category> 手搓 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>啃犀牛书——数组</title>
      <link href="/post/ec5.html"/>
      <url>/post/ec5.html</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>基础不牢地动山摇找不到工作吃不饱饭睡不好觉</p><h1 id="JS数组"><a href="#JS数组" class="headerlink" title="JS数组"></a>JS数组</h1><p>数组是JS基础数据类型。</p><ul><li>JS数组是值的有序集合，无类型限制</li><li>JS数组是动态的，按需增大缩小，最大索引值2^32-2</li><li>JS数组可以是稀疏的，不一定连续索引</li><li>JS数组是特殊的对象</li></ul><p>JS数组从<code>Array.prototype</code>继承属性买这里面很多数组方法都是<strong>泛型</strong>(用于参数化类型)的，所以同样可以用于任何<strong>类数组对象</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ES6增加一类新数组，统称为“<strong>定型函数</strong>”，固定长度、固定数组元素类型。（这种函数具有极高性能，且支持二进制数据字节级访问）</p><h2 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h2><h3 id="数组字面量"><a href="#数组字面量" class="headerlink" title="数组字面量"></a>数组字面量</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> empty = []</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> misc = [<span class="number">1</span>,<span class="number">1</span>, <span class="string">&#x27;m&#x27;</span>, <span class="literal">true</span>, <span class="literal">undefined</span>, a+<span class="number">1</span>]</span><br><span class="line"><span class="keyword">let</span> ohno = [,,] <span class="comment">// 这个长度是2！因为数组字面量语法允许末尾出现‘,’</span></span><br></pre></td></tr></table></figure><h3 id="new构造函数"><a href="#new构造函数" class="headerlink" title="new构造函数"></a>new构造函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> empty = <span class="keyword">new</span> <span class="title class_">Array</span>()</span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>) <span class="comment">// 定长 数组索引属性和值都没有定义</span></span><br><span class="line"><span class="keyword">let</span> arr1 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;test&#x27;</span>) <span class="comment">// arr1 = [1, 2, &#x27;test&#x27;] 远远不及直接用字面量创建简单</span></span><br></pre></td></tr></table></figure><h3 id="奇妙的…可迭代对象（扩展操作符）"><a href="#奇妙的…可迭代对象（扩展操作符）" class="headerlink" title="奇妙的…可迭代对象（扩展操作符）"></a>奇妙的…可迭代对象（扩展操作符）</h3><p>也算是打平，有的话，<strong>只打平一层</strong>。且对于<strong>空隙</strong>默认为未定义索引的**<code>undefined</code>**。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> b = [<span class="number">4</span>, ...a, <span class="number">5</span>] <span class="comment">// b = [4, 1, 2, 3, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 演示数组去重的便携方式</span></span><br><span class="line"><span class="keyword">let</span> letters = [...<span class="string">&quot;hello&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> ans = [...<span class="keyword">new</span> <span class="title class_">Set</span>(letters)] <span class="comment">// =&gt; [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//演示打平和空隙处理</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(...[<span class="number">1</span>,,[<span class="number">2</span>, <span class="number">3</span>]]) <span class="comment">// 1 undefined [2,3]</span></span><br></pre></td></tr></table></figure><h4 id="可迭代对象"><a href="#可迭代对象" class="headerlink" title="可迭代对象"></a>可迭代对象</h4><ul><li>数组，定型数组</li><li>字符串</li><li>类数组对象（每个属性键都是整数，且有length属性）</li><li>set&amp;map</li><li>Generator对象</li><li>自定义可迭代对象</li></ul><h3 id="工厂方法"><a href="#工厂方法" class="headerlink" title="工厂方法"></a>工厂方法</h3><h4 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h4><p>当使用构造函数<strong>创建数组</strong>时，如果传入数值参数，且仅为一个，那么他只会创建一个长度为1的空数组，而非包含值1的数组。</p><p>ES6中给出的这个工厂方法就可以解决这个问题。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">1</span>) <span class="comment">// arr = [1]</span></span><br><span class="line"><span class="keyword">let</span> arr1 = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// arr1 = [1, 2, 3]</span></span><br></pre></td></tr></table></figure><h4 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h4><p>ES6新增的另一个工厂方法，是<strong>创建数组副本</strong>的简便方式。</p><p><strong>参数</strong></p><ul><li>iterable 可迭代对象</li><li>mapFn 映射函数</li><li>thisArg 指定函数this值</li></ul><p>第二个参数为函数，当构建新数组时，原对象的每个元素都会传入该函数，返回值替代原始值加入新数组。（和map类似，但是在构造数组期间进行映射要比构建之后再映射 的效率高–前者效率高）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> copy = <span class="title class_">Array</span>.<span class="title function_">from</span>(original)</span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> b = <span class="title class_">Array</span>.<span class="title function_">from</span>(a, <span class="function">(<span class="params">item</span>) =&gt;</span> &#123; <span class="keyword">return</span> item + <span class="number">1</span>&#125;) <span class="comment">// b = [2, 3, 4]</span></span><br></pre></td></tr></table></figure><p>第三个参数用于设置参数函数的<code>this</code>值，比较少用。即当<code>mapFn</code>非箭头函数，而是一个普通函数时，它的this是由所处上下文环境决定的，但是放置在<code>Array.from()</code>中，没有自己的执行的上下文，因此可以给它指定一个上下文对象。这便使得函数可以调用这个对象内容。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> result = <span class="title class_">Array</span>.<span class="title function_">from</span>(numbers, <span class="keyword">function</span> (<span class="params">num</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num * <span class="variable language_">this</span>.<span class="property">multiplier</span>; <span class="comment">// this即为第三参数这个对象</span></span><br><span class="line">&#125;, &#123; <span class="attr">multiplier</span>: <span class="number">2</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure><p>真细致！</p><h2 id="读写数组元素"><a href="#读写数组元素" class="headerlink" title="读写数组元素"></a>读写数组元素</h2><blockquote><p>你的中规中矩，超乎你的想象</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="string">&#x27;qvq&#x27;</span>]</span><br><span class="line">a[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> i = <span class="number">1</span></span><br><span class="line">a[i + <span class="number">1</span>] = <span class="number">2</span></span><br><span class="line">a[a[i+<span class="number">1</span>]+<span class="number">1</span>] = <span class="number">3</span></span><br><span class="line">a <span class="comment">// a = [&#x27;qvq&#x27;, 1, 2, 3]</span></span><br></pre></td></tr></table></figure><h3 id="数组的数组索引"><a href="#数组的数组索引" class="headerlink" title="数组的数组索引"></a>数组的数组索引</h3><p><strong>0到2^32-2之间的正整数</strong></p><p>以上代码可见数组特殊之处，就在于当使用小于<code>2^32-1</code>非负整数作为属性名时（数值数组索引），数组会自动为我们维护<code>length</code>。</p><p>需要再次注意的是，<strong>数组就是特殊的对象</strong>。数组的索引都是数组的属性名。JS会将数值数组索引转换为字符串作为属性名。</p><p>当我们使用恰好与这范围内数字值相等的字符串/浮点值的时候，也将属于数组数值索引</p><h3 id="数组的对象属性"><a href="#数组的对象属性" class="headerlink" title="数组的对象属性"></a>数组的对象属性</h3><p>非<strong>0到2^32-2之间的正整数</strong>的值</p><h3 id="数组索引和对象属性的区别"><a href="#数组索引和对象属性的区别" class="headerlink" title="数组索引和对象属性的区别"></a>数组索引和对象属性的区别</h3><p>数组中可以用任意名字创建属性。前者后者不冲突，若是前者，会自动维护length，若是后者，不会维护length且输出是看不到的，但是能够正常查看</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">arr[<span class="string">&#x27;a&#x27;</span>] = <span class="string">&#x27;abandon&#x27;</span></span><br><span class="line">arr[-<span class="number">1</span>] = -<span class="number">1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="property">length</span>) <span class="comment">// =&gt; 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// =&gt; [1, 2, 3]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[-<span class="number">1</span>]) <span class="comment">// =&gt; -1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="string">&#x27;a&#x27;</span>]) <span class="comment">// =&gt; &#x27;abandon&#x27;</span></span><br></pre></td></tr></table></figure><p>此外，在查看数组任何不存在属性的时候都不会导致错误，而是但会<code>undefined</code></p><h2 id="稀疏数组"><a href="#稀疏数组" class="headerlink" title="稀疏数组"></a>稀疏数组</h2><blockquote><p>稀疏数组就是其元素没有从0开始的索引的数组</p></blockquote><h3 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h3><p>↑书中对于稀疏数组的定义我无法赞同，缝隙存在于中间而不是开头也是稀疏数组啊。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bookArr = [,,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"><span class="keyword">let</span> speArr = [<span class="number">1</span>,,,<span class="number">2</span>]</span><br><span class="line"><span class="comment">// 被省略的元素是不存在的</span></span><br></pre></td></tr></table></figure><p>稀疏数组指存有空隙（稀疏位置）的数组，某些索引没有对应元素。</p><p><strong>其实接下来我在用各种数组方法验证它们对稀疏数组的操作时，发现还是需要绕一个弯的。稀疏数组的空隙是没有定义索引且没有定义元素值的。之所以遍历时候发现置空处对应索引的值是<code>undefined</code>是因为当查看一个数组中不存在的索引值对应值的时候，默认是<code>undefined</code></strong></p><p>所以请理解且牢记上述↑，这对与后续各种数组方法的理解也有所帮助。</p><h3 id="稀疏数组的创建"><a href="#稀疏数组的创建" class="headerlink" title="稀疏数组的创建"></a>稀疏数组的创建</h3><p>很简单，用new Array创建后加值或者直接给一个大于length的数组所以赋值等，都可以创建。</p><p>delete操作符也可以创建↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">delete</span> arr[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="property">length</span>); <span class="comment">// 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [1, 2, undefined, 4, 5]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span> <span class="keyword">in</span> arr); <span class="comment">// false 该索引不存在于数组中</span></span><br></pre></td></tr></table></figure><p>足够稀疏的数组通常较于稠密数组(就是常规数组) 慢但内存占用少 的方式实现的。查询稀疏数组与常规数组元素的时间相当。</p><h2 id="数组长度"><a href="#数组长度" class="headerlink" title="数组长度"></a>数组长度</h2><p>每个数组都有一<code>length</code>属性，这个属性使得数组有别于常规Js对象。</p><ul><li>对于稠密数组，长度即为元素个数</li><li>对于稀疏数组，长度大于元素个数</li></ul><p><strong>无论如何，任何数组元素索引都不会大于等于length</strong>。</p><p><img src="../images/%E5%95%83%E7%8A%80%E7%89%9B%E4%B9%A6%E2%80%94%E2%80%94%E6%95%B0%E7%BB%84/9916b35b35244f3bb1ff5157e991d8a3-1685348414206-3.gif" alt="img"></p><p>为了维护↑这种不变式(invariant)，数组有<strong>两个特殊行为</strong>：</p><ul><li>行为1：当给索引为<code>i</code>的元素赋值时，如果<code>i&gt;=length</code>，那么<code>length=i+1</code></li><li>行为2：当将<code>length</code>设置为一个小于当前值的非负整数<code>n</code>，那么任何<code>大于等于n</code>的数组元素都会从数组中删除。</li></ul><h2 id="添加和删除数组元素"><a href="#添加和删除数组元素" class="headerlink" title="添加和删除数组元素"></a>添加和删除数组元素</h2><h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><ul><li>新索引赋值 <code>a[1] = 1</code></li><li>push() </li><li>unshift() </li></ul><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><ul><li>delete操作符 <code>delete(a[1])</code> 这种操作不会修改length属性，而是留下空隙</li><li>pop()</li><li>shift()</li><li>更改length使得去除末尾的一些元素</li><li>splice()</li></ul><h2 id="迭代数组"><a href="#迭代数组" class="headerlink" title="迭代数组"></a>迭代数组</h2><ul><li><p>老式循环：行。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在嵌套循环等关乎性能的环境中，我们最好不要每次迭代都调一次长度，这个时候就有两种方式</span></span><br><span class="line"><span class="comment">// 长度保存局部变量</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = letters.<span class="property">length</span>; i &lt; len; i++) &#123;&#125;</span><br><span class="line"><span class="comment">// 由后向前迭代</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = letters.<span class="property">length</span>; i &gt;= <span class="number">0</span>; i--) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 稀疏情况下，可以加一个判断跳过空隙</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = letters.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (letters[i] === <span class="literal">undefined</span>) </span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>for/of： <code>let letter of letters</code> &amp;&amp; <code>let [index, letter] of letters.entries()</code>。</p></li><li><p>forEach() </p></li><li><p>map()</p></li><li><p>filter()</p></li></ul><h2 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h2><p>Js无多维数组，用数组嵌套模拟。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> table = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    table[i] = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数组方法"><a href="#数组方法" class="headerlink" title="数组方法"></a>数组方法</h2><h3 id="迭代器方法"><a href="#迭代器方法" class="headerlink" title="迭代器方法"></a>迭代器方法</h3><p>用于遍历数组元素，通常会对每个元素调用指定的函数。便于对数组进行迭代、映射、测试和归并。</p><p>接下来的这些数组迭代器方法，必须接收一个函数参数，函数中可传三类参数：数组元素值、数组索引、数组本身；第二参数可选，指定第一个参数内部<code>this</code>值。</p><p>一般情况下，函数参数的返回值不重要，但是不同方法对于这个返回值的处理是不同的↓</p><p>以下所有方法都<strong>不会修改原数组</strong>（当然传入<strong>三参函数可能会修改原数组</strong>）。</p><h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h4><p><strong>跳过稀疏数组空隙</strong>(空隙不会调用函数)。这个方法并没有提供一种终止迭代的方式。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], sum = <span class="number">0</span></span><br><span class="line">data.<span class="title function_">forEach</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123; sum += value &#125;) <span class="comment">// sum = 15</span></span><br><span class="line">data.<span class="title function_">forEach</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123; value++ &#125;) <span class="comment">// data = [1, 2, 3, 4, 5]</span></span><br><span class="line">data.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">v, i, a</span>) &#123; a[i] = v + <span class="number">1</span> &#125;) <span class="comment">// data = [2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure><h4 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h4><p>该方法把调用它的数组的每个元素进行函数处理。一些列的函数<strong>返回值</strong>作为新数组元素。会<strong>跳过稀疏数组空隙</strong>，新数组稀疏程度与原数组稀疏程度相同。这个方法并没有提供一种终止迭代的方式。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> b = a.<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> x*x) <span class="comment">// b = [1, 4, 9] a = [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 跳过稀疏数组</span></span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, , <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> b = a.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index, item)</span><br><span class="line">  <span class="keyword">return</span> item ? item++ : item = <span class="string">&#x27;?&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b)</span><br><span class="line"><span class="comment">// 0 1</span></span><br><span class="line"><span class="comment">// 1 2</span></span><br><span class="line"><span class="comment">// 3 3</span></span><br><span class="line"><span class="comment">// [1,2,,3]</span></span><br></pre></td></tr></table></figure><h4 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h4><p>该方法返回调用它的数组的子数组。传参函数为一个<strong>断言函数</strong>。<strong>跳过稀疏数组的空隙，且返回的数组始终稠密</strong>。这个方法并没有提供一种终止迭代的方式。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, , <span class="number">5</span>]</span><br><span class="line"><span class="keyword">let</span> b = a.<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x &gt; <span class="number">4</span>) <span class="comment">// b = [5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除空隙以及null和undefined的方法</span></span><br><span class="line"><span class="keyword">let</span> c = a.<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x!==<span class="literal">undefined</span> &amp;&amp; x!==<span class="literal">null</span>)</span><br></pre></td></tr></table></figure><h4 id="find-和奇妙的findIndex"><a href="#find-和奇妙的findIndex" class="headerlink" title="find()和奇妙的findIndex()"></a>find()和奇妙的findIndex()</h4><p>寻找<strong>第一个</strong>满足<strong>断言函数</strong>条件的<strong>元素/索引值</strong>。倘若遍历之后找不到，返回<strong>undefined/-1</strong>。</p><p>值得注意：<strong>find会跳过稀疏数组空隙</strong>，<strong>findIndex</strong>不太一样，它是按照数组索引遍历来的，所以走了空隙不存在的索引——<strong>没跳过</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, , <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">find</span>(<span class="function"><span class="params">x</span> =&gt;</span> x &lt; <span class="number">3</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">find</span>(<span class="function"><span class="params">x</span> =&gt;</span> x === <span class="literal">undefined</span>)) <span class="comment">// undefined（没有找到等于undefined的值所以才返回undefined）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">findIndex</span>(<span class="function"><span class="params">x</span> =&gt;</span> x &lt; <span class="number">3</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">findIndex</span>(<span class="function"><span class="params">x</span> =&gt;</span> x === <span class="literal">undefined</span>)) <span class="comment">// 3（因为索引3没有被定义且啥也没有，所以在这个里面是默认undefined的）</span></span><br></pre></td></tr></table></figure><h4 id="every-和some"><a href="#every-和some" class="headerlink" title="every()和some()"></a>every()和some()</h4><p>every()在“全称”时返回true；some()在“存在”时返回true。两者<strong>都会跳过稀疏数组空隙</strong>。牛起来了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, , <span class="number">5</span>]</span><br><span class="line"><span class="keyword">let</span> flag = a.<span class="title function_">some</span>(<span class="function"><span class="params">x</span> =&gt;</span> x === <span class="literal">undefined</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(flag) <span class="comment">// false</span></span><br><span class="line"><span class="keyword">let</span> flag1 = a.<span class="title function_">every</span>(<span class="function"><span class="params">x</span> =&gt;</span> x!== <span class="literal">undefined</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(flag1) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="reduce-和reduceRight"><a href="#reduce-和reduceRight" class="headerlink" title="reduce()和reduceRight()"></a>reduce()和reduceRight()</h4><p>两种方法使用我们指定的函数<strong>归并</strong>数组元素，最终产生一个值。比较特殊，归并值在其他三个参数(当前值，当前索引，数组本身)的前面，且设置初始值的这个参数取代了指定<code>this</code>的参数。前者从左到右，后者从右到左。</p><p><em>归并</em> 也称 <em>注入inject</em> 或 <em>折叠 fold</em> 。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 演示一下用法</span></span><br><span class="line">array.<span class="title function_">reduce</span>(callback, initialValue) <span class="comment">// 一个回调，一个给归并值设置初始值(默认0)</span></span><br><span class="line"><span class="comment">// 西索</span></span><br><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">accumulator-归并值, curValue-当前值</span>) =&gt;</span> &#123; <span class="keyword">return</span> 处理后的值 &#125;, initialValue-初始归并值)</span><br></pre></td></tr></table></figure><p><strong>跳过空隙！</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = a.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, cur</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(cur)</span><br><span class="line">  <span class="keyword">return</span> sum + cur</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum) <span class="comment">// 11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果是个空数组，且不传初始值，会TypeError</span></span><br><span class="line"><span class="comment">// 比较有趣的是如果是  只包含一个元素的数组+没初始值  或  空数组+有初始值  那么直接返回值，不会调用。</span></span><br></pre></td></tr></table></figure><p>基于多种数据类型、多维数组、嵌套对象、条件逻辑、归并顺序等方面，用普通的循环逻辑会更易读一些，因为数组归并表达的算法容易复杂化。</p><h3 id="打平数组"><a href="#打平数组" class="headerlink" title="打平数组"></a>打平数组</h3><p><strong>不会修改原始数组</strong>。</p><h4 id="flat"><a href="#flat" class="headerlink" title="flat()"></a>flat()</h4><p>用于展开数组中的嵌套数组。不传参时默认打平一层(1)，传参则将参数作为打平层数。<strong>跳过空隙</strong>，过滤掉。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, , <span class="number">5</span>]]]]</span><br><span class="line"><span class="keyword">let</span> b = a.<span class="title function_">flat</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// =&gt; [1, 2, [3, [4, 5]]]</span></span><br><span class="line"><span class="keyword">let</span> c = a.<span class="title function_">flat</span>(<span class="number">3</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c) <span class="comment">// =&gt; [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="keyword">let</span> d = a.<span class="title function_">flat</span>(<span class="number">5</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d) <span class="comment">// =&gt; [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><h4 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap()"></a>flatMap()</h4><p>与map()方法类似，但是返回的数组会被自动打平。类似于<code>map(f).flat()</code>但效率远高于这样的组合。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> parses = [<span class="string">&#x27;helo wld&#x27;</span>, <span class="string">&#x27;geo rock&#x27;</span>]</span><br><span class="line"><span class="keyword">let</span> ans = parses.<span class="title function_">flatMap</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ans) <span class="comment">// =&gt; [&quot;helo&quot;,&quot;wld&quot;,&quot;geo&quot;,&quot;rock&quot;]</span></span><br><span class="line"><span class="comment">// 我试了一下.map().flap()，会报错</span></span><br></pre></td></tr></table></figure><p>允许把元素映射为空数组，打平后<strong>空数组元素不会出现</strong>在输出数组中。会<strong>跳过空隙</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sparseArray = [, <span class="number">1</span>, , <span class="number">2</span>, , <span class="number">3</span>]; <span class="comment">// 稀疏数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = sparseArray.<span class="title function_">flatMap</span>(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (num) &#123;</span><br><span class="line">    <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> [num, num * <span class="number">2</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;遇到了空隙&#x27;</span>) <span class="comment">// 完全不会输出</span></span><br><span class="line">    <span class="keyword">return</span> [num];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 输出: [2,4,3,6]</span></span><br></pre></td></tr></table></figure><h3 id="添加数组"><a href="#添加数组" class="headerlink" title="添加数组"></a>添加数组</h3><p><strong>不会修改原始数组</strong>。</p><h4 id="concat"><a href="#concat" class="headerlink" title="concat()"></a>concat()</h4><p>新数组包含调用数组的元素和参数元素。如果参数包含数组，那么会<strong>打平一层</strong>。因为是合并操作，不会去管空隙。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, , <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> b = a.<span class="title function_">concat</span>([<span class="number">1</span>, , <span class="number">2</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// =&gt; [1,,2,3,1,,2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果有以下自改自的情况，建议使用splice/push就地修改，而不是创建副本赋值</span></span><br><span class="line">a = a.<span class="title function_">concat</span>(b) <span class="comment">// nono</span></span><br></pre></td></tr></table></figure><h3 id="栈、队列操作"><a href="#栈、队列操作" class="headerlink" title="栈、队列操作"></a>栈、队列操作</h3><p><strong>不会打平</strong>，修改原数组了</p><h4 id="栈操作之push-和奇妙的pop"><a href="#栈操作之push-和奇妙的pop" class="headerlink" title="栈操作之push()和奇妙的pop()"></a>栈操作之push()和奇妙的pop()</h4><ul><li><p>push()：栈尾添加元素，对于空隙，笑死，根本不让你push一个单纯空，如果结合<code>...</code>，能给<code>...</code>打的<code>undefiend</code>。</p></li><li><p>pop()：去除栈尾元素，对于<strong>空隙</strong>，pop的机制是<strong>按索引</strong>排出，所以认为排出的元素是<code>undefined</code>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, , ,]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">pop</span>()) <span class="comment">// =&gt; undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// =&gt; [1, 2, 3, ]</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="队列操作之unshift-和shift"><a href="#队列操作之unshift-和shift" class="headerlink" title="队列操作之unshift()和shift()"></a>队列操作之unshift()和shift()</h4><p>理论上讲，这两种方法的操作效率是不及push和pop的，因为每次操作都要重排后面的元素位置。</p><ul><li>unshift()：队列头添加元素。**空隙<code>undefiend</code>**，注意一次性和多次的元素顺序。</li><li>shift()：去除队列头元素。空隙<code>undefiend</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [,, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">shift</span>())</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// =&gt; [,2,3]</span></span><br><span class="line"><span class="keyword">let</span> b = [<span class="number">1</span>, ,<span class="number">4</span>]</span><br><span class="line">a.<span class="title function_">unshift</span>(...b)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// =&gt; [1,undefined,4,,2,3]</span></span><br></pre></td></tr></table></figure><h3 id="连续区域处理"><a href="#连续区域处理" class="headerlink" title="连续区域处理"></a>连续区域处理</h3><p>所谓连续区域，指数组的子数组/‘切片’。以下这几个方法用于提取、替换、填充和复制切片。</p><h4 id="奇妙的slice"><a href="#奇妙的slice" class="headerlink" title="奇妙的slice()"></a>奇妙的slice()</h4><p>该方法用于<strong>返回数组切片</strong>。<strong>不修改原数组</strong>。会<strong>纳入空隙</strong>。接收两个参数，范回的元素范围是<code>[参数1，参数2)</code>。</p><ul><li>如果只有一个参，那么返回从参到后所有元素；</li><li>如果任何一个参为负值，那代表的是倒数第几个元素<code>-1 =&gt; 数组最后一个元素</code>；</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, , <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">let</span> t1 = a.<span class="title function_">slice</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> t2 = a.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">let</span> t3 = a.<span class="title function_">slice</span>(-<span class="number">5</span>)</span><br><span class="line"><span class="keyword">let</span> t4 = a.<span class="title function_">slice</span>(-<span class="number">4</span>, -<span class="number">1</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(t1, t2, t3, t4)</span><br><span class="line"><span class="comment">// [1,,2,3,4,5] [1,] [,2,3,4,5] [2,3,4]</span></span><br></pre></td></tr></table></figure><h4 id="奇妙的splice"><a href="#奇妙的splice" class="headerlink" title="奇妙的splice()"></a>奇妙的splice()</h4><p>用于对<strong>数组/插入</strong>删除。<strong>会修改原数组。</strong> <strong>纳入空隙</strong>。接收多个参数，处理区间是<code>[参数1， 参数1+参数2)</code>。这个方法返回的是<strong>被删除元素的数组</strong>！！</p><ul><li>如果只有一个参数，那么删除这个参数及其后所有元素；</li><li>前两个参数是指定要删除哪些参数，后续参数是要插进删除位置的元素，<strong>不会打平</strong>。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">splice</span>(<span class="number">0</span>)) <span class="comment">// =&gt; [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// =&gt; []</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = [<span class="number">1</span>, , <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">2</span>)) <span class="comment">// =&gt; [1, ]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// =&gt; [2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">2</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>])) <span class="comment">// =&gt; [1, 2]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c) <span class="comment">// =&gt; [&quot;1&quot;,&quot;2&quot;,[1,2],3,4,5]</span></span><br></pre></td></tr></table></figure><h4 id="fill"><a href="#fill" class="headerlink" title="fill()"></a>fill()</h4><p>该方法将<strong>数组或切片元素设置为指定值</strong>。<strong>会修改原数组。</strong> <strong>纳入空隙</strong>，空隙也替换。可传三个参数，第一个是要设置的值，第二个第三个类似<code>slice</code>，是要替换的起始终止值。</p><ul><li>如果只有一个参数，则数组全部元素替换为该值；</li><li>其实参数的传递规则请参考slice。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, , <span class="number">5</span>]</span><br><span class="line">a.<span class="title function_">fill</span>(<span class="number">0</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// =&gt; [0, 0, 0, 0, 0]</span></span><br></pre></td></tr></table></figure><h4 id="copyWithin"><a href="#copyWithin" class="headerlink" title="copyWithin()"></a>copyWithin()</h4><p>该方法把数组<strong>切片复制到数组中的新位置</strong>。<strong>会修改原数组</strong>。 <strong>纳入空隙</strong>。数组长度不变，超了就不要了。</p><ul><li>第一个参数：指定要把第一个元素复制到<strong>目标索引</strong>。</li><li>第二个参数：起始索引。（若省略，默认从0开始）</li><li>第三个参数：终止索引。（若省略，默认数组长度）</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">a.<span class="title function_">copyWithin</span>(<span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// =&gt; [,2,3,4,]</span></span><br></pre></td></tr></table></figure><h3 id="索引、排序"><a href="#索引、排序" class="headerlink" title="索引、排序"></a>索引、排序</h3><h4 id="indexOf-和-lastIndexOf"><a href="#indexOf-和-lastIndexOf" class="headerlink" title="indexOf() 和 lastIndexOf()"></a>indexOf() 和 lastIndexOf()</h4><p>前者从左到右返回找到的第一个匹配元素的索引。找不到就返回<code>-1</code>。<strong>忽略空隙</strong>。</p><p>后者从右到左返回找到的第一个匹配元素的索引。找不到就返回<code>-1</code>。</p><ul><li>第一个参数是搜索值；</li><li>第二个参数是搜索起始索引，可以是类似slice的负值，默认从0开始。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">indexOf</span>(<span class="literal">undefined</span>)) <span class="comment">// =&gt; -1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">indexOf</span>(<span class="number">2</span>)) <span class="comment">// =&gt; 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">indexOf</span>(<span class="number">2</span>, <span class="number">3</span>)) <span class="comment">// =&gt; -1</span></span><br><span class="line">conosle.<span class="title function_">log</span>(a.<span class="title function_">indexOf</span>(<span class="number">2</span>, -<span class="number">5</span>)) <span class="comment">// =&gt; 1</span></span><br></pre></td></tr></table></figure><p>这两个方法使用<code>===</code>操作符比较他们的参数和数组元素。所以如果数组包含对象而非原始值，那么这些方法检查两个引用是否来自同一个对象。如果想查找对象的内容，建议<code>find(自定义func断言)</code></p><h5 id="如何利用idnexOf-找多个符合条件的值？"><a href="#如何利用idnexOf-找多个符合条件的值？" class="headerlink" title="如何利用idnexOf()找多个符合条件的值？"></a>如何利用idnexOf()找多个符合条件的值？</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findall</span> (a, x) &#123;</span><br><span class="line">    <span class="keyword">let</span> results = [], len = a.<span class="property">length</span>, pos = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> (pos &lt; len) &#123;</span><br><span class="line">        pos = a.<span class="title function_">indexOf</span>(x, pos)</span><br><span class="line">        <span class="keyword">if</span> (pos === -<span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">        results.<span class="title function_">push</span>(pos)</span><br><span class="line">        pos += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="奇妙的includes"><a href="#奇妙的includes" class="headerlink" title="奇妙的includes()"></a>奇妙的includes()</h4><p>这个方法我个人比较常用到。接收一个参数，如果数组包含这个参数，返回<code>true</code>，否则<code>false</code>。**按照索引视空隙为<code>undefined</code>**。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">includes</span>(<span class="literal">undefined</span>)) <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">includes</span>(<span class="string">&#x27;good&#x27;</span>)) <span class="comment">// =&gt; false</span></span><br></pre></td></tr></table></figure><p>与indexOf()不同的地方，后者是使用<code>===</code>判断，导致 非数值 与其他和自身都不相同，因此没法检测到NaN；但是includes()就可。</p><h4 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h4><p><strong>会修改原数组。</strong> <strong>纳入空隙，未定义的元素会放在末尾</strong>。不传参的时候<strong>默认都按字母顺序排</strong>；传参就按参数给的比较函数规定的排。</p><p>比较函数：</p><ul><li>返回值大于0：需要调换！</li><li>返回值小于0：无需调换。</li><li>返回值等于0：两值相等~</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本比较函数</span></span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">33</span>, <span class="number">444</span>, <span class="number">123</span>]</span><br><span class="line">a.<span class="title function_">sort</span>() <span class="comment">// a = [123, 33, 444] 默认字符串顺序</span></span><br><span class="line">a.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line">&#125;) <span class="comment">// a = [33, 123, 444] 值升序-我们假定 起初a,b这个顺序，如果是大于零的值，那么换顺序成b,a </span></span><br><span class="line">a.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a) <span class="comment">// a = [444, 123, 33] 值降序</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 复杂一点</span></span><br><span class="line"><span class="keyword">let</span> a = [<span class="string">&#x27;ant&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;Bug&#x27;</span>, <span class="string">&#x27;Dog&#x27;</span>]</span><br><span class="line">a.<span class="title function_">sort</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// =&gt; [&quot;Bug&quot;,&quot;Dog&quot;,&quot;ant&quot;,&quot;cat&quot;] 我去区分大小写！</span></span><br><span class="line">a.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> le = a.<span class="title function_">toLowerCase</span>()</span><br><span class="line">  <span class="keyword">let</span> ri = b.<span class="title function_">toLowerCase</span>()</span><br><span class="line">  <span class="keyword">if</span> (le &lt; ri) <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">  <span class="keyword">if</span> (le &gt; ri) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// =&gt; [&quot;ant&quot;,&quot;Bug&quot;,&quot;cat&quot;,&quot;Dog&quot;]</span></span><br></pre></td></tr></table></figure><h4 id="reverse"><a href="#reverse" class="headerlink" title="reverse()"></a>reverse()</h4><p><strong>反转数组</strong>。<strong>纳入空隙</strong>。<strong>修改原数组</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, ,]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">reverse</span>()) <span class="comment">// =&gt; [, 3, 2, 1]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// =&gt; [, 3, 2, 1] </span></span><br></pre></td></tr></table></figure><h3 id="数组字符串转换"><a href="#数组字符串转换" class="headerlink" title="数组字符串转换"></a>数组字符串转换</h3><h4 id="join-amp-split"><a href="#join-amp-split" class="headerlink" title="join() &amp; split()"></a>join() &amp; split()</h4><p><strong>不修改原数组</strong>。<strong>纳入空隙</strong>。<strong>打平后用<code>,</code>连接，与无需打平的元素用传参连接。</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">let</span> b = a.<span class="title function_">join</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// =&gt; &quot;---&quot;</span></span><br><span class="line"><span class="keyword">let</span> c = b.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c) <span class="comment">// =&gt; [&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]]</span><br><span class="line"><span class="keyword">let</span> b = a.<span class="title function_">join</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// =&gt; &quot;1-2,3,4&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">let</span> b = a.<span class="title function_">join</span>() <span class="comment">// 不传参默认,分隔</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// =&gt; &quot;,,,&quot;</span></span><br><span class="line"><span class="keyword">let</span> c = b.<span class="title function_">split</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c) <span class="comment">// =&gt; [&quot;,,,&quot;]</span></span><br></pre></td></tr></table></figure><h4 id="toString-amp-奇妙的toLocalString"><a href="#toString-amp-奇妙的toLocalString" class="headerlink" title="toString() &amp; 奇妙的toLocalString()"></a>toString() &amp; 奇妙的toLocalString()</h4><p>这俩不传参。toString()用起来和不传参的join()一样，toLocalString()是前者的本地化版本。</p><ul><li>前者直接连接。<strong>不修改原数组</strong>。<strong>纳入空隙</strong>。<strong>打平后用<code>,</code>连接。</strong></li><li>后者先将所有元素转化为字符串然后再连接。<strong>不修改原数组</strong>。<strong>空隙报错</strong>。<strong>打平后用<code>,</code>连接。</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">1</span>, <span class="number">2</span>, ,].<span class="title function_">toString</span>()) <span class="comment">// =&gt; &quot;1,2,&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]].<span class="title function_">toString</span>()) <span class="comment">// =&gt; &quot;1,2,3,4&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">1</span>, <span class="number">2</span>, ,].<span class="title function_">toLocalString</span>()) <span class="comment">// =&gt; Uncaught TypeError: [1,2,(intermediate value)].toLocalString is not a function </span></span><br></pre></td></tr></table></figure><h3 id="静态数组函数"><a href="#静态数组函数" class="headerlink" title="静态数组函数"></a>静态数组函数</h3><p>可以通过构造函数调用的三个静态函数。</p><ul><li>Array.of()</li><li>Array.from()</li><li>Array.isArray()：判断一个未知值是否是数组</li></ul><h2 id="类数组对象"><a href="#类数组对象" class="headerlink" title="类数组对象"></a>类数组对象</h2><p>JS数组具有一些与其他对象不具备的特性（非本质）。</p><ul><li>length自动更新</li><li>length为更小的值会截断函数</li><li>数组从Array.prototype继承有用的方法 =&gt; 类数组对象不能直接使用这些方法</li><li>Array.isArray()返回true</li></ul><blockquote><p> 只要对象有一个数值属性length，而且有相应的非负整数属性，那么就可以完全视同为数组。</p></blockquote><h3 id="常规对象边类数组对象"><a href="#常规对象边类数组对象" class="headerlink" title="常规对象边类数组对象"></a>常规对象边类数组对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    a[i] = i</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">a.<span class="property">length</span> = <span class="number">10</span></span><br></pre></td></tr></table></figure><h3 id="测试对象是都为类数组对象"><a href="#测试对象是都为类数组对象" class="headerlink" title="测试对象是都为类数组对象"></a>测试对象是都为类数组对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isArrayLike</span>(<span class="params">o</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (o &amp;&amp; <span class="title function_">typeof</span>(o) === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="title class_">Number</span>.<span class="built_in">isFinite</span>(o.<span class="property">length</span>) &amp;&amp; o.<span class="property">length</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="title class_">Number</span>.<span class="title function_">isInteger</span>(o.<span class="property">length</span>) &amp;&amp; o.<span class="property">length</span> &lt; <span class="number">4294967295</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="类数组怎么才能使用数组方法"><a href="#类数组怎么才能使用数组方法" class="headerlink" title="类数组怎么才能使用数组方法"></a>类数组怎么才能使用数组方法</h3><h4 id="Function-call"><a href="#Function-call" class="headerlink" title="Function.call()"></a>Function.call()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;<span class="string">&#x27;0&#x27;</span>: <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>: <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;2&#x27;</span>: <span class="string">&#x27;3&#x27;</span>, <span class="attr">length</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t1 = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">join</span>.<span class="title function_">call</span>(a, <span class="string">&#x27;+&#x27;</span>) </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(t1) <span class="comment">// =&gt; &#x27;1+2+3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t2 = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">map</span>.<span class="title function_">call</span>(a, <span class="function"><span class="params">x</span> =&gt;</span> x+=x) </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(t2) <span class="comment">// =&gt; [&#x27;11&#x27; &#x27;22&#x27;, &#x27;33&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t3 = <span class="title class_">Array</span>.<span class="title function_">from</span>(a)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(t3) <span class="comment">// =&gt; [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]  这比Array.prototype.slice.call(a, 0)更容易！！</span></span><br></pre></td></tr></table></figure><h2 id="作为数组的字符串"><a href="#作为数组的字符串" class="headerlink" title="作为数组的字符串"></a>作为数组的字符串</h2><p>字符串也可以像上面这样使用数组方法。字符串不是数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;haha&#x27;</span></span><br><span class="line">s.<span class="title function_">charAt</span>(<span class="number">0</span>) <span class="comment">// &#x27;h&#x27;</span></span><br><span class="line">s[<span class="number">0</span>] <span class="comment">// &#x27;h&#x27;</span></span><br></pre></td></tr></table></figure><p>字符串是不可修改的值，所以当拿它当数组用的时候，是<strong>只读</strong>的。所以<code>push sort serverse splice</code>这些对字符串不起作用，静默失败，建议转数组后操作然后转回（麻烦捏）。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p><p>稀疏数组你到底是个什么样的庞然大物？我在理解这些数组方法的时候，大部分的时间都在考虑它们如何处理你。</p>]]></content>
      
      
      <categories>
          
          <category> 犀牛书 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JS——防抖和节流</title>
      <link href="/post/3c8c.html"/>
      <url>/post/3c8c.html</url>
      
        <content type="html"><![CDATA[<h2 id="重要概念-防抖和节流"><a href="#重要概念-防抖和节流" class="headerlink" title="重要概念-防抖和节流"></a>重要概念-防抖和节流</h2><p>防抖和节流本质上是优化<strong>高频率执行代码</strong>的手段。</p><p>当浏览器resize/scroll/keypress/mousemove等事件触发时，会不断地调用回调函数，极大地浪费资源、降低前端性能。</p><p>↑为了优化体验，需要对此类事件调用次数进行合理限制，这时候我们就可以使用防抖、节流的手段减少调用频率。</p><h3 id="防抖-debounce"><a href="#防抖-debounce" class="headerlink" title="防抖-debounce"></a>防抖-debounce</h3><blockquote><p> 频繁操作 =&gt; 最后一次操作        定时器</p></blockquote><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a><strong>定义</strong></h4><p>n秒后再执行该事件，如果在这期间被重复触发，那么重新计时。</p><h4 id="栗子"><a href="#栗子" class="headerlink" title="栗子"></a><strong>栗子</strong></h4><p>电梯等人</p><h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a><strong>实现</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 简单实现</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounced</span>(<span class="params">func, wait</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timeout;  <span class="comment">// 声明一个变量用于保存定时器的返回值，初始化为 undefined</span></span><br><span class="line"> <span class="comment">// 我还是喜欢初始化成这样→let timeout = null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;  <span class="comment">// 返回一个新的函数，这个新函数就是实际使用的防抖函数</span></span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span>;  <span class="comment">// 在这个新函数中，保存当前 this 指向</span></span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span>;  <span class="comment">// 保存当前函数调用时传入的参数</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">clearTimeout</span>(timeout);  <span class="comment">// 清除之前设置的定时器，避免函数的过度调用</span></span><br><span class="line">         <span class="comment">// clearTimeout 函数并不会抛出异常，因为它可以接受 undefined 作为参数</span></span><br><span class="line">        timeout = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123; <span class="comment">// 设置一个新的定时器，延迟 wait 毫秒执行函数</span></span><br><span class="line">            func.<span class="title function_">apply</span>(context, args)  <span class="comment">// 在定时器中执行函数，this 指向上下文为之前保存的 this</span></span><br><span class="line">        &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加标判断实现——防抖需要立即执行</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounced</span>(<span class="params">func, wait</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timeout</span><br><span class="line">    <span class="keyword">let</span> flag</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span></span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            func.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            flag = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">clearTimeout</span>(timeout)</span><br><span class="line">        timeout = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            flag = <span class="literal">true</span></span><br><span class="line">        &#125;, wait)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入第三参数实现——防抖需要立即执行</span></span><br><span class="line"><span class="comment">// immediate = true =&gt; 首次调用需要立即执行</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounced</span>(<span class="params">func, wait, immediate</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timeout</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span></span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (timeout) <span class="built_in">clearTimeout</span>(timeout)</span><br><span class="line">        <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">            <span class="keyword">let</span> callNow = !timeout</span><br><span class="line">            timeout = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                timeout = <span class="literal">null</span></span><br><span class="line">            &#125;, wait)</span><br><span class="line">            <span class="keyword">if</span> (callNow) &#123;</span><br><span class="line">                func.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            timeout = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                func.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            &#125;, wait)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 还有无改进空间？</span></span><br><span class="line"><span class="comment">// 肯定是有，举个例子：可以将函数的返回值进行保存并返回，以便调用者可以取消该函数的延迟执行</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, wait, immediate</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timeout;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">debounced</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> context = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">const</span> args = <span class="variable language_">arguments</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (timeout) <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">    <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">      <span class="keyword">const</span> callNow = !timeout;</span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        timeout = <span class="literal">null</span>;</span><br><span class="line">      &#125;, wait);</span><br><span class="line">      <span class="keyword">if</span> (callNow) &#123;</span><br><span class="line">        <span class="keyword">return</span> func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  debounced.<span class="property">cancel</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">// ←这里是核心扩展点啦</span></span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">    timeout = <span class="literal">null</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> debounced;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a><strong>使用</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    ....我的函数</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params"></span>) &#123;</span><br><span class="line">    ....防抖函数</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> debounceMyfunc = <span class="title function_">debounce</span>(myFunc, <span class="number">300</span>, ...其他参数)</span><br><span class="line"></span><br><span class="line"><span class="title function_">debounceMyfunc</span>()</span><br><span class="line">debounceMyfunc.<span class="title function_">cancel</span>()</span><br></pre></td></tr></table></figure><h4 id="场景"><a href="#场景" class="headerlink" title="场景"></a><strong>场景</strong></h4><p>防抖在连续的事件，只需触发一次回调的场景有：</p><ul><li>搜索框搜索输入。只需用户最后一次输入完，再发送请求。</li><li>手机号、邮箱验证输入检测。</li><li>窗口大小<code>resize</code>。只需窗口调整完成后，计算窗口大小。防止重复渲染。</li></ul><h3 id="节流-throttle"><a href="#节流-throttle" class="headerlink" title="节流-throttle"></a>节流-throttle</h3><blockquote><p> 频繁操作 =&gt; 少量操作        闭包+延迟器</p></blockquote><h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a><strong>定义</strong></h4><p>n秒内只运行一次，如果在这期间重复触发，那么只有一次生效。</p><h4 id="栗子-1"><a href="#栗子-1" class="headerlink" title="栗子"></a><strong>栗子</strong></h4><p>电梯送人</p><h4 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a><strong>实现</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 时间戳</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttled</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> oldTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span><span class="comment">// 个人认为此举更直观</span></span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span><span class="comment">// ↑</span></span><br><span class="line">        <span class="keyword">let</span> newTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (newTime - oldTime &gt;= delay) &#123;<span class="comment">// 如果当前时间距离上次执行的时间大于或等于延迟时间，执行相应函数</span></span><br><span class="line">            func.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            oldTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定时器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttled</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span></span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                func.<span class="title function_">apply</span>(context, args)</span><br><span class="line">                timer = <span class="literal">null</span><span class="comment">// 这个操作很巧妙↓</span></span><br><span class="line">            &#125;, delay)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">对于防抖函数来说，用clearTimeout和将timeout设为null的效果是一样的。</span></span><br><span class="line"><span class="comment">但是，对于节流函数来说，应该尽量避免开太多的定时器，因此建议在使用setTimeout时，将定时器变量设置为null。</span></span><br><span class="line"><span class="comment">这样，在函数被调用时，首先判断定时器变量是否为null，如果为null，就创建新的定时器，如果不为null，则不创建新的定时器。如果使用clearTimeout，则需要先清除之前的定时器，再创建新的定时器，这样在高频率调用函数时会开启大量的定时器，导致性能下降。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">通常来说，防抖函数相对于节流函数更容易出现创建很多定时器的情况，因为防抖函数在每次触发事件后都会重新创建一个定时器，而节流函数只有在上一次执行的定时器结束后才会创建新的定时器。因此，在高频率触发事件的情况下，防抖函数可能会导致创建大量的定时器，从而影响性能。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 时间戳 + 定时器 —— 实现更加精确的节流</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttled</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">let</span> startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> curTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span></span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">let</span> remaining = delay - (curTime - startTime)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        <span class="keyword">if</span> (remaining &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            func.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(func, remaining)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a><strong>使用</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleScroll</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    ....滚动事件处理代码</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttled</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">    ....节流函数</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="title function_">throttled</span>(handleScroll, <span class="number">500</span>));</span><br></pre></td></tr></table></figure><h4 id="场景-1"><a href="#场景-1" class="headerlink" title="场景"></a><strong>场景</strong></h4><p>节流在间隔一段时间执行一次回调的场景有：</p><ul><li>滚动加载，加载更多或滚到底部监听</li><li>搜索框，搜索联想功能</li></ul><h3 id="两者的异同"><a href="#两者的异同" class="headerlink" title="两者的异同"></a>两者的异同</h3><p>同：</p><ul><li>都是为了较低回调的执行频率，节省计算资源</li><li>都可以使用定时器实现</li></ul><p>异：</p><ul><li>防抖着重于一定时间连续触发的事件中只执行最后一次；节流着重于一段时间仅执行一次</li><li>防抖是在<strong>一段连续操作后</strong>执行一次； 节流是<strong>每一段时间只</strong>执行一次</li></ul>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 防抖 </tag>
            
            <tag> 节流 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>啃犀牛书——对象</title>
      <link href="/post/dce9.html"/>
      <url>/post/dce9.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>基础不牢，地动山摇</p><h2 id="JS对象"><a href="#JS对象" class="headerlink" title="JS对象"></a>JS对象</h2><h3 id="对象介绍"><a href="#对象介绍" class="headerlink" title="对象介绍"></a>对象介绍</h3><p>对象是一种复合值，汇聚多个值（原始值/其他对象）且允许按照名字存储这些值。</p><p>对象是一个 属性的无序集合，每个属性都有名字和值。对象把字符串映射为值（散列、散列表、字典、关联数组）。</p><p>对象除了可以维持自己的属性外，还能够从其他对象（原型）继承属性。</p><p>任何数、字符串、符号、布尔值、null、undefined的值都是对象。</p><p>JS对象是动态的，不过也可以利用对象模拟静态类型语言中的静态对象和结构体。</p><p>对象可修改，按引用操作完成（栈不同而堆同），而非按值操作。</p><p>对象属性： 自有属性， 继承属性</p><p>对象属性特性： writable可写（是否可设置）  enumerable可枚举（是否可for/in遍历）  configurable可配置（是否可删/修改）</p><h3 id="对象的创建"><a href="#对象的创建" class="headerlink" title="对象的创建"></a>对象的创建</h3><h4 id="字面量"><a href="#字面量" class="headerlink" title="字面量"></a>字面量</h4><p>这是创建对象的一个最为简单的方法：简单直接花括号↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> empty = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> point = &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span>&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = &#123;<span class="attr">x</span>: -point.<span class="property">x</span>, <span class="attr">y</span>: -point.<span class="property">y</span>&#125;</span><br><span class="line"><span class="keyword">let</span> std = &#123;</span><br><span class="line">    <span class="string">&quot;first name&quot;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;some-hobby&quot;</span>: [],</span><br><span class="line">    <span class="attr">friend</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;raliz&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>值得注意的是，<strong>对象字面量实际上是一个表达式，每次求值都会创建并初始化一个船新的对象</strong>。因此，<strong>当字面量每次求值的时候，它的每个属性值也会被求值</strong>。</p><p>这很容易让人联想到用var在循环体中创建字面量对象的时候会出现什么情况——不断叠加改变，而非新创建</p><h4 id="new-构造函数"><a href="#new-构造函数" class="headerlink" title="new 构造函数"></a>new 构造函数</h4><p>初始化新创建的对象：let 加 constructor</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>()</span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>()</span><br></pre></td></tr></table></figure><h5 id="重要概念-原型和原型链"><a href="#重要概念-原型和原型链" class="headerlink" title="重要概念-原型和原型链"></a>重要概念-原型和原型链</h5><h6 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h6><p>原型是一个对象，用于定义其他对象的共享属性和方法。</p><p>几乎所有的对象都有原型，但只有少数有prototype属性，而这些少数对象为所有的其他对象定义了原型。</p><h6 id="原型链（之前理解有误，现在来掰正）"><a href="#原型链（之前理解有误，现在来掰正）" class="headerlink" title="原型链（之前理解有误，现在来掰正）"></a>原型链（之前理解有误，现在来掰正）</h6><p>原型链是JS一种主要的继承方式。它的基本思想是通过原型来继承一些引用类型的属性和方法。它的基本构想是在实例和原型间构造一条长链。</p><p>具体举例：一个构造函数，它有<code>prototype</code>属性指向它的原型对象，这个原型对象中，有<code>constructor</code>指回这个构造函数，使用构造函数new出来的实例对象中，也有一个属性指向这个原型对象，这个属性是<code>__proto__</code>。这样一来，一个小块的小链条就连好了。我们再看这个原型对象，这个原型对象也极有可能继承其他对象的一些属性和方法，那么这个时候，这个原型对象也会有<code>__proto__</code>指向它的原型对象。以此类推，一条从低端到顶端我们所规定的<code>Object.prototype.__proto__ = null</code>的长链就连好了。</p><p>因此，当我们在查询某个对象中的属性或方法的时候，如果找到了，很好，如果没找到，去它原型找，如果还没找到，去原型的原型找，一直到这个顶端，找到或找不到为止。此时这一条向上查询所依附的链条就可以被认为是原型链吧。</p><h4 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h4><p>这是一个很强大的技术！</p><p>第一个参数：新对象的原型</p><p>第二个参数：新对象的属性（高级特性）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = <span class="title class_">Object</span>.<span class="title function_">create</span>(&#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;) <span class="comment">// 创建一个对象&#123;x:1,y:2&#125;</span></span><br><span class="line"><span class="keyword">let</span> obj2 = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>) <span class="comment">// 参数为null创建的对象不会继承任何属性和方法，无法对其应用，也无法对其使用操作符</span></span><br><span class="line"><span class="keyword">let</span> obj3 = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>) <span class="comment">// 创建空对象写法</span></span><br></pre></td></tr></table></figure><h5 id="Object的一个重要用途"><a href="#Object的一个重要用途" class="headerlink" title="Object的一个重要用途"></a>Object的一个重要用途</h5><p>防止对象被某个第三方库函数意外（非恶意）修改。</p><p>不要直接将对象传给函数，而是要传入继承自它的对象，这样一来，属性可读且修改不会影响原始对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">x</span>: <span class="string">&quot;知法懂法守法用法&quot;</span>&#125;</span><br><span class="line">library.<span class="keyword">function</span>(<span class="params"><span class="built_in">Object</span>.create(obj)</span>)</span><br></pre></td></tr></table></figure><h3 id="查询和设置属性"><a href="#查询和设置属性" class="headerlink" title="查询和设置属性"></a>查询和设置属性</h3><h4 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h4><p><code>.</code>或<code>[]</code></p><p>值得注意的是，<code>[]</code>中必须是字符串或者能转换为字符串的符号或值</p><p>查询</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = student.<span class="property">name</span></span><br><span class="line"><span class="keyword">let</span> age = student[<span class="string">&quot;name&quot;</span>]</span><br></pre></td></tr></table></figure><p>添加/设置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">student.<span class="property">name</span> = <span class="string">&#x27;栗子&#x27;</span></span><br><span class="line">student[<span class="string">&quot;name&quot;</span>] = <span class="string">&#x27;呆子&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="作为关联数组的对象"><a href="#作为关联数组的对象" class="headerlink" title="作为关联数组的对象"></a>作为关联数组的对象</h4><p>上述<code>[字符串]</code>（以字符串为索引的数组）被称为“关联数组”。</p><p>与C/C++/Java等强类型语言不同，JS是松散类型语言，可以为任意对象创建数量和属性。</p><p>数组表示法结合字符串表达式访问对象属性非常灵活。  </p><p>当然在es6之后使用Map类更为妙。</p><h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p>让我们举个例子及来解释一下继承：</p><ul><li>首先，需要先明确，JS对象属性一般由自有属性和继承属性两部分组成。</li><li>假设要从对象o中查询属性x，如果对象o没有这个自有属性，则会去o的原型对象中查询该属性；如果原型对象也没有这个自有属性，但它有原型，那么就会去它的原型中查询。</li><li>上述过程一直持续，直到找到该属性x，或者一直查询到原型为null的对象。</li></ul><p>我们继续对查询和设置对象属性的分析，举个特例↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>, &#123;</span><br><span class="line">  <span class="attr">x</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">writable</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">y</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="title class_">Object</span>.<span class="title function_">create</span>(a);</span><br><span class="line"></span><br><span class="line">b.<span class="property">x</span> = <span class="number">2</span> <span class="comment">// 直接忽略该操作</span></span><br><span class="line">b.<span class="property">y</span> = <span class="number">2</span> <span class="comment">// 同名覆盖</span></span><br><span class="line">b.<span class="property">z</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">x</span>, b.<span class="property">y</span>, b.<span class="property">z</span>) <span class="comment">// =&gt; 1, 2, 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">x</span>, a.<span class="property">y</span>) <span class="comment">// =&gt; 1, 1</span></span><br></pre></td></tr></table></figure><p>这里b的原型对象a.x是不可修改不可设置的，所以当对b进行属性操作时，对于其继承属性的操作是直接被忽略掉的。</p><h5 id="一个重要的JS特性"><a href="#一个重要的JS特性" class="headerlink" title="一个重要的JS特性"></a>一个重要的JS特性</h5><p>查询属性时，会用到原型链；设置属性时，不影响原型链。</p><h4 id="属性访问错误"><a href="#属性访问错误" class="headerlink" title="属性访问错误"></a>属性访问错误</h4><p>属性访问错误的两种情况：</p><ul><li>对象不存在，直接报异常TypeError:undefined</li><li>属性不存在，返回undefined</li></ul><p>几种防止此类问题发生的方法：</p><ul><li>简单ififif</li><li>用&amp;&amp;连接</li><li>使用<code>?.</code>条件式访问</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> book = &#123; <span class="attr">author</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;李松峰&#x27;</span> &#125; &#125;</span><br><span class="line"><span class="keyword">let</span> name = book &amp;&amp; book.<span class="property">author</span> &amp;&amp; book.<span class="property">author</span>.<span class="property">name</span></span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="keyword">let</span> name1 = book?.<span class="property">author</span>?.<span class="property">name</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br></pre></td></tr></table></figure><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>在对象o中设置属性p在以下情况会失败：</p><ul><li>o有一个只读自有属性p</li><li>o有一个只读继承属性p</li><li>o没有自有&amp;继承属性p，且o的extensible特性为false（不可扩展，不能添加新属性）</li></ul><h3 id="删除属性"><a href="#删除属性" class="headerlink" title="删除属性"></a>删除属性</h3><p>主打一个delete</p><h4 id="delete操作符"><a href="#delete操作符" class="headerlink" title="delete操作符"></a>delete操作符</h4><p>只能删除对象的自有属性，不能删除继承属性，不能删除configurable为false的属性</p><h5 id="在非严格模式下"><a href="#在非严格模式下" class="headerlink" title="在非严格模式下"></a>在非严格模式下</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">delete</span> o.<span class="property">x</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">delete</span> o.<span class="property">x</span> <span class="comment">// 不操作但true</span></span><br><span class="line"><span class="keyword">delete</span> o.继承属性 <span class="comment">// 不操作但true</span></span><br><span class="line"><span class="keyword">delete</span> <span class="number">1</span> <span class="comment">// 无意义但true</span></span><br><span class="line"><span class="keyword">delete</span> 不可配置的属性 <span class="comment">// false</span></span><br><span class="line"><span class="keyword">delete</span> globalThis.<span class="title function_">x</span>(不可配置的) <span class="comment">// false</span></span><br><span class="line"><span class="keyword">delete</span> globalThis.<span class="title function_">x</span>(可配置的) <span class="comment">// true</span></span><br><span class="line"><span class="keyword">delete</span> x <span class="comment">// true↑</span></span><br></pre></td></tr></table></figure><h5 id="在严格模式下"><a href="#在严格模式下" class="headerlink" title="在严格模式下"></a>在严格模式下</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> 不可配置的属性 <span class="comment">// TypeError</span></span><br><span class="line"><span class="keyword">delete</span> globalThis.<span class="title function_">x</span>(可配置的) <span class="comment">// true</span></span><br><span class="line"><span class="keyword">delete</span> x <span class="comment">// SyntaxError↑</span></span><br></pre></td></tr></table></figure><h3 id="测试属性"><a href="#测试属性" class="headerlink" title="测试属性"></a>测试属性</h3><p>在实际开发中，我们往往要查一下某对象是否有某属性，这个时候就可以根据场景选用以下四种方式↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 炒一些栗子</span></span><br><span class="line"><span class="keyword">let</span> o = &#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="literal">undefined</span>&#125; <span class="comment">//且继承toString属性</span></span><br></pre></td></tr></table></figure><h4 id=""><a href="#" class="headerlink" title="!=="></a>!==</h4><p>这种方法可以粗略判断对象中是否有自有属性和继承属性，但不全面——它不会区分 不存在的和值本身为undefined的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">o.<span class="property">x</span> !== <span class="literal">undefined</span> <span class="comment">// =&gt; true</span></span><br><span class="line">o.<span class="property">y</span> !== <span class="literal">undefined</span> <span class="comment">// =&gt; false 看吧~它分不清undefined是什么个undefined原因</span></span><br><span class="line">o.<span class="property">z</span> !== <span class="literal">undefined</span> <span class="comment">// =&gt; false</span></span><br><span class="line">o.<span class="property">toString</span> !== <span class="literal">undefined</span> <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure><p><code>!==</code> 经常与 <code>in</code> 搭配使用，后者用来查询属性，前者用来判断是否为<code>undefined</code></p><h4 id="p-in-o"><a href="#p-in-o" class="headerlink" title="p in o"></a>p in o</h4><p>这种方法查询自有属性和继承属性，可以区分undefined和不存在</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x <span class="keyword">in</span> o <span class="comment">// =&gt; true</span></span><br><span class="line">y <span class="keyword">in</span> o <span class="comment">// =&gt; true</span></span><br><span class="line">z <span class="keyword">in</span> o <span class="comment">// =&gt; false</span></span><br><span class="line">toString <span class="keyword">in</span> o <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure><h4 id="o-hasOwnProperty-‘p’"><a href="#o-hasOwnProperty-‘p’" class="headerlink" title="o.hasOwnProperty(‘p’)"></a>o.hasOwnProperty(‘p’)</h4><p>这种方法查询自有属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">o.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;x&#x27;</span>) <span class="comment">// =&gt; true</span></span><br><span class="line">o.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;y&#x27;</span>) <span class="comment">// =&gt; true</span></span><br><span class="line">o.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;z&#x27;</span>) <span class="comment">// =&gt; false</span></span><br><span class="line">o.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;toString&#x27;</span>) <span class="comment">// =&gt; false 无法判断继承属性捏</span></span><br></pre></td></tr></table></figure><h4 id="o-propertyIsEnumerable-‘p’"><a href="#o-propertyIsEnumerable-‘p’" class="headerlink" title="o.propertyIsEnumerable(‘p’)"></a>o.propertyIsEnumerable(‘p’)</h4><p>这个方法细化了上一个方法，它查询的是可枚举 <code>enumerable</code> 的自有属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">o.<span class="title function_">propertyIsEnumerable</span>(<span class="string">&#x27;x&#x27;</span>) <span class="comment">// =&gt; true</span></span><br><span class="line">o.<span class="title function_">propertyIsEnumerable</span>(<span class="string">&#x27;y&#x27;</span>) <span class="comment">// =&gt; true</span></span><br><span class="line">o.<span class="title function_">propertyIsEnumerable</span>(<span class="string">&#x27;z&#x27;</span>) <span class="comment">// =&gt; false</span></span><br><span class="line">o.<span class="title function_">propertyIsEnumerable</span>(<span class="string">&#x27;toString&#x27;</span>) <span class="comment">// =&gt; false非自有属性</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">propertyIsEnumerable</span>(<span class="string">&#x27;toString&#x27;</span>) <span class="comment">// =&gt; false非可枚举属性</span></span><br></pre></td></tr></table></figure><h3 id="枚举属性"><a href="#枚举属性" class="headerlink" title="枚举属性"></a>枚举属性</h3><ul><li>for/in // let key in obj</li><li>Object.keys() // [‘a’, ‘b’, ‘c’]</li><li>Object.values() // [1, 2, 3]</li><li>Object.entries() // [[‘a’, 1], [‘b’, 2], [‘c’, 3]]</li></ul><h4 id="for-in"><a href="#for-in" class="headerlink" title="for/in"></a>for/in</h4><p>该循环对指定对象的每个可枚举的属性（自有、继承）都运行一次循环体，将属性名字赋给循环变量。</p><blockquote><p>对象继承的内置方法是不可枚举的qvq</p></blockquote><h5 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h5><p>使用for/in和hasOwnProperty来防止枚举到的继承属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> p <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!o.<span class="title function_">hasOwnProperty</span>(p)) <span class="keyword">continue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用for/in和typeof跳过所有方法属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> p <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> o[p] === <span class="string">&#x27;function&#x27;</span>) <span class="keyword">continue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="取得对象属名称函数"><a href="#取得对象属名称函数" class="headerlink" title="取得对象属名称函数"></a>取得对象属名称函数</h4><p>这些函数往往与for/in搭配使用来获取对象名称数组。</p><h5 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys()"></a>Object.keys()</h5><p>返回对象 可枚举+自有属性名 数组 </p><h5 id="Object-getOwnPropertyNames"><a href="#Object-getOwnPropertyNames" class="headerlink" title="Object.getOwnPropertyNames()"></a>Object.getOwnPropertyNames()</h5><p>返回对象 自有属性+为字符串属性名 数组</p><h5 id="Object-getOwnPropertySymbols"><a href="#Object-getOwnPropertySymbols" class="headerlink" title="Object.getOwnPropertySymbols()"></a>Object.getOwnPropertySymbols()</h5><p>返回对象 自有属性名 数组</p><h5 id="Reflect-ownKeys"><a href="#Reflect-ownKeys" class="headerlink" title="Reflect.ownKeys()"></a>Reflect.ownKeys()</h5><p>返回对象 所有属性名 数组</p><h4 id="属性枚举顺序"><a href="#属性枚举顺序" class="headerlink" title="属性枚举顺序"></a>属性枚举顺序</h4><h5 id="相关方法枚举属性顺序"><a href="#相关方法枚举属性顺序" class="headerlink" title="相关方法枚举属性顺序"></a>相关方法枚举属性顺序</h5><h6 id="上述四个函数以及JSON-stringfy-等方法"><a href="#上述四个函数以及JSON-stringfy-等方法" class="headerlink" title="上述四个函数以及JSON.stringfy()等方法"></a>上述四个函数以及JSON.stringfy()等方法</h6><ol><li>属性名为非负整数字符串，按照数值升序（这也意味着数组和类数组对象属性会按照顺序被枚举）</li><li>属性名为其他字符串，按照先后顺序</li><li>属性名为符号对象，按照先后顺序</li></ol><h6 id="for-in循环枚举顺序不那么严格"><a href="#for-in循环枚举顺序不那么严格" class="headerlink" title="for/in循环枚举顺序不那么严格"></a>for/in循环枚举顺序不那么严格</h6><ol><li>先按照上述顺序枚举自有属性</li><li>再按照上述顺序枚举继承属性</li><li>这里需要注意的是：当<strong>已经有同名属性枚举过或者说一个同名属性是不可枚举的，那么这个属性就不会被枚举了</strong></li></ol><blockquote><p>默认情况下，符号属性是不可枚举的。这意味着它们不会出现在对象属性的 for…in 循环中，也不会被包括在 Object.keys() 和 Object.getOwnPropertyNames() 方法的返回结果中。</p></blockquote><h3 id="扩展对象"><a href="#扩展对象" class="headerlink" title="扩展对象"></a>扩展对象</h3><p>指一个对象的<strong>属性</strong>复制到另一个对象上。</p><h4 id="原始且常见的操作"><a href="#原始且常见的操作" class="headerlink" title="原始且常见的操作"></a>原始且常见的操作</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;, o1 = &#123;<span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">keys</span>(o2)) &#123;</span><br><span class="line">    o1[key] = o2[key]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>↑各框架纷纷定义类似于extends()的辅助函数，es6以Object.assign()的形式进入核心JS语言</p><h4 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h4><h5 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h5><p>传两种参数，第一个参数是目标对象；第二个以及以后的参数是一个个来源对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(目标对象, 来源对象*n)</span><br></pre></td></tr></table></figure><h5 id="方式"><a href="#方式" class="headerlink" title="方式"></a>方式</h5><p>这个函数将这些 来源对象 的 <strong>可枚举自有属性</strong> 有顺序地(例如<strong>后续属性会覆盖先前同名属性</strong>)复制到目标对象中。</p><p>这个函数在执行期间，如果来源对象有获取方法/目标对象有设置方法，那么这些方法会被调用，当然它们不会被复制。</p><h5 id="将属性从一个对象分配给另一个对象"><a href="#将属性从一个对象分配给另一个对象" class="headerlink" title="将属性从一个对象分配给另一个对象"></a>将属性从一个对象分配给另一个对象</h5><p>这种做法的原因是，如果有一个默认对象里有很多属性和它们的默认值，且对象中不存在同名属性，那么就可以将这些默认值复制到一个对象中。</p><p>实现↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> defaults = &#123;...&#125; <span class="comment">// 这是一个默认对象 </span></span><br><span class="line"><span class="keyword">let</span> o = &#123;...&#125; <span class="comment">// 这是一个对象  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一种：简单创建一个新对象并且赋值</span></span><br><span class="line">o = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, defaults, o)</span><br><span class="line"><span class="comment">// 第二种：使用扩展操作符...</span></span><br><span class="line">o = &#123;...defaults, ...o&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种：重写一个类Object.assign()的辅助方法</span></span><br><span class="line"><span class="comment">// 创建一个merge函数，这个函数与Object.assign类似，但是不会覆盖已存在的属性，避免了额外对象的创建和复制。</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">target, ...sources</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> source <span class="keyword">in</span> sources) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">keys</span>(source)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!(key <span class="keyword">in</span> target)) &#123;</span><br><span class="line">                target[key] = source[key]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">merge</span>(o, defaults) <span class="comment">// =&gt; √</span></span><br></pre></td></tr></table></figure><h5 id="拓展-重写一些辅助函数"><a href="#拓展-重写一些辅助函数" class="headerlink" title="拓展-重写一些辅助函数"></a>拓展-重写一些辅助函数</h5><p>merge()——与Object.assign()类似，但不会覆盖已经存在的属性（书中）</p><p>restrict()——从一个对象中删除另一个对象中没有的属性（自己试着写的）</p><p>subtract()——从一个对象中删除另一个对象中包含的所有属性（↑）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意这里不是连续操作，传参皆为以下初始值</span></span><br><span class="line"><span class="keyword">let</span> dobj = &#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">x</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">target, ...sources</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> source <span class="keyword">of</span> sources) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!(key <span class="keyword">in</span> target)) &#123;</span><br><span class="line">        target[key] = source[key]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="string">&quot;merge&quot;</span>, <span class="title function_">merge</span>(obj, dobj) ) <span class="comment">// =&gt; &#123;x: 1, y: 2, z: 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">restrict</span>(<span class="params">target, ...sources</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> source <span class="keyword">of</span> sources) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">      <span class="keyword">if</span> (key <span class="keyword">in</span> target) &#123;</span><br><span class="line">        target[key] = source[key]</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="string">&quot;restrict&quot;</span>, <span class="title function_">restrict</span>(obj, dobj) ) <span class="comment">// =&gt; &#123;x: 1&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">subtract</span>(<span class="params">target, ...sources</span>) &#123;</span><br><span class="line"><span class="comment">//   target: dobj, sources: obj</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> source <span class="keyword">of</span> sources) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">      <span class="keyword">if</span> (key <span class="keyword">in</span> target) &#123;</span><br><span class="line">        <span class="keyword">delete</span> target[key]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="string">&quot;subtract&quot;</span>, <span class="title function_">subtract</span>(dobj, obj) ) <span class="comment">// =&gt; &#123;y: 2, z: 3&#125;</span></span><br></pre></td></tr></table></figure><h3 id="序列化对象"><a href="#序列化对象" class="headerlink" title="序列化对象"></a>序列化对象</h3><h4 id="对象序列化"><a href="#对象序列化" class="headerlink" title="对象序列化"></a>对象序列化</h4><p>对象序列化（serialization）是把<strong>对象的状态</strong>（对象在某一时刻属性和值的集合）转换为字符串的过程，之后可以从中恢复对象的状态。</p><blockquote><p>JS对象序列化函数：JSON.stringify()        </p><p>恢复JS对象函数：JSON.parse()</p></blockquote><p>JSON语法是JS语法的子集，所以不能表示所有的JS值。</p><p>↑因此它能序列化和回复的值是有限的↓</p><ul><li>对象、数组、字符串（日期对象会被序列化为ISO格式日期字符串<code>Date.toJSON()</code>，但是<code>JSON.parse()</code>时会保持其字符串形式）</li><li>有限数值</li><li>true/false</li><li>null（NaN、Infinity会被序列化成null）</li></ul><p>不能被序列化或恢复的↓</p><ul><li>函数</li><li>RegExp</li><li>Error对象</li><li>undefined值</li></ul><p>另外，JSON.stringify()只序列化对象的 可枚举自有属性。如果属性值无法被序列化，那么属性会从字符串中删除。</p><h4 id="JSON-stringify-JSON-parse"><a href="#JSON-stringify-JSON-parse" class="headerlink" title="JSON.stringify() / JSON.parse()"></a>JSON.stringify() / JSON.parse()</h4><p>两者都可以接收第二个参数，用来自定义序列化以及恢复操作。==（待填充具体自定义方式）==</p><h3 id="对象方法"><a href="#对象方法" class="headerlink" title="对象方法"></a>对象方法</h3><h4 id="Object-prototype中一些通用方法"><a href="#Object-prototype中一些通用方法" class="headerlink" title="Object.prototype中一些通用方法"></a>Object.prototype中一些通用方法</h4><h5 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h5><p>该方法的默认方法是不会显示太有用的信息。所以一般需要在对象中对该方法进行一个重新定义↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> point = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">toString</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="variable language_">this</span>.x&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.y&#125;</span>)`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(point.<span class="title function_">toString</span>()) <span class="comment">// =&gt; (1, 2)</span></span><br></pre></td></tr></table></figure><h5 id="toLoocalString"><a href="#toLoocalString" class="headerlink" title="toLoocalString()"></a>toLoocalString()</h5><p>该方法默认是没有实现任何本地化操作，只是简单调用了一下toString()方法。因此一般需要根据本地惯例格式化数值、日期、时间等↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> point = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">2000</span>,</span><br><span class="line">    <span class="attr">toString</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="variable language_">this</span>.x&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.y&#125;</span>)`</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">toLocaleString</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="variable language_">this</span>.x.toLocaleString()&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.y.toLocaleString()&#125;</span>)`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(point.<span class="title function_">toString</span>()) <span class="comment">// =&gt; (1000, 2000)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(point.<span class="title function_">toLocaleString</span>()) <span class="comment">// =&gt; (1,000, 2,000)</span></span><br></pre></td></tr></table></figure><h5 id="valueOf-NaN"><a href="#valueOf-NaN" class="headerlink" title="valueOf()"></a>valueOf()</h5><p>该方法默认也并没有做什么。因此一些内置类定义了自己的valueOf()方法。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> point = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">y</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">valueOf</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">hypot</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(point))</span><br></pre></td></tr></table></figure><p>Date类定义的valueOf()可以将日期转换为值，这样一来就能进行比较。</p><h5 id="toJSON-——不太理解"><a href="#toJSON-——不太理解" class="headerlink" title="toJSON()——不太理解"></a>toJSON()——不太理解</h5><p>Object.property实际没有定义该方法，但JSON.stringify()方法会从要序列化的对象中寻找toJSON()方法。如果该方法存在，就调用然后序列化该方法的返回值，而非原始对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> point = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">toString</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="variable language_">this</span>.x&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.y&#125;</span>)`</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">toJSON</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">toString</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>([point]) <span class="comment">// =&gt; &#x27;[&quot;(1, 2)&quot;]&#x27;</span></span><br></pre></td></tr></table></figure><p>Date类定义了自己的toJSON()方法，返回一个表示日期的序列化字符串。</p><h3 id="对象字面量扩展语法"><a href="#对象字面量扩展语法" class="headerlink" title="对象字面量扩展语法"></a>对象字面量扩展语法</h3><h4 id="简写属性"><a href="#简写属性" class="headerlink" title="简写属性"></a>简写属性</h4><p>ES6之后可以删掉其中分号和一份标识符，使得代码更为简洁（非常常用）。</p><p>compare↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>, y = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> o1 = &#123;</span><br><span class="line">    <span class="attr">x</span>: x,</span><br><span class="line">    <span class="attr">y</span>: y</span><br><span class="line">&#125;</span><br><span class="line">-----------------</span><br><span class="line"><span class="keyword">let</span> o2 = &#123; x, y &#125;</span><br></pre></td></tr></table></figure><h4 id="计算的属性名"><a href="#计算的属性名" class="headerlink" title="计算的属性名"></a>计算的属性名</h4><p>ES6之后使用计算属性就非常讨巧了。因为可以直接在一个对象中使用中括号<code>[]</code>去框计算属性，使得计算结果（必要转字符串）直接作为对象属性名。</p><p>compare↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pName = <span class="string">&#x27;herName&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">computePName</span> () &#123; <span class="keyword">return</span> <span class="string">&#x27;hisName&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o1 = &#123;&#125;</span><br><span class="line">o1[pName] = <span class="string">&#x27;栗子&#x27;</span></span><br><span class="line">o1[computePName] = <span class="string">&#x27;纸鹤&#x27;</span></span><br><span class="line">-----------------------</span><br><span class="line"><span class="keyword">let</span> o2 = &#123;</span><br><span class="line">    [pName]: <span class="string">&#x27;栗子&#x27;</span>,</span><br><span class="line">    [computePName]: <span class="string">&#x27;纸鹤&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="计算属性使用场景"><a href="#计算属性使用场景" class="headerlink" title="计算属性使用场景"></a>计算属性使用场景</h5><ul><li>书中提到的一种：假设我有一个JS代码库，我需要传给此库一组特定属性对象，而这组属性的名字在库中都是以常量的形式定义的。如果要创建传给此库的对象，可以硬编码他们的属性名，但是这样很有可能把属性名写错，而且也存在更新迭代修改属性名而出错。那么这时候不妨用一层计算属性去装这些常量，来组成这个对象。</li><li>数据过滤：按照一定的条件对数据进行过滤</li><li>数据排序：按照一定顺序对数据排序，这个时候就可以使用计算属性对数据集进行动态排序</li><li>数据格式化：使用计算属性格式化数据，最常见的可能是数字和日期以及字符串……都挺常见的。</li><li>数据聚合：比如说一些加和，一些拼接……</li></ul><h4 id="符号作为属性名"><a href="#符号作为属性名" class="headerlink" title="符号作为属性名"></a>符号作为属性名</h4><p>ES6后符号也可以作为属性名（也多亏了计算属性语法）。</p><ul><li>Symbol除了用作属性名以外不能做任何事。</li><li>为啥Symbol()函数是工厂函数而不是构造函数？——该函数返回值是原始值而不是对象，因此不需要new一个对象实例。</li><li>符号是一种安全机制吗？——nono，符号不是为了安全，而是为JS对象定义安全的扩展机制。假设我们要从<strong>不受控的第三方代码中</strong>得到一个对象，我们担心创建一个属性会使得对象与原对象产生冲突，或者担心第三方代码以外修改我们命名的属性，那这个时候用Symbol非常合适。当然，第三方代码完全可以通过<code>Object.getOwnPropertySymbols()</code>方法找到我们的符号并且修改删除qvq，这也是符号并非一种安全机制的原因。</li></ul><h4 id="扩展操作符"><a href="#扩展操作符" class="headerlink" title="扩展操作符"></a>扩展操作符</h4><p>扩展操作符在我们之前使用<code>Object.assign()</code>时提到过，这是一种简便方法，可以将对象的属性复制到新对象中，这是一种典型的插值行为，当然只在对象字面量中才是这种行为（post参数设置的时候会用到，这个栗子 来源于我最近在学做的项目中）。</p><ul><li>扩展操作符不是严格意义上的操作符，是一种语法</li><li>扩展操作符只能扩展对象的自有属性</li><li>扩展操作符虽说看着很简洁，但是会给JS解释器带来巨大工作量。基于循环/递归 ( O(n) ) 不断给对象追加属性，倘若操作量很大的话，时间复杂度是非常高的，近似于 O(n^2) 。</li></ul><h4 id="简写方法"><a href="#简写方法" class="headerlink" title="简写方法"></a>简写方法</h4><p>ES6之后对象里函数可以省去<code>function</code></p><h5 id="简写和其他类型的属性名"><a href="#简写和其他类型的属性名" class="headerlink" title="简写和其他类型的属性名"></a>简写和其他类型的属性名</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;</span><br><span class="line">    <span class="attr">qvq</span>: <span class="string">&#x27;qvq&#x27;</span>,</span><br><span class="line">    <span class="attr">func</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">qvq</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line">------------等价-------------</span><br><span class="line"><span class="keyword">let</span> o2 = &#123;</span><br><span class="line">    <span class="attr">qvq</span>: <span class="string">&#x27;qvq&#x27;</span>,</span><br><span class="line">    <span class="title function_">func</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">qvq</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line">---属性名还可以是更时髦的形式---</span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">METHOD_NAME</span> = <span class="string">&#x27;m&#x27;</span></span><br><span class="line"><span class="keyword">const</span> symbol = <span class="title class_">Symbol</span>()</span><br><span class="line"><span class="keyword">let</span> o3 = &#123;</span><br><span class="line">    [<span class="variable constant_">METHOD_NAME</span>](x) &#123; <span class="keyword">return</span> x++ &#125;,</span><br><span class="line">    [symbol](x) &#123; <span class="keyword">return</span> x-- &#125;,</span><br><span class="line">    <span class="string">&quot;ah&quot;</span>(x) &#123; <span class="keyword">return</span> <span class="string">&#x27;aaa&#x27;</span>+x+<span class="string">&#x27;hhh&#x27;</span> &#125;,</span><br><span class="line">&#125;</span><br><span class="line">o3[symbol](<span class="number">1</span>) <span class="comment">// =&gt; 0</span></span><br></pre></td></tr></table></figure><p>字符串字面量和计算属性都可以作为对象中方法属性名；</p><h5 id="使得包含Symbol属性的对象也可迭代-Generator-amp-Symbol-iterator"><a href="#使得包含Symbol属性的对象也可迭代-Generator-amp-Symbol-iterator" class="headerlink" title="使得包含Symbol属性的对象也可迭代-Generator&amp;Symbol.iterator"></a>使得包含Symbol属性的对象也可迭代-Generator&amp;Symbol.iterator</h5><p>符号也可作为方法名，为了让对象可迭代，必须以符号名<code>Symbol.iterator</code>为它定义一个方法↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  [<span class="title class_">Symbol</span>(<span class="string">&quot;customMethod&quot;</span>)]: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This is a custom method using Symbol&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">    <span class="keyword">let</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> keys) &#123;</span><br><span class="line">      <span class="keyword">yield</span> <span class="variable language_">this</span>[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.<span class="property">name</span> = <span class="string">&quot;John&quot;</span>;</span><br><span class="line">obj.<span class="property">age</span> = <span class="number">30</span>;</span><br><span class="line">obj.<span class="property">address</span> = <span class="string">&quot;123 Main St&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> obj) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// This is a custom method using Symbol</span></span><br><span class="line"><span class="comment">// John</span></span><br><span class="line"><span class="comment">// 30</span></span><br><span class="line"><span class="comment">// 123 Main St</span></span><br></pre></td></tr></table></figure><p>在上面的代码中，我们使用了<code>Generator</code>函数定义Symbol.iterator属性<code>*[Symbol.iterator]</code>，该函数返回迭代器对象。该迭代器对象通过遍历对象中所有属性并返回属性值，从而实现了可迭代性。这样一来这个Symbol方法名的方法的属性也可迭代了。</p><p>值得注意<strong>Generator</strong>函数在这里使用了<code>*</code>作为函数声明符号。这是定义Generator函数的一种特殊语法。这种语法将函数定义为一种生成器，使得其具有 <strong>短暂暂停/恢复执行</strong> 的能力，从而使其能生成一个可迭代对象。</p><h4 id="属性的获取-设置方法"><a href="#属性的获取-设置方法" class="headerlink" title="属性的获取/设置方法"></a>属性的获取/设置方法</h4><p>对象的属性除了数据属性，还有访问器属性<code>accessor property</code>。</p><ul><li>对象属性：属性名&amp;属性值</li><li>访问器属性：一个俩的访问器方法——获取方法 getter / 设置方法 setter</li></ul><h5 id="访问器属性"><a href="#访问器属性" class="headerlink" title="访问器属性"></a>访问器属性</h5><h6 id="访问器属性用法"><a href="#访问器属性用法" class="headerlink" title="访问器属性用法"></a>访问器属性用法</h6><p>属性名：方法名    属性值：方法返回值    <strong>ES6之后也可以使用计算的属性名来定义获取/设置方法</strong>（相当炸裂）</p><ul><li>程序查询一个访问器属性的时候，通常会调用获取方法（不传参），这个方法返回值即为属性访问表达式的值。</li><li>程序设置修改一个访问器属性时，通常会调用设置方法（需传参），这个方法是用来设置属性的值，忽略返回值。</li></ul><blockquote><p>可读可写，只读，只写(这种属性通过数据属性无法实现，返回值<code>undefined</code>)——qvq好玩吧~</p></blockquote><p>访问器属性可以通过一个字面量扩展语法定义。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2D笛卡尔坐标，极坐标</span></span><br><span class="line"><span class="keyword">let</span> o = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">1.0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">1.0</span>,</span><br><span class="line">    <span class="comment">// 可读可写</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">r</span>() &#123; <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">hypot</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>) &#125;,</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">r</span>(<span class="params">newvalue</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> oldvalue = <span class="title class_">Math</span>.<span class="title function_">hypot</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>)</span><br><span class="line">        <span class="keyword">let</span> radio = newvalue / oldvalue</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> *= radio</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> *= radio</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 只读</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">theta</span>() &#123; <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">atan2</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">x</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p.<span class="property">r</span> <span class="comment">// =&gt; Math.SQRT2</span></span><br><span class="line">p.<span class="property">theta</span> <span class="comment">// =&gt; Math.PI/4 </span></span><br></pre></td></tr></table></figure><h6 id="访问器属性是可继承的捏！"><a href="#访问器属性是可继承的捏！" class="headerlink" title="访问器属性是可继承的捏！"></a>访问器属性是可继承的捏！</h6><h2 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h2><p>本章可谓是非常核心的一章，未来还需要我在通读和理解后续内容后与之融会贯通。</p><p>简单列一下本章大纲，方便回顾↓</p><ul><li>对象及相关基本概念</li><li>对象字面量语法</li><li>对象属性的读/写/删/查/枚举</li><li>原型的继承</li><li>对象的扩展</li><li>JS中所有非原始值的值都是对象。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 犀牛书 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>前端工程化工具和框架的选型研究：以实践案例为基础</title>
      <link href="/post/e2a7.html"/>
      <url>/post/e2a7.html</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>摘要</strong>：随着前端技术的不断发展和应用，前端工程化已经成为现代Web开发的一个必要组成部分。选择最适合项目的前端工程化工具和框架对于开发效率和代码质量的提升至关重要。本文以实践案例为基础，对常见的前端工程化工具和框架进行了比较和分析，并探讨了如何在实践中进行选择。 </p><p><strong>关键词</strong>：前端工程化，工具，框架，选型，实践案例 </p></blockquote><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>​        随着Web应用的不断发展，前端技术的重要性日益凸显。传统的前端开发方式已经无法满足当前复杂Web应用的开发需求，因此前端工程化应运而生。前端工程化包括构建、打包、自动化测试、代码规范等一系列工作，可以提高代码质量、开发效率和团队协作效率。在实际的开发过程中，选择最适合项目的前端工程化工具和框架非常重要，可以避免不必要的时间和精力浪费。 </p><p>​        本文以实践案例为基础，对常见的前端工程化工具和框架进行了比较和分析，并探讨了如何在实践中进行选择。首先，我们介绍了常见的前端工程化工具和框架，包括Webpack、Gulp、Grunt、Vue CLI、Create React App等。然后，我们根据实际的开发需求，从功能、易用性、性能等方面对这些工具和框架进行了比较和评估。</p><p>​        最后，我们总结了选型的关键因素和注意事项，包括项目需求、开发团队技能、社区支持等。 本文的主要贡献在于通过实践案例的分析和比较，探讨了前端工程化工具和框架的选择方法，为前端开发者提供了实际可行的选型方案和经验。 </p><h2 id="研究背景"><a href="#研究背景" class="headerlink" title="研究背景"></a>研究背景</h2><p>​        当今互联网技术的发展已经成为了现代社会中不可或缺的一部分。随着互联网技术的不断发展，越来越多的网站和应用程序涌现出来。前端工程化技术在这个过程中变得越来越重要，这是因为前端工程化能够提高开发效率、代码质量和团队协作能力。前端工程化是指将前端开发流程进行自动化，以便更好地管理代码和项目。</p><p>​        前端工程化工具和框架是前端工程化的核心部分，开发人员可以利用这些工具和框架来快速构建高质量的前端应用程序。然而，由于前端技术的不断更新和变革，前端工程化工具和框架的选择变得越来越困难。开发人员需要了解现有的前端技术和发展趋势，以便更好地选择和使用前端工程化工具和框架。</p><p>​        现代前端技术已经从以前的静态页面到现在的动态交互式应用程序转变，需要更加复杂的前端技术来支持。前端开发已经从过去的个人开发到了团队协作开发的阶段，因此需要更加灵活、高效的前端工程化工具和框架来支持团队开发。同时，前端技术的发展趋势也越来越注重可维护性、可扩展性和性能优化等方面，因此前端工程化工具和框架需要适应这些变化，提供更加先进和可靠的解决方案。 </p><p>​        在这样的背景下，前端工程化成为了越来越重要的技术，它能够提高开发效率、代码质量和团队协作能力。前端工程化工具和框架也随着前端技术的发展而不断更新和升级，以适应新的开发需求和趋势。例如，Webpack、Gulp和Grunt等前端构建工具，已经成为现代前端开发中不可或缺的部分，它们能够自动化地处理开发中的诸多工作，如代码压缩、文件合并、图片压缩、ES6转码等，从而提高开发效率和代码质量。同时，Vue、React、Angular等前端框架，也成为了现代前端开发中最流行的工具之一，它们能够提供更加灵活、高效和可维护的开发方式，从而适应现代前端技术的发展趋势。</p><p>​        本文通过实践案例为基础，研究和分析了当前流行的前端工程化工具和框架。实践案例可以更好地展示工具和框架的使用和效果，为开发人员提供更加直观和实际的参考。本文旨在探讨如何在实际开发中，选择合适的前端工程化工具和框架，并分析其优缺点，以及对未来前端工程化技术的发展趋势进行展望。</p><p>​        在现代前端开发中，选择合适的前端工程化工具和框架非常重要，因为这将影响到开发效率、代码质量和项目质量。对于前端开发人员来说，了解不同工具和框架的优缺点，以及它们的适用场景，是非常必要的。本文将以实践案例为基础，深入探讨当前流行的前端工程化工具和框架，分析它们的特点和优缺点，为开发人员提供更加全面的了解和选择指导。</p><h2 id="一、前端工程化工具和框架的介绍"><a href="#一、前端工程化工具和框架的介绍" class="headerlink" title="一、前端工程化工具和框架的介绍"></a>一、前端工程化工具和框架的介绍</h2><p>​        前端工程化涵盖了许多方面的工作，包括构建、打包、自动化测试、代码规范等。因此，前端工程化工具和框架也十分多样化，本文介绍了常见的几种工具和框架。 </p><h3 id="1-1-Webpack"><a href="#1-1-Webpack" class="headerlink" title="1.1 Webpack"></a>1.1 Webpack</h3><p>​        Webpack是一个现代化的JavaScript应用程序的静态模块打包器。它能够处理JS、CSS、图片等资源，支持热更新、代码分割、懒加载等功能。Webpack拥有强大的插件系统和生态系统，可以满足各种复杂应用的需求。 </p><h3 id="1-2-Gulp"><a href="#1-2-Gulp" class="headerlink" title="1.2 Gulp"></a>1.2 Gulp</h3><p>​        Gulp是一个基于流的自动化构建工具，可以将代码转换、压缩、合并等操作自动化处理。Gulp具有易用性和可维护性高的特点，支持插件扩展，可以很方便地与其他工具集成。</p><h3 id="1-3-Grunt"><a href="#1-3-Grunt" class="headerlink" title="1.3 Grunt"></a>1.3 Grunt</h3><p>​        Grunt是一个基于任务的自动化构建工具，可以自动化执行JS压缩、文件合并、文件拷贝等任务。Grunt支持多种插件，可以扩展其功能，但配置较为复杂，对于大型项目来说需要较长时间的学习和配置。</p><h3 id="1-4-Vue-CLI"><a href="#1-4-Vue-CLI" class="headerlink" title="1.4 Vue CLI"></a>1.4 Vue CLI</h3><p>​        Vue CLI是一个官方的Vue.js脚手架工具，可以快速搭建Vue.js项目。Vue CLI支持自定义配置，包括Babel、ESLint等，并提供了丰富的插件和模板，可以快速构建出各种类型的Vue.js项目。 </p><h3 id="1-5-Create-React-App"><a href="#1-5-Create-React-App" class="headerlink" title="1.5 Create React App"></a>1.5 Create React App</h3><p>​        Create React App是一个官方的React脚手架工具，可以快速搭建React项目。Create React App可以快速生成一个基本的React项目，包括Webpack配置、测试工具等，也可以自定义配置。</p><h2 id="二、前端工程化工具和框架的比较与评估"><a href="#二、前端工程化工具和框架的比较与评估" class="headerlink" title="二、前端工程化工具和框架的比较与评估"></a>二、前端工程化工具和框架的比较与评估</h2><p>​        在实际项目中，选择最适合的前端工程化工具和框架需要综合考虑多个因素，如功能、易用性、性能、社区支持等。本文通过对实际案例的分析和评估，对常见的前端工程化工具和框架进行了比较和评估。</p><h3 id="2-1-功能"><a href="#2-1-功能" class="headerlink" title="2.1 功能"></a>2.1 功能</h3><p>​        在功能方面，Webpack、Gulp、Grunt都可以满足大多数的前端工程化需求，可以自动化构建、打包、压缩、合并等操作。Vue CLI和Create React App则更加专注于Vue.js和React.js项目的构建，提供了更加全面的功能支持。此外，还有一些其他的前端工程化工具和框架，如Parcel、Rollup、Brunch等，它们也各有特点。通过对这些工具和框架的功能进行比较，可以帮助开发者选择最适合自己项目的工具和框架。</p><h3 id="2-2-易用性"><a href="#2-2-易用性" class="headerlink" title="2.2 易用性"></a>2.2 易用性</h3><p>​        在易用性方面，Webpack、Vue CLI和Create React App都提供了一些默认配置，可以快速地创建项目，同时也支持自定义配置。Gulp、Grunt等工具则需要开发者手动配置，相对来说略显繁琐。另外，Webpack和Gulp等工具的配置文件都是使用JavaScript编写的，而Grunt和Vue CLI则采用了YAML或JSON等其他格式的配置文件。对于不同的开发者来说，选择最适合自己的配置方式也是一项需要考虑的因素。</p><h3 id="2-3-性能"><a href="#2-3-性能" class="headerlink" title="2.3 性能"></a>2.3 性能</h3><p>​        在性能方面，Webpack和Rollup等工具使用了模块化打包技术，可以有效地减少打包后的代码量，并提升运行时的性能表现。而Gulp和Grunt等工具则是使用任务流的方式进行处理，虽然相对来说更为灵活，但在处理大型项目时可能会存在性能问题。开发者需要根据自己项目的实际情况，综合考虑工具和框架的性能表现，选择最合适的工具和框架。</p><h3 id="2-4-社区支持"><a href="#2-4-社区支持" class="headerlink" title="2.4 社区支持"></a>2.4 社区支持</h3><p>​        在社区支持方面，Webpack、Vue CLI和Create React App等工具都拥有庞大的社区，提供了丰富的文档和插件支持，同时也有许多开发者积极贡献和维护相关项目。而Gulp和Grunt等工具虽然拥有一定的用户群体，但相对来说社区规模要小一些。开发者可以通过查看相关工具和框架的社区活跃度，了解其长期维护和发展的情况，选择最可靠的工具和框架。    </p><p>​        综合以上四个方面的考虑，本文对常见的前端工程化工具和框架进行了比较和评估，希望能够为开发者在选择最适合自己项目的工具和框架时提供一些参考。下一步，我们将针对选定的工具和框架进行具体的实践分析和案例研究。</p><h2 id="四、选型方法和注意事项"><a href="#四、选型方法和注意事项" class="headerlink" title="四、选型方法和注意事项"></a>四、选型方法和注意事项</h2><p>​        前端工程化工具和框架的选型不是一件容易的事情，需要考虑很多因素。下面我们介绍一些选型的关键因素和注意事项。</p><h3 id="4-1-项目需求"><a href="#4-1-项目需求" class="headerlink" title="4.1 项目需求"></a>4.1 项目需求</h3><p>​        首先，需要考虑项目的需求，包括应用类型、开发规模、技术栈等。如果是单页应用，需要选择支持SPA的工具和框架；如果是多页应用，需要选择支持多页应用的工具和框架。如果开发规模较小，可以选择易用性和快速上手的工具和框架；如果开发规模较大，需要选择功能强大、扩展性好的工具和框架。另外，需要考虑项目的技术栈，选择能够与当前技术栈协同工作的工具和框架。</p><h3 id="4-2-开发团队技能"><a href="#4-2-开发团队技能" class="headerlink" title="4.2 开发团队技能"></a>4.2 开发团队技能</h3><p>​        开发团队的技能也是选型的重要因素。如果开发团队已经熟悉某种工具或框架，可以选择相应的工具或框架，可以避免不必要的学习成本和时间浪费。如果开发团队对于某种工具或框架不熟悉，需要考虑学习成本和培训成本。</p><h3 id="4-3-社区支持"><a href="#4-3-社区支持" class="headerlink" title="4.3 社区支持"></a>4.3 社区支持</h3><p>​        社区支持也是选型的关键因素之一。工具和框架的社区活跃程度和开发者支持程度决定了其生命周期和发展前景。需要选择拥有活跃社区和良好支持的工具和框架，可以获得更好的使用体验和更好的技术支持。</p><h3 id="4-4-性能"><a href="#4-4-性能" class="headerlink" title="4.4 性能"></a>4.4 性能</h3><p>​        性能也是选型的重要因素。需要选择性能好的工具和框架，可以提高应用的响应速度和用户体验。需要考虑工具和框架的打包速度、执行效率、内存占用等方面的性能指标。</p><h3 id="4-5-安全"><a href="#4-5-安全" class="headerlink" title="4.5 安全"></a>4.5 安全</h3><p>​        安全也是选型的重要因素。需要选择安全可靠的工具和框架，可以保障应用的安全性和稳定性。需要考虑工具和框架的安全性能力，包括代码漏洞、控制台输出、HTTP请求安全等方面的安全指标。</p><h3 id="4-6-可维护性"><a href="#4-6-可维护性" class="headerlink" title="4.6 可维护性"></a>4.6 可维护性</h3><p>​        可维护性也是选型的关键因素之一。需要选择易于维护的工具和框架，可以降低代码的维护成本和维护难度。需要考虑工具和框架的代码结构、文档、测试框架和开发者工具等方面的可维护性指标。</p><h3 id="4-7-开源协议"><a href="#4-7-开源协议" class="headerlink" title="4.7 开源协议"></a>4.7 开源协议</h3><p>​        开源协议也是选型的考虑因素之一。需要选择合适的开源协议，以便在开发过程中遵守相关的法律和规定。需要注意的是，不同的开源协议有不同的授权方式和限制，需要仔细阅读和理解相关的条款。</p><h3 id="4-8-其他因素"><a href="#4-8-其他因素" class="headerlink" title="4.8 其他因素"></a>4.8 其他因素</h3><p>​        除了以上几个因素外，还有一些其他因素需要考虑，比如工具和框架的版本、更新频率、文档质量、生态系统等等。需要根据具体情况进行选择和权衡。</p><p>​        总之，选型需要根据项目需求、开发团队技能、社区支持、性能、安全、可维护性、开源协议等多方面因素进行综合考虑和权衡。选择合适的工具和框架可以提高开发效率和质量，同时也可以提高应用的性能和安全性，降低维护成本和难度。</p><h2 id="五、实践案例分析"><a href="#五、实践案例分析" class="headerlink" title="五、实践案例分析"></a>五、实践案例分析</h2><p>​        结合实际的项目案例，对选择的工具和框架进行实践和评估，并分析其优势和不足之处。</p><p>​        针对前端工程化工具和框架的选型研究，我们结合一个实际的项目案例，对选用的工具和框架进行了实践和评估。我们选择的项目是一个电商网站，涉及到的技术栈包括Vue.js、Webpack、PostCSS、ESLint等。在选型过程中，我们重点考虑了项目需求、开发团队技能、社区支持、性能、安全和可维护性等因素。</p><p>​        在实际的开发过程中，我们使用了Vue.js作为前端框架，Webpack作为打包工具，PostCSS作为CSS预处理器，ESLint作为代码检查工具。在使用过程中，我们发现Vue.js提供了很好的开发体验，可以快速开发复杂的单页应用，同时支持组件化开发，让代码结构更加清晰。Webpack的打包速度也很快，可以很好地满足项目的需求。PostCSS可以很好地处理CSS，提供了很多实用的插件，可以提高开发效率。ESLint则可以帮助我们检查代码中的潜在问题，提高代码的质量和可维护性。</p><p>​        不过，我们也发现了一些不足之处。Vue.js的学习曲线较陡峭，需要花费一定的时间和精力进行学习和掌握。Webpack的配置较为复杂，需要花费较长的时间进行调试和优化。PostCSS虽然提供了很多实用的插件，但在一些较为复杂的场景下可能会出现一些问题。ESLint的检查规则较为严格，需要对代码的书写规范有一定的了解。</p><p>​        综上所述，我们认为在选型时需要综合考虑项目需求、开发团队技能、社区支持、性能、安全和可维护性等因素，选择合适的工具和框架。在实际使用中，需要对选用的工具和框架进行深入的学习和掌握，并及时解决出现的问题，提高开发效率和代码质量。</p><h2 id="六、未来发展趋势"><a href="#六、未来发展趋势" class="headerlink" title="六、未来发展趋势"></a>六、未来发展趋势</h2><p>​        对前端工程化工具和框架的未来发展趋势进行分析和展望，如自动化程度的提高、工具和框架的多样性、可扩展性的提高等。 随着前端技术的不断发展，前端工程化工具和框架也在不断地演进和升级。未来，前端工程化工具和框架的发展趋势将主要表现在以下几个方面：</p><ol><li>自动化程度的提高：未来，前端工程化工具和框架将更加注重自动化程度的提高，包括自动化构建、自动化部署、自动化测试等方面。这将有助于降低开发和维护成本，提高开发效率和质量。</li><li>工具和框架的多样性：随着前端技术的发展和应用场景的不断扩展，前端工程化工具和框架的种类也将不断增多。未来，不同的工具和框架将逐渐形成各自的特点和优势，开发人员需要根据具体的项目需求和技术栈选择最适合的工具和框架。</li><li>可扩展性的提高：未来，前端工程化工具和框架将更加注重可扩展性的提高，包括模块化设计、插件化架构、组件化开发等方面。这将有助于提高工具和框架的灵活性和可定制性，满足不同项目的需求。</li><li>AI技术的应用：随着人工智能技术的不断发展，未来前端工程化工具和框架也将逐渐应用AI技术，如基于机器学习的代码自动生成、智能化的调试和优化等。这将进一步提高前端开发的效率和质量。</li></ol><p>​        总之，未来前端工程化工具和框架的发展将不断推动前端技术的发展，为前端开发人员提供更加便捷、高效、可靠的开发工具和框架，同时也将进一步提高前端应用的质量和用户体验。</p><h2 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h2><p>​        综上所述，前端工程化工具和框架是现代Web开发不可或缺的一部分，能够提高开发效率、优化应用性能、降低维护成本、提高开发体验等。选型时需要考虑项目需求、开发团队技能、社区支持、性能、安全和可维护性等因素。实践案例分析表明，正确选择和使用前端工程化工具和框架，能够有效提高项目开发效率和应用性能。未来，前端工程化工具和框架将继续朝着自动化程度更高、工具和框架多样性更丰富、可扩展性更强的方向发展。对于前端开发者来说，需要不断学习掌握新的技术和工具，以适应快速变化的技术环境和市场需求。</p>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>规范自己</title>
      <link href="/post/e0d.html"/>
      <url>/post/e0d.html</url>
      
        <content type="html"><![CDATA[<ul><li>有思想</li><li>有定力</li><li>培养自己的思维</li><li>对事不对人</li><li>控制自己的不确定性</li><li>合理渠道发泄</li><li>敢于表达</li><li>合理接受</li></ul>]]></content>
      
      
      <categories>
          
          <category> 自主 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>蒜法</title>
      <link href="/post/dd4.html"/>
      <url>/post/dd4.html</url>
      
        <content type="html"><![CDATA[<h2 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h2><h3 id="704-二分查找"><a href="#704-二分查找" class="headerlink" title="704. 二分查找"></a><a href="https://leetcode.cn/problems/binary-search/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">704. 二分查找</a></h3><blockquote><p>给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。</p><p>示例 1:</p><p>输入: nums = [-1,0,3,5,9,12], target = 9<br>输出: 4<br>解释: 9 出现在 nums 中并且下标为 4<br>示例 2:</p><p>输入: nums = [-1,0,3,5,9,12], target = 2<br>输出: -1<br>解释: 2 不存在 nums 中因此返回 -1</p><p>提示：</p><p>你可以假设 nums 中的所有元素是不重复的。<br>n 将在 [1, 10000]之间。<br>nums 的每个元素都将在 [-9999, 9999]之间。</p></blockquote><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">search</span>(<span class="params">nums: <span class="built_in">number</span>[], target: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">left</span>:<span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> <span class="attr">right</span>:<span class="built_in">number</span> = nums.<span class="property">length</span> - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(left &lt;= right) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="attr">mid</span>:<span class="built_in">number</span> = <span class="title class_">Math</span>.<span class="title function_">floor</span>((right-left)/<span class="number">2</span>)+left</span><br><span class="line">        <span class="keyword">let</span> <span class="attr">num</span>:<span class="built_in">number</span> = nums[mid]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(target == num) &#123;</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target &gt; num) &#123;</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target &lt; num) &#123;</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="278-第一个错误的版本"><a href="#278-第一个错误的版本" class="headerlink" title="278. 第一个错误的版本"></a><a href="https://leetcode.cn/problems/first-bad-version/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">278. 第一个错误的版本</a></h3><blockquote><p>你是产品经理，目前正在带领一个团队开发新的产品。不幸的是，你的产品的最新版本没有通过质量检测。由于每个版本都是基于之前的版本开发的，所以错误的版本之后的所有版本都是错的。</p><p>假设你有 n 个版本 [1, 2, …, n]，你想找出导致之后所有版本出错的第一个错误的版本。</p><p>你可以通过调用 bool isBadVersion(version) 接口来判断版本号 version 是否在单元测试中出错。实现一个函数来查找第一个错误的版本。你应该尽量减少对调用 API 的次数。</p><p>示例 1：</p><p>输入：n = 5, bad = 4<br>输出：4<br>解释：<br>调用 isBadVersion(3) -&gt; false<br>调用 isBadVersion(5) -&gt; true<br>调用 isBadVersion(4) -&gt; true<br>所以，4 是第一个错误的版本。<br>示例 2：</p><p>输入：n = 1, bad = 1<br>输出：1</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * Forward declaration of isBadVersion API.</span></span><br><span class="line"><span class="comment"> * @param   version   your guess about first bad version</span></span><br><span class="line"><span class="comment"> * @return        true if current version is bad </span></span><br><span class="line"><span class="comment"> *          false if current version is good</span></span><br><span class="line"><span class="comment"> * func isBadVersion(version int) bool;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">firstBadVersion</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    left, right := <span class="number">0</span>, n</span><br><span class="line">    <span class="keyword">for</span> left &lt; right &#123;</span><br><span class="line">        mid := left + (right-left)/<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> isBadVersion(mid) &#123;</span><br><span class="line">            right = mid</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> right</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="35-搜索插入位置"><a href="#35-搜索插入位置" class="headerlink" title="35. 搜索插入位置"></a><a href="https://leetcode.cn/problems/search-insert-position/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">35. 搜索插入位置</a></h3><blockquote><p>给定一个排序数组和一个目标值，在数组中找到目标值，并返回其索引。如果目标值不存在于数组中，返回它将会被按顺序插入的位置。</p><p>请必须使用时间复杂度为 O(log n) 的算法。</p><p>示例 1:</p><p>输入: nums = [1,3,5,6], target = 5<br>输出: 2<br>示例 2:</p><p>输入: nums = [1,3,5,6], target = 2<br>输出: 1<br>示例 3:</p><p>输入: nums = [1,3,5,6], target = 7<br>输出: 4</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">searchInsert</span><span class="params">(nums []<span class="type">int</span>, target <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    left, right := <span class="number">0</span>, <span class="built_in">len</span>(nums)<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> left &lt;= right &#123;</span><br><span class="line">        mid := left+(right-left)/<span class="number">2</span></span><br><span class="line">        num := nums[mid]</span><br><span class="line">        <span class="keyword">if</span> target == num &#123;</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> target &gt; num &#123;</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> target &lt; num &#123;</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> left</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="双指针"><a href="#双指针" class="headerlink" title="双指针"></a>双指针</h2><h3 id="977-有序数组的平方"><a href="#977-有序数组的平方" class="headerlink" title="977. 有序数组的平方"></a><a href="https://leetcode.cn/problems/squares-of-a-sorted-array/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">977. 有序数组的平方</a></h3><blockquote><p>给你一个按 非递减顺序 排序的整数数组 nums，返回 每个数字的平方 组成的新数组，要求也按 非递减顺序 排序。</p><p>示例 1：</p><p>输入：nums = [-4,-1,0,3,10]<br>输出：[0,1,9,16,100]<br>解释：平方后，数组变为 [16,1,0,9,100]<br>排序后，数组变为 [0,1,9,16,100]<br>示例 2：</p><p>输入：nums = [-7,-3,2,3,11]<br>输出：[4,9,9,49,121]</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sortedSquares</span><span class="params">(nums []<span class="type">int</span>)</span></span> []<span class="type">int</span> &#123;</span><br><span class="line">    left,right,i := <span class="number">0</span>,<span class="built_in">len</span>(nums)<span class="number">-1</span>,<span class="built_in">len</span>(nums)<span class="number">-1</span></span><br><span class="line">    arr := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="built_in">len</span>(nums))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(left &lt;= right) &#123;</span><br><span class="line">        leftVal := nums[left]*nums[left]</span><br><span class="line">        rightVal := nums[right]*nums[right]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(leftVal &gt; rightVal) &#123;</span><br><span class="line">            arr[i] = leftVal</span><br><span class="line">            left++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[i] = rightVal</span><br><span class="line">            right--</span><br><span class="line">        &#125;</span><br><span class="line">        i--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="189-轮转数组"><a href="#189-轮转数组" class="headerlink" title="189. 轮转数组"></a><a href="https://leetcode.cn/problems/rotate-array/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">189. 轮转数组</a></h3><blockquote><p>给定一个整数数组 nums，将数组中的元素向右轮转 k 个位置，其中 k 是非负数。</p><p>示例 1:</p><p>输入: nums = [1,2,3,4,5,6,7], k = 3<br>输出: [5,6,7,1,2,3,4]<br>解释:<br>向右轮转 1 步: [7,1,2,3,4,5,6]<br>向右轮转 2 步: [6,7,1,2,3,4,5]<br>向右轮转 3 步: [5,6,7,1,2,3,4]<br>示例 2:</p><p>输入：nums = [-1,-100,3,99], k = 2<br>输出：[3,99,-1,-100]<br>解释:<br>向右轮转 1 步: [99,-1,-100,3]<br>向右轮转 2 步: [3,99,-1,-100]</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">k</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">void</span>&#125; Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> rotate = <span class="keyword">function</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span>(k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        nums.<span class="title function_">unshift</span>(nums.<span class="title function_">pop</span>());</span><br><span class="line">        k--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="283-移动零"><a href="#283-移动零" class="headerlink" title="283. 移动零"></a><a href="https://leetcode.cn/problems/move-zeroes/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">283. 移动零</a></h3><blockquote><p>给定一个数组 nums，编写一个函数将所有 0 移动到数组的末尾，同时保持非零元素的相对顺序。</p><p>请注意 ，必须在不复制数组的情况下原地对数组进行操作。</p><p>示例 1:</p><p>输入: nums = [0,1,0,3,12]<br>输出: [1,3,12,0,0]<br>示例 2:</p><p>输入: nums = [0]<br>输出: [0]</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">moveZeroes</span><span class="params">(nums []<span class="type">int</span>)</span></span>  &#123;</span><br><span class="line">    cnt, low, fast := <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> fast &lt; <span class="built_in">len</span>(nums) &#123;</span><br><span class="line">        <span class="keyword">if</span> nums[fast] == <span class="number">0</span> &#123;</span><br><span class="line">            fast++</span><br><span class="line">            cnt++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nums[low] = nums[fast]</span><br><span class="line">            low++</span><br><span class="line">            fast++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i := <span class="built_in">len</span>(nums)-cnt</span><br><span class="line">    <span class="keyword">for</span> i &lt; <span class="built_in">len</span>(nums) &#123;</span><br><span class="line">        nums[i] = <span class="number">0</span></span><br><span class="line">        i++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="167-两数之和-II-输入有序数组"><a href="#167-两数之和-II-输入有序数组" class="headerlink" title="167. 两数之和 II - 输入有序数组"></a><a href="https://leetcode.cn/problems/two-sum-ii-input-array-is-sorted/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">167. 两数之和 II - 输入有序数组</a></h3><blockquote><p>给你一个下标从 1 开始的整数数组 numbers ，该数组已按 非递减顺序排列  ，请你从数组中找出满足相加之和等于目标数 target 的两个数。如果设这两个数分别是 numbers[index1] 和 numbers[index2] ，则 1 &lt;= index1 &lt; index2 &lt;= numbers.length 。</p><p>以长度为 2 的整数数组 [index1, index2] 的形式返回这两个整数的下标 index1 和 index2。</p><p>你可以假设每个输入 只对应唯一的答案 ，而且你 不可以 重复使用相同的元素。</p><p>你所设计的解决方案必须只使用常量级的额外空间。</p><p>示例 1：</p><p>输入：numbers = [2,7,11,15], target = 9<br>输出：[1,2]<br>解释：2 与 7 之和等于目标数 9 。因此 index1 = 1, index2 = 2 。返回 [1, 2] 。<br>示例 2：</p><p>输入：numbers = [2,3,4], target = 6<br>输出：[1,3]<br>解释：2 与 4 之和等于目标数 6 。因此 index1 = 1, index2 = 3 。返回 [1, 3] 。<br>示例 3：</p><p>输入：numbers = [-1,0], target = -1<br>输出：[1,2]<br>解释：-1 与 0 之和等于目标数 -1 。因此 index1 = 1, index2 = 2 。返回 [1, 2] 。</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">twoSum</span><span class="params">(numbers []<span class="type">int</span>, target <span class="type">int</span>)</span></span> []<span class="type">int</span> &#123;</span><br><span class="line">    left, right := <span class="number">0</span>, <span class="built_in">len</span>(numbers)<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> left &lt; right &#123;</span><br><span class="line">        lVal, rVal := numbers[left], numbers[right]</span><br><span class="line">        sum := lVal+rVal</span><br><span class="line">        <span class="keyword">if</span> sum == target &#123;</span><br><span class="line">            <span class="keyword">return</span> []<span class="type">int</span>&#123;left+<span class="number">1</span>, right+<span class="number">1</span>&#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(sum &gt; target) &#123;</span><br><span class="line">            right--</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            left++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> []<span class="type">int</span>&#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="344-反转字符串"><a href="#344-反转字符串" class="headerlink" title="344. 反转字符串"></a><a href="https://leetcode.cn/problems/reverse-string/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">344. 反转字符串</a></h3><blockquote><p>编写一个函数，其作用是将输入的字符串反转过来。输入字符串以字符数组 s 的形式给出。</p><p>不要给另外的数组分配额外的空间，你必须原地修改输入数组、使用 O(1) 的额外空间解决这一问题。</p><p>示例 1：</p><p>输入：s = [“h”,”e”,”l”,”l”,”o”]<br>输出：[“o”,”l”,”l”,”e”,”h”]<br>示例 2：</p><p>输入：s = [“H”,”a”,”n”,”n”,”a”,”h”]<br>输出：[“h”,”a”,”n”,”n”,”a”,”H”]</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverseString</span><span class="params">(s []<span class="type">byte</span>)</span></span>  &#123;</span><br><span class="line">    start, end := <span class="number">0</span>, <span class="built_in">len</span>(s)<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> start &lt; end &#123;</span><br><span class="line">        temp := s[start]</span><br><span class="line">        s[start] = s[end]</span><br><span class="line">        s[end] = temp</span><br><span class="line">        start++</span><br><span class="line">        end--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="557-反转字符串中的单词-III"><a href="#557-反转字符串中的单词-III" class="headerlink" title="557. 反转字符串中的单词 III"></a><a href="https://leetcode.cn/problems/reverse-words-in-a-string-iii/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">557. 反转字符串中的单词 III</a></h3><blockquote><p>给定一个字符串 s ，你需要反转字符串中每个单词的字符顺序，同时仍保留空格和单词的初始顺序。</p><p>示例 1：</p><p>输入：s = “Let’s take LeetCode contest”<br>输出：”s’teL ekat edoCteeL tsetnoc”<br>示例 2:</p><p>输入： s = “God Ding”<br>输出：”doG gniD”</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverseWords</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">    end,cnt := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    arr := []<span class="type">byte</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> (i+<span class="number">1</span> != <span class="built_in">len</span>(s)) &amp;&amp; (s[i+<span class="number">1</span>]!=<span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">            cnt++</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        end = i</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt;= cnt; j++ &#123;</span><br><span class="line">            arr = <span class="built_in">append</span>(arr, s[end-j])</span><br><span class="line">        &#125;</span><br><span class="line">        cnt = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> i+<span class="number">1</span>!=<span class="built_in">len</span>(s) &#123;</span><br><span class="line">            arr = <span class="built_in">append</span>(arr, <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">            i++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">string</span>(arr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="876-链表的中间结点"><a href="#876-链表的中间结点" class="headerlink" title="876. 链表的中间结点"></a><a href="https://leetcode.cn/problems/middle-of-the-linked-list/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">876. 链表的中间结点</a></h3><blockquote><p>给你单链表的头结点 head ，请你找出并返回链表的中间结点。</p><p>如果有两个中间结点，则返回第二个中间结点。</p><p>示例 1：</p><p><img src="../images/%E8%92%9C%E6%B3%95/lc-midlist1.jpg" alt="img"></p><p>输入：head = [1,2,3,4,5]<br>输出：[3,4,5]<br>解释：链表只有一个中间结点，值为 3 。<br>示例 2：</p><p><img src="../images/%E8%92%9C%E6%B3%95/lc-midlist2.jpg" alt="img"></p><p>输入：head = [1,2,3,4,5,6]<br>输出：[4,5,6]<br>解释：该链表有两个中间结点，值分别为 3 和 4 ，返回第二个结点。</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * type ListNode struct &#123;</span></span><br><span class="line"><span class="comment"> *     Val int</span></span><br><span class="line"><span class="comment"> *     Next *ListNode</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">middleNode</span><span class="params">(head *ListNode)</span></span> *ListNode &#123;</span><br><span class="line">    slow, fast := head, head</span><br><span class="line">    <span class="keyword">for</span> fast!=<span class="literal">nil</span> &amp;&amp; fast.Next!=<span class="literal">nil</span> &#123;</span><br><span class="line">        slow = slow.Next</span><br><span class="line">        fast = fast.Next.Next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> slow</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="19-删除链表的倒数第-N-个结点"><a href="#19-删除链表的倒数第-N-个结点" class="headerlink" title="19. 删除链表的倒数第 N 个结点"></a><a href="https://leetcode.cn/problems/remove-nth-node-from-end-of-list/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">19. 删除链表的倒数第 N 个结点</a></h3><blockquote><p>给你一个链表，删除链表的倒数第 n 个结点，并且返回链表的头结点。</p><p>示例 1：</p><p><img src="../images/%E8%92%9C%E6%B3%95/remove_ex1.jpg" alt="img"></p><p>输入：head = [1,2,3,4,5], n = 2<br>输出：[1,2,3,5]<br>示例 2：</p><p>输入：head = [1], n = 1<br>输出：[]<br>示例 3：</p><p>输入：head = [1,2], n = 1<br>输出：[1]</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * type ListNode struct &#123;</span></span><br><span class="line"><span class="comment"> *     Val int</span></span><br><span class="line"><span class="comment"> *     Next *ListNode</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeNthFromEnd</span><span class="params">(head *ListNode, n <span class="type">int</span>)</span></span> *ListNode &#123;</span><br><span class="line">    dummy := &amp;ListNode&#123;<span class="number">0</span>, head&#125;</span><br><span class="line">    slow, fast := dummy, dummy</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;n; i++ &#123;</span><br><span class="line">        fast = fast.Next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> fast.Next!=<span class="literal">nil</span> &amp;&amp; fast!=<span class="literal">nil</span> &#123;</span><br><span class="line">        fast = fast.Next</span><br><span class="line">        slow = slow.Next</span><br><span class="line">    &#125;</span><br><span class="line">    slow.Next = slow.Next.Next</span><br><span class="line">    <span class="keyword">return</span> dummy.Next</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h2><h3 id="3-无重复字符的最长子串"><a href="#3-无重复字符的最长子串" class="headerlink" title="3. 无重复字符的最长子串"></a><a href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">3. 无重复字符的最长子串</a></h3><blockquote><p>给你两个字符串 s1 和 s2 ，写一个函数来判断 s2 是否包含 s1 的排列。如果是，返回 true ；否则，返回 false 。</p><p>换句话说，s1 的排列之一是 s2 的 子串 。</p><p>示例 1：</p><p>输入：s1 = “ab” s2 = “eidbaooo”<br>输出：true<br>解释：s2 包含 s1 的排列之一 (“ba”).<br>示例 2：</p><p>输入：s1= “ab” s2 = “eidboaoo”<br>输出：false</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkInclusion</span><span class="params">(s1 <span class="type">string</span>, s2 <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    n,m := <span class="built_in">len</span>(s1),<span class="built_in">len</span>(s2)</span><br><span class="line">    <span class="keyword">if</span> n &gt; m &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    cnt1, cnt2 := [<span class="number">26</span>]<span class="type">int</span>&#123;&#125;, [<span class="number">26</span>]<span class="type">int</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">        cnt1[s1[i] - <span class="string">&#x27;a&#x27;</span>]++</span><br><span class="line">        cnt2[s2[i] - <span class="string">&#x27;a&#x27;</span>]++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> cnt1 == cnt2 &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := n; i &lt; m; i++ &#123;</span><br><span class="line">        cnt2[s2[i] - <span class="string">&#x27;a&#x27;</span>]++</span><br><span class="line">        cnt2[s2[i-n] - <span class="string">&#x27;a&#x27;</span>]--</span><br><span class="line">        <span class="keyword">if</span> cnt1 == cnt2 &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">s1</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">s2</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> checkInclusion = <span class="keyword">function</span>(<span class="params">s1, s2</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> n = s1.<span class="property">length</span>, m = s2.<span class="property">length</span></span><br><span class="line">    <span class="keyword">if</span>(n &gt; m) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> cnt1 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">26</span>).<span class="title function_">fill</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> cnt2 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">26</span>).<span class="title function_">fill</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        cnt1[s1[i].<span class="title function_">charCodeAt</span>() - <span class="string">&#x27;a&#x27;</span>.<span class="title function_">charCodeAt</span>()]++</span><br><span class="line">        cnt2[s2[i].<span class="title function_">charCodeAt</span>() - <span class="string">&#x27;a&#x27;</span>.<span class="title function_">charCodeAt</span>()]++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt1.<span class="title function_">toString</span>() === cnt2.<span class="title function_">toString</span>()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = n; i &lt; m; i++) &#123;</span><br><span class="line">        cnt2[s2[i].<span class="title function_">charCodeAt</span>() - <span class="string">&#x27;a&#x27;</span>.<span class="title function_">charCodeAt</span>()]++</span><br><span class="line">        cnt2[s2[i-n].<span class="title function_">charCodeAt</span>() - <span class="string">&#x27;a&#x27;</span>.<span class="title function_">charCodeAt</span>()]--</span><br><span class="line">        <span class="keyword">if</span>(cnt1.<span class="title function_">toString</span>() === cnt2.<span class="title function_">toString</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="567-字符串的排列"><a href="#567-字符串的排列" class="headerlink" title="567. 字符串的排列"></a><a href="https://leetcode.cn/problems/permutation-in-string/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">567. 字符串的排列</a></h3><blockquote><p>给定一个字符串 s ，请你找出其中不含有重复字符的 最长子串 的长度。</p><p>示例 1:</p><p>输入: s = “abcabcbb”<br>输出: 3<br>解释: 因为无重复字符的最长子串是 “abc”，所以其长度为 3。<br>示例 2:</p><p>输入: s = “bbbbb”<br>输出: 1<br>解释: 因为无重复字符的最长子串是 “b”，所以其长度为 1。<br>示例 3:</p><p>输入: s = “pwwkew”<br>输出: 3<br>解释: 因为无重复字符的最长子串是 “wke”，所以其长度为 3。<br>请注意，你的答案必须是 子串 的长度，”pwke” 是一个子序列，不是子串。</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    set := <span class="keyword">map</span>[<span class="type">byte</span>]<span class="type">int</span>&#123;&#125;</span><br><span class="line">    <span class="built_in">len</span> := <span class="built_in">len</span>(s)</span><br><span class="line">    right, ans := <span class="number">-1</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>;i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i!=<span class="number">0</span> &#123;</span><br><span class="line">            <span class="built_in">delete</span>(set, s[i<span class="number">-1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> right+<span class="number">1</span>&lt;<span class="built_in">len</span> &amp;&amp; set[s[right+<span class="number">1</span>]]==<span class="number">0</span> &#123;</span><br><span class="line">            set[s[right+<span class="number">1</span>]]++</span><br><span class="line">            right++</span><br><span class="line">        &#125;</span><br><span class="line">        ans = max(ans, right+<span class="number">1</span>-i)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(x, y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(x &lt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">s</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> lengthOfLongestSubstring = <span class="keyword">function</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br><span class="line">    <span class="keyword">let</span> right = -<span class="number">1</span>, len = s.<span class="property">length</span>, ans = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != <span class="number">0</span>) &#123;</span><br><span class="line">            set.<span class="title function_">delete</span>(s.<span class="title function_">charAt</span>(i-<span class="number">1</span>))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(right+<span class="number">1</span> &lt; len &amp;&amp; !set.<span class="title function_">has</span>(s.<span class="title function_">charAt</span>(right+<span class="number">1</span>))) &#123;</span><br><span class="line">            set.<span class="title function_">add</span>(s.<span class="title function_">charAt</span>(right+<span class="number">1</span>))</span><br><span class="line">            right++</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans, right+<span class="number">1</span>-i)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="BFS-DFS"><a href="#BFS-DFS" class="headerlink" title="BFS/DFS"></a>BFS/DFS</h2><h3 id="🧩733-图像渲染"><a href="#🧩733-图像渲染" class="headerlink" title="🧩733. 图像渲染"></a><a href="https://leetcode.cn/problems/flood-fill/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">🧩733. 图像渲染</a></h3><blockquote><p>有一幅以 m x n 的二维整数数组表示的图画 image ，其中 image[i][j] 表示该图画的像素值大小。</p><p>你也被给予三个整数 sr ,  sc 和 newColor 。你应该从像素 image[sr[sc 开始对图像进行 上色填充 。</p><p>为了完成 上色工作 ，从初始像素开始，记录初始坐标的 上下左右四个方向上 像素值与初始坐标相同的相连像素点，接着再记录这四个方向上符合条件的像素点与他们对应 四个方向上 像素值与初始坐标相同的相连像素点，……，重复该过程。将所有有记录的像素点的颜色值改为 newColor 。</p><p>最后返回 经过上色渲染后的图像 。</p><p> <img src="../images/%E8%92%9C%E6%B3%95/flood1-grid.jpg" alt="img"></p><p>示例 1:</p><p>输入: image = [[1,1,1],[1,1,0],[1,0,1]]，sr = 1, sc = 1, newColor = 2<br>输出: [[2,2,2],[2,2,0],[2,0,1]]<br>解析: 在图像的正中间，(坐标(sr,sc)=(1,1)),在路径上所有符合条件的像素点的颜色都被更改成2。<br>注意，右下角的像素没有更改为2，因为它不是在上下左右四个方向上与初始点相连的像素点。<br>示例 2:</p><p>输入: image = [[0,0,0],[0,0,0]], sr = 0, sc = 0, newColor = 2<br>输出: [[2,2,2],[2,2,2]]</p></blockquote><h4 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h4><p>这是一个BFS/DFS典中典题！</p><p>已知：题目已经告诉我们 图像数组<code>image(行列m*n)</code>，起始点<code>(sr, sc)</code>，需求色<code>color</code>。</p><p>要求：将从该点起步，将<code>自身</code>以及<code>其上/下/左/右方向上相邻色块</code>中，不同于需求颜色的原始色更改，最后返回image数组。</p><p>思路(BFS)：</p><ol><li>判断起始点颜色是否为需求色color。如果是，直接返回数组；反之，存储原始色rawColor，并将数组中对应值改为color值。</li><li>我们初始化一个队列<code>queue = [&#123;x: sr, y: rc&#125;]</code>，用于存放  被搜寻到的 且 颜色为rawColor  的色块。</li><li>接下来我们详细阐述此题广搜步骤：<ol><li>将队列中首元素提出，颜色改为color值</li><li>分别搜索该元素<code>上/下/左/右(对应x/y增减，四种)</code>块中是rawColor且在图片范围内的元素，随后将其加入队列中，并改颜色</li><li>由于我们在这一次的搜索中，遍历了某一层元素的<code>下一层元素</code>，那么在下一次搜索中，我们需要将<code>该层</code>元素提取出来进行搜索</li><li>直至全部搜寻到(介时队列为空，长度为0)</li></ol></li></ol><p>以下是我算是 第一次用JS写BFS 代码+注释↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BFS</span></span><br><span class="line"><span class="keyword">var</span> floodFill = <span class="keyword">function</span>(<span class="params">image, sr, sc, color</span>) &#123;</span><br><span class="line">    <span class="comment">// 起始点颜色</span></span><br><span class="line">    <span class="keyword">let</span> rawColor = image[sr][sc]</span><br><span class="line">    <span class="comment">// 如果颜色一样直接返回</span></span><br><span class="line">    <span class="keyword">if</span> (rawColor === color) &#123;</span><br><span class="line">        <span class="keyword">return</span> image</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果不一样，开始广搜</span></span><br><span class="line">    <span class="keyword">let</span> queue = [&#123;<span class="attr">x</span>:sr, <span class="attr">y</span>:sc&#125;],<span class="comment">// 符合条件的像素块组成的队列（范围内，相邻，是起始颜色）</span></span><br><span class="line">        dx = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>],<span class="comment">// 位移坐标</span></span><br><span class="line">        dy = [<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">        rowLen = image.<span class="property">length</span>,<span class="comment">// 图画长宽-图画边框范围</span></span><br><span class="line">        colLen = image[<span class="number">0</span>].<span class="property">length</span></span><br><span class="line">    <span class="comment">// 遍历队列</span></span><br><span class="line">    <span class="keyword">while</span> (queue.<span class="property">length</span> != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 队列中首元素pop</span></span><br><span class="line">        <span class="keyword">let</span> &#123;x, y&#125; = queue.<span class="title function_">shift</span>()</span><br><span class="line">        <span class="comment">// 首元素改颜色</span></span><br><span class="line">        image[x][y] = color</span><br><span class="line">        <span class="comment">// 该元素相邻搜一下</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// 相邻元素坐标</span></span><br><span class="line">            <span class="keyword">let</span> newX = x+dx[i], newY = y+dy[i]</span><br><span class="line">            <span class="comment">// 在画框范围内，且为起始颜色</span></span><br><span class="line">            <span class="keyword">if</span>(newX&gt;=<span class="number">0</span> &amp;&amp; newX&lt;rowLen &amp;&amp; newY&gt;=<span class="number">0</span> &amp;&amp; newY&lt;colLen &amp;&amp; image[newX][newY] == rawColor) &#123;</span><br><span class="line">                <span class="comment">// 添加到队列中</span></span><br><span class="line">                queue.<span class="title function_">push</span>(&#123;<span class="attr">x</span>: newX, <span class="attr">y</span>: newY&#125;)</span><br><span class="line">                <span class="comment">// 且改变为要求颜色</span></span><br><span class="line">                image[newX][newY] = color</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> image</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><p>这位佬写的代码超级简洁且优雅↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[][]</span>&#125; <span class="variable">image</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">sr</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">sc</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">color</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number[][]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// DFS</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">floodFill</span> = (<span class="params">image, sr, sc, newColor</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> m = image.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">const</span> n = image[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">const</span> oldColor = image[sr][sc];</span><br><span class="line">    <span class="keyword">if</span> (oldColor == newColor) <span class="keyword">return</span> image;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">fill</span> = (<span class="params">i, j</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= m || j &lt; <span class="number">0</span> || j &gt;= n || image[i][j] != oldColor) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        image[i][j] = newColor;</span><br><span class="line">        <span class="title function_">fill</span>(i - <span class="number">1</span>, j);</span><br><span class="line">        <span class="title function_">fill</span>(i + <span class="number">1</span>, j);</span><br><span class="line">        <span class="title function_">fill</span>(i, j - <span class="number">1</span>);</span><br><span class="line">        <span class="title function_">fill</span>(i, j + <span class="number">1</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">fill</span>(sr, sc);</span><br><span class="line">    <span class="keyword">return</span> image;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// BFS</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">floodFill</span> = (<span class="params">image, sr, sc, newColor</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> m = image.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">const</span> n = image[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">const</span> oldColor = image[sr][sc];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldColor == newColor) <span class="keyword">return</span> image;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> queue = [[sr, sc]];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (queue.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> [i, j] = queue.<span class="title function_">shift</span>();</span><br><span class="line">        image[i][j] = newColor;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; image[i - <span class="number">1</span>][j] == oldColor) queue.<span class="title function_">push</span>([i - <span class="number">1</span>, j]);</span><br><span class="line">        <span class="keyword">if</span> (i + <span class="number">1</span> &lt; m &amp;&amp; image[i + <span class="number">1</span>][j] == oldColor) queue.<span class="title function_">push</span>([i + <span class="number">1</span>, j]);</span><br><span class="line">        <span class="keyword">if</span> (j - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; image[i][j - <span class="number">1</span>] == oldColor) queue.<span class="title function_">push</span>([i, j - <span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">if</span> (j + <span class="number">1</span> &lt; n &amp;&amp; image[i][j + <span class="number">1</span>] == oldColor) queue.<span class="title function_">push</span>([i, j + <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> image;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="🏝695-岛屿的最大面积"><a href="#🏝695-岛屿的最大面积" class="headerlink" title="🏝695. 岛屿的最大面积"></a><a href="https://leetcode.cn/problems/max-area-of-island/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">🏝695. 岛屿的最大面积</a></h3><blockquote><p>给你一个大小为 m x n 的二进制矩阵 grid 。</p><p>岛屿 是由一些相邻的 1 (代表土地) 构成的组合，这里的「相邻」要求两个 1 必须在 水平或者竖直的四个方向上 相邻。你可以假设 grid 的四个边缘都被 0（代表水）包围着。</p><p>岛屿的面积是岛上值为 1 的单元格的数目。</p><p>计算并返回 grid 中最大的岛屿面积。如果没有岛屿，则返回面积为 0 。</p><img src="../images/%E8%92%9C%E6%B3%95/maxarea1-grid.jpg" alt="img" style="zoom:50%;" /><p>示例 1：</p><p>输入：grid = [[0,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,0,0,0],[0,1,1,0,1,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,0,1,0,1,0,0],[0,1,0,0,1,1,0,0,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,1,1,0,0,0,0]]<br>输出：6<br>解释：答案不应该是 11 ，因为岛屿只能包含水平或垂直这四个方向上的 1 。</p><p>示例 2：</p><p>输入：grid = [[0,0,0,0,0,0,0,0]]<br>输出：0</p></blockquote><h4 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h4><p>已知：<code>grid(m*n)</code> <code>岛屿是1，水是0</code></p><p>要求：最大的岛屿面积<code>ans</code>（四个正方向相邻的1块才属于同一个岛屿）</p><p>思路:</p><ol><li>此题较上题多了一层逻辑，那就是需要自行寻找<code>起始点</code>，我们不妨对grid这个二维数组套用行列遍历</li><li>随后进行广搜/深搜</li><li>那么这个题，让我们顺一下深搜步骤：<ol><li>我们不妨声明一个 名为dfs的 返回ans值的 用来搞递归的 函数</li><li>当我们对一个元素进行上下左右搜索时，分别对搜索到的(符合条件的)元素进行上下左右搜索，←的同时对搜索到的元素进行上下左右搜索……</li><li>补充一个环节，那就是当搜索的元素不符合条件的时候，return 回溯到上一层（在本题中，返回ans值为0)</li></ol></li></ol><p>请直接移移步到大佬写的代码↓</p><h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h4><p>优雅太优雅了↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[][]</span>&#125; <span class="variable">grid</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 大佬的DFS</span></span><br><span class="line"><span class="keyword">var</span> maxAreaOfIsland = <span class="keyword">function</span>(<span class="params">grid</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span></span><br><span class="line">    <span class="keyword">const</span> m = grid.<span class="property">length</span>, n = grid[<span class="number">0</span>].<span class="property">length</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">dfs</span> (x, y) &#123;</span><br><span class="line">        <span class="keyword">if</span>(x &lt; <span class="number">0</span> || x &gt;= m || y &lt; <span class="number">0</span> || y &gt;= n || grid[x][y] === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        grid[x][y] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> ans = <span class="number">1</span></span><br><span class="line">        <span class="keyword">const</span> dx = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>], dy = [<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            ans += <span class="title function_">dfs</span>(x+dx[i], y+dy[i])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(grid[i][j] === <span class="number">0</span>) <span class="keyword">continue</span></span><br><span class="line">            ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans, <span class="title function_">dfs</span>(i, j))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大佬的BFS</span></span><br><span class="line"><span class="keyword">var</span> maxAreaOfIsland = <span class="keyword">function</span>(<span class="params">grid</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>, row = grid.<span class="property">length</span>, col = grid[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">let</span> dx = [<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], dy = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>];<span class="comment">//方向数组</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] === <span class="number">0</span>) <span class="keyword">continue</span>;<span class="comment">//循环网格，遇到0就跳过</span></span><br><span class="line">            <span class="keyword">let</span> queue = [[i, j]], curr = <span class="number">0</span>;<span class="comment">//在队列中加入当前网格的值</span></span><br><span class="line">            <span class="keyword">while</span> (queue.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> [x, y] = queue.<span class="title function_">shift</span>();<span class="comment">//不断出队</span></span><br><span class="line">              <span class="comment">//越界判断</span></span><br><span class="line">                <span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= row || y &lt; <span class="number">0</span> || y &gt;= col || grid[x][y] === <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                ++curr;<span class="comment">//更新岛屿的数量</span></span><br><span class="line">                grid[x][y] = <span class="number">0</span>;<span class="comment">//遍历过的网格置为0</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; dx.<span class="property">length</span>; k++) &#123;<span class="comment">//上下左右遍历，把下一层的节点加入队列</span></span><br><span class="line">                    queue.<span class="title function_">push</span>([x + dx[k], y + dy[k]]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans, curr);<span class="comment">//更新最大岛屿面积</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 我的BFS——哥们儿就喜欢BFS（等待打脸）</span></span><br><span class="line"><span class="keyword">var</span> maxAreaOfIsland = <span class="keyword">function</span>(<span class="params">grid</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>, m = grid.<span class="property">length</span>, n = grid[<span class="number">0</span>].<span class="property">length</span></span><br><span class="line">    <span class="keyword">const</span> dx = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>], dy = [<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> queue = [&#123;<span class="attr">x</span>: i, <span class="attr">y</span>: j&#125;], s = <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> (queue.<span class="property">length</span> != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> &#123;x, y&#125; = queue.<span class="title function_">shift</span>()</span><br><span class="line">                grid[x][y] = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">                    <span class="keyword">let</span> newX = x + dx[k], newY = y + dy[k]</span><br><span class="line">                    <span class="keyword">if</span> (newX &gt;= <span class="number">0</span> &amp;&amp; newY &gt;= <span class="number">0</span> &amp;&amp; newX &lt; m &amp;&amp; newY &lt; n &amp;&amp; grid[newX][newY] == <span class="number">1</span>) &#123;</span><br><span class="line">                        queue.<span class="title function_">push</span>(&#123;<span class="attr">x</span>: newX, <span class="attr">y</span>: newY&#125;)</span><br><span class="line">                        grid[newX][newY] = <span class="number">0</span></span><br><span class="line">                        s++</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans, s)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="🌲617-合并二叉树"><a href="#🌲617-合并二叉树" class="headerlink" title="🌲617. 合并二叉树"></a><a href="https://leetcode.cn/problems/merge-two-binary-trees/">🌲617. 合并二叉树</a></h3><blockquote><p>给你两棵二叉树： root1 和 root2 。</p><p>想象一下，当你将其中一棵覆盖到另一棵之上时，两棵树上的一些节点将会重叠（而另一些不会）。你需要将这两棵树合并成一棵新二叉树。合并的规则是：如果两个节点重叠，那么将这两个节点的值相加作为合并后节点的新值；否则，不为 null 的节点将直接作为新二叉树的节点。</p><p>返回合并后的二叉树。</p><p>注意: 合并过程必须从两个树的根节点开始。</p><p>示例 1：</p><p>输入：root1 = [1,3,2,5], root2 = [2,1,3,null,4,null,7]<br>输出：[3,4,5,5,4,null,7]<br>示例 2：</p><p>输入：root1 = [1], root2 = [1,2]<br>输出：[2,2]</p></blockquote><h4 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h4><ol><li><p>我们<code>直接在root1上做修改</code>，我们简称两者为一和二：</p><ol><li>当仅一为空的时候，递归函数返回二</li><li>当仅二为空的时候，递归函数返回一</li><li>两者皆空依然返回一</li><li>两者都不空，那.val相加</li></ol></li><li><p>调用函数本身，实现节点左右孩子合并</p></li></ol><h4 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">TreeNode</span>&#125; <span class="variable">root1</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">TreeNode</span>&#125; <span class="variable">root2</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">TreeNode</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> mergeTrees = <span class="keyword">function</span>(<span class="params">root1, root2</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!root1) &#123;</span><br><span class="line">        <span class="keyword">return</span> root2</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!root2) &#123;</span><br><span class="line">        <span class="keyword">return</span> root1</span><br><span class="line">    &#125;</span><br><span class="line">    root1.<span class="property">val</span> += root2.<span class="property">val</span></span><br><span class="line"></span><br><span class="line">    root1,left = <span class="title function_">mergeTrees</span>(root1.<span class="property">left</span>, root2.<span class="property">left</span>)</span><br><span class="line">    root1.<span class="property">right</span> = <span class="title function_">mergeTrees</span>(root1.<span class="property">right</span>, root2.<span class="property">right</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root1</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 当然也可以新开一个树，不在原树上做更改。</span></span><br></pre></td></tr></table></figure><h3 id="👉116-填充每个节点的下一个右侧节点指针"><a href="#👉116-填充每个节点的下一个右侧节点指针" class="headerlink" title="👉116. 填充每个节点的下一个右侧节点指针"></a><a href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">👉116. 填充每个节点的下一个右侧节点指针</a></h3><blockquote><p>给定一个 完美二叉树 ，其所有叶子节点都在同一层，每个父节点都有两个子节点。二叉树定义如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">struct <span class="title class_">Node</span> &#123;</span><br><span class="line">  int val;</span><br><span class="line">  <span class="title class_">Node</span> *left;</span><br><span class="line">  <span class="title class_">Node</span> *right;</span><br><span class="line">  <span class="title class_">Node</span> *next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>填充它的每个 next 指针，让这个指针指向其下一个右侧节点。如果找不到下一个右侧节点，则将 next 指针设置为 NULL。</p><p>初始状态下，所有 next 指针都被设置为 NULL。</p><p>示例 1：</p><img src="../images/%E8%92%9C%E6%B3%95/116_sample.png" alt="img" style="zoom:50%;" /><p>输入：root = [1,2,3,4,5,6,7]<br>输出：[1,#,2,3,#,4,5,6,7,#]<br>解释：给定二叉树如图 A 所示，你的函数应该填充它的每个 next 指针，以指向其下一个右侧节点，如图 B 所示。序列化的输出按层序遍历排列，同一层节点由 next 指针连接，’#’ 标志着每一层的结束。<br>示例 2:（注意看这个看着像示例2的示例2）</p><p>输入：root = []<br>输出：[]</p></blockquote><h4 id="解题思路-层次遍历"><a href="#解题思路-层次遍历" class="headerlink" title="解题思路(层次遍历)"></a>解题思路(层次遍历)</h4><p>发现广搜深搜可以变简洁的小思路是先排除无效的，比如示例二这种</p><ol><li>所以先排除root=null的情况</li><li>将根节点放入新开队列中，开始按层遍历</li><li>遍历过程中需要完成两项任务：<ol><li>同层next赋值</li><li>将下一层增加到队列中</li></ol></li></ol><h4 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * // Definition for a Node.</span></span><br><span class="line"><span class="comment"> * function Node(val, left, right, next) &#123;</span></span><br><span class="line"><span class="comment"> *    this.val = val === undefined ? null : val;</span></span><br><span class="line"><span class="comment"> *    this.left = left === undefined ? null : left;</span></span><br><span class="line"><span class="comment"> *    this.right = right === undefined ? null : right;</span></span><br><span class="line"><span class="comment"> *    this.next = next === undefined ? null : next;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Node</span>&#125; <span class="variable">root</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Node</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> connect = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> root</span><br><span class="line">    <span class="keyword">const</span> queue = [root]</span><br><span class="line">    <span class="keyword">while</span> (queue.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> size = queue.<span class="property">length</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> node = queue.<span class="title function_">shift</span>()</span><br><span class="line">            <span class="keyword">if</span> (i &lt; size - <span class="number">1</span>) &#123;</span><br><span class="line">                node.<span class="property">next</span> = queue[<span class="number">0</span>]</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.<span class="property">left</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.<span class="title function_">push</span>(node.<span class="property">left</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.<span class="property">right</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.<span class="title function_">push</span>(node.<span class="property">right</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 还有一种直接用.next</span></span><br><span class="line"><span class="comment">// node.right.next = node.left    node.right.next = node.next.left</span></span><br></pre></td></tr></table></figure><h3 id="🍊994-腐烂的橘子"><a href="#🍊994-腐烂的橘子" class="headerlink" title="🍊994. 腐烂的橘子"></a><a href="https://leetcode.cn/problems/rotting-oranges/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">🍊994. 腐烂的橘子</a></h3><blockquote><p>在给定的 m x n 网格 grid 中，每个单元格可以有以下三个值之一：</p><p>值 0 代表空单元格；<br>值 1 代表新鲜橘子；<br>值 2 代表腐烂的橘子。<br>每分钟，腐烂的橘子 周围 4 个方向上相邻 的新鲜橘子都会腐烂。</p><p>返回 直到单元格中没有新鲜橘子为止所必须经过的最小分钟数。如果不可能，返回 -1 。</p><p>示例 1：</p><p>输入：grid = [[2,1,1],[1,1,0],[0,1,1]]<br>输出：4<br>示例 2：</p><p>输入：grid = [[2,1,1],[0,1,1],[1,0,1]]<br>输出：-1<br>解释：左下角的橘子（第 2 行， 第 0 列）永远不会腐烂，因为腐烂只会发生在 4 个正向上。<br>示例 3：</p><p>输入：grid = [[0,2]]<br>输出：0<br>解释：因为 0 分钟时已经没有新鲜橘子了，所以答案就是 0 。</p></blockquote><h4 id="解题思路-BFS"><a href="#解题思路-BFS" class="headerlink" title="解题思路(BFS)"></a>解题思路(BFS)</h4><ol><li>与烂橘子相邻的好橘子会在一分钟后腐烂</li><li>假设最开始所有的烂橘子是第0层，那么隔一分钟烂一层（其下层就是其上下左右方向的好橘子）</li><li>如果<code>存在不挨着任何一个烂橘子的好橘子</code>，返回-1；如果到最后<code>都烂了</code>，返回层数；如果<code>一开始没有好橘子</code>，返回0</li></ol><h4 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[][]</span>&#125; <span class="variable">grid</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> orangesRotting = <span class="keyword">function</span>(<span class="params">grid</span>) &#123;</span><br><span class="line">    <span class="comment">// 好果子耶！</span></span><br><span class="line">    <span class="keyword">let</span> fresh = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 框定边界</span></span><br><span class="line">    <span class="keyword">const</span> row = grid.<span class="property">length</span>, col = grid[<span class="number">0</span>].<span class="property">length</span></span><br><span class="line">    <span class="comment">// 工具队列（专门盛放烂橘子）</span></span><br><span class="line">    <span class="keyword">let</span> que = []</span><br><span class="line">    <span class="comment">// 遍历筐内所有橘子，好的fresh+1，坏的添加到队列</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(grid[i][j] === <span class="number">1</span>) &#123;</span><br><span class="line">                fresh++</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (grid[i][j] === <span class="number">2</span>) &#123;</span><br><span class="line">                que.<span class="title function_">push</span>([i, j])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 位移数组</span></span><br><span class="line">    <span class="keyword">const</span> dx = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">const</span> dy = [<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">    <span class="comment">// 找不到坏果子就不算0层（-1层）</span></span><br><span class="line">    <span class="keyword">let</span> cnt = -<span class="number">1</span></span><br><span class="line">    <span class="comment">// 按层遍历</span></span><br><span class="line">    <span class="keyword">while</span> (que.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="comment">// 层数+1</span></span><br><span class="line">        cnt++</span><br><span class="line">        <span class="comment">// 每层烂橘子个数</span></span><br><span class="line">        <span class="keyword">let</span> size = que.<span class="property">length</span></span><br><span class="line">        <span class="comment">// 遍历cnt层</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="comment">// 去除一个当做父节点</span></span><br><span class="line">            <span class="keyword">let</span> [x, y] = que.<span class="title function_">shift</span>()</span><br><span class="line">            <span class="comment">// 寻找自己的上下左右孩子（感染对象）</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">let</span> newX = x + dx[j], newY = y + dy[j]</span><br><span class="line">                <span class="keyword">if</span> (newX &lt; <span class="number">0</span> || newY &lt; <span class="number">0</span> || newX &gt;= row || newY &gt;= col || grid[newX][newY] !== <span class="number">1</span>) <span class="keyword">continue</span></span><br><span class="line">                <span class="comment">// 找到一个感染对象！把它感染，并放进队列，好橘子个数fresh-1</span></span><br><span class="line">                grid[newX][newY] = <span class="number">2</span></span><br><span class="line">                que.<span class="title function_">push</span>([newX, newY])</span><br><span class="line">                fresh--</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果还有好橘子-1；如果一开始就没好橘子0；好橘子都没了cnt</span></span><br><span class="line">    <span class="keyword">return</span> fresh &gt; <span class="number">0</span> ? -<span class="number">1</span> : (cnt &lt;= <span class="number">0</span> ? <span class="number">0</span> : cnt)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="？🎛542-01-矩阵"><a href="#？🎛542-01-矩阵" class="headerlink" title="？🎛542. 01 矩阵"></a>？<a href="https://leetcode.cn/problems/01-matrix/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">🎛542. 01 矩阵</a></h3><blockquote><p>给定一个由 0 和 1 组成的矩阵 mat ，请输出一个大小相同的矩阵，其中每一个格子是 mat 中对应位置元素到最近的 0 的距离。</p><p>两个相邻元素间的距离为 1 。</p><p>示例 1：</p><p><img src="../images/%E8%92%9C%E6%B3%95/1626667201-NCWmuP-image.png" alt="img"></p><p>输入：mat = [[0,0,0],[0,1,0],[0,0,0]]<br>输出：[[0,0,0],[0,1,0],[0,0,0]]<br>示例 2：</p><p><img src="../images/%E8%92%9C%E6%B3%95/1626667205-xFxIeK-image.png" alt="img"></p><p>输入：mat = [[0,0,0],[0,1,0],[1,1,1]]<br>输出：[[0,0,0],[0,1,0],[1,2,1]]</p></blockquote><h4 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h4><p>此题用的动态规划</p><h4 id="代码-5"><a href="#代码-5" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[][]</span>&#125; <span class="variable">mat</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number[][]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> updateMatrix = <span class="keyword">function</span>(<span class="params">mat</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!mat.<span class="property">length</span> || !mat[<span class="number">0</span>].<span class="property">length</span>) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> row = mat.<span class="property">length</span></span><br><span class="line">    <span class="keyword">const</span> col = mat[<span class="number">0</span>].<span class="property">length</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> ans = <span class="keyword">new</span> <span class="title class_">Array</span>(row)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">        ans[i] = <span class="keyword">new</span> <span class="title class_">Array</span>(col).<span class="title function_">fill</span>(row + col)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mat[i][j] === <span class="number">0</span>) &#123;</span><br><span class="line">                ans[i][j] = <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                ans[i][j] = <span class="title class_">Math</span>.<span class="title function_">min</span>(ans[i][j], ans[i - <span class="number">1</span>][j] + <span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (j - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                ans[i][j] = <span class="title class_">Math</span>.<span class="title function_">min</span>(ans[i][j], ans[i][j - <span class="number">1</span>] + <span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = row - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = col - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &lt; row) &#123;</span><br><span class="line">                ans[i][j] = <span class="title class_">Math</span>.<span class="title function_">min</span>(ans[i][j], ans[i + <span class="number">1</span>][j] + <span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (j + <span class="number">1</span> &lt; col) &#123;</span><br><span class="line">                ans[i][j] = <span class="title class_">Math</span>.<span class="title function_">min</span>(ans[i][j], ans[i][j + <span class="number">1</span>] + <span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="递归-迭代"><a href="#递归-迭代" class="headerlink" title="递归/迭代"></a>递归/迭代</h2><p>有的时候真的不理解递归，所以不喜欢用</p><p>但是多做几个就觉得很有成就感，又喜欢用了</p><h3 id="👈️206-反转链表"><a href="#👈️206-反转链表" class="headerlink" title="👈️206. 反转链表"></a><a href="https://leetcode.cn/problems/reverse-linked-list/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">👈️206. 反转链表</a></h3><blockquote><p>给你单链表的头节点 head ，请你反转链表，并返回反转后的链表。</p><p>示例 1：</p><p><img src="../images/%E8%92%9C%E6%B3%95/rev1ex1.jpg" alt="img"></p><p>输入：head = [1,2,3,4,5]<br>输出：[5,4,3,2,1]</p></blockquote><h4 id="解题思路-递归"><a href="#解题思路-递归" class="headerlink" title="解题思路(递归)"></a>解题思路(递归)</h4><img src="../images/%E8%92%9C%E6%B3%95/image-20230321184400708.png" alt="image-20230321184400708" style="zoom: 80%;" /><h4 id="代码-6"><a href="#代码-6" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * function ListNode(val, next) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.next = (next===undefined ? null : next)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">ListNode</span>&#125; <span class="variable">head</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">ListNode</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 递归</span></span><br><span class="line"><span class="keyword">var</span> reverseList = <span class="keyword">function</span>(<span class="params">head</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.<span class="property">next</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> newHead = <span class="title function_">reverseList</span>(head.<span class="property">next</span>);</span><br><span class="line">    head.<span class="property">next</span>.<span class="property">next</span> = head;</span><br><span class="line">    head.<span class="property">next</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> newHead;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 迭代</span></span><br><span class="line"><span class="keyword">var</span> reverseList = <span class="keyword">function</span>(<span class="params">head</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> prev = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">let</span> curr = head</span><br><span class="line">    <span class="keyword">while</span> (curr) &#123;</span><br><span class="line">        <span class="keyword">const</span> next = curr.<span class="property">next</span></span><br><span class="line">        curr.<span class="property">next</span> = prev</span><br><span class="line"></span><br><span class="line">        prev = curr</span><br><span class="line">        curr = next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> prev</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="🙏21-合并两个有序链表"><a href="#🙏21-合并两个有序链表" class="headerlink" title="🙏21. 合并两个有序链表"></a><a href="https://leetcode.cn/problems/merge-two-sorted-lists/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">🙏21. 合并两个有序链表</a></h3><p>递归我的递归啊T_T</p><blockquote><p>将两个升序链表合并为一个新的 升序 链表并返回。新链表是通过拼接给定的两个链表的所有节点组成的。 </p><p>示例 1：</p><img src="../images/%E8%92%9C%E6%B3%95/merge_ex1.jpg" alt="img" style="zoom:80%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：l1 = [1,2,4], l2 = [1,3,4]</span><br><span class="line">输出：[1,1,2,3,4,4]</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：l1 = [], l2 = []</span><br><span class="line">输出：[]</span><br></pre></td></tr></table></figure><p><strong>示例 3：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：l1 = [], l2 = [0]</span><br><span class="line">输出：[0]</span><br></pre></td></tr></table></figure></blockquote><h4 id="解题思路-4"><a href="#解题思路-4" class="headerlink" title="解题思路"></a>解题思路</h4><ol><li>当l1为空时返回剩下的l2</li><li>当l2为空时返回剩下的l1</li><li>当两者都不为空时，要继续递归，如果l1.val &lt;= l2.val，那么递归参数将是(l1的下一个节点, l2)，返回l1</li><li>同理l2.val较小时递归l1与l2.next，返回l2</li></ol><h4 id="代码-7"><a href="#代码-7" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * function ListNode(val, next) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.next = (next===undefined ? null : next)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">ListNode</span>&#125; <span class="variable">list1</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">ListNode</span>&#125; <span class="variable">list2</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">ListNode</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> mergeTwoLists = <span class="keyword">function</span>(<span class="params">list1, list2</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!list2) <span class="keyword">return</span> list1</span><br><span class="line">    <span class="keyword">if</span> (!list1) <span class="keyword">return</span> list2</span><br><span class="line">    <span class="keyword">if</span> (list1.<span class="property">val</span> &lt;= list2.<span class="property">val</span>) &#123;</span><br><span class="line">        list1.<span class="property">next</span> = <span class="title function_">mergeTwoLists</span>(list1.<span class="property">next</span>, list2)</span><br><span class="line">        <span class="keyword">return</span> list1</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        list2.<span class="property">next</span> = <span class="title function_">mergeTwoLists</span>(list1, list2.<span class="property">next</span>)</span><br><span class="line">        <span class="keyword">return</span> list2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="递归-回溯"><a href="#递归-回溯" class="headerlink" title="递归/回溯"></a>递归/回溯</h2><p>用熟了就有点喜欢用了</p><h3 id="👩‍👩‍👧‍👧46-全排列"><a href="#👩‍👩‍👧‍👧46-全排列" class="headerlink" title="👩‍👩‍👧‍👧46. 全排列"></a><a href="https://leetcode.cn/problems/permutations/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">👩‍👩‍👧‍👧46. 全排列</a></h3><blockquote><p>给定一个不含重复数字的数组 nums ，返回其 所有可能的全排列 。你可以 按任意顺序 返回答案。</p><p>示例 1：</p><p>输入：nums = [1,2,3]<br>输出：[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]</p><p>示例 2：</p><p>输入：nums = [0,1]<br>输出：[[0,1],[1,0]]</p><p>示例 3：</p><p>输入：nums = [1]<br>输出：[[1]]</p></blockquote><h4 id="解题思路-回溯-DFS"><a href="#解题思路-回溯-DFS" class="headerlink" title="解题思路(回溯 DFS)"></a>解题思路(回溯 DFS)</h4><ol><li>DFS建树，排除重复重复解，搜出所有解</li><li>回溯入口：空数组传入</li><li>回溯过程：遍历数字（枚举各项），使用条件判断跳过剪枝项，将符合条件的项添加到数组中，进行下一次迭代选择</li><li>回溯出口：数组长度与定长长度一致</li></ol><h4 id="代码-8"><a href="#代码-8" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number[][]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> permute = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = []</span><br><span class="line">    <span class="keyword">const</span> used = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">dfs</span>(<span class="params">path</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (path.<span class="property">length</span> == nums.<span class="property">length</span>) &#123;</span><br><span class="line">            res.<span class="title function_">push</span>(path.<span class="title function_">slice</span>())</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> num <span class="keyword">of</span> nums) &#123;</span><br><span class="line">            <span class="keyword">if</span> (used[num]) <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            path.<span class="title function_">push</span>(num)</span><br><span class="line">            used[num] = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">            <span class="title function_">dfs</span>(path)</span><br><span class="line"></span><br><span class="line">            path.<span class="title function_">pop</span>()</span><br><span class="line">            used[num] = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">dfs</span>([])</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="👪️77-组合"><a href="#👪️77-组合" class="headerlink" title="👪️77. 组合"></a><a href="https://leetcode.cn/problems/combinations/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">👪️77. 组合</a></h3><blockquote><p>给定两个整数 n 和 k，返回范围 [1, n] 中所有可能的 k 个数的组合。你可以按 任何顺序 返回答案。 </p><p>示例 1：</p><p>输入：n = 4, k = 2<br>输出：<br>[<br>  [2,4],<br>  [3,4],<br>  [2,3],<br>  [1,2],<br>  [1,3],<br>  [1,4],<br>]<br>示例 2：</p><p>输入：n = 1, k = 1<br>输出：[[1]]</p></blockquote><h4 id="解题思路-5"><a href="#解题思路-5" class="headerlink" title="解题思路"></a>解题思路</h4><p>大同小异，不过要注意此题要求的排列完全解不包含重复元素的不同排列(1,2  2,1 nono!)</p><p>所以我们需要通过控制枚举起点start，来正确裁剪分支</p><ol><li>回溯起点：枚举起点1，空数组</li><li>回溯终点：队列长度与要求长度相等</li><li>回溯过程：枚举起点start在每一次迭代时+1</li></ol><p><img src="../images/%E8%92%9C%E6%B3%95/1599556747-PAzUfe-image.png" alt="image.png"></p><h4 id="代码-9"><a href="#代码-9" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">n</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">k</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number[][]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> combine = <span class="keyword">function</span>(<span class="params">n, k</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = []</span><br><span class="line">    <span class="keyword">let</span> used = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">dfs</span>(<span class="params">start, que</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (que.<span class="property">length</span> == k) &#123;</span><br><span class="line">            ans.<span class="title function_">push</span>(que.<span class="title function_">slice</span>())</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key = start; key &lt;= n; key++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (used.<span class="title function_">has</span>(key)) <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">            que.<span class="title function_">push</span>(key)</span><br><span class="line">            used.<span class="title function_">set</span>(key)</span><br><span class="line">            </span><br><span class="line">            <span class="title function_">dfs</span>(key+<span class="number">1</span>, que)</span><br><span class="line">            </span><br><span class="line">            used.<span class="title function_">delete</span>(key)</span><br><span class="line">            que.<span class="title function_">pop</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">dfs</span>(<span class="number">1</span>, [])</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="🔠784-字母大小写全排列"><a href="#🔠784-字母大小写全排列" class="headerlink" title="🔠784. 字母大小写全排列"></a><a href="https://leetcode.cn/problems/letter-case-permutation/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">🔠784. 字母大小写全排列</a></h3><blockquote><p>给定一个字符串 s ，通过将字符串 s 中的每个字母转变大小写，我们可以获得一个新的字符串。</p><p>返回 所有可能得到的字符串集合 。以 任意顺序 返回输出。</p><p>示例 1：</p><p>输入：s = “a1b2”<br>输出：[“a1b2”, “a1B2”, “A1b2”, “A1B2”]<br>示例 2:</p><p>输入: s = “3z4”<br>输出: [“3z4”,”3Z4”]</p></blockquote><h4 id="解题思路-6"><a href="#解题思路-6" class="headerlink" title="解题思路"></a>解题思路</h4><p>可恶！！！数字！！！！树树树！！！！</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">s</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string[]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> letterCasePermutation = <span class="keyword">function</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = []</span><br><span class="line">    <span class="keyword">const</span> len = s.<span class="property">length</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">dfs</span> = (<span class="params">start, que</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (que.<span class="property">length</span> == len) &#123;</span><br><span class="line">            ans.<span class="title function_">push</span>(que.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.<span class="title function_">charAt</span>(i) &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s.<span class="title function_">charAt</span>(i) &lt;= <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">// 遇到数字pushpushdfs</span></span><br><span class="line">                que.<span class="title function_">push</span>(s.<span class="title function_">charAt</span>(i))</span><br><span class="line">                <span class="title function_">dfs</span>(i+<span class="number">1</span>, que)</span><br><span class="line">                que.<span class="title function_">pop</span>()</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 遇到字母pushpushdfsdfs</span></span><br><span class="line">                que.<span class="title function_">push</span>(s.<span class="title function_">charAt</span>(i).<span class="title function_">toLowerCase</span>())</span><br><span class="line">                <span class="title function_">dfs</span>(i+<span class="number">1</span>, que)</span><br><span class="line">                que.<span class="title function_">pop</span>()</span><br><span class="line"></span><br><span class="line">                que.<span class="title function_">push</span>(s.<span class="title function_">charAt</span>(i).<span class="title function_">toUpperCase</span>())</span><br><span class="line">                <span class="title function_">dfs</span>(i+<span class="number">1</span>, que)</span><br><span class="line">                que.<span class="title function_">pop</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">dfs</span>(<span class="number">0</span>, [])</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="代码-10"><a href="#代码-10" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我有点不能接收其他思路的感觉，很可怕</span></span><br><span class="line"><span class="keyword">var</span> letterCasePermutation = <span class="keyword">function</span> (<span class="params">s</span>) &#123;</span><br><span class="line">  s = s.<span class="title function_">toLowerCase</span>()</span><br><span class="line">  <span class="keyword">let</span> arr = [s[<span class="number">0</span>]];</span><br><span class="line">  <span class="keyword">if</span> (s[<span class="number">0</span>].<span class="title function_">charCodeAt</span>() &gt; <span class="number">96</span>) arr.<span class="title function_">push</span>(s[<span class="number">0</span>].<span class="title function_">toUpperCase</span>())</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; s.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    arr = arr.<span class="title function_">map</span>(<span class="function"><span class="params">word</span> =&gt;</span> word += s[i])</span><br><span class="line">    <span class="keyword">if</span> (s[i].<span class="title function_">charCodeAt</span>() &gt; <span class="number">96</span>) arr = arr.<span class="title function_">concat</span>(arr.<span class="title function_">map</span>(<span class="function"><span class="params">word</span> =&gt;</span> word.<span class="title function_">slice</span>(<span class="number">0</span>, -<span class="number">1</span>) + s[i].<span class="title function_">toUpperCase</span>()))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">作者：alexYang</span><br><span class="line">链接：<span class="attr">https</span>:<span class="comment">//leetcode.cn/problems/letter-case-permutation/solution/by-alexyang-wzkk/</span></span><br><span class="line">来源：力扣（<span class="title class_">LeetCode</span>）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 官方核武器版本</span></span><br><span class="line"><span class="keyword">var</span> letterCasePermutation = <span class="keyword">function</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ans = [];</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">dfs</span> = (<span class="params">arr, pos, res</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">while</span> (pos &lt; arr.<span class="property">length</span> &amp;&amp; <span class="title function_">isDigit</span>(arr[pos])) &#123;</span><br><span class="line">            pos++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (pos === arr.<span class="property">length</span>) &#123;</span><br><span class="line">            res.<span class="title function_">push</span>(arr.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[pos] = <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(arr[pos].<span class="title function_">charCodeAt</span>() ^ <span class="number">32</span>);</span><br><span class="line">        <span class="title function_">dfs</span>(arr, pos + <span class="number">1</span>, res);</span><br><span class="line">        arr[pos] = <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(arr[pos].<span class="title function_">charCodeAt</span>() ^ <span class="number">32</span>);</span><br><span class="line">        <span class="title function_">dfs</span>(arr, pos + <span class="number">1</span>, res);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="title function_">dfs</span>([...s], <span class="number">0</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isDigit</span> = (<span class="params">ch</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>(ch).<span class="title function_">toString</span>() === <span class="string">&quot;NaN&quot;</span> ? <span class="literal">false</span> : <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">作者：<span class="title class_">LeetCode</span>-<span class="title class_">Solution</span></span><br><span class="line">链接：<span class="attr">https</span>:<span class="comment">//leetcode.cn/problems/letter-case-permutation/solution/zi-mu-da-xiao-xie-quan-pai-lie-by-leetco-cwpx/</span></span><br><span class="line">来源：力扣（<span class="title class_">LeetCode</span>）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><blockquote><p>自下而上的超牛思想，使问题简单，促人生成功(doge)</p></blockquote><h3 id="🛤️70-爬楼梯"><a href="#🛤️70-爬楼梯" class="headerlink" title="🛤️70. 爬楼梯"></a><a href="https://leetcode.cn/problems/climbing-stairs/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xh275yye">🛤️70. 爬楼梯</a></h3><blockquote><p>假设你正在爬楼梯。需要 n 阶你才能到达楼顶。每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？</p><p>示例 1：</p><p>输入：n = 2<br>输出：2<br>解释：有两种方法可以爬到楼顶。</p><ol><li>1 阶 + 1 阶</li><li>2 阶</li></ol><p>示例 2：</p><p>输入：n = 3<br>输出：3<br>解释：有三种方法可以爬到楼顶。</p><ol><li>1 阶 + 1 阶 + 1 阶</li><li>1 阶 + 2 阶</li><li>2 阶 + 1 阶</li></ol></blockquote><h4 id="解题思路-7"><a href="#解题思路-7" class="headerlink" title="解题思路"></a>解题思路</h4><p>有两种方式上楼：一次迈一阶/一次迈两阶</p><p>最后一次上楼还剩 一阶/两阶</p><p>最近一次上楼方式总数 应该是 在此之前两种方式上楼方式的总和<br>$$<br>f(x) = f(x - 1) + f(x - 2)<br>$$<br>用脚趾推算得f(0) = f(1) = 1</p><p>那么接下来就可以遍历相加了</p><h4 id="代码-11"><a href="#代码-11" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">n</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> climbStairs = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>, step1 = <span class="number">1</span>, step2 = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>;  i &lt;= n; i++) &#123;</span><br><span class="line">        step2 = step1</span><br><span class="line">        step1 = ans</span><br><span class="line">        ans = step1 + step2</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用数组更适合我这种笨笨脑</span></span><br><span class="line"><span class="keyword">var</span> climbStairs = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="keyword">new</span> <span class="title class_">Array</span>(n+<span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>)</span><br><span class="line">    ans[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    ans[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>;  i &lt;= n; i++) &#123;</span><br><span class="line">        ans[i] = ans[i - <span class="number">1</span>] + ans[i - <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans[n]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="🗼120-三角形最小路径和"><a href="#🗼120-三角形最小路径和" class="headerlink" title="🗼120. 三角形最小路径和"></a><a href="https://leetcode.cn/problems/triangle/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">🗼120. 三角形最小路径和</a></h3><blockquote><p>给定一个三角形 triangle ，找出自顶向下的最小路径和。</p><p>每一步只能移动到下一行中相邻的结点上。相邻的结点 在这里指的是 下标 与 上一层结点下标 相同或者等于 上一层结点下标 + 1 的两个结点。也就是说，如果正位于当前行的下标 i ，那么下一步可以移动到下一行的下标 i 或 i + 1 。</p><p>示例 1：</p><p>输入：triangle = [[2],[3,4],[6,5,7],[4,1,8,3]]<br>输出：11<br>解释：如下面简图所示：<br>   2<br>  3 4<br> 6 5 7<br>4 1 8 3<br>自顶向下的最小路径和为 11（即，2 + 3 + 5 + 1 = 11）。</p><p>示例 2：</p><p>输入：triangle = [[-10]]<br>输出：-10</p></blockquote><h4 id="解题思路-8"><a href="#解题思路-8" class="headerlink" title="解题思路"></a>解题思路</h4><p>浅画草图</p><img src="../images/%E8%92%9C%E6%B3%95/IMG_20230323_091839.jpg" alt="IMG_20230323_091839" style="zoom: 15%;" /><h4 id="代码-12"><a href="#代码-12" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[][]</span>&#125; <span class="variable">triangle</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> minimumTotal = <span class="keyword">function</span>(<span class="params">triangle</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> row = triangle.<span class="property">length</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (row === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> triangle[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = row - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; triangle[i].<span class="property">length</span>; j++) &#123;</span><br><span class="line">            triangle[i][j] += <span class="title class_">Math</span>.<span class="title function_">min</span>(triangle[i+<span class="number">1</span>][j], triangle[i+<span class="number">1</span>][j+<span class="number">1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> triangle[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="🕲198-打家劫舍"><a href="#🕲198-打家劫舍" class="headerlink" title="🕲198. 打家劫舍"></a><a href="https://leetcode.cn/problems/house-robber/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">🕲198. 打家劫舍</a></h3><blockquote><p>你是一个专业的小偷，计划偷窃沿街的房屋。每间房内都藏有一定的现金，影响你偷窃的唯一制约因素就是相邻的房屋装有相互连通的防盗系统，如果两间相邻的房屋在同一晚上被小偷闯入，系统会自动报警。</p><p>给定一个代表每个房屋存放金额的非负整数数组，计算你 不触动警报装置的情况下 ，一夜之内能够偷窃到的最高金额。</p><p>示例 1：</p><p>输入：[1,2,3,1]<br>输出：4<br>解释：偷窃 1 号房屋 (金额 = 1) ，然后偷窃 3 号房屋 (金额 = 3)。<br>     偷窃到的最高金额 = 1 + 3 = 4 。<br>示例 2：</p><p>输入：[2,7,9,3,1]<br>输出：12<br>解释：偷窃 1 号房屋 (金额 = 2), 偷窃 3 号房屋 (金额 = 9)，接着偷窃 5 号房屋 (金额 = 1)。<br>     偷窃到的最高金额 = 2 + 9 + 1 = 12 。</p></blockquote><h4 id="解题思路-9"><a href="#解题思路-9" class="headerlink" title="解题思路"></a>解题思路</h4><blockquote><p> 2  1  1  2</p></blockquote><p>就是说问题可以拆分成两种情况↓：</p><ul><li>偷这个家-前头那家不能偷 (小偷溜达到这家，手里有<code>前几家的米，并且攥了一把这家的米</code>)</li><li>偷前头那家-这家不能偷 (小偷溜达到这家的时候，手里有偷<code>前前头那几家的米</code>)</li></ul><p>所以说状态量应该是：小偷溜达到第几家的时候手里有多少米</p><p>最终解是俩两种情况里挑最大的↓</p><blockquote><p>2                    1                    1                    2</p><p><strong>偷2</strong>不偷0      偷1<strong>不偷2</strong>      <strong>偷3</strong>不偷2      <strong>偷4</strong>不偷3</p></blockquote><p>那么↓</p><p>$home[x] = max(home[x-1], home[x-2] + money[x])$</p><p>小偷我到这家手里的钱钱 = 上一家偷来的钱钱 / 这家偷的钱钱和非上一家偷来的钱钱之和  (聪明的小偷会选择较大的获益)</p><h4 id="代码-13"><a href="#代码-13" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> rob = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = nums.<span class="property">length</span></span><br><span class="line">    <span class="keyword">let</span> dp = [nums[<span class="number">0</span>], <span class="title class_">Math</span>.<span class="title function_">max</span>(nums[<span class="number">0</span>], nums[<span class="number">1</span>])]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt; len; i++) &#123;</span><br><span class="line">        dp[i] = <span class="title class_">Math</span>.<span class="title function_">max</span>(dp[i-<span class="number">1</span>], dp[i-<span class="number">2</span>]+nums[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[len - <span class="number">1</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 状态压缩</span></span><br><span class="line"><span class="keyword">var</span> rob = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.<span class="property">length</span> === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> dp_0 = nums[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">let</span> dp_1 = <span class="title class_">Math</span>.<span class="title function_">max</span>(nums[<span class="number">0</span>], nums[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">let</span> dp_max = dp_1</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        dp_max = <span class="title class_">Math</span>.<span class="title function_">max</span>(dp_1, dp_0 + nums[i])</span><br><span class="line">        dp_0 = dp_1</span><br><span class="line">        dp_1 = dp_max</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp_max</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h2><h3 id="1️⃣191-位1的个数"><a href="#1️⃣191-位1的个数" class="headerlink" title="1️⃣191. 位1的个数"></a><a href="https://leetcode.cn/problems/number-of-1-bits/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">1️⃣191. 位1的个数</a></h3><blockquote><p>编写一个函数，输入是一个无符号整数（以二进制串的形式），返回其二进制表达式中数字位数为 ‘1’ 的个数（汉明重量）。</p><p>提示：</p><p>请注意，在某些语言（如 Java）中，没有无符号整数类型。在这种情况下，输入和输出都将被指定为有符号整数类型，并且不应影响您的实现，因为无论整数是有符号的还是无符号的，其内部的二进制表示形式都是相同的。<br>在 Java 中，编译器使用二进制补码记法来表示有符号整数。因此，在 示例 3 中，输入表示有符号整数 -3。</p><p>示例 1：</p><p>输入：n = 00000000000000000000000000001011<br>输出：3<br>解释：输入的二进制串 00000000000000000000000000001011 中，共有三位为 ‘1’。<br>示例 2：</p><p>输入：n = 00000000000000000000000010000000<br>输出：1<br>解释：输入的二进制串 00000000000000000000000010000000 中，共有一位为 ‘1’。<br>示例 3：</p><p>输入：n = 11111111111111111111111111111101<br>输出：31<br>解释：输入的二进制串 11111111111111111111111111111101 中，共有 31 位为 ‘1’。</p></blockquote><h4 id="解题思路-10"><a href="#解题思路-10" class="headerlink" title="解题思路"></a>解题思路</h4><p>观察：<code>n &amp; (n - 1) = 把n的二进制位中最低位的1变为0后的结果</code></p><p>也就是说我们只需要  不断把二进制数中的1=&gt;0，直到数字变为0  就可以求得其“汉明重量/汉明权重”</p><blockquote><p>​        汉明权重是一串符号中不同于（定义在其所使用的字符集上的）零符号（zero-symbol）的个数。对于一个二进制数，它的汉明权重就等于它 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="1"> 的个数（即 <code>popcount</code>)。</p></blockquote><h4 id="代码-14"><a href="#代码-14" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">n</span> - a positive integer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> hammingWeight = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> popCount = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> (n) &#123;</span><br><span class="line">        n &amp;= n - <span class="number">1</span></span><br><span class="line">        popCount++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> popCount</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2️⃣231-2-的幂"><a href="#2️⃣231-2-的幂" class="headerlink" title="2️⃣231. 2 的幂"></a><a href="https://leetcode.cn/problems/power-of-two/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">2️⃣231. 2 的幂</a></h3><blockquote><p>给你一个整数 n，请你判断该整数是否是 2 的幂次方。如果是，返回 true ；否则，返回 false 。</p><p>如果存在一个整数 x 使得 n == 2x ，则认为 n 是 2 的幂次方。</p><p>示例 1：</p><p>输入：n = 1<br>输出：true<br>解释：20 = 1<br>示例 2：</p><p>输入：n = 16<br>输出：true<br>解释：24 = 16<br>示例 3：</p><p>输入：n = 3<br>输出：false<br>示例 4：</p><p>输入：n = 4<br>输出：true<br>示例 5：</p><p>输入：n = 5<br>输出：false</p></blockquote><h4 id="解题思路-11"><a href="#解题思路-11" class="headerlink" title="解题思路"></a>解题思路</h4><p>我对位运算没太有概念啊，反正遇到一个题就记一下了</p><h4 id="代码-15"><a href="#代码-15" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">n</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> isPowerOfTwo = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">0</span> &amp;&amp; (n &amp; (n - <span class="number">1</span>)) === <span class="number">0</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isPowerOfTwo = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">0</span> &amp;&amp; (n &amp; (-n)) === n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="🔢136-只出现一次的数字"><a href="#🔢136-只出现一次的数字" class="headerlink" title="🔢136. 只出现一次的数字"></a><a href="https://leetcode.cn/problems/single-number/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">🔢136. 只出现一次的数字</a></h3><blockquote><p>给你一个 非空 整数数组 nums ，除了某个元素只出现一次以外，其余每个元素均出现两次。找出那个只出现了一次的元素。</p><p>你必须设计并实现线性时间复杂度的算法来解决此问题，且该算法只使用常量额外空间。</p><p>示例 1 ：</p><p>输入：nums = [2,2,1]<br>输出：1<br>示例 2 ：</p><p>输入：nums = [4,1,2,1,2]<br>输出：4<br>示例 3 ：</p><p>输入：nums = [1]<br>输出：1</p></blockquote><h4 id="解题思路-12"><a href="#解题思路-12" class="headerlink" title="解题思路"></a>解题思路</h4><p>异或运算⊕有以下三个性质:</p><ol><li>$a ⊕ 0 = a$</li><li>$a⊕a = 0$</li><li>$ a ⊕ b ⊕ a = b ⊕ a ⊕ a = b ⊕ (a ⊕ a) = b ⊕ 0 = b $</li></ol><p>所以只需要遍历数组，把所有的数进行异或，就可以找出只出现一次的数值。</p><h4 id="代码-16"><a href="#代码-16" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> singleNumber = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> nums) &#123;</span><br><span class="line">        ans ^= n</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="️⃣190-颠倒二进制位"><a href="#️⃣190-颠倒二进制位" class="headerlink" title="#️⃣190. 颠倒二进制位"></a><a href="https://leetcode.cn/problems/reverse-bits/?envType=study-plan&id=suan-fa-ru-men&plan=algorithms&plan_progress=xxlqfn67">#️⃣190. 颠倒二进制位</a></h3><blockquote><p>颠倒给定的 32 位无符号整数的二进制位。</p><p>提示：</p><p>请注意，在某些语言（如 Java）中，没有无符号整数类型。在这种情况下，输入和输出都将被指定为有符号整数类型，并且不应影响您的实现，因为无论整数是有符号的还是无符号的，其内部的二进制表示形式都是相同的。<br>在 Java 中，编译器使用二进制补码记法来表示有符号整数。因此，在 示例 2 中，输入表示有符号整数 -3，输出表示有符号整数 -1073741825。</p><p>示例 1：</p><p>输入：n = 00000010100101000001111010011100<br>输出：964176192 (00111001011110000010100101000000)<br>解释：输入的二进制串 00000010100101000001111010011100 表示无符号整数 43261596，<br>     因此返回 964176192，其二进制表示形式为 00111001011110000010100101000000。<br>示例 2：</p><p>输入：n = 11111111111111111111111111111101<br>输出：3221225471 (10111111111111111111111111111111)<br>解释：输入的二进制串 11111111111111111111111111111101 表示无符号整数 4294967293，<br>     因此返回 3221225471 其二进制表示形式为 10111111111111111111111111111111 。</p></blockquote><h4 id="解题思路-13"><a href="#解题思路-13" class="headerlink" title="解题思路"></a>解题思路</h4><p>根据位运算特性，遍历各位，逐位颠倒。</p><h4 id="代码-17"><a href="#代码-17" class="headerlink" title="代码"></a>代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">n</span> - a positive integer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125; - a positive integer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> reverseBits = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="comment">// 这个是运用JS内置一些API做的，但是效率不及后者</span></span><br><span class="line">    <span class="comment">// return +(&#x27;0b&#x27;+n.toString(2).padStart(32,0).split(&#x27;&#x27;).reverse().join(&#x27;&#x27;))</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> rev = <span class="number">0</span> <span class="comment">// 初始化一个放各位数的容器</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span> &amp;&amp; n &gt; <span class="number">0</span>; i++) &#123;  <span class="comment">// 对n进行取数位移操作</span></span><br><span class="line">        rev |= (n &amp; <span class="number">1</span>) &lt;&lt; (<span class="number">31</span> - <span class="number">1</span>)  <span class="comment">// 取出n中最后一位数，并将该数放进dev指定位置</span></span><br><span class="line">        n &gt;&gt;&gt;= <span class="number">1</span>  <span class="comment">// n无符号向右移动一位捏嘿</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rev &gt;&gt;&gt; <span class="number">0</span>  <span class="comment">// 一开始没加&gt;&gt;&gt;0，报错了，错误案例是一个负数，我？？？ </span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 还有一种方法是‘位运算分治’我不太理解，偶数对调隔2对调隔4对调什么的</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 蒜法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>速通蓝桥杯Web</title>
      <link href="/post/d0c6.html"/>
      <url>/post/d0c6.html</url>
      
        <content type="html"><![CDATA[<img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/QQ%E5%9B%BE%E7%89%8720230405164057.png" alt="QQ图片20230405164057" style="zoom:50%;" /><p>按照蓝桥题库里的标签分类，蓝桥web题型应该是这样子的↓不过身体状况不允许，我已无时间整理，留下这几个空标题，以后闲来无事把所有的题补上罢。请转至模拟题</p><h1 id="CSS3"><a href="#CSS3" class="headerlink" title="CSS3"></a>CSS3</h1><h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h1><h1 id="ECharts"><a href="#ECharts" class="headerlink" title="ECharts"></a>ECharts</h1><h1 id="ElementUI"><a href="#ElementUI" class="headerlink" title="ElementUI"></a>ElementUI</h1><h1 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h1><h1 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h1><p>Seletor?</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>()</span><br></pre></td></tr></table></figure><h1 id="JS函数封装"><a href="#JS函数封装" class="headerlink" title="JS函数封装"></a>JS函数封装</h1><h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><p>接口怎么写？</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = http.<span class="title function_">createServer</span>()</span><br><span class="line"><span class="keyword">const</span> data = [……]</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;request&quot;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="comment">// UTF-8？</span></span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;text/html;charset=utf8&quot;</span>);</span><br><span class="line">    <span class="comment">// 判断一下路径？以/news为例</span></span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">url</span> === <span class="string">&#x27;/news&#x27;</span>) &#123;</span><br><span class="line">        res.<span class="title function_">end</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.<span class="title function_">end</span>(<span class="string">&quot;404 NOT FOUND&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;is running!&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h1><h1 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h1><h1 id="树"><a href="#树" class="headerlink" title="树"></a>树</h1><h1 id="模拟题"><a href="#模拟题" class="headerlink" title="模拟题"></a>模拟题</h1><p>话说以下的题在哪可以找到？</p><p><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/image-20230407163538477.png" alt="image-20230407163538477"></p><h2 id="JS基础"><a href="#JS基础" class="headerlink" title="JS基础"></a>JS基础</h2><h3 id="数据类型检测-一"><a href="#数据类型检测-一" class="headerlink" title="数据类型检测-一"></a>数据类型检测-一</h3><p>完善 <code>main.js</code> 中 <code>getType</code> 函数中的 TODO 部分，返回传入值的对应数据类型。</p><p>传入值以及 <code>getType</code> 函数返回值（<strong>大小写可忽略</strong>）按照如下方式对应：</p><table><thead><tr><th>传入值</th><th>返回值</th></tr></thead><tbody><tr><td>‘s’</td><td>string</td></tr><tr><td>0</td><td>number</td></tr><tr><td>false</td><td>boolean</td></tr><tr><td>undefined</td><td>undefined</td></tr><tr><td>Symbol()</td><td>symbol</td></tr><tr><td>function fn(){}</td><td>function</td></tr><tr><td>123n</td><td>bigint</td></tr><tr><td>null</td><td>null</td></tr><tr><td>{}</td><td>object</td></tr><tr><td>[]</td><td>array</td></tr><tr><td>new Date</td><td>date</td></tr><tr><td>new Map</td><td>map</td></tr><tr><td>new Set</td><td>set</td></tr><tr><td>/a/</td><td>regexp</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 数据类型检测</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; data 传入的待检测数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125; 返回数据类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getType</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="comment">// TODO：待补充代码</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> data != <span class="string">&quot;object&quot;</span>) <span class="keyword">return</span> <span class="keyword">typeof</span> data</span><br><span class="line">  <span class="keyword">if</span>(!data) <span class="keyword">return</span> <span class="string">&quot;null&quot;</span></span><br><span class="line">  <span class="keyword">return</span> data.<span class="property">__proto__</span>.<span class="property">constructor</span>.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>)[<span class="number">1</span>].<span class="title function_">replace</span>(<span class="string">&quot;()&quot;</span>, <span class="string">&quot;&quot;</span>).<span class="title function_">toLowerCase</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  getType</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我不是很能理解这个！</p><h3 id="梅楼封的一天-一"><a href="#梅楼封的一天-一" class="headerlink" title="梅楼封的一天-一"></a>梅楼封的一天-一</h3><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/image-20230405171552500.png" alt="image-20230405171552500" style="zoom: 67%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">str</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">rule</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">symbol</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">dealPhone</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">toDesensitization</span> = (<span class="params">str, rule, symbol = <span class="string">&quot;*&quot;</span>, dealPhone = <span class="literal">true</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 结果集</span></span><br><span class="line">    <span class="keyword">let</span> ans = &#123;</span><br><span class="line">        <span class="string">&quot;ids&quot;</span>: [],</span><br><span class="line">        <span class="string">&quot;newStr&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 空字符串处理</span></span><br><span class="line">    <span class="keyword">if</span> (!str) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    <span class="keyword">if</span> (!rule) <span class="keyword">return</span> str</span><br><span class="line">    <span class="comment">// 电话号码脱敏</span></span><br><span class="line">    <span class="keyword">if</span> (dealPhone) &#123;</span><br><span class="line">        str = str.<span class="title function_">replace</span>(<span class="regexp">/(\d&#123;3&#125;)\d&#123;5&#125;(\d&#123;3&#125;)/</span>, <span class="string">`$1<span class="subst">$&#123;symbol.repeat(<span class="number">5</span>)&#125;</span>$2`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 敏感词脱敏</span></span><br><span class="line">    <span class="keyword">let</span> regex = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(rule) ? rule.<span class="title function_">join</span>(<span class="string">&#x27;|&#x27;</span>) : rule, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">    ans.<span class="property">newStr</span> = str.<span class="title function_">replace</span>(regex, <span class="function">(<span class="params">match, index</span>) =&gt;</span> &#123;</span><br><span class="line">        ans.<span class="property">ids</span>.<span class="title function_">push</span>(index)</span><br><span class="line">        <span class="keyword">return</span> symbol.<span class="title function_">repeat</span>(match.<span class="property">length</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 返回结果集</span></span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = toDesensitization;</span><br></pre></td></tr></table></figure><h3 id="平地起高楼-二"><a href="#平地起高楼-二" class="headerlink" title="平地起高楼-二"></a>平地起高楼-二</h3><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/image-20230406102227590.png" alt="image-20230406102227590" style="zoom: 50%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">convertToTree</span>(<span class="params">regions, rootId = <span class="string">&quot;0&quot;</span></span>) &#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> 在这里写入具体的实现逻辑</span></span><br><span class="line">  <span class="comment">// 将平铺的结构转化为树状结构，并将 rootId 下的所有子节点数组返回</span></span><br><span class="line">  <span class="comment">// 如果不存在 rootId 下的子节点，则返回一个空数组</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">travNode</span>(<span class="params">region, rootId</span>) &#123;</span><br><span class="line">    <span class="comment">// 太巧秒了，我没有这种巧妙的JS脑，希望做完这个题之后会长出来</span></span><br><span class="line">    <span class="keyword">return</span> region.<span class="title function_">filter</span>(<span class="function"><span class="params">el</span> =&gt;</span> rootId === el.<span class="property">pid</span>)</span><br><span class="line">        .<span class="title function_">map</span>(<span class="function"><span class="params">el</span> =&gt;</span> (el.<span class="property">children</span> = <span class="title function_">travNode</span>(region, el.<span class="property">id</span>), el))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">travNode</span>(regions, rootId)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = convertToTree; <span class="comment">// 检测需要，请勿删除</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="收快递了-二"><a href="#收快递了-二" class="headerlink" title="收快递了-二"></a>收快递了-二</h3><p>算是承接上一道题，此题思路是深搜，运用递归搜索出最终数组集合</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findRegion</span>(<span class="params">regions, regionName</span>) &#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> 在这里写入具体的实现逻辑</span></span><br><span class="line">  <span class="comment">// 需要从树状结构的行政信息中，遍历找到目标区域的行政信息，如输入：成都市，返回 [四川省，成都市]</span></span><br><span class="line">  <span class="comment">// 如果所输入的位置信息不存在，则返回 null</span></span><br><span class="line">  <span class="keyword">let</span> ans = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> region <span class="keyword">of</span> regions) &#123;</span><br><span class="line">    <span class="keyword">if</span> (region.<span class="property">name</span> === regionName) &#123;</span><br><span class="line">      ans = [regionName]</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!region.<span class="property">children</span>) <span class="keyword">continue</span></span><br><span class="line">      <span class="keyword">let</span> kidans = <span class="title function_">findRegion</span>(region.<span class="property">children</span>, regionName)</span><br><span class="line">      <span class="keyword">if</span> (kidans) &#123;</span><br><span class="line">        ans = [region.<span class="property">name</span>, ...kidans]</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = findRegion; <span class="comment">// 检测需要，请勿删除</span></span><br></pre></td></tr></table></figure><h2 id="promise√"><a href="#promise√" class="headerlink" title="promise√"></a>promise√</h2><h3 id="芝麻开门-二"><a href="#芝麻开门-二" class="headerlink" title="芝麻开门-二"></a>芝麻开门-二</h3><blockquote><p>过辣！</p></blockquote><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/wm.gif" alt="图片描述" style="zoom:33%;" /><p>找到 <code>index.js</code> 文件中的 <code>mPrompt</code> 函数，完成函数中的 TODO 部分。</p><ol><li>点击“点击弹出对话框，输入咒语”按钮会调用 <code>mPrompt</code> 函数，<code>mPrompt</code> 调用后页面显示对话框。<code>mPrompt</code> 函数必须返回一个 <code>promise</code> 对象。</li><li>在对话框中的输入框中输入文字后，点击确认按钮，对话框消失， <code>promise</code> 返回成功，<code>promise</code> 成功的值为输入的值。</li><li>只有当成功的值为“芝麻开门”时门自动打开（已实现）。</li><li>点击取消，对话框消失，<code>promise</code> 返回失败，失败的值为 <code>false</code>。</li><li>对话框的显示隐藏请使用 DOM 节点的添加删除实现。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 简单考察了Promise */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> incantations = <span class="string">&quot;芝麻开门&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params">el</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.wrapper .btn&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">mPrompt</span>()</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res === incantations) &#123;</span><br><span class="line">          <span class="variable language_">document</span></span><br><span class="line">            .<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#door .doors&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">            .<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;door-left&quot;</span>);</span><br><span class="line">          <span class="variable language_">document</span></span><br><span class="line">            .<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#door .doors&quot;</span>)[<span class="number">1</span>]</span><br><span class="line">            .<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;door-right&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 调用函数，开启弹窗，记录输入框的内容，并通过 promise 异步返回输入框中的内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Promise</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mPrompt</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 弹窗必须使用以下结构 template 保存的是弹窗的结构字符串，可以先转化为 DOM 再通过 appendChild 方式插入到 body 中</span></span><br><span class="line">  <span class="keyword">const</span> template = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;modal&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;message-box&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;message-header&quot;&gt;请输入咒语&lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;message-body&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;text&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;message-footer&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;button class=&quot;btn btn-small&quot; id=&#x27;cancel&#x27;&gt;取消&lt;/button&gt;</span></span><br><span class="line"><span class="string">                    &lt;button class=&quot;btn btn-small btn-primary&quot; id=&#x27;confirm&#x27;&gt;确定&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  <span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  <span class="comment">// TODO：待补充代码</span></span><br><span class="line">  div.<span class="property">innerHTML</span> = template</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">append</span>(div)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cancel&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      div.<span class="title function_">remove</span>()</span><br><span class="line">      <span class="title function_">rej</span>(<span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;confirm&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> val = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;input&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">      div.<span class="title function_">remove</span>()</span><br><span class="line">      <span class="title function_">res</span>(val.<span class="property">value</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="封装Promisefy函数-三"><a href="#封装Promisefy函数-三" class="headerlink" title="封装Promisefy函数-三"></a>封装Promisefy函数-三</h3><blockquote><p>以 Node.js 中常用的读取文件操作为例，封装一个 Promisefy 函数，将回调形式调用的读取文件方法转换成一个 Promise 的版本。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> textPath = path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/test.md&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取示例文件</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(textPath, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err, contrast</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 通过promisefy转化为链式调用</span></span><br><span class="line">  <span class="keyword">const</span> readFileSync = <span class="title function_">promisefy</span>(fs.<span class="property">readFile</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">readFileSync</span>(textPath, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res === contrast) <span class="comment">// 此处结果预期：true，即promise返回内容与前面读取内容一致</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">promisefy</span> = (<span class="params">fn</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// TODO 此处完成该函数的封装</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">textPath, type</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">fn</span>(textPath, type, <span class="function">(<span class="params">err, contrast</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">resolve</span>(contrast)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = promisefy <span class="comment">// 请勿删除该行代码</span></span><br></pre></td></tr></table></figure><p>​        这段代码是对 Node.js 内置模块 <code>fs</code> 中 <code>readFile</code> 函数进行了封装，将其转化为返回 Promise 的形式，以实现更方便的异步操作。</p><p>具体来说，<code>promisefy</code> 函数接收一个函数 <code>fn</code> 作为参数，该函数需要具有以下特点：</p><ul><li>其最后一个参数为回调函数，该回调函数接收两个参数 <code>err</code> 和 <code>result</code>，其中 <code>err</code> 表示错误信息，<code>result</code> 表示返回结果。</li><li>在执行过程中可能发生错误，此时需要调用回调函数并传入错误信息。</li><li>在执行结束后需要调用回调函数并传入结果。</li></ul><p>​        <code>promisefy</code> 函数返回一个新函数，该函数的参数与 <code>fn</code> 相同，但是该函数返回一个 Promise 对象，实现了对 <code>fn</code> 函数的封装，将其转化为 Promise 形式的异步操作。</p><p>​        在该代码中，首先使用 <code>fs.readFile</code> 函数读取一个文件内容，并将其与另一个使用 <code>promisefy</code> 函数封装后的 <code>readFileSync</code> 函数返回的结果进行比较，以验证封装后的函数能够正常工作。</p><h3 id="逃离二向箔-一"><a href="#逃离二向箔-一" class="headerlink" title="逃离二向箔-一"></a>逃离二向箔-一</h3><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/476c7ac573d16e8ee2cc1c56aad6b14b-0.gif" alt="图片描述" style="zoom:50%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 promise 模拟请求 + 3000ms后完成得到发射后结果</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createRequest</span>(<span class="params">i</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> start = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt;= <span class="number">0.05</span>) &#123;</span><br><span class="line">          <span class="title function_">resolve</span>(</span><br><span class="line">            <span class="string">`第<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>艘曲率飞船达到光速，成功逃离，用时<span class="subst">$&#123;<span class="built_in">Date</span>.now() - start&#125;</span>`</span></span><br><span class="line">          );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">reject</span>(</span><br><span class="line">            <span class="string">`第<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>艘曲率飞船出现故障，无法达到光速，用时<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">              <span class="built_in">Date</span>.now() - start</span></span></span><br><span class="line"><span class="subst"><span class="string">            &#125;</span>`</span></span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="number">3000</span> + i * <span class="number">100</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RequestControl</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">&#123; max, el &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">max</span> = max;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">requestQueue</span> = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">el</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(el);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">requestQueue</span>.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">run</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">startTime</span> = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">addRequest</span>(<span class="params">request</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">requestQueue</span>.<span class="title function_">push</span>(request);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// TODO：待补充代码</span></span><br><span class="line">    <span class="keyword">let</span> lque = []</span><br><span class="line">    <span class="keyword">while</span> (<span class="variable language_">this</span>.<span class="property">requestQueue</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> req = <span class="variable language_">this</span>.<span class="property">requestQueue</span>.<span class="title function_">shift</span>()()</span><br><span class="line">      lque.<span class="property">push</span> (</span><br><span class="line">        req.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">render</span>(res)</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">rej</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">render</span>(rej)</span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          lque.<span class="title function_">shift</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">      )</span><br><span class="line">        <span class="keyword">if</span> (lque.<span class="property">length</span> &gt;= <span class="variable language_">this</span>.<span class="property">max</span>) &#123;</span><br><span class="line">          <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">race</span>(lque)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params">context</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> childNode = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">    childNode.<span class="property">innerText</span> = context;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">el</span>.<span class="title function_">appendChild</span>(childNode);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> requestControl = <span class="keyword">new</span> <span class="title class_">RequestControl</span>(&#123; <span class="attr">max</span>: <span class="number">10</span>, <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span> &#125;);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> request = <span class="title function_">createRequest</span>(i);</span><br><span class="line">    requestControl.<span class="title function_">addRequest</span>(request);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  requestControl,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="JS样式选择器√"><a href="#JS样式选择器√" class="headerlink" title="JS样式选择器√"></a>JS样式选择器√</h2><ul><li>querySelector</li></ul><h3 id="蓝桥校园一卡通-三"><a href="#蓝桥校园一卡通-三" class="headerlink" title="蓝桥校园一卡通-三"></a>蓝桥校园一卡通-三</h3><blockquote><p>过辣！</p><p>救命我的HTML/CSS基础烂到家了</p></blockquote><p>介绍：</p><p>每年大一新生报道时，都需要办一张校园一卡通，无论吃饭、洗澡、买东西、甚至去图书馆借书都要用，小蓝想帮助学校做一个制卡界面，但是用 js 做用户输入验证不知道怎么写，快来帮助小蓝完成这个页面吧！</p><p>请在 <code>index.html</code> 文件中补全代码，具体需求如下：</p><ol><li>完成表单验证：</li></ol><ul><li>姓名：2-4 个汉字，验证错误在对应的表单项（<code>class=form-group</code>）添加类 <code>class=has-error</code>，并在下方显示报错信息（即 <code>id=vail_name</code> 的元素显示）。</li></ul><blockquote><p>tips: 正则中用 <code>[\u4e00-\u9fa5]</code> 表示汉字。</p></blockquote><ul><li>学号: 1-12 位纯数字，错误即在对应的表单项（<code>class=form-group</code>）添加类 <code>class=has-error</code>，并在下方显示报错信息（即 <code>id=vail_studentId</code> 的元素显示）。</li></ul><ol><li>表单验证通过过后，正确显示卡片。在卡片（<code>class=info</code>）元素下的（<code>class=item</code>）的元素中按照顺序分别显示表单提交的内容：姓名：xxx，学号：xxx, 学院：xxx。</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span> <span class="attr">id</span>=<span class="string">&quot;cardStyle&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cardName&quot;</span>&gt;</span>蓝桥校园一卡通<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;info&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;studentName&quot;</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;studentName&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入姓名&quot;</span> <span class="attr">aria-describedby</span>=<span class="string">&quot;inputSuccess2Status&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;vail_name&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;help-block&quot;</span>&gt;</span> 姓名错误提示<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;studentId&quot;</span>&gt;</span>学号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;studentId&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入学号&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;vail_studentId&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;help-block&quot;</span>&gt;</span> 学号提示<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;college&quot;</span>&gt;</span>学院<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;college&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;软件工程学院&quot;</span>&gt;</span>软件工程学院<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;信息技术学院&quot;</span>&gt;</span>……<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>制卡<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">   <span class="comment">// 获取DOM元素对象</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> studentName = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;studentName&quot;</span>); <span class="comment">// 姓名</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> studentId = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;studentId&quot;</span>);  <span class="comment">// 学号</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> college = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;college&quot;</span>); <span class="comment">// 学院</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> submit = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;submit&quot;</span>);  <span class="comment">// 制卡按钮</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> cardStyle = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cardStyle&quot;</span>); <span class="comment">// 卡片</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> item = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.item&quot;</span>) <span class="comment">// 卡片项</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">submit.<span class="property">onclick</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// TODO 待补充代码</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> hanzi = <span class="regexp">/^[\u4e00-\u9fa5]&#123;2,4&#125;$/</span>.<span class="title function_">test</span>(studentName.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> shuzi = <span class="regexp">/^\d&#123;1,12&#125;$/</span>.<span class="title function_">test</span>(studentId.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span> (!hanzi) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.form-group&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;has-error&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#vail_name&quot;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.form-group&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;has-error&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#vail_name&quot;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span> (!shuzi) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.form-group:nth-child(2)&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;has-error&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#vail_studentId&quot;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;测试测试&quot;</span> + shuzi)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.form-group:nth-child(2)&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;has-error&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#vail_studentId&quot;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.item&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;姓名：&quot;</span> + studentName.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.item:nth-child(2)&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;学号：&quot;</span> + studentId.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.item:last-child&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;学院：&quot;</span> + college.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 添加 showCard 类显示放大一卡通的动画，请勿删除</span></span></span><br><span class="line"><span class="language-javascript">cardStyle.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;showCard&#x27;</span>) </span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="JQ样式选择器√"><a href="#JQ样式选择器√" class="headerlink" title="JQ样式选择器√"></a>JQ样式选择器√</h2><h3 id="大电影"><a href="#大电影" class="headerlink" title="大电影"></a><a href="https://www.lanqiao.cn/problems/2333/learning/?page=1&first_category_id=2&sort=students_count&second_category_id=11&tags=jQuery">大电影</a></h3><blockquote><p>过辣！</p><p>跟纸鹤大佬学到一个简明化代码的小技巧↓</p><p>选择器选择的元素命名：<code>$this $dom元素</code></p><p>优雅……实在是！！！！！太优雅了！</p></blockquote><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/b5c9ab272dec391d8dc020e728893ed1-0.gif" alt="图片描述" style="zoom:33%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TODO：待补充代码</span></span><br><span class="line"><span class="keyword">const</span> $toast = $(<span class="string">&quot;#toast__container&quot;</span>)</span><br><span class="line">$(<span class="string">&quot;.card-body-option-favorite img&quot;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> solid = <span class="string">&#x27;./images/solid.svg&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> hollow = <span class="string">&#x27;./images/hollow.svg&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> $this = $(<span class="variable language_">this</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ($this.<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>) === hollow) &#123;</span><br><span class="line">    $this.<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>, solid)</span><br><span class="line"></span><br><span class="line">    $toast.<span class="title function_">show</span>()</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      $toast.<span class="title function_">fadeOut</span>()</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $this.<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>, hollow)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>($this+<span class="string">&#x27;!!!&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;.toast__close&quot;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  $toast.<span class="title function_">fadeOut</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="传送门-国"><a href="#传送门-国" class="headerlink" title="传送门-国"></a>传送门-国</h3><p><code>.html</code>的代码很有意思，这说明这个<code>toFunction()</code>也很有意思。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;lift&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;default-color active-color&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;toFunction.call(this,0)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>顶部&lt;/a</span><br><span class="line">  &gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;default-color&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;toFunction.call(this,960)&quot;</span>&gt;</span>中间<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;default-color&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;toFunction.call(this,2000)&quot;</span>&gt;</span>底部<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>$(window).scrollTop()</code></p><p>解题如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">window</span>).<span class="title function_">scroll</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 页面滚动到指定范围，对应的侧边按钮字体变色</span></span><br><span class="line">  <span class="comment">// TODO：请补充代码实现功能</span></span><br><span class="line">  <span class="keyword">let</span> top = $(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>()</span><br><span class="line">  <span class="keyword">if</span> (top &lt; <span class="number">960</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;顶部&quot;</span>)</span><br><span class="line">    $(<span class="string">&quot;.default-color&quot;</span>).<span class="title function_">eq</span>(<span class="number">0</span>).<span class="title function_">addClass</span>(<span class="string">&quot;active-color&quot;</span>).<span class="title function_">siblings</span>().<span class="title function_">removeClass</span>(<span class="string">&quot;active-color&quot;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (top &lt; <span class="number">1920</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;中间&quot;</span>)</span><br><span class="line">    $(<span class="string">&quot;.default-color&quot;</span>).<span class="title function_">eq</span>(<span class="number">1</span>).<span class="title function_">addClass</span>(<span class="string">&quot;active-color&quot;</span>).<span class="title function_">siblings</span>().<span class="title function_">removeClass</span>(<span class="string">&quot;active-color&quot;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;底部&quot;</span>)</span><br><span class="line">    $(<span class="string">&quot;.default-color&quot;</span>).<span class="title function_">eq</span>(<span class="number">2</span>).<span class="title function_">addClass</span>(<span class="string">&quot;active-color&quot;</span>).<span class="title function_">siblings</span>().<span class="title function_">removeClass</span>(<span class="string">&quot;active-color&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; scrollTopVal：到达指定位置需要滚动的高度</span></span><br><span class="line"><span class="comment"> * 点击按钮，滚动到指定位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toFunction</span>(<span class="params">scrollTopVal</span>) &#123;</span><br><span class="line">  <span class="comment">// TODO：请补充代码实现功能</span></span><br><span class="line">  $(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>(scrollTopVal)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="网页-PPT-三"><a href="#网页-PPT-三" class="headerlink" title="网页 PPT-三"></a>网页 PPT-三</h3><blockquote><p>过辣！</p></blockquote><p>介绍:</p><p>除了使用办公软件来制作 PPT，利用前端技术其实我们也可以制作一个在浏览器播放的 PPT，这样的 PPT 更加方便传播和查看，而且可以最大限度地利用前端技术的布局和交互能力。本题请实现一个讲授 HTML 基础知识的网页 PPT。</p><p>请在 <code>js/index.js</code> 文件中补全代码，具体需求如下：</p><ol><li>补充 <code>switchPage</code> 函数，实现根据 <code>activeIndex</code> 切换 PPT 页面的功能（切换页面请通过控制 <code>section</code> 元素的 <code>display</code> 属性实现），切换页面的同时需要改变左下角的页码 <code>(class=&quot;page&quot;)</code>，格式为 <code>&quot;当前页码 / 总页码&quot;</code>，注意。</li><li>在播放到第一页时给“上一张”按钮 <code>(class=&quot;btn left&quot;)</code> 添加 <code>disable</code> 类，并在播放到最后一页时给“下一张”按钮 <code>(class=&quot;btn right&quot;)</code> 添加 <code>disable</code> 类，其他情况下则都不添加。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sectionsCount = $(<span class="string">&quot;section&quot;</span>).<span class="property">length</span>;</span><br><span class="line"><span class="keyword">let</span> activeIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听用户按下空格和方向键的事件</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">on</span>(<span class="string">&quot;keydown&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  e.<span class="title function_">preventDefault</span>();</span><br><span class="line">  <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&quot; &quot;</span> || e.<span class="property">key</span> === <span class="string">&quot;ArrowRight&quot;</span>) &#123;</span><br><span class="line">    <span class="title function_">goRight</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&quot;ArrowLeft&quot;</span>) &#123;</span><br><span class="line">    <span class="title function_">goLeft</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听按钮点击事件</span></span><br><span class="line">$(<span class="string">&quot;.btn.left&quot;</span>).<span class="title function_">click</span>(goLeft);</span><br><span class="line">$(<span class="string">&quot;.btn.right&quot;</span>).<span class="title function_">click</span>(goRight);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切换下一张的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">goLeft</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (activeIndex === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  activeIndex -= <span class="number">1</span>;</span><br><span class="line">  <span class="title function_">switchPage</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切换上一张的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">goRight</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (activeIndex+<span class="number">1</span> === sectionsCount) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  activeIndex += <span class="number">1</span>;</span><br><span class="line">  <span class="title function_">switchPage</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">switchPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> 请补充该函数，实现根据activeIndex切换页面的功能，</span></span><br><span class="line">  <span class="comment">// 并且在到达最后一页或第一页时给相应的按钮添加disable类</span></span><br><span class="line">  $(<span class="string">&quot;.page&quot;</span>).<span class="title function_">text</span>((activeIndex + <span class="number">1</span>) + <span class="string">&#x27; / &#x27;</span> + sectionsCount)</span><br><span class="line"></span><br><span class="line">  $(<span class="string">`section:nth(<span class="subst">$&#123;activeIndex&#125;</span>)`</span>).<span class="title function_">css</span>(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;block&quot;</span>).<span class="title function_">siblings</span>(<span class="string">&quot;section&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;none&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (activeIndex &gt;= sectionsCount - <span class="number">1</span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;.right&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;disable&quot;</span>)</span><br><span class="line">    $(<span class="string">`section:nth(<span class="subst">$&#123;activeIndex&#125;</span>)`</span>).<span class="title function_">css</span>(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;flex&quot;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (activeIndex &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;.left&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;disable&quot;</span>)</span><br><span class="line">    $(<span class="string">`section:nth(<span class="subst">$&#123;activeIndex&#125;</span>)`</span>).<span class="title function_">css</span>(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;flex&quot;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $(<span class="string">&quot;.right&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;disable&quot;</span>)</span><br><span class="line">    $(<span class="string">&quot;.left&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;disable&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="宝贵的一票-二"><a href="#宝贵的一票-二" class="headerlink" title="宝贵的一票-二"></a>宝贵的一票-二</h3><p>完成 <code>index.html</code> 文件中的 TODO 部分。</p><ol><li>点击添加选项，页面中新增一个选项。选项前文字按照：选项 1，选项 2，选项 3 …… 顺序排列，当页面中的选项大于 2 个时，选项后面跟随删除按钮（即 x 图标）。带有删除图标的选项 DOM 结构如下：</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3 row item&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 col-form-label txt&quot;</span>&gt;</span>选项1<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-9&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-1&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 删除图标 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;del-icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./images/x.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>点击删除按钮，删除当前选项，并且选项前文字按照：选项 1，选项 2，选项 3 …… 顺序排列，当选项数量小于等于 2 个时，选项后面无删除按钮。</li></ol><p>完成后，最终页面效果如下：</p><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/bf4ab64cd06058c7a41f5ed0b629c967-0.gif" alt="图片描述" style="zoom:50%;" /><p>我的逻辑好差，像这种多拐几个弯的就不会了。</p><p>代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">      let initRender = (txt) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        return `</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3 row&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 col-form-label txt&quot;</span>&gt;</span>$&#123;txt&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-9&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        `;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">      &#125;;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">      $(</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        (function () &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          // 初始化的时候渲染两条数据，且不带删除符号</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          for (let index = 0; index &lt; 2; index++) &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            let initList = initRender(`选项$&#123;index + 1&#125;`);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            $(&quot;.list&quot;).append(initList);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          // 点击加号逻辑</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          $(&quot;.add&quot;).click(function () &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            // TODO 待补充代码</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            let $list = $(&quot;.list&quot;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            let len = $list.children().length</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            if(len === 2) &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              $list.children().each((index, item) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                $(item).append(`</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-1&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                    <span class="comment">&lt;!-- 删除图标 --&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;del-icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./images/x.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                `)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              &#125;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            if (len &lt; 2) &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              $list.append(initRender(`选项$&#123;len+1&#125;`))</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            &#125; else &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              $list.append(`</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3 row item&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                  <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-2 col-form-label txt&quot;</span>&gt;</span>选项$&#123;len+1&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-9&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-1&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                    <span class="comment">&lt;!-- 删除图标 --&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;del-icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./images/x.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              `)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            </span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          &#125;);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          // 点击 x 删除逻辑，列表小于 2 项时不显示删除图标</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          $(document).on(&quot;click&quot;, &quot;.del-icon&quot;, function () &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            // TODO 待补充代码</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            $(this).parent().parent().remove()</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            $(&quot;.list&quot;).children().each((index, item) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              $(item).children(&#x27;label&#x27;).text(`选项$&#123;index + 1&#125;`)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              if ($(&quot;.list&quot;).children().length &lt; 2) &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                $(item).children()[2].remove()</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">              &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            &#125;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">          &#125;);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        &#125;)()</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">      );</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="水果叠叠乐-一"><a href="#水果叠叠乐-一" class="headerlink" title="水果叠叠乐-一"></a>水果叠叠乐-一</h3><blockquote><p>怎么自如删除添加更改DOM元素啊555555</p><p>背景样式很好，很适合拿来做登录注册背景</p></blockquote><p>这个找不到官方题解，只能看到CSDN一个很繁琐的</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>水果叠叠乐<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/style.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;stars&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;stars2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;stars3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-one&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/pineapple.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-two&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/pineapple.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-three&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/apple.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-four&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/apple.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-five&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/apple.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-six&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/pineapple.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-seven&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/avocado.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-eight&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/avocado.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-nine&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/avocado.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;4&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-ten&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/grapes.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;4&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-eleven&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/grapes.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-id</span>=<span class="string">&quot;4&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit-twelve&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/grapes.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 图片位置 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 卡槽位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gradient-border&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#card li&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// <span class="doctag">TODO:</span> 待补充代码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>($(<span class="string">&quot;#box li&quot;</span>).<span class="property">length</span> == <span class="number">7</span>) <span class="keyword">return</span> </span></span><br><span class="line"><span class="language-javascript">        $(<span class="variable language_">this</span>).<span class="title function_">hide</span>()</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#box&quot;</span>).<span class="title function_">append</span>($(<span class="variable language_">this</span>).<span class="title function_">clone</span>())</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> list = $(<span class="string">`#box li[data-id = <span class="subst">$&#123;<span class="variable language_">this</span>.getAttribute(<span class="string">&#x27;data-id&#x27;</span>)&#125;</span>]`</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(list.<span class="property">length</span> = <span class="number">3</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            list.<span class="title function_">each</span>(<span class="function">(<span class="params">i, item</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                item.<span class="title function_">remove</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="折叠手风琴-习"><a href="#折叠手风琴-习" class="headerlink" title="折叠手风琴-习"></a>折叠手风琴-习</h3><p>用JQ实现手风琴图片展示效果</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;.option&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;active&#x27;</span>).<span class="title function_">siblings</span>().<span class="title function_">removeClass</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>.siblings()——返回某元素的所有同级元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;li.start&quot;</span>).<span class="title function_">siblings</span>().<span class="title function_">css</span>(&#123;<span class="string">&quot;color&quot;</span>:<span class="string">&quot;red&quot;</span>,<span class="string">&quot;border&quot;</span>:<span class="string">&quot;2px solid red&quot;</span>&#125;);</span><br><span class="line"><span class="comment">// 返回带有类名start的每个li元素的所有同级元素</span></span><br></pre></td></tr></table></figure><h3 id="渐变色-一"><a href="#渐变色-一" class="headerlink" title="渐变色-一"></a>渐变色-一</h3><p>代码见/Project/LittleProgram/渐变色</p><h2 id="JQ-amp-AJAX√"><a href="#JQ-amp-AJAX√" class="headerlink" title="JQ &amp; AJAX√"></a>JQ &amp; AJAX√</h2><h3 id="权限管理-三"><a href="#权限管理-三" class="headerlink" title="权限管理-三"></a>权限管理-三</h3><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/a1e7c0ed83318bbad9a1a26589c0be2b-0.png" alt="左侧选择框内选项被全部移至右侧，所有用户权限均变为管理员" style="zoom:33%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 使用 ajax 获取 userList.json 数据并渲染到页面</span></span><br><span class="line">  <span class="title function_">getData</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 为按钮添加事件</span></span><br><span class="line">  $(<span class="string">&quot;#add&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// TODO：补充代码，实现功能</span></span><br><span class="line">    <span class="keyword">let</span> $rt = $(<span class="string">&quot;#rightSelect&quot;</span>)</span><br><span class="line">    $(<span class="string">&quot;#leftSelect&quot;</span>).<span class="title function_">val</span>().<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      $rt.<span class="title function_">append</span>($(<span class="string">&quot;&lt;option&gt;&quot;</span>).<span class="title function_">val</span>(item).<span class="title function_">text</span>(item))</span><br><span class="line">      $(<span class="string">`#leftSelect option[value=<span class="subst">$&#123;item&#125;</span>]`</span>).<span class="title function_">remove</span>()</span><br><span class="line"></span><br><span class="line">      $(<span class="string">`#userList td:contains(<span class="subst">$&#123;item&#125;</span>)`</span>).<span class="title function_">siblings</span>().<span class="title function_">text</span>(<span class="string">&#x27;管理员&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  $(<span class="string">&quot;#addAll&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// TODO：补充代码，实现功能</span></span><br><span class="line">    <span class="keyword">let</span> $lt = $(<span class="string">&quot;#leftSelect&quot;</span>)</span><br><span class="line">    <span class="keyword">let</span> $rt = $(<span class="string">&quot;#rightSelect&quot;</span>)</span><br><span class="line">    $rt.<span class="title function_">append</span>($lt.<span class="title function_">children</span>())</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&quot;#userList tr&quot;</span>).<span class="title function_">not</span>(<span class="string">&quot;:eq(0)&quot;</span>).<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      $(<span class="variable language_">this</span>).<span class="title function_">find</span>(<span class="string">&quot;td:last-child&quot;</span>).<span class="title function_">text</span>(<span class="string">&#x27;管理员&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  $(<span class="string">&quot;#remove&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// TODO：补充代码，实现功能</span></span><br><span class="line">    <span class="keyword">let</span> $lt = $(<span class="string">&quot;#leftSelect&quot;</span>)</span><br><span class="line">    $(<span class="string">&quot;#rightSelect&quot;</span>).<span class="title function_">val</span>().<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      $lt.<span class="title function_">append</span>($(<span class="string">&quot;&lt;option&gt;&quot;</span>).<span class="title function_">val</span>(item).<span class="title function_">text</span>(item))</span><br><span class="line">      $(<span class="string">`#rightSelect option[value=<span class="subst">$&#123;item&#125;</span>]`</span>).<span class="title function_">remove</span>()</span><br><span class="line"></span><br><span class="line">      $(<span class="string">`#userList td:contains(<span class="subst">$&#123;item&#125;</span>)`</span>).<span class="title function_">siblings</span>().<span class="title function_">text</span>(<span class="string">&#x27;普通用户&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  $(<span class="string">&quot;#removeAll&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// TODO：补充代码，实现功能</span></span><br><span class="line">    <span class="keyword">let</span> $lt = $(<span class="string">&quot;#leftSelect&quot;</span>)</span><br><span class="line">    <span class="keyword">let</span> $rt = $(<span class="string">&quot;#rightSelect&quot;</span>)</span><br><span class="line">    $lt.<span class="title function_">append</span>($rt.<span class="title function_">children</span>())</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&quot;#userList tr&quot;</span>).<span class="title function_">not</span>(<span class="string">&quot;:eq(0)&quot;</span>).<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      $(<span class="variable language_">this</span>).<span class="title function_">find</span>(<span class="string">&quot;td:last-child&quot;</span>).<span class="title function_">text</span>(<span class="string">&#x27;普通用户&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改权限</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; right 要修改的权限</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; changeList 要修改权限的用户列表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeAccess</span>(<span class="params">right, changeList</span>) &#123;</span><br><span class="line">  <span class="comment">// TODO：补充代码，实现功能</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 异步获取数据</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// TODO：补充代码，实现功能</span></span><br><span class="line">  $.<span class="title function_">get</span>(<span class="string">&#x27;./js/userList.json&#x27;</span>, <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">forEach</span>(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">      $(<span class="string">&quot;#userList&quot;</span>).<span class="title function_">append</span>(<span class="string">`</span></span><br><span class="line"><span class="string">        &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;<span class="subst">$&#123;element.name&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;<span class="subst">$&#123;element.right ? <span class="string">&#x27;管理员&#x27;</span> : <span class="string">&#x27;普通用户&#x27;</span>&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;</span></span><br><span class="line"><span class="string">      `</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Element√"><a href="#Element√" class="headerlink" title="Element√"></a>Element√</h2><h3 id="心愿便利贴-三"><a href="#心愿便利贴-三" class="headerlink" title="心愿便利贴-三"></a>心愿便利贴-三</h3><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/1c5e4b419aec689146069d07f0e98035-0.gif" alt="完成效果" style="zoom:50%;" /><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>心愿便利贴<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引入element-ui样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/wish.css&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引入element-ui组件库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>心愿便利贴<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- TODO 待修改的代码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;item.css&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in wishList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;closeCard(index)&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./images/ding.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-image</span> <span class="attr">v-if</span>=<span class="string">&quot;item.pic&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px; height: 100px&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;item.pic&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">:preview-src-list</span>=<span class="string">&quot;picList&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">&#123;&#123;item.content&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;form&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">label-position</span>=<span class="string">&quot;left&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span> <span class="attr">id</span>=<span class="string">&quot;firstName&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入姓名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;许愿内容&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入内容&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.content&quot;</span> <span class="attr">show-word-limit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;图片上传&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-upload</span> <span class="attr">ref</span>=<span class="string">&quot;uploadRef&quot;</span> <span class="attr">action</span>=<span class="string">&quot;#&quot;</span> <span class="attr">:limit</span>=<span class="string">&quot;1&quot;</span> <span class="attr">list-type</span>=<span class="string">&quot;picture-card&quot;</span> <span class="attr">:on-remove</span>=<span class="string">&quot;handleRemove&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">:on-change</span>=<span class="string">&quot;getPic&quot;</span> <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">&quot;default&quot;</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-plus&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;file&quot;</span> <span class="attr">slot-scope</span>=<span class="string">&quot;&#123;file&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-thumbnail&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;file.url&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-actions&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-preview&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handlePictureCardPreview(file)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-zoom-in&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;!disabled&quot;</span> <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-delete&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleRemove(file)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-delete&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">id</span>=<span class="string">&quot;onSubmit&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onSubmit&quot;</span>&gt;</span>发布<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;onRest&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogVisible&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;form.pic&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">wishList</span>: [],</span></span><br><span class="line"><span class="language-javascript"><span class="attr">form</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">pic</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// TODO 待补充验证的代码</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: [</span></span><br><span class="line"><span class="language-javascript">&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入姓名&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">&#123; <span class="attr">min</span>: <span class="number">2</span>, <span class="attr">max</span>: <span class="number">4</span>, <span class="attr">message</span>: <span class="string">&#x27;长度在2到4个字符&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">],</span></span><br><span class="line"><span class="language-javascript"><span class="attr">content</span>: [</span></span><br><span class="line"><span class="language-javascript">&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入许愿内容&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">&#123; <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">30</span>, <span class="attr">message</span>: <span class="string">&#x27;长度在1到30个字符&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">]</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">num</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">picList</span>: [],</span></span><br><span class="line"><span class="language-javascript"><span class="attr">textarea</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">dialogVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">disabled</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 提交方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onSubmit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;form&#x27;</span>].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> obj = <span class="variable language_">this</span>.<span class="property">form</span>;</span></span><br><span class="line"><span class="language-javascript">obj.<span class="property">css</span> = <span class="string">&#x27;item&#x27;</span> + <span class="variable language_">this</span>.<span class="property">num</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">num</span>++;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">num</span> &gt; <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">num</span> = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">wishList</span>.<span class="title function_">push</span>(obj)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">uploadRef</span>.<span class="property">uploadFiles</span>.<span class="title function_">pop</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">wishList</span>);</span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">message</span>: <span class="string">&#x27;提交错误！请检查输入内容&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 关闭许愿卡</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">closeCard</span>(<span class="params">index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">wishList</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 重置表单</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onRest</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;form&#x27;</span>].<span class="title function_">resetFields</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 图片删除</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">handleRemove</span>(<span class="params">file</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> index = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">uploadRef</span>.<span class="property">uploadFiles</span>.<span class="title function_">findIndex</span>(<span class="function"><span class="params">e</span> =&gt;</span> e.<span class="property">uid</span> === file.<span class="property">uid</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">uploadRef</span>.<span class="property">uploadFiles</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 模拟上传图片</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">getPic</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">pic</span> = e.<span class="property">url</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">picList</span>.<span class="title function_">push</span>(e.<span class="property">url</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 预览图片</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">handlePictureCardPreview</span>(<span class="params">file, fileList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">pic</span> = file.<span class="property">url</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">dialogVisible</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="饿了么第二次封装-一"><a href="#饿了么第二次封装-一" class="headerlink" title="饿了么第二次封装-一"></a>饿了么第二次封装-一</h3><p>目标：（实现单选选中效果）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;main&quot;&gt;</span><br><span class="line">    &lt;el-table</span><br><span class="line">      ref=&quot;singleTable&quot;</span><br><span class="line">      highlight-current-row</span><br><span class="line">      :data=&quot;tableData&quot;</span><br><span class="line">      stripe</span><br><span class="line">      border</span><br><span class="line">      style=&quot;width: 100%&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-table-column label=&quot;单选&quot; width=&quot;80&quot;&gt;</span><br><span class="line">        &lt;!-- TODO：完善单选按钮组件，实现需求（DOM 结构不能修改） --&gt;</span><br><span class="line">        &lt;!-- TODO：完善单选按钮组件，实现需求（DOM 结构不能修改） --&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">            &lt;!-- 绑定change方法调用setCurrent --&gt;</span><br><span class="line">            &lt;el-radio</span><br><span class="line">                v-model=&quot;currentRow&quot;</span><br><span class="line">                :label=&quot;scope.$index&quot;</span><br><span class="line">                @change=&quot;setCurrent(scope.row)&quot;</span><br><span class="line">            &gt;</span><br><span class="line">                &amp;nbsp;</span><br><span class="line">    &lt;/el-radio&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column label=&quot;日期&quot; width=&quot;180&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          📅&lt;span style=&quot;margin-left: 10px&quot;&gt;&#123;&#123; scope.row.date &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column prop=&quot;name&quot; label=&quot;姓名&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;address&quot; label=&quot;地址&quot;&gt; &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">    &lt;div class=&quot;tools&quot;&gt;</span><br><span class="line">      &lt;el-button @click=&quot;setCurrent(tableData[1])&quot;&gt;选中第二行&lt;/el-button&gt;</span><br><span class="line">      &lt;el-button @click=&quot;setCurrent()&quot;&gt;取消选择&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    tableData: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default: () =&gt; [],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      currentRow: null,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    setCurrent(row) &#123;</span><br><span class="line">      this.currentRow = this.tableData.indexOf(row) // 新增</span><br><span class="line">      this.$refs.singleTable.setCurrentRow(row); // 设置当前选中行</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.main &#123;</span><br><span class="line">  width: 60%;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">&#125;</span><br><span class="line">.tools &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="Vuex√"><a href="#Vuex√" class="headerlink" title="Vuex√"></a>Vuex√</h2><h3 id="消失的Token-三"><a href="#消失的Token-三" class="headerlink" title="消失的Token-三"></a>消失的Token-三</h3><p>​        <strong>只有 <code>user</code> 模块通过 <code>namespaced: true</code> 开启了命名空间功能。</strong>因此，在调用 <code>user</code> 模块中的 <code>getters</code> 与 <code>mutations</code> 时，需要使用以下特定语法↓</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;模块名/模块中的getters或mutations&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./components/login.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./components/panel.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// TODO 修改下面错误代码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">data</span>(<span class="params"></span>) &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">welcome</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> store.<span class="property">getters</span>.<span class="property">welcome</span></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">username</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> store.<span class="property">getters</span>[<span class="string">&#x27;user/username&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">token</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> store.<span class="property">getters</span>[<span class="string">&#x27;user/token&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 回车/点击确认的回调事件</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">login</span>(<span class="params">username</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    username &amp;&amp; store.<span class="title function_">commit</span>(<span class="string">&#x27;user/login&#x27;</span>, &#123; username, <span class="attr">token</span>: <span class="string">&#x27;sxgWKnLADfS8hUxbiMWyb&#x27;</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">                    username &amp;&amp; store.<span class="title function_">commit</span>(<span class="string">&#x27;say&#x27;</span>, <span class="string">&#x27;登录成功，欢迎你回来！&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="vue√"><a href="#vue√" class="headerlink" title="vue√"></a>vue√</h2><h3 id="趣购-三"><a href="#趣购-三" class="headerlink" title="趣购-三"></a>趣购-三</h3><blockquote><p>请在 <code>trolley.vue</code> 文件中的 TODO 部分补全代码：</p><ul><li><p>用鼠标按下拖动图片到购物车（即 <code>id=&quot;trolley&quot;</code> 的节点）中，然后松开鼠标，购物车会添加拖动的商品，并显示购物车商品数量。</p></li><li><p>下方（即 <code>class=&quot;result&quot;</code> 的方框）会显示购物车中商品的详情，详情以<strong>商品名 x 数量</strong>的形式展示，商品之间通过空格间隔。</p></li><li><p>下方（即 <code>class=&quot;result&quot;</code> 的方框）同时还会显示购物车中商品的总价。</p><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/92a4a4eb2145085ca6cce760211191c8-0.gif" alt="完成效果" style="zoom: 33%;" /></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- TODO: 补充拖拽事件，请不要改动任何 id 属性 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;good-list&quot;&gt;</span><br><span class="line">      &lt;div v-for=&quot;good in goods&quot; :key=&quot;good.name&quot; class=&quot;good&quot; draggable @dragstart=&quot;dragstart($event, good)&quot;&gt;</span><br><span class="line">        &lt;img :src=&quot;good.cover&quot; /&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; good.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;￥&#123;&#123; good.price &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;trolley&quot; class=&quot;trolley&quot; @dragover.prevent=&quot;&quot; @drop=&quot;drop&quot;&gt;</span><br><span class="line">      &lt;span id=&quot;bought&quot; class=&quot;bought&quot; v-if=&quot;bought.length !== 0&quot;&gt;&#123;&#123;</span><br><span class="line">        bought.length</span><br><span class="line">      &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;img src=&quot;./images/trolley.jpeg&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;result&quot;&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        购物车商品：&lt;span id=&quot;goods&quot;&gt;&#123;&#123; goodsDetail &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        购物车商品总计：&lt;span id=&quot;total&quot;&gt;&#123;&#123; totalPrice &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">......</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      goods: [</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;畅销书&quot;,</span><br><span class="line">          price: 30,</span><br><span class="line">          cover: &quot;./images/book.jpeg&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;收纳箱&quot;,</span><br><span class="line">          price: 60,</span><br><span class="line">          cover: &quot;./images/box.jpeg&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;纸巾&quot;,</span><br><span class="line">          price: 20,</span><br><span class="line">          cover: &quot;./images/paper.jpeg&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;电视&quot;,</span><br><span class="line">          price: 1000,</span><br><span class="line">          cover: &quot;./images/tv.jpg&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      bought: [],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  // TODO: 请补充实现代码</span><br><span class="line">  computed: &#123;</span><br><span class="line">    totalPrice() &#123;</span><br><span class="line">      return this.bought.reduce((t, v) =&gt; v.price + t, 0);</span><br><span class="line">    &#125;,</span><br><span class="line">    goodsDetail() &#123;</span><br><span class="line">      let r = this.bought.reduce((t, v) =&gt; &#123;</span><br><span class="line">        return (t[v.name] ? t[v.name]++ : (t[v.name] = 1), t);</span><br><span class="line">      &#125;, &#123;&#125;);</span><br><span class="line">      let detail = &#x27;&#x27;;</span><br><span class="line">      for (let i in r) &#123;</span><br><span class="line">        detail += i + &#x27;*&#x27; + r[i];</span><br><span class="line">      &#125;</span><br><span class="line">      return detail;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    dragstart(event, good) &#123;</span><br><span class="line">      event.dataTransfer.setData(&#x27;good&#x27;, JSON.stringify(good));</span><br><span class="line">    &#125;,</span><br><span class="line">    drop(e) &#123;</span><br><span class="line">      this.bought.push(JSON.parse(e.dataTransfer.getData(&#x27;good&#x27;)));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="绝美宋词-二"><a href="#绝美宋词-二" class="headerlink" title="绝美宋词-二"></a>绝美宋词-二</h3><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/7ed17d0a07cd8f45c52df266b765abad-0.gif" alt="图片描述" style="zoom:50%;" /><p>见 =&gt; E:\Project\LittlePrograms\poem</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>绝美宋词<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span>输入关键字，找一首词<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- TODO：待补充代码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-form&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;search&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;search&quot;</span> <span class="attr">class</span>=<span class="string">&quot;search&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;词牌名 词句 词人&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;suggestions&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item of showList&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;poet&quot;</span> <span class="attr">v-html</span>=<span class="string">&quot;highlight(item.poetry_content)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-html</span>=<span class="string">&quot;highlight(item.title)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            -</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-html</span>=<span class="string">&quot;highlight(item.author)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// TODO：待补充代码</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">search</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">poemList</span>: [],</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">showList</span>: [],</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        axios.<span class="title function_">get</span>(<span class="string">&#x27;./data.json&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">poemList</span> = res.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;) </span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">search</span>(<span class="params">newVal</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (!newVal) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">showList</span> = []</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">showList</span> = <span class="variable language_">this</span>.<span class="property">poemList</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> item.<span class="property">author</span>.<span class="title function_">includes</span>(newVal) || item.<span class="property">title</span>.<span class="title function_">includes</span>(newVal) || item.<span class="property">poetry_content</span>.<span class="title function_">includes</span>(newVal)</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">highlight</span>(<span class="params">str</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> str.<span class="title function_">replaceAll</span>(<span class="variable language_">this</span>.<span class="property">search</span>, <span class="string">`&lt;span class=&quot;highlight&quot;&gt;<span class="subst">$&#123;<span class="variable language_">this</span>.search&#125;</span>&lt;/span&gt;`</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="成语学习-一"><a href="#成语学习-一" class="headerlink" title="成语学习-一"></a>成语学习-一</h3><p>为了达成这种效果↓</p><p><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/d2e35a5c6f12d569c595b56f0c996dd0-0.gif" alt="图片描述"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>成语学习<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.title</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(-<span class="number">225deg</span>, <span class="number">#69EACB</span> <span class="number">0%</span>, <span class="number">#EACCF8</span> <span class="number">48%</span>, <span class="number">#6654F1</span> <span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.idiom_tips_box</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">30px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.detailed_description</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.idiom_box</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">20px</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.item_box</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">120px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">120px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">248</span>, <span class="number">243</span>, <span class="number">243</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#999</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.optional_words_region</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">flex-wrap</span>: wrap;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.words</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: orange;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.words</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">247</span>, <span class="number">113</span>, <span class="number">3</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">248</span>, <span class="number">243</span>, <span class="number">243</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.confirm_btn_box</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.confirm_btn</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#409eff</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;热泪盈眶&quot;,means:&quot;形容非常感激或高兴&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;才华横溢&quot;,means:&quot;指才华充分显露出来&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;聚沙成塔&quot;,means:&quot;比喻积少成多&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;名垂青史&quot;,means:&quot;形容功业巨大，永远流传&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;绝无仅有&quot;,means:&quot;形容极其稀少&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;衣衫褴褛&quot;,means:&quot;形容身上衣服破破烂烂&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;焕然一新&quot;,means:&quot;形容呈现出崭新的面貌&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;并驾齐驱&quot;,means:&quot;比喻齐头并进，不分前后&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;博大精深&quot;,means:&quot;形容思想和学识广博高深&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &#123;word:&quot;忙里偷闲&quot;,means:&quot;在繁忙中抽出空闲来&quot;&#125; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>成语学习<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 提示-描述 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;idiom_tips_box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;detailed_description&quot;</span>&gt;</span>提示：&#123;&#123;tip&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 选中的成语 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;idiom_box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item_box&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item,index in idiom&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;clear(index)&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;result == null ? &#x27;color:#ccc&#x27; : result ? &#x27;color : red&#x27; : &#x27;&#x27;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;result == null ? &#x27;请点击下方文字组织正确的成语（点击框内文字可清除）&#x27; : result ? &#x27;答案正确&#x27; : &#x27;答案错误&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 可选区域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;optional_words_region&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;div&gt;&#123;&#123;word&#125;&#125;&lt;/div&gt; --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;words&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in words.split(&#x27;&#x27;)&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;getSingleWord(item)&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;item&#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 确定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;confirm_btn_box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;confirm_btn&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;confirm&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tip</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">arr</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;热泪盈眶&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;形容非常感激或高兴&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;才华横溢&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;指才华充分显露出来&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;聚沙成塔&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;比喻积少成多&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;名垂青史&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;形容功业巨大，永远流传&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;绝无仅有&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;形容极其稀少&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;衣衫褴褛&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;形容身上衣服破破烂烂&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;焕然一新&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;形容呈现出崭新的面貌&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;并驾齐驱&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;比喻齐头并进，不分前后&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;博大精深&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;形容思想和学识广博高深&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">word</span>: <span class="string">&quot;忙里偷闲&quot;</span>, <span class="attr">tip</span>: <span class="string">&quot;在繁忙中抽出空闲来&quot;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">words</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">idiom</span>: [<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">result</span>: <span class="literal">null</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">tip</span> = <span class="variable language_">this</span>.<span class="property">arr</span>[<span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="property">length</span>)].<span class="property">tip</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">words</span> += item.<span class="property">word</span></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> words = <span class="variable language_">this</span>.<span class="property">words</span>.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        words = <span class="variable language_">this</span>.<span class="title function_">shuffle</span>(words)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">words</span> = words.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//乱序方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">shuffle</span>(<span class="params">arr</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">let</span> temp, length = arr.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length - <span class="number">1</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (length--));</span></span><br><span class="line"><span class="language-javascript">            temp = arr[index];</span></span><br><span class="line"><span class="language-javascript">            arr[index] = arr[length];</span></span><br><span class="line"><span class="language-javascript">            arr[length] = temp;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> arr;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//TODO 点击文字后，在idiom从左到右第一个空的位置加上该文字</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">getSingleWord</span>(<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">idiom</span>[i] === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">idiom</span>, i, val)</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">continue</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          </span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">clear</span>(<span class="params">i</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">idiom</span>[i] = <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">idiom</span>, i, <span class="string">&quot;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// TODO 校验成语是否输入正确答案</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 猜中成语 result 为 true;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 猜错成语 result 为 false;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 例1：tip=‘形容非常感激或高兴’，idiom=[&quot;热&quot;,&quot;泪&quot;,&quot;盈&quot;,&quot;眶&quot;]，则result返回true</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 例2：tip=‘形容非常感激或高兴’，idiom=[&quot;泪&quot;,&quot;眼&quot;,&quot;盈&quot;,&quot;眶&quot;]，则result返回false</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 例3：tip=‘在繁忙中抽出空闲来’，idiom=[&quot;忙&quot;,&quot;里&quot;,&quot;偷&quot;,&quot;闲&quot;]，则result返回true</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">confirm</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">let</span> i = <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">tip</span> === <span class="variable language_">this</span>.<span class="property">arr</span>[i].<span class="property">tip</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">continue</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">arr</span>[i].<span class="property">word</span> === <span class="variable language_">this</span>.<span class="property">idiom</span>.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">result</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">result</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="node接口√"><a href="#node接口√" class="headerlink" title="node接口√"></a>node接口√</h2><h3 id="资讯接口-二"><a href="#资讯接口-二" class="headerlink" title="资讯接口-二"></a>资讯接口-二</h3><blockquote><ol><li>通过在 <code>app.js</code> 书写代码，创建一个服务器，使服务在 <strong>8080</strong> 端口运行。</li><li>访问 <code>/news</code> 返回资讯数据，访问其他任意路径均返回<strong>字符串 404</strong> 。</li></ol><table><thead><tr><th>Url</th><th>请求方式</th><th>参数</th><th>响应结果</th></tr></thead><tbody><tr><td>news</td><td>GET</td><td>空</td><td>显示资讯数据</td></tr></tbody></table><p>数据需要设置为 <code>utf8</code> 格式，资讯数据格式如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;channelId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5572a108b3cdc86cf39001cd&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;国内焦点&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;channelId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5572a108b3cdc86cf39001ce&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;国际焦点&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>555写接口！！！！</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 待补充代码</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> app = http.<span class="title function_">createServer</span>();</span><br><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;channelId&quot;</span>: <span class="string">&quot;5572a108b3cdc86cf39001cd&quot;</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;国内焦点&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;channelId&quot;</span>: <span class="string">&quot;5572a108b3cdc86cf39001ce&quot;</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;国际焦点&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;request&quot;</span>, <span class="keyword">function</span>(<span class="params">req,res</span>) &#123;</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;text/html;charset=utf8&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">url</span> === <span class="string">&#x27;/news&#x27;</span>) &#123;</span><br><span class="line">      res.<span class="title function_">end</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.<span class="title function_">end</span>(<span class="string">&#x27;404 NOT FOUND&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;running&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="http应用-一"><a href="#http应用-一" class="headerlink" title="http应用-一"></a>http应用-一</h3><ol><li>通过在 <code>app.js</code> 书写代码，创建一个服务器，使服务在 <strong>8080</strong> 端口运行。</li><li>通过 <code>node app.js</code> 运行代码，使服务处于运行状态，点击右侧 【web 服务】，页面上显示 “hello world” 。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 待补充代码</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = http.<span class="title function_">createServer</span>();</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;request&quot;</span>,<span class="keyword">function</span> (<span class="params">req,res</span>) &#123;</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8080</span>)</span><br></pre></td></tr></table></figure><h2 id="Echarts√"><a href="#Echarts√" class="headerlink" title="Echarts√"></a>Echarts√</h2><h3 id="商品销量和销售额实时展示看板-三"><a href="#商品销量和销售额实时展示看板-三" class="headerlink" title="商品销量和销售额实时展示看板-三"></a>商品销量和销售额实时展示看板-三</h3><blockquote><p>过辣！</p></blockquote><p>请在 <code>js/index.js</code> 文件中补全代码。</p><p>最终效果可参考文件夹下面的 gif 图，图片名称为 <code>effect.gif</code>（提示：可以通过 VS Code 或者浏览器预览 gif 图片）。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定图表的配置项和数据</span></span><br><span class="line"><span class="keyword">const</span> charData = &#123;</span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;云课课程销量和销售额看板&#x27;</span>,</span><br><span class="line">        <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="number">50</span>,</span><br><span class="line">        <span class="attr">textStyle</span>: &#123;</span><br><span class="line">            <span class="attr">lineHeight</span>: <span class="number">50</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">grid</span>: &#123;</span><br><span class="line">        <span class="attr">top</span>: <span class="number">80</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">tooltip</span>:&#123;</span><br><span class="line">        <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">xAxis</span>: &#123;</span><br><span class="line">        <span class="attr">data</span>: [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// TODO：补全 `yAxis` 的设置，要求“销售额”（即，配置项 `name`）的位置（即，配置项 `position`）在图表的左侧，“销量”（即，配置项 `name`）的位置（即，配置项 `position`）在图表的右侧。</span></span><br><span class="line">    <span class="attr">yAxis</span>: [&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;销售额&#x27;</span>,</span><br><span class="line">        <span class="attr">position</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span><br><span class="line">        <span class="attr">position</span>: <span class="string">&#x27;right&#x27;</span>,</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;销售额&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: [],</span><br><span class="line">            <span class="attr">yAxisIndex</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">smooth</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: [],</span><br><span class="line">            <span class="attr">yAxisIndex</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">smooth</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码为模拟后端服务器返回数据</span></span><br><span class="line"><span class="keyword">let</span> sale = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 销售额</span></span><br><span class="line"><span class="keyword">const</span> saleObj = &#123;&#125;;</span><br><span class="line"><span class="comment">// 销量</span></span><br><span class="line"><span class="keyword">const</span> countObj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Ajax</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> randomNum = <span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">randomSum</span> = (<span class="params"></span>) =&gt; (randomNum * <span class="number">500</span> + <span class="number">900</span>);</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">randomCount</span> = (<span class="params"></span>) =&gt; (randomNum * <span class="number">50</span> + <span class="number">80</span>);</span><br><span class="line">        <span class="keyword">let</span> i = index++ * <span class="number">10</span></span><br><span class="line">        <span class="keyword">let</span> key = <span class="string">`10:<span class="subst">$&#123;i == <span class="number">0</span> ? <span class="string">&quot;00&quot;</span> : i&#125;</span>`</span>;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">7</span>) &#123;</span><br><span class="line">            sale = <span class="title function_">randomSum</span>();</span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">assign</span>(saleObj, &#123; [key]: sale.<span class="title function_">toFixed</span>(<span class="number">2</span>) &#125;)</span><br><span class="line">            count = <span class="title function_">randomCount</span>();</span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">assign</span>(countObj, &#123; [key]: count.<span class="title function_">toFixed</span>(<span class="number">2</span>) &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> respondBody = &#123;</span><br><span class="line">            <span class="string">&quot;code&quot;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">            <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">                saleObj,</span><br><span class="line">                countObj</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(respondBody);</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">renderChart</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title class_">Ajax</span>();</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#result&quot;</span>).<span class="property">innerText</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(result);</span><br><span class="line">    <span class="keyword">const</span> myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line">    <span class="comment">// TODO：补全代码，正确给 X 轴的时间，以及 Y 轴的商品的销售额 saleObj 和销量赋值 countObj。</span></span><br><span class="line">    charData.<span class="property">series</span>[<span class="number">0</span>].<span class="property">data</span> = <span class="title class_">Object</span>.<span class="title function_">values</span>(saleObj)</span><br><span class="line">    charData.<span class="property">series</span>[<span class="number">1</span>].<span class="property">data</span> = <span class="title class_">Object</span>.<span class="title function_">values</span>(countObj)</span><br><span class="line">    charData.<span class="property">xAxis</span>.<span class="property">data</span> = <span class="title class_">Object</span>.<span class="title function_">keys</span>(saleObj)</span><br><span class="line"></span><br><span class="line">    myChart.<span class="title function_">setOption</span>(charData, <span class="literal">true</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#data&quot;</span>).<span class="property">innerText</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(charData);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">renderChart</span>();</span><br><span class="line"><span class="keyword">let</span> times = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">renderChart</span>();</span><br><span class="line">    ++times == <span class="number">6</span> &amp;&amp; <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">&#125;, <span class="number">2000</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="粒粒皆辛苦-二"><a href="#粒粒皆辛苦-二" class="headerlink" title="粒粒皆辛苦-二"></a>粒粒皆辛苦-二</h3><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/6e4cef34c272b23520bae329dd63bd02-0.png" alt="图片描述" style="zoom:20%;" /><blockquote><p>项目见 =&gt; E:\Project\LittlePrograms\EchartsTest1</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请求成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;2017&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;wheat&quot;</span><span class="punctuation">:</span> <span class="number">431</span><span class="punctuation">,</span> <span class="attr">&quot;soybean&quot;</span><span class="punctuation">:</span> <span class="number">142</span><span class="punctuation">,</span> <span class="attr">&quot;potato&quot;</span><span class="punctuation">:</span> <span class="number">232</span><span class="punctuation">,</span> <span class="attr">&quot;corn&quot;</span><span class="punctuation">:</span> <span class="number">642</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;2018&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;wheat&quot;</span><span class="punctuation">:</span> <span class="number">417</span><span class="punctuation">,</span> <span class="attr">&quot;soybean&quot;</span><span class="punctuation">:</span> <span class="number">156</span><span class="punctuation">,</span> <span class="attr">&quot;potato&quot;</span><span class="punctuation">:</span> <span class="number">258</span><span class="punctuation">,</span> <span class="attr">&quot;corn&quot;</span><span class="punctuation">:</span> <span class="number">643</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;2019&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;wheat&quot;</span><span class="punctuation">:</span> <span class="number">416</span><span class="punctuation">,</span> <span class="attr">&quot;soybean&quot;</span><span class="punctuation">:</span> <span class="number">168</span><span class="punctuation">,</span> <span class="attr">&quot;potato&quot;</span><span class="punctuation">:</span> <span class="number">269</span><span class="punctuation">,</span> <span class="attr">&quot;corn&quot;</span><span class="punctuation">:</span> <span class="number">650</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;2020&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;wheat&quot;</span><span class="punctuation">:</span> <span class="number">436</span><span class="punctuation">,</span> <span class="attr">&quot;soybean&quot;</span><span class="punctuation">:</span> <span class="number">174</span><span class="punctuation">,</span> <span class="attr">&quot;potato&quot;</span><span class="punctuation">:</span> <span class="number">277</span><span class="punctuation">,</span> <span class="attr">&quot;corn&quot;</span><span class="punctuation">:</span> <span class="number">680</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;2021&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;wheat&quot;</span><span class="punctuation">:</span> <span class="number">441</span><span class="punctuation">,</span> <span class="attr">&quot;soybean&quot;</span><span class="punctuation">:</span> <span class="number">186</span><span class="punctuation">,</span> <span class="attr">&quot;potato&quot;</span><span class="punctuation">:</span> <span class="number">289</span><span class="punctuation">,</span> <span class="attr">&quot;corn&quot;</span><span class="punctuation">:</span> <span class="number">692</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;2022&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;wheat&quot;</span><span class="punctuation">:</span> <span class="number">445</span><span class="punctuation">,</span> <span class="attr">&quot;soybean&quot;</span><span class="punctuation">:</span> <span class="number">201</span><span class="punctuation">,</span> <span class="attr">&quot;potato&quot;</span><span class="punctuation">:</span> <span class="number">315</span><span class="punctuation">,</span> <span class="attr">&quot;corn&quot;</span><span class="punctuation">:</span> <span class="number">706</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">style</span>=<span class="string">&quot;height: 100%&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>粒粒皆辛苦<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./js/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">&quot;height: 100%; margin: 0; overflow: hidden&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 80%; width: 80%; margin: 5% auto&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;container&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> option;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(dom, <span class="literal">null</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">renderer</span>: <span class="string">&quot;canvas&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">useDirtyRect</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> <span class="title function_">initCharts</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">        option = &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">text</span>: <span class="string">&quot;近五年 x 市粮食总产量分布以及 2022 年粮食产量比例&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">subtext</span>: <span class="string">&quot;单位（万吨）&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">dataset</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//source -&gt; 图表显示所需的数据格式（饼形图和折线图共用），请勿手动修改此行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">source</span>: [</span></span><br><span class="line"><span class="language-javascript">              [<span class="string">&quot;全部&quot;</span>, <span class="string">&quot;2017&quot;</span>, <span class="string">&quot;2018&quot;</span>, <span class="string">&quot;2019&quot;</span>, <span class="string">&quot;2020&quot;</span>, <span class="string">&quot;2021&quot;</span>, <span class="string">&quot;2022&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">              [<span class="string">&quot;小麦&quot;</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span></span><br><span class="line"><span class="language-javascript">              [<span class="string">&quot;大豆&quot;</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>],</span></span><br><span class="line"><span class="language-javascript">              [<span class="string">&quot;马铃薯&quot;</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>],</span></span><br><span class="line"><span class="language-javascript">              [<span class="string">&quot;玉米&quot;</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>],</span></span><br><span class="line"><span class="language-javascript">            ],</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">xAxis</span>: &#123; <span class="attr">type</span>: <span class="string">&quot;category&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">yAxis</span>: &#123; <span class="attr">gridIndex</span>: <span class="number">0</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">grid</span>: &#123; <span class="attr">top</span>: <span class="string">&quot;55%&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">seriesLayoutBy</span>: <span class="string">&quot;row&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">seriesLayoutBy</span>: <span class="string">&quot;row&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">seriesLayoutBy</span>: <span class="string">&quot;row&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">seriesLayoutBy</span>: <span class="string">&quot;row&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;pie&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">id</span>: <span class="string">&quot;pie&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">radius</span>: <span class="string">&quot;30%&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">center</span>: [<span class="string">&quot;50%&quot;</span>, <span class="string">&quot;25%&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">label</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 2022 数据的百分比</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">formatter</span>: <span class="string">&quot;&#123;b&#125; &#123;@2022&#125; (&#123;d&#125;%)&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              &#125;,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">encode</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">itemName</span>: <span class="string">&quot;全部&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">value</span>: <span class="string">&quot;2022&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">tooltip</span>: <span class="string">&quot;2022&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">          ],</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (option &amp;&amp; <span class="keyword">typeof</span> option === <span class="string">&quot;object&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// myChart.setOption -&gt; 设置 echarts 数据的方法</span></span></span><br><span class="line"><span class="language-javascript">          myChart.<span class="title function_">setOption</span>(option);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, myChart.<span class="property">resize</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">initCharts</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// <span class="doctag">TODO:</span> 待补充代码</span></span></span><br><span class="line"><span class="language-javascript">      axios.<span class="title function_">get</span>(<span class="string">&#x27;./data.json&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> data = res.<span class="property">data</span>.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> source = [</span></span><br><span class="line"><span class="language-javascript">          [<span class="string">&quot;全部&quot;</span>, <span class="string">&quot;2017&quot;</span>, <span class="string">&quot;2018&quot;</span>, <span class="string">&quot;2019&quot;</span>, <span class="string">&quot;2020&quot;</span>, <span class="string">&quot;2021&quot;</span>, <span class="string">&quot;2022&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">          [<span class="string">&quot;小麦&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">          [<span class="string">&quot;大豆&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">          [<span class="string">&quot;马铃薯&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">          [<span class="string">&quot;玉米&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">        ]</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">in</span> data) &#123;</span></span><br><span class="line"><span class="language-javascript">          source[<span class="number">1</span>].<span class="title function_">push</span>(data[item].<span class="property">wheat</span>)</span></span><br><span class="line"><span class="language-javascript">          source[<span class="number">2</span>].<span class="title function_">push</span>(data[item].<span class="property">soybean</span>)</span></span><br><span class="line"><span class="language-javascript">          source[<span class="number">3</span>].<span class="title function_">push</span>(data[item].<span class="property">potato</span>)</span></span><br><span class="line"><span class="language-javascript">          source[<span class="number">4</span>].<span class="title function_">push</span>(data[item].<span class="property">corn</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        option.<span class="property">dataset</span>.<span class="property">source</span> = source</span></span><br><span class="line"><span class="language-javascript">        myChart.<span class="title function_">setOption</span>(option)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="学海无涯-一"><a href="#学海无涯-一" class="headerlink" title="学海无涯-一"></a>学海无涯-一</h3><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/9ee66d6bdc2369d8f52710d09d7c577c-0.gif" alt="图片描述" style="zoom:50%;" /><p>比较讨巧的办法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">option.<span class="property">xAxis</span>.<span class="property">data</span>=[<span class="string">&quot;2月第1周&quot;</span>,<span class="string">&quot;2月第2周&quot;</span>,<span class="string">&quot;2月第3周&quot;</span>,<span class="string">&quot;2月第4周&quot;</span>,<span class="string">&quot;3月第1周&quot;</span>,<span class="string">&quot;3月第2周&quot;</span>,<span class="string">&quot;3月第3周&quot;</span>,<span class="string">&quot;3月第4周&quot;</span>,<span class="string">&quot;3月第5周&quot;</span>]</span><br><span class="line">option.<span class="property">series</span>[<span class="number">0</span>].<span class="property">data</span>=[<span class="number">180</span>,<span class="number">274</span>,<span class="number">253</span>,<span class="number">324</span>,<span class="number">277</span>,<span class="number">240</span>,<span class="number">332</span>,<span class="number">378</span>,<span class="number">101</span>]</span><br><span class="line"></span><br><span class="line">myChart.<span class="title function_">setOption</span>(option);</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, myChart.<span class="property">resize</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> change=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">option.<span class="property">xAxis</span>.<span class="property">data</span>=[<span class="string">&quot;2月&quot;</span>,<span class="string">&quot;3月&quot;</span>]</span><br><span class="line">option.<span class="property">series</span>[<span class="number">0</span>].<span class="property">data</span>=[<span class="number">1031</span>,<span class="number">1328</span>]</span><br><span class="line">myChart.<span class="title function_">setOption</span>(option);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> month = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;month&quot;</span>);</span><br><span class="line">month.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,change)</span><br></pre></td></tr></table></figure><h2 id="吐了页面搭建-CSS3"><a href="#吐了页面搭建-CSS3" class="headerlink" title="吐了页面搭建/CSS3"></a>吐了页面搭建/CSS3</h2><p>太薄弱了太薄弱了太薄弱了太薄弱了太薄弱了</p><h2 id="未做-未理解"><a href="#未做-未理解" class="headerlink" title="未做/未理解"></a>未做/未理解</h2><h1 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h1><h3 id="关于你的欢迎语-习题-JS"><a href="#关于你的欢迎语-习题-JS" class="headerlink" title="关于你的欢迎语-习题-JS"></a>关于你的欢迎语-习题-JS</h3><p>用JS实现特定用户欢迎语的展示（输入框输入的字符串拼接后显示）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">generate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    subject = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;subject&quot;</span>);</span><br><span class="line">    event1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;event1&quot;</span>);</span><br><span class="line">    event2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;event2&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (subject.<span class="property">length</span>==<span class="number">0</span> || event1.<span class="property">length</span>==<span class="number">0</span> || event2.<span class="property">length</span>==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    result = <span class="string">`欢迎用户<span class="subst">$&#123;subject.value&#125;</span>在<span class="subst">$&#123;event2.value&#125;</span>学习<span class="subst">$&#123;event1.value&#125;</span>课程！`</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;result&quot;</span>).<span class="property">value</span> = result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="功能化标签页-习题-JS"><a href="#功能化标签页-习题-JS" class="headerlink" title="功能化标签页-习题-JS"></a>功能化标签页-习题-JS</h3><p>用JS实现选项卡切换功能</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现选项卡功能</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// TODO 待补充代码</span></span><br><span class="line">  <span class="keyword">let</span> cho = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.tabs&gt;div&quot;</span>)</span><br><span class="line">  <span class="keyword">let</span> sho = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#content&gt;div&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; cho.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    cho[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> a = <span class="number">0</span>;a&lt;cho.<span class="property">length</span>;a++) &#123;</span><br><span class="line">        cho[a].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">        sho[a].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">      &#125; </span><br><span class="line"></span><br><span class="line">      cho[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>)</span><br><span class="line">      sho[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">init</span>();</span><br></pre></td></tr></table></figure><h3 id="新年贺卡-习题-JS-我万般不解"><a href="#新年贺卡-习题-JS-我万般不解" class="headerlink" title="新年贺卡-习题-JS-我万般不解"></a>新年贺卡-习题-JS-我万般不解</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">const</span> greetingDisplay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;greeting-display&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>)</span><br><span class="line"><span class="comment">// 点击开始书写按钮</span></span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="title function_">show</span>(greetingDisplay)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> greetings = [</span><br><span class="line"><span class="string">&quot;新年快乐!&quot;</span>,</span><br><span class="line"><span class="string">&quot;接受我新春的祝愿,祝你平安幸福&quot;</span>,</span><br><span class="line"><span class="string">&quot;祝你新年快乐,洋洋得意!&quot;</span>,</span><br><span class="line"><span class="string">&quot;新的一年,新的开始;心的祝福,新的起点!&quot;</span>,</span><br><span class="line"><span class="string">&quot;新年好!祝新年心情好,身体好,一切顺心!&quot;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 随机数函数 从 greetings 随机取一个值并返回</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">writeGreeting</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// TODO 带补充代码  </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*greetings.<span class="property">length</span>))</span><br><span class="line"><span class="keyword">return</span> greetings[ <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*greetings.<span class="property">length</span>) ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; greetingDisplay  要显示内容的dom元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//  show 将 writeGreeting 函数中返回的内容显示在 greetingDisplay 元素中</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">greetingDisplay</span>) &#123;</span><br><span class="line"><span class="comment">// TODO 待补充代码</span></span><br><span class="line">greetingDisplay.<span class="property">innerText</span> = <span class="title function_">writeGreeting</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; show, writeGreeting &#125;</span><br></pre></td></tr></table></figure><h3 id="给页面化个妆-习题-CSS-我的布局啊！"><a href="#给页面化个妆-习题-CSS-我的布局啊！" class="headerlink" title="给页面化个妆-习题-CSS-我的布局啊！"></a>给页面化个妆-习题-CSS-我的布局啊！</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;../images/background-pic.jpeg&#x27;</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">945</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1920</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav-bar</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: flex-end;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav-bar</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content-container</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">450px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">45</span>);</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">15%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">45px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#041c32</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#2d4263</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">5px</span> <span class="number">20px</span> <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="小兔子爬楼梯-习题-算法"><a href="#小兔子爬楼梯-习题-算法" class="headerlink" title="小兔子爬楼梯-习题-算法"></a>小兔子爬楼梯-习题-算法</h3><p>简单啊，优化DP</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">climbStairs</span> = (<span class="params">n</span>) =&gt; &#123;</span><br><span class="line"> <span class="keyword">let</span> dp0 = <span class="number">0</span>, dp1 = <span class="number">1</span></span><br><span class="line"> <span class="keyword">if</span> (n === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> dp0</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">let</span> ans = <span class="number">0</span></span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    ans = dp0 + dp1</span><br><span class="line">    dp0 = dp1</span><br><span class="line">    dp1 = ans</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = climbStairs; </span><br></pre></td></tr></table></figure><h3 id="购物车-习题-vue-axios"><a href="#购物车-习题-vue-axios" class="headerlink" title="购物车-习题-vue axios"></a>购物车-习题-vue axios</h3><p>实现这种效果，就是一个v-for遍历。还有axios请求JSON</p><img src="../images/%E9%80%9F%E9%80%9A%E8%93%9D%E6%A1%A5%E6%9D%AFWeb/wm.png" alt="图片描述" style="zoom: 15%;" /><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>购物车<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/axios.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/element-ui.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>购物车<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 购物车列表 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">&quot;box-card&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in carlist&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 商品图片 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;item.img&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 商品名称 --&gt;</span></span><br><span class="line">&#123;&#123; item.name &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bottom clearfix&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;item.num++&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 商品数量 --&gt;</span></span><br><span class="line">&#123;&#123; item.num &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;item.num?item.num--:item.num&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引入组件库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/element-ui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">carlist</span>: [] <span class="comment">//购物车列表</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 在这里使用axios 发送请求</span></span></span><br><span class="line"><span class="language-javascript">axios.<span class="title function_">get</span>(<span class="string">&#x27;./carList.json&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">carlist</span> = value.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="多个斜线开始的路径重定向问题-习题-vue"><a href="#多个斜线开始的路径重定向问题-习题-vue" class="headerlink" title="多个斜线开始的路径重定向问题-习题-vue"></a>多个斜线开始的路径重定向问题-习题-vue</h3><p>源码中一个正则表达式的修改</p><h3 id="路由器查询中的未定义值现在变为未定义字符串-习题-vue"><a href="#路由器查询中的未定义值现在变为未定义字符串-习题-vue" class="headerlink" title="路由器查询中的未定义值现在变为未定义字符串-习题-vue"></a>路由器查询中的未定义值现在变为未定义字符串-习题-vue</h3><p>在 <a href="https://github.com/lanqiao-courses/vue-router/tree/v3.4.0">vue-router v3.4.0</a> 版本代码中存在一个 Bug，路由器查询中的未定义值现在变为未定义字符串。请修复此问题。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">resolveQuery</span> (</span><br><span class="line">  <span class="attr">query</span>: ?string,</span><br><span class="line">  <span class="attr">extraQuery</span>: <span class="title class_">Dictionary</span>&lt;string&gt; = &#123;&#125;,</span><br><span class="line">  <span class="attr">_parseQuery</span>: ?<span class="title class_">Function</span></span><br><span class="line">): <span class="title class_">Dictionary</span>&lt;string&gt; &#123;</span><br><span class="line">  <span class="comment">// ... 省略部分代码</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> extraQuery) &#123;</span><br><span class="line">    <span class="keyword">const</span> value = extraQuery[key]</span><br><span class="line">    parsedQuery[key] = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(value)</span><br><span class="line">    ? value.<span class="title function_">map</span>(castQueryParamValue)</span><br><span class="line">    : <span class="title function_">castQueryParamValue</span>(value)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> parsedQuery</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">castQueryParamValue</span> = value =&gt; (value == <span class="literal">null</span> ? value : <span class="string">&#x27;&#x27;</span> + value)</span><br></pre></td></tr></table></figure><h3 id="警告已弃用的-addRoutes-习题-vue"><a href="#警告已弃用的-addRoutes-习题-vue" class="headerlink" title="警告已弃用的 addRoutes-习题-vue"></a>警告已弃用的 addRoutes-习题-vue</h3><p>其实就是个console.warn</p><p>扩展：</p>]]></content>
      
      
      <categories>
          
          <category> 蒜法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 蓝桥杯 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JQ速通</title>
      <link href="/post/e6cd.html"/>
      <url>/post/e6cd.html</url>
      
        <content type="html"><![CDATA[<h1 id="JQ速通"><a href="#JQ速通" class="headerlink" title="JQ速通"></a>JQ速通</h1><h2 id="速通背景"><a href="#速通背景" class="headerlink" title="速通背景"></a>速通背景</h2><ol><li>学Ajax的时候发现自己漏学了JQ</li><li>蓝桥杯web前端组第一个题就是JQ操作</li></ol><h2 id="速通内容"><a href="#速通内容" class="headerlink" title="速通内容"></a>速通内容</h2><h3 id="document-ready"><a href="#document-ready" class="headerlink" title="document.ready"></a>document.ready</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 浏览器加载页面后，放入此func执行</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="选择器selector"><a href="#选择器selector" class="headerlink" title="选择器selector"></a>选择器selector</h3><p>多个元素可以用<code>,</code>分隔</p><ul><li>标签选择器 <code>$(&quot;button&quot;)</code></li><li>class选择器 <code>$(&quot;.btn&quot;)</code></li><li>id选择器 <code>$(&quot;#target1&quot;)</code></li><li><code>*, :first, :last, :eq(index), :gt(no), :lt(no), :not(selector), </code>还有很多↓</li><li><a href="https://www.w3school.com.cn/jquery/jquery_ref_selectors.asp">https://www.w3school.com.cn/jquery/jquery_ref_selectors.asp</a>  去这里查</li></ul><h3 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h3><ul><li>添加类 <code>.addClass(&quot;&quot;)</code></li><li>删除类 <code>.removeClass(&quot;&quot;)</code></li><li>有则删，无则添 <code>.toggleClass(&quot;&quot;)</code></li><li>更改元素CSS <code>.css(&quot;元素名&quot;, &quot;元素属性值&quot;)</code></li><li>调整标签属性 <code>.prop(&quot;属性键&quot;, 属性值)</code></li><li>更改元素内部文本 <code>.text(&quot;文本内容&quot;)</code> </li><li>替换元素内部内容 <code>.html(&quot;&lt;标签&gt;内容&lt;标签/&gt;&quot;)</code></li><li>删除元素 <code>.remove(&quot;元素名&quot;)</code></li><li>移动元素 <code>.appenTo(&quot;目标地址&quot;)</code></li><li>克隆元素 <code>.clone()</code>  可与上者搭配使用作为复制一个元素到另一个地方</li><li>选择元素的父元素 <code>.parent()</code> 可搭配上几个使用</li><li>选择元素的子元素 <code>.children()</code>可搭配上几个使用</li><li>选择元素的特定子元素 <code>$(元素:nth-child(数))</code></li><li>选择奇偶元素-这里的奇偶是索引，索引从0开始 <code>$(元素:odd/even)</code></li><li>修改整个页面 <code>$(&quot;body&quot;)</code> 可搭配上几个使用</li><li><a href="https://www.w3school.com.cn/jquery/jquery_ref_manipulation.asp">https://www.w3school.com.cn/jquery/jquery_ref_manipulation.asp</a></li></ul><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p><a href="https://www.w3school.com.cn/jquery/jquery_ref_events.asp">https://www.w3school.com.cn/jquery/jquery_ref_events.asp</a></p><h3 id="效果函数"><a href="#效果函数" class="headerlink" title="效果函数"></a>效果函数</h3><p><a href="https://www.w3school.com.cn/jquery/jquery_ref_effects.asp">https://www.w3school.com.cn/jquery/jquery_ref_effects.asp</a></p><h3 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h3><p>一个噗通栗子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;https://labfile.oss.aliyuncs.com/courses/4450/userlist.json&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&#x27;JSON&#x27;</span>,</span><br><span class="line">    <span class="title function_">success</span>(<span class="params">res</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">        <span class="keyword">var</span> flag = res.<span class="property">userlist</span>.<span class="title function_">some</span>(<span class="function"><span class="params">value</span>=&gt;</span>value.<span class="property">username</span> == username&amp;&amp;value.<span class="property">password</span> == password);</span><br><span class="line">        <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">            $(<span class="string">&quot;#tip1&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;fade&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;show&quot;</span>)</span><br><span class="line">            $(<span class="string">&quot;#tip2&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;show&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;fade&quot;</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $(<span class="string">&quot;#tip1&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;show&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;fade&quot;</span>)</span><br><span class="line">            $(<span class="string">&quot;#tip2&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;fade&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;show&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p> <a href="https://www.w3school.com.cn/jquery/jquery_ref_ajax.asp">https://www.w3school.com.cn/jquery/jquery_ref_ajax.asp</a></p><blockquote><p>遇到问题去菜鸟/w3school查</p><p>但是查完之后一定要努力记住呀，不然还得再查，看的时间长 优于 次数多（个人浅薄观点，人各有异，父母健在）</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ajax学习笔记</title>
      <link href="/post/584d.html"/>
      <url>/post/584d.html</url>
      
        <content type="html"><![CDATA[<ol><li>Ajax概述</li></ol><ul><li>介绍Ajax的基本概念和背景</li><li>解释Ajax的优势和用途</li></ul><ol><li>JavaScript基础</li></ol><ul><li>JavaScript语法和基本概念</li><li>JavaScript中的事件处理和DOM操作</li><li>JavaScript中的XMLHttpRequest对象</li></ul><ol><li>Ajax基本原理</li></ol><ul><li>Ajax的工作原理和基本流程</li><li>解释异步请求和服务器响应的概念</li><li>Ajax中的同源策略和跨域请求</li></ul><ol><li>Ajax的核心技术</li></ol><ul><li>使用JavaScript中的XMLHttpRequest对象发送异步请求</li><li>处理服务器响应数据，如文本、JSON和XML</li><li>使用Promise、回调函数和事件处理来处理异步请求和响应</li></ul><ol><li>Ajax的高级技术</li></ol><ul><li>使用Fetch API和Axios等现代Ajax库进行异步请求</li><li>处理Ajax请求和响应的错误和异常</li><li>使用跨域资源共享（CORS）来处理跨域请求</li></ul><ol><li>Ajax与其他Web技术的整合</li></ol><ul><li>结合Ajax和DOM操作来创建动态Web页面</li><li>使用Ajax与后端服务器进行数据交互，如获取和提交数据</li><li>使用Ajax实现单页应用（SPA）和前后端分离（前端框架、RESTful API等）</li></ul><ol><li>Ajax的性能优化和安全考虑</li></ol><ul><li>优化Ajax请求和响应的性能，如缓存、压缩、合并等</li><li>处理Ajax请求和响应的安全问题，如跨站脚本攻击（XSS）和跨站请求伪造（CSRF）等</li></ul><ol><li>实际应用和项目实践</li></ol><ul><li>实际项目中的Ajax应用场景和案例</li><li>搭建Ajax应用的实际步骤和注意事项</li><li>进行实际项目实践，加深对Ajax的理解和掌握</li></ul>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络通信 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot学习笔记</title>
      <link href="/post/251e.html"/>
      <url>/post/251e.html</url>
      
        <content type="html"><![CDATA[<h2 id="SpringBoot大纲"><a href="#SpringBoot大纲" class="headerlink" title="SpringBoot大纲"></a>SpringBoot大纲</h2><h3 id="1-Java-基础知识"><a href="#1-Java-基础知识" class="headerlink" title="1. Java 基础知识"></a>1. Java 基础知识</h3><p>在学习 Spring Boot 之前，需要对 Java 编程语言有一定的了解。包括 Java 的面向对象编程、集合框架、异常处理、IO 流、泛型、Lambda 表达式等等。</p><h3 id="2-Spring-基础知识"><a href="#2-Spring-基础知识" class="headerlink" title="2. Spring 基础知识"></a>2. Spring 基础知识</h3><p>Spring 是一个强大的开源框架，它为 Java 开发人员提供了一种开发企业级应用程序的方式。在学习 Spring Boot 之前，需要掌握 Spring 的基本概念、核心组件（IOC、AOP、MVC等）、配置方式（XML、JavaConfig、Annotation）等。</p><h3 id="3-Spring-Boot-入门"><a href="#3-Spring-Boot-入门" class="headerlink" title="3. Spring Boot 入门"></a>3. Spring Boot 入门</h3><p>学习 Spring Boot 的第一步是了解它的基本概念、优点和用途。包括 Spring Boot 的起源、特点、与传统 Spring 框架的区别等。</p><h3 id="4-Spring-Boot-快速入门"><a href="#4-Spring-Boot-快速入门" class="headerlink" title="4. Spring Boot 快速入门"></a>4. Spring Boot 快速入门</h3><p>学习 Spring Boot 的最好方法是动手实践。可以使用 Spring Initializr 快速创建一个 Spring Boot 项目，并编写一些简单的示例代码。这些示例代码可以涉及常用的 Spring Boot 功能，例如：Web 开发、数据库访问、安全认证、缓存等。</p><h3 id="5-Spring-Boot-基础组件"><a href="#5-Spring-Boot-基础组件" class="headerlink" title="5. Spring Boot 基础组件"></a>5. Spring Boot 基础组件</h3><p>Spring Boot 提供了许多基础组件，包括：</p><ul><li>Spring Boot Starter：用于快速集成常用的依赖库，例如：Spring MVC、JPA、MyBatis、Thymeleaf 等。</li><li>Spring Boot AutoConfigure：自动配置，用于根据应用程序的类路径、环境变量等来配置 Spring 应用程序。</li><li>Spring Boot Actuator：用于监视和管理 Spring Boot 应用程序的端点。</li></ul><h3 id="6-Spring-Boot-Web-开发"><a href="#6-Spring-Boot-Web-开发" class="headerlink" title="6. Spring Boot Web 开发"></a>6. Spring Boot Web 开发</h3><p>Spring Boot 提供了用于构建 Web 应用程序的功能，包括：</p><ul><li>Spring MVC：用于处理 HTTP 请求和响应，支持 RESTful API 和视图解析等。</li><li>Spring WebFlux：响应式 Web 框架，基于 Reactor 和 RxJava。</li><li>Spring Boot Web 安全：用于实现身份验证和授权，包括基于表单、基于 OAuth2 等方式。</li></ul><h3 id="7-Spring-Boot-数据访问"><a href="#7-Spring-Boot-数据访问" class="headerlink" title="7. Spring Boot 数据访问"></a>7. Spring Boot 数据访问</h3><p>Spring Boot 提供了各种方式来访问和管理数据，包括：</p><ul><li>JDBC：Java 数据库连接，用于访问关系型数据库。</li><li>JPA：Java 持久化 API，用于访问关系型数据库。</li><li>MongoDB：文档数据库，用于访问 NoSQL 数据库。</li><li>Redis：内存数据结构存储，用于实现缓存、消息队列等。</li></ul><h3 id="8-Spring-Boot-测试"><a href="#8-Spring-Boot-测试" class="headerlink" title="8. Spring Boot 测试"></a>8. Spring Boot 测试</h3><p>Spring Boot 提供了一系列用于测试的工具和框架，包括：</p><ul><li><p>Spring Boot Test：用于编写集成测试和单元测试。</p></li><li><p>Spring Boot Test Slice：用于编写针对特定层（例如，Web 层或数据访问层）的测试。</p></li><li><p>Mockito：用于模拟对象，以便进行单元测试。</p></li><li><p>TestContainers：用于在测试环境中启动 Docker 容器，以便测试容器化应用程序。</p></li></ul><h3 id="9-Spring-Boot-部署与运维"><a href="#9-Spring-Boot-部署与运维" class="headerlink" title="9. Spring Boot 部署与运维"></a>9. Spring Boot 部署与运维</h3><p>学习 Spring Boot 还需要了解如何部署和运维应用程序。可以掌握以下知识：</p><ul><li>Spring Boot 打包：使用 Maven 或 Gradle 将 Spring Boot 应用程序打包成可执行的 JAR 或 WAR 文件。</li><li>Spring Boot 部署：使用不同的部署方式，例如：传统的服务器部署、Docker 容器化部署、云原生部署等。</li><li>Spring Boot 运维：使用 Spring Boot Actuator 监视应用程序的运行状况、使用 Spring Boot Admin 进行可视化的应用程序管理等。</li></ul><h3 id="10-Spring-Boot-实战项目"><a href="#10-Spring-Boot-实战项目" class="headerlink" title="10. Spring Boot 实战项目"></a>10. Spring Boot 实战项目</h3><p>最后，可以尝试完成一个真实的 Spring Boot 项目，这有助于加深对 Spring Boot 的理解和应用。</p><p>以上是学习 Spring Boot 的一个可靠大纲，可以帮助你系统地掌握 Spring Boot 的各种知识和技能。当然，在实际学习中，还需要不断实践和积累经验。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue3的学习</title>
      <link href="/post/8d93.html"/>
      <url>/post/8d93.html</url>
      
        <content type="html"><![CDATA[<h1 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1><img src="../images/Vue3%E7%9A%84%E5%AD%A6%E4%B9%A0/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png" style="width:200px" /><h2 id="1-Vue3简介"><a href="#1-Vue3简介" class="headerlink" title="1.Vue3简介"></a>1.Vue3简介</h2><ul><li>2020年9月18日，Vue.js发布3.0版本，代号：One Piece（海贼王）</li><li>耗时2年多、<a href="https://github.com/vuejs/vue-next/graphs/commit-activity">2600+次提交</a>、<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">30+个RFC</a>、<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+次PR</a>、<a href="https://github.com/vuejs/vue-next/graphs/contributors">99位贡献者</a> </li><li>github上的tags地址：<a href="https://github.com/vuejs/vue-next/releases/tag/v3.0.0">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li></ul><h2 id="2-Vue3带来了什么"><a href="#2-Vue3带来了什么" class="headerlink" title="2.Vue3带来了什么"></a>2.Vue3带来了什么</h2><h3 id="1-性能的提升"><a href="#1-性能的提升" class="headerlink" title="1.性能的提升"></a>1.性能的提升</h3><ul><li><p>打包大小减少41%</p></li><li><p>初次渲染快55%, 更新渲染快133%</p></li><li><p>内存减少54%</p><p>……</p></li></ul><h3 id="2-源码的升级"><a href="#2-源码的升级" class="headerlink" title="2.源码的升级"></a>2.源码的升级</h3><ul><li><p>使用Proxy代替defineProperty实现响应式</p></li><li><p>重写虚拟DOM的实现和Tree-Shaking</p><p>……</p></li></ul><h3 id="3-拥抱TypeScript"><a href="#3-拥抱TypeScript" class="headerlink" title="3.拥抱TypeScript"></a>3.拥抱TypeScript</h3><ul><li>Vue3可以更好的支持TypeScript</li></ul><h3 id="4-新的特性"><a href="#4-新的特性" class="headerlink" title="4.新的特性"></a>4.新的特性</h3><ol><li><p>Composition API（组合API）</p><ul><li>setup配置</li><li>ref与reactive</li><li>watch与watchEffect</li><li>provide与inject</li><li>……</li></ul></li><li><p>新的内置组件</p><ul><li>Fragment </li><li>Teleport</li><li>Suspense</li></ul></li><li><p>其他改变</p><ul><li>新的生命周期钩子</li><li>data 选项应始终被声明为一个函数</li><li>移除keyCode支持作为 v-on 的修饰符</li><li>……</li></ul></li></ol><h1 id="一、创建Vue3-0工程"><a href="#一、创建Vue3-0工程" class="headerlink" title="一、创建Vue3.0工程"></a>一、创建Vue3.0工程</h1><h2 id="1-使用-vue-cli-创建"><a href="#1-使用-vue-cli-创建" class="headerlink" title="1.使用 vue-cli 创建"></a>1.使用 vue-cli 创建</h2><p>官方文档：<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">## 安装或者升级你的@vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">## 创建</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><h2 id="2-使用-vite-创建"><a href="#2-使用-vite-创建" class="headerlink" title="2.使用 vite 创建"></a>2.使用 vite 创建</h2><p>官方文档：<a href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p><p>vite官网：<a href="https://vitejs.cn/">https://vitejs.cn</a></p><ul><li>什么是vite？—— 新一代前端构建工具。</li><li>优势如下：<ul><li>开发环境中，无需打包操作，可快速的冷启动。</li><li>轻量快速的热重载（HMR）。</li><li>真正的按需编译，不再等待整个应用编译完成。</li></ul></li><li>传统构建 与 vite构建对比图</li></ul><p><img src="https://cn.vitejs.dev/assets/bundler.37740380.png" style="width:500px;height:280px;float:left" /><img src="https://cn.vitejs.dev/assets/esm.3070012d.png" style="width:480px;height:280px" /></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 创建工程</span></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 进入工程目录</span></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 安装依赖</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## 运行</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h1 id="二、常用-Composition-API"><a href="#二、常用-Composition-API" class="headerlink" title="二、常用 Composition API"></a>二、常用 Composition API</h1><p>官方文档: <a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p><h2 id="1-拉开序幕的setup"><a href="#1-拉开序幕的setup" class="headerlink" title="1.拉开序幕的setup"></a>1.拉开序幕的setup</h2><ol><li><p>理解：Vue3.0中一个新的配置项，值为一个函数。</p></li><li><p>setup是所有<strong style="color:#DD5145">Composition API（组合API）</strong><i style="color:gray;font-weight:bold">“ 表演的舞台 ”</i>。</p></li><li><p>组件中所用到的：数据、方法等等，均要配置在setup中。</p></li><li><p>setup函数的两种返回值：</p><ol><li><p>若返回一个对象，则对象中的属性、方法, 在模板中均可以直接使用。（重点关注！）</p></li><li><p><span style="color:#aad">若返回一个渲染函数：则可以自定义渲染内容。（了解）</span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; h &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    // 数据</span><br><span class="line">    let name = &#x27;老五&#x27;</span><br><span class="line">    // 方法</span><br><span class="line">    function sayHi() &#123;</span><br><span class="line">      alert(`你好，俺是$&#123;name&#125;~`)</span><br><span class="line">    &#125;</span><br><span class="line">    // 1-返回一个对象（常用）</span><br><span class="line">    return &#123;</span><br><span class="line">      name,</span><br><span class="line">      sayHi</span><br><span class="line">    &#125;</span><br><span class="line">    // 2-返回函数（渲染函数）</span><br><span class="line">    // return () =&gt; h(&#x27;h2&#x27;, &#x27;嗨嗨嗨&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol></li><li><p>注意点：</p><p>虽然Vue3向下兼容，但是↓</p><ol><li>尽量不要与Vue2.x配置混用<ul><li>Vue2.x配置（data、methos、computed…）中<strong style="color:#DD5145">可以访问到</strong>setup中的属性、方法。</li><li>但在setup中<strong style="color:#DD5145">不能访问到</strong>Vue2.x配置（data、methos、computed…）。</li><li>如果有重名, setup优先。</li></ul></li><li>setup不能是一个async函数，因为返回值不再是return的对象, 而是promise, 模板看不到return对象中的属性。（后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合）</li></ol></li></ol><h2 id="2-ref函数"><a href="#2-ref函数" class="headerlink" title="2.ref函数"></a>2.ref函数</h2><ul><li>作用: 定义一个==响应式==的数据</li><li>语法: <code>const xxx = ref(initValue)</code> <ul><li>创建一个包含响应式数据的<strong style="color:#DD5145">引用对象（reference对象，简称ref对象）</strong>全：引用实现的实例对象。</li><li>JS中操作数据： <code>xxx.value</code></li><li>模板中读取数据: 不需要.value，直接：<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li></ul></li><li>备注：<ul><li>接收的数据可以是：基本类型、也可以是对象类型。</li><li>基本类型的数据：响应式依然是靠<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>完成的。</li><li>对象类型的数据：内部 <i style="color:gray;font-weight:bold">“ 求助 ”</i> 了Vue3.0中的一个新函数—— <code>reactive</code>函数。</li></ul></li></ul><h2 id="3-reactive函数"><a href="#3-reactive函数" class="headerlink" title="3.reactive函数"></a>3.reactive函数</h2><ul><li>作用: 定义一个<strong style="color:#DD5145">对象类型</strong>的响应式数据（基本类型不要用它，要用<code>ref</code>函数）</li><li>语法：<code>const 代理对象= reactive(源对象)</code>接收一个对象（或数组），返回一个<strong style="color:#DD5145">代理对象（Proxy的实例对象，简称proxy对象）</strong></li><li>reactive定义的响应式数据是“深层次的”。</li><li>内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。</li></ul><h2 id="4-Vue3-0中的响应式原理"><a href="#4-Vue3-0中的响应式原理" class="headerlink" title="4.Vue3.0中的响应式原理"></a>4.Vue3.0中的响应式原理</h2><h3 id="vue2-x的响应式"><a href="#vue2-x的响应式" class="headerlink" title="vue2.x的响应式"></a>vue2.x的响应式</h3><ul><li><p>实现原理：</p><ul><li><p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取、修改进行拦截（数据劫持）。</p></li><li><p>数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">    get () &#123;&#125;, </span><br><span class="line">    set () &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>存在问题：</p><ul><li>新增属性、删除属性, 界面不会更新。</li><li>直接通过下标修改数组, 界面不会自动更新。</li></ul></li></ul><h3 id="Vue3-0的响应式"><a href="#Vue3-0的响应式" class="headerlink" title="Vue3.0的响应式"></a>Vue3.0的响应式</h3><ul><li><p>实现原理: </p><ul><li><p>通过Proxy（代理）:  拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等。</p></li><li><p>通过Reflect（反射）:  对源对象的属性进行操作。</p></li><li><p>MDN文档中描述的Proxy与Reflect：</p><ul><li><p>Proxy：<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p></li><li><p>Reflect：<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Proxy</span>(data, &#123;</span><br><span class="line"><span class="comment">// 拦截读取属性值</span></span><br><span class="line">    get (target, prop) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, prop)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 拦截设置属性值或添加新属性</span></span><br><span class="line">    set (target, prop, value) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, prop, value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 拦截删除属性</span></span><br><span class="line">    deleteProperty (target, prop) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, prop)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">proxy.<span class="property">name</span> = <span class="string">&#x27;tom&#x27;</span>   </span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h2 id="5-reactive对比ref"><a href="#5-reactive对比ref" class="headerlink" title="5.reactive对比ref"></a>5.reactive对比ref</h2><ul><li>从定义数据角度对比：<ul><li> ref用来定义：<strong style="color:#DD5145">基本类型数据</strong>。</li><li> reactive用来定义：<strong style="color:#DD5145">对象（或数组）类型数据</strong>。</li><li> 备注：ref也可以用来定义<strong style="color:#DD5145">对象（或数组）类型数据</strong>, 它内部会自动通过<code>reactive</code>转为<strong style="color:#DD5145">代理对象</strong>。</li></ul></li><li>从原理角度对比：<ul><li> ref通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）。</li><li> reactive通过使用<strong style="color:#DD5145">Proxy</strong>来实现响应式（数据劫持）, 并通过<strong style="color:#DD5145">Reflect</strong>操作<strong style="color:orange">源对象</strong>内部的数据。</li></ul></li><li>从使用角度对比：<ul><li> ref定义的数据：操作数据<strong style="color:#DD5145">需要</strong><code>.value</code>，读取数据时模板中直接读取<strong style="color:#DD5145">不需要</strong><code>.value</code>。</li><li> reactive定义的数据：操作数据与读取数据：<strong style="color:#DD5145">均不需要</strong><code>.value</code>。</li></ul></li></ul><h2 id="6-setup的两个注意点"><a href="#6-setup的两个注意点" class="headerlink" title="6.setup的两个注意点"></a>6.setup的两个注意点</h2><ul><li><p>setup执行的时机</p><ul><li>在beforeCreate之前执行一次，this是undefined。</li></ul></li><li><p>setup的参数</p><ul><li>props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。</li><li>context：上下文对象<ul><li>attrs: 值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性, 相当于 <code>this.$attrs</code>。</li><li>slots: 收到的插槽内容, 相当于 <code>this.$slots</code>。</li><li>emit: 分发自定义事件的函数, 相当于 <code>this.$emit</code>。</li></ul></li></ul></li></ul><h2 id="7-计算属性与监视"><a href="#7-计算属性与监视" class="headerlink" title="7.计算属性与监视"></a>7.计算属性与监视</h2><h3 id="1-computed函数"><a href="#1-computed函数" class="headerlink" title="1.computed函数"></a>1.computed函数</h3><ul><li><p>与Vue2.x中computed配置功能一致</p></li><li><p>写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    ...</span><br><span class="line"><span class="comment">//计算属性——简写</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//计算属性——完整</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(&#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">            <span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">            person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>]</span><br><span class="line">            person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-watch函数"><a href="#2-watch函数" class="headerlink" title="2.watch函数"></a>2.watch函数</h3><ul><li><p>与Vue2.x中watch配置功能一致</p></li><li><p>两个小“坑”：</p><ul><li>监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视（deep配置失效）。</li><li>监视reactive定义的响应式数据中某个属性时：deep配置有效。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//情况一：监视ref定义的响应式数据</span></span><br><span class="line"><span class="title function_">watch</span>(sum,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//情况二：监视多个ref定义的响应式数据</span></span><br><span class="line"><span class="title function_">watch</span>([sum,msg],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum或msg变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">/* 情况三：监视reactive定义的响应式数据</span></span><br><span class="line"><span class="comment">若watch监视的是reactive定义的响应式数据，则无法正确获得oldValue！！</span></span><br><span class="line"><span class="comment">若watch监视的是reactive定义的响应式数据，则强制开启了深度监视 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">watch</span>(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">false</span>&#125;) <span class="comment">//此处的deep配置不再奏效</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//情况四：监视reactive定义的响应式数据中的某个属性</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">//情况五：监视reactive定义的响应式数据中的某些属性</span></span><br><span class="line"><span class="title function_">watch</span>([<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">()=&gt;</span>person.<span class="property">name</span>],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//特殊情况</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;) <span class="comment">//此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="3-watchEffect函数"><a href="#3-watchEffect函数" class="headerlink" title="3.watchEffect函数"></a>3.watchEffect函数</h3><ul><li><p>watch的套路是：既要指明监视的属性，也要指明监视的回调。</p></li><li><p>watchEffect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。</p></li><li><p>watchEffect有点像computed：</p><ul><li>但computed注重的计算出来的值（回调函数的返回值），所以必须要写返回值。</li><li>而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> x1 = sum.<span class="property">value</span></span><br><span class="line">    <span class="keyword">const</span> x2 = person.<span class="property">age</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;watchEffect配置的回调执行了&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h2 id="8-生命周期"><a href="#8-生命周期" class="headerlink" title="8.生命周期"></a>8.生命周期</h2><img src="../images/Vue3%E7%9A%84%E5%AD%A6%E4%B9%A0/lifecycle.16e4c08e.png" alt="组件生命周期图示" style="zoom:50%;" /><p>1</p><ul><li>Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有有两个被更名：<ul><li><code>beforeDestroy</code>改名为 <code>beforeUnmount</code></li><li><code>destroyed</code>改名为 <code>unmounted</code></li></ul></li><li>Vue3.0也提供了 Composition API 形式的生命周期钩子，与Vue2.x中钩子对应关系如下：<ul><li><code>beforeCreate</code>===&gt;<code>setup()</code></li><li><code>created</code>=======&gt;<code>setup()</code></li><li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li><li><code>mounted</code>=======&gt;<code>onMounted</code></li><li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li><li><code>updated</code> =======&gt;<code>onUpdated</code></li><li><code>beforeUnmount</code> ==&gt;<code>onBeforeUnmount</code></li><li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li></ul></li></ul><h2 id="9-自定义hook函数"><a href="#9-自定义hook函数" class="headerlink" title="9.自定义hook函数"></a>9.自定义hook函数</h2><ul><li><p>什么是hook？—— 本质是一个函数，把setup函数中使用的Composition API进行了封装。</p></li><li><p>类似于vue2.x中的mixin。</p></li><li><p>自定义hook的优势: 复用代码, 让setup中的逻辑更清楚易懂。</p></li></ul><h2 id="10-toRef"><a href="#10-toRef" class="headerlink" title="10.toRef"></a>10.toRef</h2><ul><li>作用：创建一个 ref 对象，其value值指向另一个对象中的某个属性。</li><li>语法：<code>const name = toRef(person,&#39;name&#39;)</code></li><li>应用:   要将响应式对象中的某个属性单独提供给外部使用时。</li></ul><ul><li>扩展：<code>toRefs</code> 与<code>toRef</code>功能一致，但可以批量创建多个 ref 对象，语法：<code>toRefs(person)</code></li></ul><h1 id="三、其它-Composition-API"><a href="#三、其它-Composition-API" class="headerlink" title="三、其它 Composition API"></a>三、其它 Composition API</h1><h2 id="1-shallowReactive-与-shallowRef"><a href="#1-shallowReactive-与-shallowRef" class="headerlink" title="1.shallowReactive 与 shallowRef"></a>1.shallowReactive 与 shallowRef</h2><ul><li><p>shallowReactive：只处理对象最外层属性的响应式（浅响应式）。</p></li><li><p>shallowRef：只处理基本数据类型的响应式, 不进行对象的响应式处理。</p></li><li><p>什么时候使用?</p><ul><li> 如果有一个对象数据，结构比较深, 但变化时只是外层属性变化 ===&gt; shallowReactive。</li><li> 如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 ===&gt; shallowRef。</li></ul></li></ul><h2 id="2-readonly-与-shallowReadonly"><a href="#2-readonly-与-shallowReadonly" class="headerlink" title="2.readonly 与 shallowReadonly"></a>2.readonly 与 shallowReadonly</h2><ul><li>readonly: 让一个响应式数据变为只读的（深只读）。</li><li>shallowReadonly：让一个响应式数据变为只读的（浅只读）。</li><li>应用场景: 不希望数据被修改时。</li></ul><h2 id="3-toRaw-与-markRaw"><a href="#3-toRaw-与-markRaw" class="headerlink" title="3.toRaw 与 markRaw"></a>3.toRaw 与 markRaw</h2><ul><li>toRaw：<ul><li>作用：将一个由<code>reactive</code>生成的<strong style="color:orange">响应式对象</strong>转为<strong style="color:orange">普通对象</strong>。</li><li>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。</li></ul></li><li>markRaw：<ul><li>作用：标记一个对象，使其永远不会再成为响应式对象。</li><li>应用场景:<ol><li>有些值不应被设置为响应式的，例如复杂的第三方类库等。</li><li>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。</li></ol></li></ul></li></ul><h2 id="4-customRef"><a href="#4-customRef" class="headerlink" title="4.customRef"></a>4.customRef</h2><ul><li><p>作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。</p></li><li><p>实现防抖效果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;keyword&quot;&gt;</span><br><span class="line">&lt;h3&gt;&#123;&#123;keyword&#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref,customRef&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">name:&#x27;Demo&#x27;,</span><br><span class="line">setup()&#123;</span><br><span class="line">// let keyword = ref(&#x27;hello&#x27;) //使用Vue准备好的内置ref</span><br><span class="line">//自定义一个myRef</span><br><span class="line">function myRef(value,delay)&#123;</span><br><span class="line">let timer</span><br><span class="line">//通过customRef去实现自定义</span><br><span class="line">return customRef((track,trigger)=&gt;&#123;</span><br><span class="line">return&#123;</span><br><span class="line">get()&#123;</span><br><span class="line">track() //告诉Vue这个value值是需要被“追踪”的</span><br><span class="line">return value</span><br><span class="line">&#125;,</span><br><span class="line">set(newValue)&#123;</span><br><span class="line">clearTimeout(timer)</span><br><span class="line">timer = setTimeout(()=&gt;&#123;</span><br><span class="line">value = newValue</span><br><span class="line">trigger() //告诉Vue去更新界面</span><br><span class="line">&#125;,delay)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">let keyword = myRef(&#x27;hello&#x27;,500) //使用程序员自定义的ref</span><br><span class="line">return &#123;</span><br><span class="line">keyword</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-provide-与-inject"><a href="#5-provide-与-inject" class="headerlink" title="5.provide 与 inject"></a>5.provide 与 inject</h2><img src="../images/Vue3%E7%9A%84%E5%AD%A6%E4%B9%A0/components_provide.png" style="width:300px" /><ul><li><p>作用：实现<strong style="color:#DD5145">祖与后代组件间</strong>通信</p></li><li><p>套路：父组件有一个 <code>provide</code> 选项来提供数据，后代组件有一个 <code>inject</code> 选项来开始使用这些数据</p></li><li><p>具体写法：</p><ol><li><p>祖组件中：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">......</span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;奔驰&#x27;</span>,<span class="attr">price</span>:<span class="string">&#x27;40万&#x27;</span>&#125;)</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>,car)</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>后代组件中：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props,context</span>)&#123;</span><br><span class="line">......</span><br><span class="line">    <span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;car&#125;</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ul><h2 id="6-响应式数据的判断"><a href="#6-响应式数据的判断" class="headerlink" title="6.响应式数据的判断"></a>6.响应式数据的判断</h2><ul><li>isRef: 检查一个值是否为一个 ref 对象</li><li>isReactive: 检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</li><li>isReadonly: 检查一个对象是否是由 <code>readonly</code> 创建的只读代理</li><li>isProxy: 检查一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</li></ul><h1 id="四、Composition-API-的优势"><a href="#四、Composition-API-的优势" class="headerlink" title="四、Composition API 的优势"></a>四、Composition API 的优势</h1><h2 id="1-Options-API-存在的问题"><a href="#1-Options-API-存在的问题" class="headerlink" title="1.Options API 存在的问题"></a>1.Options API 存在的问题</h2><p>使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 。</p><div style="width:600px;height:370px;overflow:hidden;float:left">    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image" style="width:600px;float:left" /></div><div style="width:300px;height:370px;overflow:hidden;float:left">    <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image" style="zoom:50%;width:560px;left" /> </div><h2 id="2-Composition-API-的优势"><a href="#2-Composition-API-的优势" class="headerlink" title="2.Composition API 的优势"></a>2.Composition API 的优势</h2><p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。</p><div style="width:500px;height:340px;overflow:hidden;float:left">    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image"style="height:360px"/></div><div style="width:430px;height:340px;overflow:hidden;float:left">    <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image"style="height:360px"/></div><h1 id="五、新的组件"><a href="#五、新的组件" class="headerlink" title="五、新的组件"></a>五、新的组件</h1><h2 id="1-Fragment"><a href="#1-Fragment" class="headerlink" title="1.Fragment"></a>1.Fragment</h2><ul><li>在Vue2中: 组件必须有一个根标签</li><li>在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中</li><li>好处: 减少标签层级, 减小内存占用</li></ul><h2 id="2-Teleport"><a href="#2-Teleport" class="headerlink" title="2.Teleport"></a>2.Teleport</h2><ul><li><p>什么是Teleport？—— <code>Teleport</code> 是一种能够将我们的<strong style="color:#DD5145">组件html结构</strong>移动到指定位置的技术。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to=&quot;移动位置&quot;&gt;</span><br><span class="line">&lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;</span><br><span class="line">&lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">&lt;h3&gt;我是一个弹窗&lt;/h3&gt;</span><br><span class="line">&lt;button @click=&quot;isShow = false&quot;&gt;关闭弹窗&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-Suspense"><a href="#3-Suspense" class="headerlink" title="3.Suspense"></a>3.Suspense</h2><ul><li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p></li><li><p>使用步骤：</p><ul><li><p>异步引入组件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure></li><li><p>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;app&quot;&gt;</span><br><span class="line">&lt;h3&gt;我是App组件&lt;/h3&gt;</span><br><span class="line">&lt;Suspense&gt;</span><br><span class="line">&lt;template v-slot:default&gt;</span><br><span class="line">&lt;Child/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;template v-slot:fallback&gt;</span><br><span class="line">&lt;h3&gt;加载中.....&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;/Suspense&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="六、其他"><a href="#六、其他" class="headerlink" title="六、其他"></a>六、其他</h1><h2 id="1-全局API的转移"><a href="#1-全局API的转移" class="headerlink" title="1.全局API的转移"></a>1.全局API的转移</h2><ul><li><p>Vue 2.x 有许多全局 API 和配置。</p><ul><li><p>例如：注册全局组件、注册全局指令等。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册全局组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//注册全局指令</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">inserted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Vue3.0中对这些API做出了调整：</p><ul><li><p>将全局的API，即：<code>Vue.xxx</code>调整到应用实例（<code>app</code>）上</p><table><thead><tr><th>2.x 全局 API（<code>Vue</code>）</th><th>3.x 实例 API (<code>app</code>)</th></tr></thead><tbody><tr><td>Vue.config.xxxx</td><td>app.config.xxxx</td></tr><tr><td>Vue.config.productionTip</td><td><strong style="color:#DD5145">移除</strong></td></tr><tr><td>Vue.component</td><td>app.component</td></tr><tr><td>Vue.directive</td><td>app.directive</td></tr><tr><td>Vue.mixin</td><td>app.mixin</td></tr><tr><td>Vue.use</td><td>app.use</td></tr><tr><td>Vue.prototype</td><td>app.config.globalProperties</td></tr></tbody></table></li></ul></li></ul><h2 id="2-其他改变"><a href="#2-其他改变" class="headerlink" title="2.其他改变"></a>2.其他改变</h2><ul><li><p>data选项应始终被声明为一个函数。</p></li><li><p>过度类名的更改：</p><ul><li><p>Vue2.x写法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Vue3.x写法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong style="color:#DD5145">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持<code>config.keyCodes</code></p></li><li><p><strong style="color:#DD5145">移除</strong><code>v-on.native</code>修饰符</p><ul><li><p>父组件中绑定事件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component</span><br><span class="line">  v-on:close=&quot;handleComponentEvent&quot;</span><br><span class="line">  v-on:click=&quot;handleNativeClickEvent&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></li><li><p>子组件中声明自定义事件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    emits: [&#x27;close&#x27;]</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong style="color:#DD5145">移除</strong>过滤器（filter）</p><blockquote><p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p></blockquote></li><li><p>……</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2的学习</title>
      <link href="/post/48c2.html"/>
      <url>/post/48c2.html</url>
      
        <content type="html"><![CDATA[<h1 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h1><h2 id="脚手架文件结构"><a href="#脚手架文件结构" class="headerlink" title="脚手架文件结构"></a>脚手架文件结构</h2><p>(treer -d 路径)</p><img src="../images/Vue2%E7%9A%84%E5%AD%A6%E4%B9%A0/image-20230128104810285.png" alt="image-20230128104810285" style="zoom:50%;" /><h2 id="关于不同版本的Vue说明"><a href="#关于不同版本的Vue说明" class="headerlink" title="关于不同版本的Vue说明"></a>关于不同版本的Vue说明</h2><ul><li><p>vue.js与vue.runtime.xxx.js的区别：</p><p>​    (1) vue.js是完整版的Vue,包含：核心功能+模板解析器。</p><p>​    (2) vue.runtime.xxx.js是运行版的Vue,只包含：核心功能；没有模板解析器。</p></li><li><p>因为vue.runtime.xxx,js没有模板解析器，所以不能使用templatei配置项，需要使用renderi函数接收到的createElementi函数去指定具体内容。</p></li></ul><h2 id="vue-config-js配置文件"><a href="#vue-config-js配置文件" class="headerlink" title="vue.config.js配置文件"></a>vue.config.js配置文件</h2><ul><li>使用vue inspect &gt; output.js 可以查看到Vue脚手架的默认配置</li><li>使用vue.config.js 可以对脚手架进行个性化定制，详情 <a href="https://cli.vuejs.org/zh/config/">https://cli.vuejs.org/zh/config/</a></li></ul><h2 id="ref属性"><a href="#ref属性" class="headerlink" title="ref属性"></a>ref属性</h2><p>1.被用来给元素或子组件注册引用的信息（id的替代</p><p>2.应用在html标签上获取的是真实DOM元素，应用在组件标签上获取的是组件实例对象</p><p>3.使用方式：</p><ul><li>打标识 <code>&lt;h1 ref=&quot;title&quot;&gt;哈哈&lt;/h1&gt; 或者 &lt;School ref=&quot;sch&quot;/&gt;</code></li><li>获取 this.$refs.title啥的</li></ul><h2 id="配置项props"><a href="#配置项props" class="headerlink" title="配置项props"></a>配置项props</h2><p>功能：让组件接收外部传过来的数据</p><ul><li><p>传递数据：<code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></p></li><li><p>接收数据：</p><ul><li>只接收：<code>props: [&#39;name&#39;,&#39;sex&#39;,&#39;age&#39;]</code></li><li>限制类型：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">    name: String,</span><br><span class="line">    sex: String,</span><br><span class="line">    age: Number</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>限制类型、限制必要性、指定默认值</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">props :&#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">        type: String,//类型</span><br><span class="line">        required: true//必须</span><br><span class="line">    &#125;,</span><br><span class="line">    sex: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        required: true//默认值</span><br><span class="line">    &#125;,</span><br><span class="line">    age: &#123;</span><br><span class="line">        type: Number,</span><br><span class="line">        default: 99</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>备注：props是只读的。Vue底层会监测你对props的修改，如有修改会发出警告；若业务需求需要改，那么得从props中复制一份到data里，然后去修改data中的那个数据。</p></li></ul><h2 id="mixin-混入"><a href="#mixin-混入" class="headerlink" title="mixin-混入"></a>mixin-混入</h2><ul><li><p>功能：可以吧多个组件供用电额配置提取成一个混入对象</p></li><li><p>使用方式：</p><ul><li>第一步定义混合</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    data()&#123;&#125;,</span><br><span class="line">    methods:&#123;&#125;</span><br><span class="line">    ……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第二步混入</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">局部引入：</span><br><span class="line">mixins:[&#x27;xxx&#x27;,&#x27;yyy&#x27;]</span><br><span class="line">全局引入：</span><br><span class="line">Vue.mixin(xxx)</span><br></pre></td></tr></table></figure></li></ul><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><ul><li>功能：用于增强Vue</li><li>本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据</li><li>定义插件：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">对象.install = function(Vue, options) &#123;</span><br><span class="line">    //1.添加全局过滤器</span><br><span class="line">    Vue.filter(....)</span><br><span class="line">    //2.添加全局指令</span><br><span class="line">    Vue.directive(....)</span><br><span class="line">    //3.配置全局混入</span><br><span class="line">    Vue.mixin(....)</span><br><span class="line">    //4.添加实例方法</span><br><span class="line">    Vue.prototype.$myMethod = function()&#123;....&#125;</span><br><span class="line">    Vue.prototype.$myProperty = xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>使用插件：<br><code>Vue.use()</code></li></ul><h2 id="scoped样式"><a href="#scoped样式" class="headerlink" title="scoped样式"></a>scoped样式</h2><ul><li>作用：让样式在布局生效，防止冲突</li><li>写法：<code>&lt;style scoped&gt;&lt;/style&gt;</code></li></ul><h2 id="总结TodoList案例"><a href="#总结TodoList案例" class="headerlink" title="总结TodoList案例"></a>总结TodoList案例</h2><ol><li>组件化编码流程</li></ol><ul><li><p>拆分静态组件：组件按照功能点拆分，命名不要与html元素冲突</p></li><li><p>实现动态组件：考虑好数据的存放位置，数据是组件在用，还是一些组件在用</p><ul><li>一个组件在用：放在组件自身即可</li><li>一些组件在用：放在他们的共同父组件上（状态提升）</li></ul></li><li><p>实现交互：从绑定事件开始</p></li></ul><ol start="2"><li>props适用于：</li></ol><ul><li>父组件→子组件 通信</li><li>子组件→父组件 通信（要求父先给自已个函数）</li></ul><ol start="3"><li><p>用v-model时切记：v-model绑定的值不能是props传过来的值，因为props是不可以被修改的！！</p></li><li><p>props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做。</p></li></ol><h2 id="web-Storage"><a href="#web-Storage" class="headerlink" title="web Storage"></a>web Storage</h2><ol><li><p>存储内容大小一般5MB左右（不同浏览器不一样）</p></li><li><p>浏览器通过 Window.sessionStorage 和 Window.localStorage 属性实现本地存储机制</p></li><li><p>相关API</p><ol><li><code>xxxStorage.setItem(&#39;key&#39;, &#39;value&#39;)</code>：接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，更新其对应的值。</li><li><code>xxxStorage.getItem(&#39;key&#39;)</code>：接受一个键名作为参数，返回键名对应的值。</li><li><code>xxxStorage.removeItem(&#39;key&#39;)</code>：接受一个键名作为参数，把该键值从存储中删除。</li><li><code>xxxStorage.clear()</code>：清空存储中所有的数据。</li></ol></li><li><p>备注</p><ol><li>SessionStorage存储的内容会随着浏览器窗口关闭而消失</li><li>LocalStorage存储的内容需要手动清除</li><li>setItem如果对应键的值获取不到，那么getItem返回值是null</li><li><code>JSON.parse(null)</code>结果依然是null</li></ol></li></ol><h2 id="组件的自定义事件"><a href="#组件的自定义事件" class="headerlink" title="组件的自定义事件"></a>组件的自定义事件</h2><ol><li><p>一种组件间的通信方式，适用于：子组件=&gt;父组件</p></li><li><p>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（事件的回调在A中）</p></li><li><p>绑定自定义事件：</p><ol><li><p>第一种，在父组件中：<code>&lt;Demo @qvq=&#39;test&#39;/&gt;</code>（v-on）</p></li><li><p>第二种，在父组件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Demo ref=&quot;demo&quot;/&gt;</span><br><span class="line">......</span><br><span class="line">mounted() &#123;</span><br><span class="line">this.$refs.demo.$on(&#x27;qvq&#x27;,this.test)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>若想让自定义事件只触发一次，用<code>once</code>修饰符，或<code>$once</code>方法</p></li></ol></li><li><p>触发自定义事件：<code>this.$emit(&#39;qvq&#39;,数据)</code></p></li><li><p>解绑自定义事件：<code>this.$off(&#39;qvq&#39;)</code></p></li><li><p>组件上也可以绑定原生DOM事件，需要使用<code>native</code>修饰符</p></li><li><p>注意：通过<code>this.$refs.xxx.$on(&#39;ref值&#39;,回调)</code>绑定自定义事件时，回调要么配置在methods中，要么箭头函数怼进去，否则this指向调用它的组件捏。</p></li></ol><h2 id="全局事件总线（GlobalEventBus）"><a href="#全局事件总线（GlobalEventBus）" class="headerlink" title="全局事件总线（GlobalEventBus）"></a>全局事件总线（GlobalEventBus）</h2><ol><li><p>一种组件间通信的方式，适用于任意组件间通信</p></li><li><p>安装全局事件总线：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span> <span class="comment">//安装全局事件总线，$bus就是当前应用的vm</span></span><br><span class="line">&#125;，</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>使用事件总线：</p><ol><li><p>接受数据：A想接收数据，则A组件给$bus绑定自定义事件，事件的回调留在A组件自身。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">methods</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">demo</span>(<span class="params">data</span>)&#123;....&#125;</span><br><span class="line">&#125;</span><br><span class="line">....</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;xxx&#x27;</span>,<span class="variable language_">this</span>.<span class="property">demo</span>)</span><br><span class="line">&#125;</span><br><span class="line">或者用箭头函数</span><br></pre></td></tr></table></figure></li><li><p>提供数据：<code>this.$bus.$on(&#39;xxx&#39;,this.demo)</code></p></li></ol></li><li><p>最好在beforeDestroy钩子中，用<code>$off</code>去解绑当前组件所用到的事件。</p></li></ol><h2 id="消息订阅与发布（pubsub）"><a href="#消息订阅与发布（pubsub）" class="headerlink" title="消息订阅与发布（pubsub）"></a>消息订阅与发布（pubsub）</h2><ol><li><p>一种组件间通信的方式，适用于任意组件间通信</p></li><li><p>使用步骤：</p><ol><li><p>安装pubsub：<code>npm i pubsub-js</code></p></li><li><p>引入：<code>import pubsub from &#39;pubsub-js&#39;</code></p></li><li><p>接受数据：A想收数据，则在A中订阅消息，订阅的回调留在A自己这里</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">methods</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">demo</span>(<span class="params">data</span>)&#123;....&#125;</span><br><span class="line">&#125;</span><br><span class="line">....</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">pid</span> = pubsub.<span class="title function_">subscribe</span>(<span class="string">&#x27;xxx&#x27;</span>, <span class="variable language_">this</span>.<span class="property">demo</span>)<span class="comment">//订阅消息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>提供数据：<code>pubsub.publish(&#39;xxx&#39;,数据)</code></p></li><li><p>最好在beforeDestroy钩子中，用<code>pubsub.unsubscribe(pid)</code>去取消订阅。</p></li></ol></li></ol><h2 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h2><ol><li>语法：<code>this.$nextTick(回调函数)</code></li><li>作用：在下一次DOM更新结束后执行其指令回调</li><li>什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作，要在nextTick所指定的回调函数中执行</li></ol><h2 id="Vue封装的过度与动画"><a href="#Vue封装的过度与动画" class="headerlink" title="Vue封装的过度与动画"></a>Vue封装的过度与动画</h2><ol><li><p>作用：在插入、更新或移除DOM元素时，在核实的时候给元素添加样式类名</p></li><li><p>图示：</p><p><img src="../images/Vue2%E7%9A%84%E5%AD%A6%E4%B9%A0/image-20230129200244340.png" alt="image-20230129200244340"></p></li><li><p>写法</p><ol><li><p>准备好样式</p><ul><li><p>元素进入的样式</p><blockquote><p>v-enter：进入的起点</p><p>v-enter-active：进入的过程中——单用active 可animation:搭配@keyframes animationName {}动画</p><p>v-enter-to：进入的终点</p></blockquote></li><li><p>元素离开的样式</p><blockquote><p>v-leave：离开的起点</p><p>v-leave-active：离开的过程中</p><p>v-leave-to：离开的终点</p></blockquote></li></ul></li><li><p>使用<code>&lt;transition&gt;</code>包裹要过度的元素，并配置<code>name</code>属性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;isShow&quot;&gt;</span><br><span class="line">        你好啊！</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure></li><li><p>备注：若有多个元素需要过度，则需要用：<code>&lt;transition-group&gt;</code>，且每个元素指定<code>&lt;key&gt;</code>值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition-group name=&quot;qvq&quot; appear&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;isShow&quot; key=&quot;1&quot;&gt;你好:D&lt;/h1&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;!isShow&quot; key=&quot;2&quot;&gt;嗨嗨嗨:D&lt;/h1&gt;</span><br><span class="line">&lt;/transition-group&gt;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h2 id="vue脚手架配置代理"><a href="#vue脚手架配置代理" class="headerlink" title="vue脚手架配置代理"></a>vue脚手架配置代理</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>在vue.config.js中添加如下配置：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>:<span class="string">&quot;http://localhoost:5000&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    说明：</p><pre><code> 1. 优点：配置简单，请求资源时直接发给前端（8080）即可 2. 缺点：不能配置多个代理，不能灵活的控制请求是否走代理 3. 工作方式：若按照上述代理配置，当请求了前端不存在的资源时，那么该请求会专访给服务器（优先匹配前端资源）            </code></pre><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>编写vue.config.js配置具体代理规则：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"> ....</span><br><span class="line">  <span class="comment">//开启代理服务器(方式二)</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api1&#x27;</span>: &#123;<span class="comment">//请求前缀，匹配所有以&#x27;/api1&#x27;开头的请求路径</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5000&#x27;</span>,<span class="comment">//代理目标的基本路径</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;<span class="string">&#x27;^/api1&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;,<span class="comment">//路径重写，贼重要！！！</span></span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,<span class="comment">//用于支持websocket</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span><span class="comment">//用于控制请求头中的host值→请求说谎，说自己是5000的，可爱捏；默认值是false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;/api2&#x27;</span>: &#123;<span class="comment">//请求前缀</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5001&#x27;</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;<span class="string">&#x27;^/api2&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;,</span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class="line"><span class="comment">false：localhoost:8080</span></span><br><span class="line"><span class="comment">默认值为true</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>说明：</p><ol><li>优点：可以配置多个代理，且可以灵活的控制请求是否走代理</li><li>缺点：配置略微繁琐，请求资源时必须加前缀</li></ol><h2 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h2><ol><li><p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间的通信方式，适用于 父组件=&gt;子组件</p></li><li><p>分类：默认插槽，具名插槽，作用域插槽</p></li><li><p>使用方式</p><ol><li><p>默认插槽</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">        html结构1</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">        &lt;!--定义插槽--&gt;</span><br><span class="line">        &lt;slot&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li><li><p>具名插槽</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">&lt;Category&gt;</span><br><span class="line">    &lt;template slot=&quot;center&quot;&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">            html结构1</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template slot=&quot;footer&quot;&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">            html结构2</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;!--定义插槽--&gt;</span><br><span class="line">        &lt;slot name=&quot;center&quot;&gt;插槽默认内容&lt;/slot&gt;</span><br><span class="line">        &lt;slot name=&quot;footer&quot;&gt;插槽默认内容&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li><li><p>作用域插槽</p><ol><li><p>理解：数据在组件的自身，但数据生成的结构需要组件的使用者来决定。（game数据在Category组件中，但是用数据所遍历出来的结构由APP组件决定）…….当然它也可以具名</p></li><li><p>具体编码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;template scope=&quot;scopeData&quot;&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/template&gt;    </span><br><span class="line">&lt;/Category&gt;</span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;template slot-scope=&quot;scopeData&quot;&gt;</span><br><span class="line">&lt;ol&gt;</span><br><span class="line">            &lt;li v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ol&gt;</span><br><span class="line">    &lt;/template&gt;    </span><br><span class="line">&lt;/Category&gt;</span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;template scope=&quot;&#123;games&#125;&quot;&gt;</span><br><span class="line">    &lt;h4 v-for=&quot;g in games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;/template&gt;    </span><br><span class="line">&lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">        &lt;slot :games=&quot;games&quot;&gt;默认&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;Category&#x27;,</span><br><span class="line">        props: [&#x27;title&#x27;],</span><br><span class="line">        //数据在子组件自身</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                games: [&#x27;原神&#x27;, &#x27;使命召唤&#x27;, &#x27;赛特斯2&#x27;]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol></li></ol></li></ol><h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><img src="../images/Vue2%E7%9A%84%E5%AD%A6%E4%B9%A0/vuex.png" alt="vuex" style="zoom: 33%;" /><h3 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h3><p>在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多一个组件的共享状态进行集中式管理（读/写），也是一种组件间的通信方式，切实用于任意组件间的通信。</p><h3 id="2-何时使用"><a href="#2-何时使用" class="headerlink" title="2.何时使用"></a>2.何时使用</h3><p>多个组件需要共享数据时。</p><h3 id="3-搭建vuex环境"><a href="#3-搭建vuex环境" class="headerlink" title="3.搭建vuex环境"></a>3.搭建vuex环境</h3><ol><li><p>创建文件：<code>src/store/index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入Vue核心库</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//使用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备actions，用于响应组件中的动作</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"><span class="comment">//准备mutations，用于操作数据（state)</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"><span class="comment">//准备state，用于存储数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span>  <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>在<code>main.js</code>中创建vm时传入<code>store</code>配置项</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line"><span class="comment">//引入store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line">....</span><br><span class="line"><span class="comment">//创建vm</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    store</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-基本使用"><a href="#4-基本使用" class="headerlink" title="4.基本使用"></a>4.基本使用</h3><ol><li><p>初始化数据，配置<code>actions</code>配置<code>mutations</code>操作文件<code>store.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入Vue核心库</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//引用Vuex</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = (</span><br><span class="line">    <span class="comment">//响应组建的加</span></span><br><span class="line">    <span class="title function_">increase</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;INCREASE&#x27;</span>, value)</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="comment">///执行加</span></span><br><span class="line">    <span class="title function_">INCREASE</span>(<span class="params">state,value</span>) &#123;</span><br><span class="line">        state.<span class="property">sum</span> += value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    <span class="comment">//初始化数据</span></span><br><span class="line">    <span class="attr">sum</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组建中读取vuex中的数据：<code>$store.state.sum</code></p></li><li><p>组建中修改vuex中的数据：<code>$store.dispatch(&#39;action中的方法名&#39;, 数据)</code>或<code>$store.commit(&#39;mutations中的方法名&#39;, 数据)</code></p></li><li><p>备注：若没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写<code>dipatch</code>，直接<code>commit</code></p></li></ol><h3 id="5-getter的使用"><a href="#5-getter的使用" class="headerlink" title="5.getter的使用"></a>5.getter的使用</h3><ol><li><p>概念：当state中的数据需要经过加工后再使用时，可以使用getters加工。</p></li><li><p>在<code>store.js</code>中追加<code>getters</code>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">    <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state.<span class="property">sum</span>*<span class="number">10</span><span class="comment">//这里假装一波复杂运算</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建并暴露</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    ....</span><br><span class="line">    getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中读取数据：<code>$store.getters.bigSum</code></p></li></ol><h3 id="6-四个map方法的使用"><a href="#6-四个map方法的使用" class="headerlink" title="6.四个map方法的使用"></a>6.四个map方法的使用</h3><ol><li><p><strong>mapState方法</strong>：用于帮助我们映射<code>state</code>中的数据为计算属性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line"><span class="comment">//借助mapState生成计算属性，从state中读取数据（对象写法）</span></span><br><span class="line">    ...<span class="title function_">mapState</span>(&#123;<span class="comment">//...解构赋值，把对象里的东西展开</span></span><br><span class="line">       <span class="string">&#x27;sum&#x27;</span>: <span class="string">&#x27;sum&#x27;</span>,<span class="comment">//规范&#x27;sum&#x27;，图个简单↓</span></span><br><span class="line">        <span class="attr">school</span>: <span class="string">&#x27;school&#x27;</span>,</span><br><span class="line">        <span class="attr">kecheng</span>: <span class="string">&#x27;subject&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//借助mapState生成计算属性，从state中读取数据（数组写法）</span></span><br><span class="line">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;sum&#x27;</span>, <span class="string">&#x27;school&#x27;</span>, <span class="string">&#x27;subject&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>mapGetters方法</strong>：用于帮助我们映射<code>getters</code>中的数据为计算属性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line"><span class="comment">//借助mapGetters生成计算属性，从getters中读取数据（对象写法）</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>(&#123;<span class="attr">bigSum</span>: <span class="string">&#x27;bigeSum&#x27;</span>&#125;),</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//借助mapGetters生成计算属性，从getters中读取数据（数组写法）</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;bigSum&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>mapActions方法：</strong>用于帮助我们生成与<code>actions</code>对话的方法，即：包含<code>$store.dispatch(xxx)</code>的函数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">//借助mapActions生成对应的方法，方法中会调用despatch去联系actions（对象写法）——它自动生成的是func(value)&#123;&#125;，所以说在调用的时候要传参，这样是相较于再从methods里面调方法更简单的</span></span><br><span class="line">    ...<span class="title function_">mapActions</span>(&#123;<span class="attr">increamentOdd</span>: <span class="string">&#x27;increaseOdd&#x27;</span>, <span class="attr">increamentWait</span>: <span class="string">&#x27;increaseWait&#x27;</span>&#125;),</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//借助mapActions生成对应的方法，方法中会调用despatch去联系actions（数组写法）——注意这里只能是actions中的名，那么前面调用就得用这种</span></span><br><span class="line">    ...<span class="title function_">mapActions</span>([<span class="string">&#x27;increamentOdd&#x27;</span>, <span class="string">&#x27;increamentWait&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>mapMutations方法</strong>：用于帮助我们生成与<code>mutations</code>对话的方法，即：<code>$store.commit(xxx)</code>的函数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">//借助mapMutations生成对应的方法，方法中会调用commit去联系mutations（对象写法）——它自动生成的是func(value)&#123;&#125;，所以说在调用的时候要传参，这样是相较于再从methods里面调方法更简单的</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>(&#123;<span class="attr">increament</span>: <span class="string">&#x27;INCREASE&#x27;</span>, <span class="attr">decreament</span>: <span class="string">&#x27;DECREASE&#x27;</span>&#125;),</span><br><span class="line">    <span class="comment">//借助mapMutations生成对应的方法，方法中会调用commit去联系mutations（数组写法）——注意这里只能是mutations中的名，那么前面调用就得用这种</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;INCREASE&#x27;</span>, <span class="string">&#x27;DECREASE&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>备注：mapActions与mapMutations使用时，若需要传递参数，需要：在模板中绑定事件时传递好参数，否则参数是事件对象。</p></li></ol><h3 id="7-模块化-命名空间"><a href="#7-模块化-命名空间" class="headerlink" title="7.模块化+命名空间"></a>7.模块化+命名空间</h3><ol><li><p>目的：让代码更好的维护，让多种数据分类更加明确。</p></li><li><p>修改<code>store.js</code>（这里直接份文件了）</p><p><strong>count.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//求和相关的配置</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> countOptions = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>,<span class="comment">//开启命名空间，不想麻烦一定要写！</span></span><br><span class="line">    <span class="attr">actions</span>: &#123;...&#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;...&#125;,</span><br><span class="line">    <span class="attr">state</span>: &#123;...&#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> countOptions</span><br></pre></td></tr></table></figure><p><strong>person.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//人名相关的配置</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> personOptions = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">actions</span>: &#123;...&#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;...&#125;,</span><br><span class="line">    <span class="attr">state</span>: &#123;...&#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> personOptions</span><br></pre></td></tr></table></figure><p><strong>index.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入Vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//引入俩模块</span></span><br><span class="line"><span class="keyword">import</span> countOptions <span class="keyword">from</span> <span class="string">&#x27;./count&#x27;</span></span><br><span class="line"><span class="keyword">import</span> personOptions <span class="keyword">from</span> <span class="string">&#x27;./person&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//浅浅暴露一下</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span>  <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        <span class="attr">countAbout</span>: countOptions,<span class="comment">//简写也行</span></span><br><span class="line">        <span class="attr">personAbout</span>: personOptions</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>开启命名空间后，组件中读取state数据：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">personAbout</span>.<span class="property">list</span><span class="comment">//自己读</span></span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&#x27;countAbout&#x27;</span>, [<span class="string">&#x27;sum&#x27;</span>, <span class="string">&#x27;school&#x27;</span>, <span class="string">&#x27;subject&#x27;</span>])<span class="comment">//借助mapState读</span></span><br></pre></td></tr></table></figure></li><li><p>开启命名空间后，组件中读取state数据：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>[<span class="string">&#x27;personAbout/firstPersonName&#x27;</span>]<span class="comment">//自己读</span></span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&#x27;countAbout&#x27;</span>, [<span class="string">&#x27;bigSum&#x27;</span>])<span class="comment">//借助mapGetters读</span></span><br></pre></td></tr></table></figure></li><li><p>开启命名空间后，组件中调用dispatch：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;personAbout/addPersonWang&#x27;</span>, person)<span class="comment">//自己调用</span></span><br><span class="line">...<span class="title function_">mapActions</span>(<span class="string">&#x27;countAbout&#x27;</span>, &#123;<span class="attr">increaseOdd</span>: <span class="string">&#x27;jiaOdd&#x27;</span>, <span class="attr">increasementWait</span>: <span class="string">&#x27;jiaWait&#x27;</span>&#125;)<span class="comment">//借助map.Actions调用</span></span><br></pre></td></tr></table></figure></li><li><p>开启命名空间后，组件中调用commit：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;personAbout/ADD_PERSON&#x27;</span>, person)<span class="comment">//自己调用</span></span><br><span class="line">...<span class="title function_">mapMutations</span>(<span class="string">&#x27;countAbout&#x27;</span>, &#123;<span class="attr">increasement</span>:<span class="string">&#x27;JIA&#x27;</span>, <span class="attr">decreasement</span>:<span class="string">&#x27;JIAN&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure></li></ol><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><ol><li>理解：一个路由（route）就是一组映射关系，多个路由需要路由器（router）进行管理</li><li>前端路由：key是路径，value是组件</li></ol><h3 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1.基本使用"></a>1.基本使用</h3><ol><li><p>安装vue-router，命令<code>npm i vue-router</code></p></li><li><p>应用插件：<code>Vue.use(VueRouter)</code></p></li><li><p>编写router配置项</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入VueRouter</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//引入路由组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;../components/About&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../components/Home&#x27;</span></span><br><span class="line"><span class="comment">//创建router实例对象，去管理一组一组的路由规则</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;./about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">About</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;./home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//暴露router</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li><li><p>实现切换（active-class可配置高亮样式）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>指定展示位置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="2-几个注意点"><a href="#2-几个注意点" class="headerlink" title="2.几个注意点"></a>2.几个注意点</h3><ol><li><p>路由组件通常存放在<code>pages</code>文件夹，一般组件通常存放在<code>components</code>文件夹</p></li><li><p>通过切换，“隐藏”了路由组件，默认是被销毁掉的，需要的时候再去挂载</p></li><li><p>每个组件都有自己的<code>$route</code>属性，里面存储自己的路由信息</p></li><li><p>整个应用只有一个<code>router</code>，可以通过<code>$router</code>属性获取到</p><p><img src="../images/Vue2%E7%9A%84%E5%AD%A6%E4%B9%A0/image-20230202165843249.png" alt="image-20230202165843249"></p></li></ol><h3 id="3-多级路由（嵌套路由）"><a href="#3-多级路由（嵌套路由）" class="headerlink" title="3.多级路由（嵌套路由）"></a>3.多级路由（嵌套路由）</h3><ol><li><p>配置路由规则，使用children配置项：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>: [</span><br><span class="line">    &#123;<span class="comment">//一级路由</span></span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;./home&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            &#123;<span class="comment">//这个地方一定不要加斜杠，因为已经帮着加了</span></span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">News</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">Message</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>跳转（要写完整路径）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to:&#x27;/home/news&#x27;&gt;News&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-路由传参"><a href="#4-路由传参" class="headerlink" title="4.路由传参"></a>4.路由传参</h3><ol><li><p>传递参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转路由并携带query参数，to的字符串写法 --&gt;</span><br><span class="line"> &lt;router-link :to=&quot;`/home/message/detail?id=$&#123;m.id&#125;&amp;title=$&#123;m.title&#125;`&quot;&gt;跳转&lt;/router-link&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转路由并携带query参数，to的对象写法 --&gt;</span><br><span class="line">&lt;router-link</span><br><span class="line">:to=&quot;&#123;</span><br><span class="line">        path: &#x27;/home/message/detail&#x27;,</span><br><span class="line">        query: &#123;</span><br><span class="line">            id: m.id,</span><br><span class="line">            title: m.title,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;&quot;&gt;跳转</span><br><span class="line">&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>接收参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.<span class="property">query</span>.<span class="property">id</span></span><br><span class="line">$route.<span class="property">query</span>.<span class="property">title</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="5-命名路由"><a href="#5-命名路由" class="headerlink" title="5.命名路由"></a>5.命名路由</h3><ol><li><p>作用：可以简化路由的跳转</p></li><li><p>如何使用</p><ol><li><p>给路由命名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>: [</span><br><span class="line">        <span class="comment">//一级路由</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: myAbout,</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;jia&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: myHome,</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;xiaoxi&#x27;</span>,</span><br><span class="line">                    <span class="attr">path</span>: <span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">                    <span class="attr">component</span>: myNews,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;message&#x27;</span></span><br><span class="line">                    <span class="attr">path</span>: <span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                    <span class="attr">component</span>: myMessage,</span><br><span class="line">                    <span class="attr">children</span>: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="attr">name</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">                            <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">                            <span class="attr">component</span>: myDetail,</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure></li><li><p>简化跳转</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">简化前，需要写完整路径</span><br><span class="line">&lt;router-link class=&quot;list-group-item&quot; active-class=&quot;active&quot; to=&quot;/home/message&quot;&gt;Message&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">简化后，直接通过名字跳转</span><br><span class="line">&lt;router-link class=&quot;list-group-item&quot; active-class=&quot;active&quot; :to=&quot;&#123;name: &#x27;xiaoxi&#x27;&#125;&quot;&gt;News&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">简化写法配合传递参数</span><br><span class="line">&lt;router-link</span><br><span class="line">:to=&quot;&#123;</span><br><span class="line">    name: &#x27;xiangqing&#x27;,</span><br><span class="line">        query: &#123;</span><br><span class="line">              id: m.id,</span><br><span class="line">              title: m.title,</span><br><span class="line">        &#125;,</span><br><span class="line">     &#125;&quot; &gt; 跳转</span><br><span class="line">&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="6-params参数"><a href="#6-params参数" class="headerlink" title="6.params参数"></a>6.params参数</h3><ol><li><p>配置路由，声明接收params参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: myDetail,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>传递参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转路由并携带params参数，to的字符串写法 --&gt;</span><br><span class="line">&lt;router-link :to=&quot;`/home/message/detail/$&#123;m.id&#125;/$&#123;m.title&#125;`&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转路由并携带params参数，to的对象写法 --&gt;</span><br><span class="line">&lt;router-link</span><br><span class="line">:to=&quot;&#123;</span><br><span class="line">name: &#x27;xiangqing&#x27;,</span><br><span class="line">        //这个地方就必须得用name了</span><br><span class="line">        params: &#123;</span><br><span class="line">        id: m.id,</span><br><span class="line">        title: m.title,</span><br><span class="line">&#125;&quot;&gt;跳转</span><br><span class="line"> &lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>接收参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$route.params.id</span><br></pre></td></tr></table></figure></li></ol><h3 id="7-路由props配置"><a href="#7-路由props配置" class="headerlink" title="7.路由props配置"></a>7.路由props配置</h3><p>作用：让路由组件更方便收到参数</p><p>哈哈超级不喜欢params</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;detail/:id&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Detail</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件</span></span><br><span class="line"><span class="attr">props</span>:&#123;<span class="attr">a</span>:<span class="number">900</span>]</span><br><span class="line">    <span class="comment">//第二种写法：props值为布尔值，布尔值为true,则把路由收到的所有params参数通过props传给Detail:组件</span></span><br><span class="line">    /<span class="attr">props</span>:<span class="literal">true</span></span><br><span class="line">    <span class="comment">//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过propst传给Detail组件</span></span><br><span class="line">    <span class="title function_">props</span>(<span class="params">route</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">id</span>:route.<span class="property">query</span>.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">title</span>:route.<span class="property">query</span>.<span class="property">title</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-lt-router-link的replace属性"><a href="#8-lt-router-link的replace属性" class="headerlink" title="8.&lt;router-link的replace属性"></a>8.<code>&lt;router-link</code>的replace属性</h3><ol><li><p>作用：控制路由调好钻时操作浏览器历史记录的模式</p></li><li><p>浏览器的历史记录有两种写入方式</p><ul><li>push，追加历史记录（默认）</li><li>replace，替换当前记录</li></ul></li><li><p>如何开启replace模式</p><p><code>&lt;router-link repalce&gt;News&lt;/router-link&gt;</code>OR<code>&lt;router-link :repalce=&quot;true&quot;&gt;News&lt;/router-link&gt;</code></p></li></ol><h3 id="9-编程式路由导航"><a href="#9-编程式路由导航" class="headerlink" title="9.编程式路由导航"></a>9.编程式路由导航</h3><ol><li><p>作用：不借助<code>&lt;router-link&gt;</code>实现路由跳转，让路由跳转更加灵活（因为会转化成<code>&lt;a&gt;</code>呀）</p></li><li><p>具体编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;<span class="comment">//按钮啥的</span></span><br><span class="line">    <span class="title function_">pushShow</span>(<span class="params">m</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;xiangqing&quot;</span>,</span><br><span class="line">        <span class="attr">query</span>: &#123;</span><br><span class="line">          <span class="attr">id</span>: m.<span class="property">id</span>,</span><br><span class="line">          <span class="attr">title</span>: m.<span class="property">title</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">replaceShow</span>(<span class="params">m</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;xiangqing&quot;</span>,</span><br><span class="line">        <span class="attr">query</span>: &#123;</span><br><span class="line">          <span class="attr">id</span>: m.<span class="property">id</span>,</span><br><span class="line">          <span class="attr">title</span>: m.<span class="property">title</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123; <span class="comment">//前进后退啥的</span></span><br><span class="line">    <span class="title function_">back</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">back</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">forward</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">forward</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">go</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//向前走n步</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">go</span>(-<span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></li></ol><h3 id="10-缓存路由组件"><a href="#10-缓存路由组件" class="headerlink" title="10.缓存路由组件"></a>10.缓存路由组件</h3><ol><li><p>组件：让不展示的路由组件保持挂载，不被销毁</p></li><li><p>具体编码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive include=&quot;组件名&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="11-三个新的生命周期钩子"><a href="#11-三个新的生命周期钩子" class="headerlink" title="11.三个新的生命周期钩子"></a>11.三个新的生命周期钩子</h3><ol><li><p>作用：路由组件所独有的两个钩子，用于捕获有路由组件的激活状态</p></li><li><p>具体名字：</p><ol><li><code>activated</code>路由组件被激活时触发</li><li><code>deactivated</code>路由组件失活时触发</li></ol></li><li><p>还有一个叫<code>nextTick</code></p></li></ol><h3 id="12-路由守卫"><a href="#12-路由守卫" class="headerlink" title="12.路由守卫"></a>12.路由守卫</h3><ol><li><p>作用：对路由进行权限控制</p></li><li><p>分类：全局守卫、独享守卫、组件内守卫</p></li><li><p>全局守卫：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局 前置 路由守卫：初始化时/每一次路由切换之前调用</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;<span class="comment">//判断是否需要鉴权</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;school&#x27;</span>) === <span class="string">&#x27;qust&#x27;</span>) &#123;</span><br><span class="line">            <span class="title function_">next</span>()</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;当前用户无权限查看&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局 后置 路由守卫：初始化时被调用/每次路由切换之后被调用</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span> || <span class="string">&#x27;哈哈哈&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>独享守卫：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;<span class="comment">//判断是否需要鉴权</span></span><br><span class="line">         <span class="keyword">if</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;school&#x27;</span>) === <span class="string">&#x27;qust&#x27;</span>) &#123;</span><br><span class="line">               <span class="title function_">next</span>()</span><br><span class="line">         &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="title function_">alert</span>(<span class="string">&#x27;当前用户无权限查看&#x27;</span>)</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">next</span>()</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li><li><p>组件内守卫：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//进入守卫-组件路由守卫，通过路由规则，进入该组件时被调用</span></span><br><span class="line">    <span class="title function_">beforeRouteEnter</span>(<span class="params">to,<span class="keyword">from</span>,next</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">idAuth</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;school&#x27;</span>) === <span class="string">&#x27;qust&#x27;</span>) &#123;</span><br><span class="line">          <span class="title function_">next</span>()</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">alert</span>(<span class="string">&#x27;该用户无权访问&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_">next</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="comment">//离开守卫-组件路由守卫，通过路由规则，离开该组件时被调用</span></span><br><span class="line">    <span class="title function_">beforeRouteLeave</span>(<span class="params">to,<span class="keyword">from</span>,next</span>) &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="13-路由器的两种工作模式"><a href="#13-路由器的两种工作模式" class="headerlink" title="13.路由器的两种工作模式"></a>13.路由器的两种工作模式</h3><ol><li>对于一个url来说，什么是hash值？——#及其后面的内容就是hash值</li><li>hash值不包括在http请求中，即：hash值不会带给服务器</li><li>hash模式：<ol><li>地址中永远带着#号，不美观</li><li>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法</li><li>兼容性较好</li></ol></li><li>history模式：<ol><li>地址干净，美观</li><li>兼容性和hash模式相比略差</li><li>应用部署上线时需要后端人员支持，解决刷新页面服务器404的问题</li></ol></li></ol><h2 id="Vue-UI组件库"><a href="#Vue-UI组件库" class="headerlink" title="Vue UI组件库"></a>Vue UI组件库</h2><h4 id="移动端常用UI组件库"><a href="#移动端常用UI组件库" class="headerlink" title="移动端常用UI组件库"></a>移动端常用UI组件库</h4><ol><li>Vant</li><li>Cube UI</li><li>Mint UI</li></ol><h4 id="PC端常用UI组件库"><a href="#PC端常用UI组件库" class="headerlink" title="PC端常用UI组件库"></a>PC端常用UI组件库</h4><ol><li>Element UI</li><li>IView UI</li></ol>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android基础</title>
      <link href="/post/86b8.html"/>
      <url>/post/86b8.html</url>
      
        <content type="html"><![CDATA[<h1 id="Android基础"><a href="#Android基础" class="headerlink" title="Android基础"></a>Android基础</h1><h2 id="基础中的基础"><a href="#基础中的基础" class="headerlink" title="基础中的基础"></a>基础中的基础</h2><h3 id="安卓系统四层结构"><a href="#安卓系统四层结构" class="headerlink" title="安卓系统四层结构"></a>安卓系统四层结构</h3><ul><li>Linux内核层</li><li>系统运行库层</li><li>应用程序库层</li><li>应用程序层</li></ul><p><img src="../images/Android%E5%9F%BA%E7%A1%80/uTools_1677462650078.png" alt="uTools_1677462650078"></p><h3 id="安卓四种组件"><a href="#安卓四种组件" class="headerlink" title="安卓四种组件"></a>安卓四种组件</h3><p><img src="../images/Android%E5%9F%BA%E7%A1%80/image-20230227095553850.png" alt="image-20230227095553850"></p><h3 id="安装-配置"><a href="#安装-配置" class="headerlink" title="安装/配置"></a>安装/配置</h3><ol><li><p>安装Android Studio，安装SDK，新建空项目，注意存储配置，熟悉一下。（基地的网好差）</p></li><li><p>关于界面预览问题</p><ul><li><p>本地模拟器</p></li><li><p>代理模拟器</p></li><li><p>真机连一连（悲惨鸿蒙）</p></li></ul></li><li><p>下了个模拟器</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.\adb devices<span class="comment"># 查看配置</span></span><br><span class="line">.\adb <span class="built_in">kill</span><span class="literal">-server</span><span class="comment"># 关闭服务</span></span><br><span class="line">.\adb <span class="built_in">start-server</span><span class="comment"># 开启服务</span></span><br></pre></td></tr></table></figure><p>项目运行</p><p><img src="../images/Android%E5%9F%BA%E7%A1%80/image-20230227170255525.png" alt="image-20230227170255525"></p></li><li><p>耐心等待…</p></li></ol><h3 id="使用记录"><a href="#使用记录" class="headerlink" title="使用记录"></a>使用记录</h3>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 跨平台开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目开发-Git工作流</title>
      <link href="/post/3150.html"/>
      <url>/post/3150.html</url>
      
        <content type="html"><![CDATA[<h1 id="更新内容，请直接看这里"><a href="#更新内容，请直接看这里" class="headerlink" title="更新内容，请直接看这里"></a>更新内容，请直接看这里</h1><h2 id="这是工作-团队协作中最常见的一个基本流程，可以跟着这一串自己试一试。"><a href="#这是工作-团队协作中最常见的一个基本流程，可以跟着这一串自己试一试。" class="headerlink" title="这是工作/团队协作中最常见的一个基本流程，可以跟着这一串自己试一试。"></a>这是工作/团队协作中最常见的一个基本流程，可以跟着这一串自己试一试。</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 最开始</span></span><br><span class="line">$ git <span class="built_in">clone</span><span class="comment">#将远程仓库的代码拉到本地(local-git)</span></span><br><span class="line"><span class="comment"># 记得切换新分支哦！</span></span><br><span class="line">$ git checkout -b 分支名  <span class="comment">#创建新的分支，并在该分支下工作（例:git checkout mybranch）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写完一些东西，想更新一下仓库时</span></span><br><span class="line">$ git add --all或git add .  <span class="comment">#添加等待commit</span></span><br><span class="line">$ git commit -m <span class="string">&quot;XXX&quot;</span>   <span class="comment">#放进local-git里(“附加信息”，一般就&quot;update from XXX&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># commit之后</span></span><br><span class="line">$ git checkout main<span class="comment">#先切换到主分支</span></span><br><span class="line">$ git pull origin main<span class="comment">#把远端main同步到local_main中</span></span><br><span class="line">$ git checkout raliz<span class="comment">#切换到自己的分支</span></span><br><span class="line">$ git rebase/merge main    <span class="comment">#将自己分支的代码和主分支上的新代码合并</span></span><br><span class="line"><span class="comment"># 这里可能需要手动解决rebase conflict，看一下自己的编译器，操作一下</span></span><br><span class="line">$ git add --all 或 .</span><br><span class="line">$ git commit -m <span class="string">&quot;msg&quot;</span></span><br><span class="line">$ git rebase cotinue</span><br><span class="line">$ git push (-f) origin 分支名  <span class="comment">#(强行)push，将合并后的分支推送到远程仓库的对应分支</span></span><br><span class="line"><span class="comment"># 去pull request，添加分支合并</span></span><br><span class="line"><span class="comment"># squash and merge，delete分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待远端更新完毕</span></span><br><span class="line">$ git checkout main<span class="comment">#切换到主分支</span></span><br><span class="line">$ git branch -D 分支名    <span class="comment">#删除自己创建的分支</span></span><br><span class="line">$ git pull origin main<span class="comment">#拉取船新版本</span></span><br><span class="line">$ git checkout -b raliz<span class="comment">#创建新分支，并在该分支下工作</span></span><br></pre></td></tr></table></figure><p>你可能发现了，git rebase 和 git merge都能合并分支，但你知道两种的区别嘛？</p><h2 id="git-merge-main-和-git-rebase-main的区别"><a href="#git-merge-main-和-git-rebase-main的区别" class="headerlink" title="git merge main 和 git rebase main的区别"></a>git merge main 和 git rebase main的区别</h2><h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><p>merge会<strong>在feature分支中新增一个新的merge commit</strong>，然后将两个分支的历史联系在一起。</p><p>是一种<strong>非破坏性的操作</strong>，对现有的分支不会造成任何方式的改变。</p><p>分支每次需要合并上游更改时，它都产生一个额外的和并提交。</p><p><strong>如果main分支提交十分活跃，那么可能会严重污染feature分支记录</strong>，可以使用git log来解决。</p><img src="../images/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91-Git%E5%B7%A5%E4%BD%9C%E6%B5%81/S5YmfCK7wW1JxTB.png" alt="git-merge" style="zoom: 33%;" /><h3 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h3><p>rebase会将整个feature分支移动到main分支的顶端，有效整合了所有main分支的提交。</p><p>rebase通过为原始分支中每个提交创建全新commits来重写项目历史记录。</p><p>rebase能使得获得更清晰的项目历史，消除了git merge那样不必要的和并提交。</p><img src="../images/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91-Git%E5%B7%A5%E4%BD%9C%E6%B5%81/F1qIGKTNDW6aRul.png" alt="git-rebase" style="zoom:33%;" /><p><img src="../images/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91-Git%E5%B7%A5%E4%BD%9C%E6%B5%81/image-20230720203517949.png" alt="image-20230720203517949" style="zoom: 50%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230720203413810.png" alt="image-20230720203413810" style="zoom: 50%;" /></p><p>rebase rebase feature，等效与创建了新提交，且老的提交只是不能再被访问使用</p><h1 id="GitHub工作流学习实践总结"><a href="#GitHub工作流学习实践总结" class="headerlink" title="GitHub工作流学习实践总结"></a>GitHub工作流学习实践总结</h1><p>这个工作流是跟着一超级牛牛up主学的，比较规范。</p><p>下面的内容</p><p><strong>更适合开源项目</strong></p><p><strong>更适合开源项目</strong></p><p><strong>更适合开源项目</strong></p><h2 id="fork"><a href="#fork" class="headerlink" title="fork"></a>fork</h2><blockquote><p>fork-分叉，是在github账户上完成的。</p><p>fork一个存储库，会在我们的GitHub账户上创建一个原始存储库的副本。</p><p>对分叉存储库所做的更改，可以通过一个pull请求与原始存储库合并。</p><p>fork只包含存储库的一个单独副本，不涉及命令。</p></blockquote><h3 id="必要性"><a href="#必要性" class="headerlink" title="必要性"></a>必要性</h3><ul><li>一些项目仓库在安全设置上会禁止直接在主仓库直接push——在参与开源项目代码贡献时，通常不会直接获得源代码仓库的Developer权限。这点和一般公司开发不太一样，公司一般都是设置在分支上是否有Push权限。</li><li>自己修改一些东西不会影响到主仓库，而且比较安全合理，很巧妙啊。</li></ul><h3 id="相关操作"><a href="#相关操作" class="headerlink" title="相关操作"></a>相关操作</h3><h4 id="fork一下"><a href="#fork一下" class="headerlink" title="fork一下"></a>fork一下</h4><p><img src="../images/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91-Git%E5%B7%A5%E4%BD%9C%E6%B5%81/image-20230218103127303.png" alt="image-20230218103127303"></p><p>这样子就在自己账号下生成分仓库力！</p><p><img src="../images/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91-Git%E5%B7%A5%E4%BD%9C%E6%B5%81/image-20230218103208307.png" alt="image-20230218103208307"></p><h4 id="同步一下"><a href="#同步一下" class="headerlink" title="同步一下"></a>同步一下</h4><blockquote><p>查了很多地方，百度搜出来的最不靠谱，官方文档最靠谱↓</p><p><a href="https://docs.github.com/zh/pull-requests/collaborating-with-pull-requests/working-with-forks/syncing-a-fork">https://docs.github.com/zh/pull-requests/collaborating-with-pull-requests/working-with-forks/syncing-a-fork</a></p></blockquote><h5 id="在WebUI同步分叉分支"><a href="#在WebUI同步分叉分支" class="headerlink" title="在WebUI同步分叉分支"></a>在WebUI同步分叉分支</h5><ol><li><p>在 GitHub 上，导航到您想要与上游版本库同步的复刻仓库主页。</p></li><li><p>选择“同步分支”下拉菜单。</p><p><img src="https://docs.github.com/assets/cb-18605/images/help/repository/sync-fork-dropdown.png" alt="突出显示“同步分支”下拉菜单"></p></li><li><p>查看有关上游存储库提交的详细信息，然后单击“更新分支”。<img src="../images/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91-Git%E5%B7%A5%E4%BD%9C%E6%B5%81/update-branch-button.png" alt="突出显示“更新分支”按钮的同步分支模式"></p></li></ol><p>如果上游仓库的更改导致冲突，GitHub 将提示您创建拉取请求以解决冲突。</p><h5 id="从命令行同步分叉分支"><a href="#从命令行同步分叉分支" class="headerlink" title="从命令行同步分叉分支"></a>从命令行同步分叉分支</h5><ol><li><p>打开Git Bash。</p></li><li><p>将当前工作目录更改为您的本地仓库。</p></li><li><p>从上游仓库获取分支及其各自的提交。 对 <code>BRANCHNAME</code> 的提交将保存在本地分支 <code>upstream/BRANCHNAME</code> 中。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git fetch upstream</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">remote: Counting objects: 75, <span class="keyword">done</span>.</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">remote: Compressing objects: 100% (53/53), <span class="keyword">done</span>.</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">remote: Total 62 (delta 27), reused 44 (delta 9)</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Unpacking objects: 100% (62/62), <span class="keyword">done</span>.</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">From https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"> * [new branch]      main     -&gt; upstream/main</span></span><br></pre></td></tr></table></figure></li><li><p>签出分支的本地默认分支，在本例中，我们使用 <code>main</code>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout main</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Switched to branch <span class="string">&#x27;main&#x27;</span></span></span><br></pre></td></tr></table></figure></li><li><p>将上游默认分支（在本例中为 <code>upstream/main</code>）的更改合并到本地默认分支中。 这会使复刻的默认分支与上游仓库同步，而不会丢失本地更改。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge upstream/main</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Updating a422352..5fdff0f</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Fast-forward</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"> README                    |    9 -------</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"> README.md                 |    7 ++++++</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"> 2 files changed, 7 insertions(+), 9 deletions(-)</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"> delete mode 100644 README</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"> create mode 100644 README.md</span></span><br></pre></td></tr></table></figure><p>如果本地分支没有任何唯一提交，Git 将执行快速转发。 有关详细信息，请参阅 Git 文档中的<a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging">基本分支和合并</a>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge upstream/main</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Updating 34e91da..16c56ad</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Fast-forward</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"> README.md                 |    5 +++--</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"> 1 file changed, 3 insertions(+), 2 deletions(-)</span></span><br></pre></td></tr></table></figure><p>如果本地分支具有唯一提交，则可能需要解决冲突。</p></li></ol><h4 id="继续开发"><a href="#继续开发" class="headerlink" title="继续开发"></a>继续开发</h4><p>这样子就能保证项目基本开发线性啦</p><h2 id="pr基本流程"><a href="#pr基本流程" class="headerlink" title="pr基本流程"></a>pr基本流程</h2><p>在for不fork的基础上↓</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 最开始</span></span><br><span class="line"><span class="variable">$</span> git clone<span class="comment">#将远程仓库的代码拉到本地(local-git)</span></span><br><span class="line"><span class="comment"># 记得切换新分支哦！</span></span><br><span class="line"><span class="variable">$</span> git checkout <span class="literal">-b</span> 分支名  <span class="comment">#创建新的分支，并在该分支下工作（例:git checkout mybranch）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写完一些东西，想更新一下仓库时</span></span><br><span class="line"><span class="variable">$</span> git add <span class="literal">--all</span>或git add .  <span class="comment">#添加等待commit</span></span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;XXX&quot;</span>   <span class="comment">#放进local-git里(“附加信息”，一般就&quot;update from XXX&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># commit之后</span></span><br><span class="line"><span class="variable">$</span> git checkout main<span class="comment">#先切换到主分支</span></span><br><span class="line"><span class="variable">$</span> git pull origin main<span class="comment">#把远端main同步到local_main中</span></span><br><span class="line"><span class="variable">$</span> git checkout raliz<span class="comment">#切换到自己的分支</span></span><br><span class="line"><span class="variable">$</span> git rebase/merge main    <span class="comment">#将自己分支的代码和主分支上的新代码合并</span></span><br><span class="line"><span class="comment"># 这里可能需要手动解决rebase conflict，看一下自己的编译器，操作一下</span></span><br><span class="line"><span class="variable">$</span> git add <span class="literal">--all</span> 或 .</span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;msg&quot;</span></span><br><span class="line"><span class="variable">$</span> git rebase cotinue</span><br><span class="line"><span class="variable">$</span> git push (<span class="operator">-f</span>) origin 分支名  <span class="comment">#(强行)push，将合并后的分支推送到远程仓库的对应分支</span></span><br><span class="line"><span class="comment"># 去pull request，添加分支合并</span></span><br><span class="line"><span class="comment"># squash and merge，delete分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待远端更新完毕</span></span><br><span class="line"><span class="variable">$</span> git checkout main<span class="comment">#切换到主分支</span></span><br><span class="line"><span class="variable">$</span> git branch <span class="literal">-D</span> 分支名    <span class="comment">#删除自己创建的分支</span></span><br><span class="line"><span class="variable">$</span> git pull origin main<span class="comment">#拉取船新版本</span></span><br><span class="line"><span class="variable">$</span> git checkout <span class="literal">-b</span> raliz<span class="comment">#创建新分支，并在该分支下工作</span></span><br></pre></td></tr></table></figure><p>牛牛！！</p><h2 id="commite-message"><a href="#commite-message" class="headerlink" title="commite message"></a>commite message</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">type</span>&gt;: &lt;subject&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span>(必须)——用于说明git commit的类别，只允许使用下面的标识。</span><br><span class="line">feat：新功能（feature）。</span><br><span class="line">fix/to：修复bug，可以是QA发现的BUG，也可以是研发自己发现的BUG。</span><br><span class="line">fix：产生diff并自动修复此问题。适合于一次提交直接修复问题</span><br><span class="line">to：只产生diff不自动修复此问题。适合于多次提交。最终修复问题提交时使用fix</span><br><span class="line">docs：文档（documentation）。</span><br><span class="line">style：格式（不影响代码运行的变动）。</span><br><span class="line">refactor：重构（即不是新增功能，也不是修改bug的代码变动）。</span><br><span class="line">perf：优化相关，比如提升性能、体验。</span><br><span class="line">test：增加测试。</span><br><span class="line">chore：构建过程或辅助工具的变动。</span><br><span class="line">revert：回滚到上一个版本。</span><br><span class="line">merge：代码合并。</span><br><span class="line">sync：同步主线或分支的Bug。</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">feat: 添加 button 组件</span><br><span class="line">fix: 修复 button 组件 circle 样式</span><br><span class="line">refactor(docs): 添加input文档</span><br></pre></td></tr></table></figure><h2 id="常用命令行"><a href="#常用命令行" class="headerlink" title="常用命令行"></a>常用命令行</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> git branch<span class="comment">#查看本地所有分支</span></span><br><span class="line"><span class="variable">$</span> git branch <span class="literal">-m</span> oldName newName<span class="comment">#更改分支名</span></span><br><span class="line"><span class="variable">$</span> git remote <span class="literal">-v</span><span class="comment">#查看本地关联地址</span></span><br><span class="line"><span class="variable">$</span> git remote remove origin<span class="comment">#删除现在关远程仓库</span></span><br><span class="line"><span class="variable">$</span> git remote add origin XXX<span class="comment">#添加新的远程仓库</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git rebase <span class="literal">--abort</span><span class="comment">#取消rebase</span></span><br></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>提交pr过程中要注意这些问题，不然自己都会嫌弃自己。</p><ul><li>分支名字尽量用新增的功能或者修复了什么 bug 命名</li><li>干一点就提交一点，不然要过度rebase</li></ul>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>HTTP跟学笔记</title>
      <link href="/post/7743.html"/>
      <url>/post/7743.html</url>
      
        <content type="html"><![CDATA[<h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><p>正经人谁学HTTP啊</p><h2 id="初识"><a href="#初识" class="headerlink" title="初识"></a>初识</h2><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094221823.png" alt="image-20230211094221823"></p><h3 id="什么是HTTP？"><a href="#什么是HTTP？" class="headerlink" title="什么是HTTP？"></a>什么是HTTP？</h3><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094241402.png" alt="image-20230211094241402"></p><h2 id="协议分析"><a href="#协议分析" class="headerlink" title="协议分析"></a>协议分析</h2><h3 id="变化"><a href="#变化" class="headerlink" title="变化"></a>变化</h3><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094253459.png" alt="image-20230211094253459"></p><h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>以HTTP/1.1为例：</p><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094305325.png" alt="image-20230211094305325"></p><h3 id="1-Method"><a href="#1-Method" class="headerlink" title="1.Method"></a>1.Method</h3><h4 id="常见"><a href="#常见" class="headerlink" title="常见"></a>常见</h4><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094316160.png" alt="image-20230211094316160"></p><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul><li><p>Safe安全：不会修改服务器的数据的方法</p><blockquote><p>GET HEAD OPTIONS</p></blockquote></li><li><p>Indempotene幂等：同样的请求被执行一次与连续执行多次的效果是一样的，服务器的状态也是一样的，所有的safe的方法都是幂等的</p><blockquote><p>GET HEAD OPTIONS PUT DELETE</p></blockquote></li></ul><h3 id="2-状态码"><a href="#2-状态码" class="headerlink" title="2.状态码"></a>2.状态码</h3><h4 id="常见-1"><a href="#常见-1" class="headerlink" title="常见"></a>常见</h4><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094325151.png" alt="image-20230211094325151"></p><h4 id="RESTful-API"><a href="#RESTful-API" class="headerlink" title="RESTful API"></a>RESTful API</h4><p>Representational State Transfer（REST）ful API</p><p>一种API设计风格</p><h5 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h5><ol><li>每个URI代表一种资源</li><li>客户端和服务器之间，传递这种资源的某种表现层</li><li>客户端通过HTTP method，对服务器端资源进行操作，实现“表现层状态转化”</li></ol><h5 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h5><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094336678.png" alt="image-20230211094336678"></p><h3 id="3-请求头"><a href="#3-请求头" class="headerlink" title="3.请求头"></a>3.请求头</h3><h4 id="常用请求头"><a href="#常用请求头" class="headerlink" title="常用请求头"></a>常用请求头</h4><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094405977.png" alt="image-20230211094405977"></p><h3 id="4-缓存"><a href="#4-缓存" class="headerlink" title="4.缓存"></a>4.缓存</h3><h4 id="强缓存-协商缓存"><a href="#强缓存-协商缓存" class="headerlink" title="强缓存/协商缓存"></a>强缓存/协商缓存</h4><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094419297.png" alt="image-20230211094419297"></p><h4 id="优先级-流程"><a href="#优先级-流程" class="headerlink" title="优先级/流程"></a>优先级/流程</h4><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094428650.png" alt="image-20230211094428650"></p><h3 id="5-cookie"><a href="#5-cookie" class="headerlink" title="5.cookie"></a>5.cookie</h3><h4 id="Set-Cookie-response"><a href="#Set-Cookie-response" class="headerlink" title="Set-Cookie -response"></a>Set-Cookie -response</h4><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094442637.png" alt="image-20230211094442637"></p><h3 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP/2"></a>HTTP/2</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>更快更稳更简单</p><h4 id="一些名词"><a href="#一些名词" class="headerlink" title="一些名词"></a>一些名词</h4><ul><li> 帧：HTTP/2通信的最小单位，每个帧都包含帧头，至少也会标识出当前帧所属的数据流</li><li>二进制 极大提高效率</li><li>压缩算法 极大提高效率</li><li>消息：与逻辑请求或响应消息对应的完整的一系列帧。</li><li>数据流：已建立的连接内的双向字节流，可以承载一条或多条消息。</li><li>交错发送，接收方重组织</li></ul><h4 id="一些特性"><a href="#一些特性" class="headerlink" title="一些特性"></a>一些特性</h4><ul><li>HTTP/2连接都是永久的，而且仅需要每个来源一个连接</li><li>流控制：阻止发送方向接收方发送大量数据的机制</li><li>服务器推送：服务器主动推送一些信息（比如一些静态资源，但是要根据实际情况，不要盲目怼进去）</li></ul><h3 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h3><h4 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h4><ul><li>HTTPS Hypertext Transfer Protocol Secure</li><li>经过TSL/SSL加密</li></ul><h4 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h4><ul><li> 对称加密：加密和解密都是使用同一个密钥</li><li>非对称加密，加密和解密需要使用两个不同的密钥：公钥(public key)和私钥(private key)</li><li>为了达到更高安全性——两者混用↓</li></ul><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094458634.png" alt="image-20230211094458634"></p><h2 id="常见场景"><a href="#常见场景" class="headerlink" title="常见场景"></a>常见场景</h2><h3 id="静态资源"><a href="#静态资源" class="headerlink" title="静态资源"></a>静态资源</h3><p>好玩吧</p><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094458634-1676694486063-29.png" alt="image-20230211094458634"></p><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211104616306.png" alt="image-20230211104616306"></p><h4 id="OPTIONS引出"><a href="#OPTIONS引出" class="headerlink" title="OPTIONS引出"></a>OPTIONS引出</h4><ul><li>跨域问题-cross-origin</li><li>需要same-origin</li></ul><p>https:       //<a href="http://www.example.com/">www.example.com</a>     :443<br>scheme     host name                    port</p><h4 id="如何解决跨域问题？"><a href="#如何解决跨域问题？" class="headerlink" title="如何解决跨域问题？"></a>如何解决跨域问题？</h4><ol><li><p>CORS    Cross-Origin Resource Sharing</p><ul><li><p>预请求：获知服务端是否允许该跨源请求（复杂请求）</p></li><li><p>相关协议头<br>Access-Control-Allow-Origin<br>Access-Control-Expose-Headers<br>Access-Control-Max-Age<br>Access-Control-Allow-Credentials<br>Access-Control-Allow-Methods<br>Access-Control-Allow-Headers<br>Access-Control-Request-Method<br>Access-Control-Request-Headers<br>Origin</p></li></ul></li><li><p>代理服务器</p><ul><li><p>同源策略是浏览器的安全策略，不是HTTP的</p><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211105054923.png" alt="image-20230211105054923"></p></li></ul></li><li><p>Iframe</p><ul><li>诸多不便</li></ul></li></ol><h4 id="携带信息"><a href="#携带信息" class="headerlink" title="携带信息"></a>携带信息</h4><ol><li>向什么地址做了什么动作？（栗子）<ul><li>使用POST方法</li><li>目标域名https:/sso.toutiao.com</li><li>目标path/quick_login,/v2/</li></ul></li><li>携带了哪些信息，返回了哪些信息？<ul><li>携带信息<pre><code>Post body,数据格式为form希望获取的数据格式为json已有的cookie</code></pre></li><li>返回信息<pre><code>数据格式json种cookie的信息</code></pre></li></ul></li></ol><h4 id="鉴权"><a href="#鉴权" class="headerlink" title="鉴权"></a>鉴权</h4><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211105550005.png" alt="image-20230211105550005"></p><h4 id="SSO单点登录"><a href="#SSO单点登录" class="headerlink" title="SSO单点登录"></a>SSO单点登录</h4><p>单点登录（Single Sign-On，缩写为 SSO）是一种用户认证方式，使用一个凭证（如用户名和密码）即可登录多个相关系统。这样，用户只需要登录一次就可以在多个系统中访问所需的资源，而不需要在每个系统上进行独立登录。</p><p>单点登录通常用于组织内部的系统，如企业内部的人力资源系统、财务系统等。它的好处在于简化了用户登录过程，提高了用户体验，并且提高了安全性。</p><h2 id="实际应用"><a href="#实际应用" class="headerlink" title="实际应用"></a>实际应用</h2><h3 id="XHR"><a href="#XHR" class="headerlink" title="XHR"></a>XHR</h3><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211153030107.png" alt="image-20230211153030107"></p><h3 id="Fetch"><a href="#Fetch" class="headerlink" title="Fetch"></a>Fetch</h3><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211153051629.png" alt="image-20230211153051629"></p><h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><h4 id="HTTP-HTTPS"><a href="#HTTP-HTTPS" class="headerlink" title="HTTP/HTTPS"></a>HTTP/HTTPS</h4><ul><li>默认模块，无需安装其他依赖</li><li>功能有限/不是十分友好</li></ul><h4 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h4><ul><li>支持浏览器、nodejs环境</li><li>丰富的拦截器</li></ul><h3 id="网络优化"><a href="#网络优化" class="headerlink" title="网络优化"></a>网络优化</h3><h4 id="快"><a href="#快" class="headerlink" title="快"></a>快</h4><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211153308004.png" alt="image-20230211153308004"></p><h4 id="稳"><a href="#稳" class="headerlink" title="稳"></a>稳</h4><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211153414258.png" alt="image-20230211153414258"></p><ul><li>重试是保证稳定的有效手段，但是要防止加剧恶劣情况</li><li>缓存合理使用，作为最后的一道防线</li></ul><h2 id="了解更多"><a href="#了解更多" class="headerlink" title="了解更多"></a>了解更多</h2><h3 id="通信方式"><a href="#通信方式" class="headerlink" title="通信方式"></a>通信方式</h3><h4 id="WEbSocket"><a href="#WEbSocket" class="headerlink" title="WEbSocket"></a>WEbSocket</h4><ul><li>浏览器与服务器进行全双工通讯的网络技术</li><li>典型场景：实时性要求高，例如聊天室</li><li>URL使用ws://或wSs:/等开头</li></ul><h3 id="传输层UDP"><a href="#传输层UDP" class="headerlink" title="传输层UDP"></a>传输层UDP</h3><h4 id="QUIC（目前不适合大规模应用）"><a href="#QUIC（目前不适合大规模应用）" class="headerlink" title="QUIC（目前不适合大规模应用）"></a>QUIC（目前不适合大规模应用）</h4><ul><li>QUIC:Quick UDP Internet Connection</li><li>O-RTT建联（首次建联除外）。</li><li>类似TCP的可靠传输。</li><li>类似TLS的加密传输，支持完美前向安全。</li><li>用户空间的拥塞控制，最新的BBR算法。</li><li>支持h2的基于流的多路复用，但没有TCP的HOL问题。</li><li>前向纠错FEC。</li><li>类似MPTCP的Connection migration。</li></ul><p><img src="../images/HTTP%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211153755036.png" alt="image-20230211153755036"></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TS跟学笔记</title>
      <link href="/post/bd24.html"/>
      <url>/post/bd24.html</url>
      
        <content type="html"><![CDATA[<h1 id="TS"><a href="#TS" class="headerlink" title="TS"></a>TS</h1><p>正经人谁学TS啊</p><h2 id="发展历史"><a href="#发展历史" class="headerlink" title="发展历史"></a>发展历史</h2><blockquote><ul><li>2012-10:微软发布了TypeScript第-个版本(0.8)</li><li>2014-10:Angular2发布了基于TypeScript的2.0版本</li><li>2015-04:微软发布了Visual Studio Code</li><li>2016-05:@types/react?发布，TypeScript可开发React</li><li>2020-09:ue发布了3.0版本，官方支持TypeScript</li><li>2021-11:v4.5版本发布</li></ul></blockquote><h2 id="为什么TS"><a href="#为什么TS" class="headerlink" title="为什么TS"></a>为什么TS</h2><h3 id="和JS的比较"><a href="#和JS的比较" class="headerlink" title="和JS的比较"></a>和JS的比较</h3><table><thead><tr><th>JS</th><th>TS</th></tr></thead><tbody><tr><td>动态类型</td><td>静态类型</td></tr><tr><td>弱类型语言</td><td>弱类型语言</td></tr></tbody></table><h4 id="动态类型"><a href="#动态类型" class="headerlink" title="动态类型"></a>动态类型</h4><p>在执行阶段才确定类型的匹配。编译在执行时</p><h4 id="静态类型"><a href="#静态类型" class="headerlink" title="静态类型"></a>静态类型</h4><p>提前确定类型匹配。编译在执行前</p><h4 id="弱类型语言"><a href="#弱类型语言" class="headerlink" title="弱类型语言"></a>弱类型语言</h4><p>数据类型可以被忽略的语言=&gt;一个变量可以赋不同的数据类型的值。</p><h4 id="强类型语言"><a href="#强类型语言" class="headerlink" title="强类型语言"></a>强类型语言</h4><p>强制数据类型定义的语言=&gt;一个变量被指定了某个数据类型，如果不经过强制转换，永远是这个类型=&gt;一个类型的变量不会被当成另一种类型处理，（强类型定义语言是类型安全的语言）</p><h4 id="TS优势"><a href="#TS优势" class="headerlink" title="TS优势"></a>TS优势</h4><h5 id="静态类型-1"><a href="#静态类型-1" class="headerlink" title="静态类型"></a>静态类型</h5><ul><li>可读性增强：基于语法解析TSDoc，ide增强</li><li>可维护性增强：在编译阶段暴露大部分错误=&gt;多人合作的大型项目中获得更好的稳定性和开发效率</li></ul><h5 id="JS的超集"><a href="#JS的超集" class="headerlink" title="JS的超集"></a>JS的超集</h5><ul><li>包含于兼容所有的JS特性，支持共存</li><li>支持渐进式引入的升级</li></ul><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h3 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h3><p>JS</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> q = <span class="string">&#x27;string&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> w = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> e = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> r = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> t = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><p>TS</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">q</span>: <span class="built_in">string</span> = <span class="string">&#x27;string&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">w</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">e</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">r</span>: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">ocnst <span class="attr">t</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><h3 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h3><p>TS</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">bytedancer</span>: <span class="title class_">IBytedancer</span> = &#123;</span><br><span class="line">    <span class="attr">jobId</span>: <span class="number">9303245</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Lin&#x27;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&#x27;man&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">28</span>,</span><br><span class="line">    <span class="attr">hobby</span>: swimming<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*自定义对象类型：I开头表示是个类型，与普通对象/类的作区分*/</span></span><br><span class="line"><span class="string">interface IBytedancer &#123;</span></span><br><span class="line"><span class="string">    /*只读属性：约束属性不可在对象初始化外赋值*/</span></span><br><span class="line"><span class="string">    readonly jobId: number;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    name: string;</span></span><br><span class="line"><span class="string">    sex: &#x27;</span>man<span class="string">&#x27;|&#x27;</span>woman<span class="string">&#x27;|&#x27;</span>other<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">    age: number;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    /*可选属性：定义该属性可以不存在*/</span></span><br><span class="line"><span class="string">    hobby?: string;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    /*任意属性：约束所有对象属性都必须是该属性的子类型*/</span></span><br><span class="line"><span class="string">    [key: string]: any;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*报错：无法分配到&quot;jobId”,因为它是只读属性*/</span></span><br><span class="line"><span class="string">bytedancer.jobId = 12345;</span></span><br><span class="line"><span class="string">/*成功：任意属性标注下可以添加任意属性*/</span></span><br><span class="line"><span class="string">bytedancer.plateform = &#x27;</span>data<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">/*报错：缺少属性&quot;name&quot;,hobby可缺省*/</span></span><br><span class="line"><span class="string">const bytedancer2: IBytedancer = &#123;</span></span><br><span class="line"><span class="string">    jobId: 89757,</span></span><br><span class="line"><span class="string">    sex: &#x27;</span>woman<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    age: 18,</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h3><p>JS</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mult</span> = (<span class="params">x, y</span>) =&gt; x * y;</span><br></pre></td></tr></table></figure><p>TS</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">mult</span>: <span class="function">(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x * y;</span><br><span class="line">↓更加清晰</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IMult</span> &#123;</span><br><span class="line">    (<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">mult</span>: <span class="title class_">IMult</span> = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x * y;</span><br></pre></td></tr></table></figure><h3 id="函数重载"><a href="#函数重载" class="headerlink" title="函数重载"></a>函数重载</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*对getDate函数进行重载，timestamp为可缺省参数*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getDate</span>(<span class="params"><span class="keyword">type</span>:<span class="string">&#x27;string&#x27;</span>,timestamp?:<span class="built_in">string</span></span>):<span class="built_in">string</span>;</span><br><span class="line">↓</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IGetDate</span> &#123;</span><br><span class="line">    (<span class="attr">type</span>:<span class="string">&#x27;string&#x27;</span>,timestamp?:<span class="built_in">string</span>):<span class="built_in">string</span>;</span><br><span class="line">    (<span class="attr">type</span>:<span class="string">&#x27;date&#x27;</span>,timestamp?:<span class="built_in">string</span>):<span class="title class_">Date</span>;</span><br><span class="line">    (<span class="attr">type</span>:<span class="string">&#x27;string&#x27;</span>|<span class="string">&#x27;date&#x27;</span>,timestamp?:<span class="built_in">string</span>):<span class="title class_">Date</span> <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 报错，因为没有给参数声明类型 */</span></span><br><span class="line"><span class="comment">/*不能将类型“(type:any,timestamp:any)=&gt;string|Date&quot;分配给类型“IGetDate”。</span></span><br><span class="line"><span class="comment">不能将类型“string|Date&quot;分配给类型“string”。</span></span><br><span class="line"><span class="comment">不能将类型“Date”分配给类型“string”。ts(322) */</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">getDate2</span>:<span class="title class_">IGetDate</span> = <span class="function">(<span class="params"><span class="keyword">type</span>, timestamp</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(timestamp);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">type</span> ===<span class="string">&#x27;string&#x27;</span> ? date.<span class="title function_">toLocalestring</span>():date;</span><br><span class="line">&#125;</span><br><span class="line">也就是说，函数里面的函数的类型范围要小于函数本身所在的类型范围。</span><br></pre></td></tr></table></figure><h3 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*「类型+方括号」表示-常用*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IArr1</span> = <span class="built_in">number</span>[];</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IArr</span> = <span class="built_in">string</span>[];</span><br><span class="line"><span class="comment">/*泛型表示-常用,第三个是对象的简写形式*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IArr2</span> = <span class="title class_">Array</span>&lt;<span class="built_in">string</span> | <span class="built_in">number</span> | <span class="title class_">Record</span>&lt;<span class="built_in">string</span>,<span class="built_in">number</span>&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*元祖表示*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IArr3</span> = [<span class="built_in">number</span>, <span class="built_in">number</span>, <span class="built_in">string</span>, <span class="built_in">string</span>];</span><br><span class="line"><span class="comment">/*接口表示*/</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IArr4</span> &#123;</span><br><span class="line">    [<span class="attr">key</span>: <span class="built_in">number</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr1</span>: <span class="title class_">IArr1</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr2</span>: <span class="title class_">IArr2</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;];</span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr3</span>: <span class="title class_">IArr3</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr4</span>: <span class="title class_">IArr4</span> [<span class="string">&#x27;string&#x27;</span>,<span class="function">() =&gt;</span> <span class="literal">null</span>, &#123;&#125;, []];</span><br></pre></td></tr></table></figure><h3 id="TS补充类型"><a href="#TS补充类型" class="headerlink" title="TS补充类型"></a>TS补充类型</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*空类型，表示无赋值*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IEmptyFunction</span> = <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"><span class="comment">/*任意类型，是所有类型的子类型*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IAnyType</span> = <span class="built_in">any</span>;</span><br><span class="line"><span class="comment">/*枚举类型：支持枚举值到枚举名的正、反向映射*/</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">EnumExample</span> &#123;</span><br><span class="line">    add = <span class="string">&#x27;+&#x27;</span>,</span><br><span class="line">mult = <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">EnumExample</span>[<span class="string">&#x27;add&#x27;</span>] === <span class="string">&#x27;+&#x27;</span>;</span><br><span class="line"><span class="title class_">EnumExample</span>[<span class="string">&#x27;*&#x27;</span>] === <span class="string">&#x27;mult&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">ECorlor</span> &#123; <span class="title class_">Mon</span>, <span class="title class_">Tue</span>, <span class="title class_">Wed</span>, <span class="title class_">Thu</span>, <span class="title class_">Fri</span>, <span class="title class_">Sat</span>, <span class="title class_">Sun</span> &#125;;</span><br><span class="line"><span class="title class_">ECorlor</span>[<span class="string">&#x27;Mon&#x27;</span>] === <span class="number">0</span>;</span><br><span class="line"><span class="title class_">ECorlor</span>[<span class="number">0</span>] === <span class="string">&#x27;Mon&#x27;</span>;</span><br><span class="line"><span class="comment">/* 泛型 */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">INumArr</span> = <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt;;</span><br></pre></td></tr></table></figure><h3 id="TS泛型"><a href="#TS泛型" class="headerlink" title="TS泛型"></a>TS泛型</h3><p>特征：不预先指定类型的时候，也就是在使用某类型时，才确定该类型。</p><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getRepeatArr</span>(<span class="params">target</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">100</span>).<span class="title function_">fill</span>(target);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IGetRepeatArr</span> = <span class="function">(<span class="params">target: <span class="built_in">any</span></span>) =&gt;</span> <span class="built_in">any</span>[];</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 不预先指定具体的类型，而在使用的时候再指定类型的一种特性 */</span></span><br><span class="line"><span class="comment">/* 函数中泛型：&lt;T&gt;函数定义 */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IGetRepeatArrR</span> = &lt;T&gt;<span class="function">(<span class="params">target: T</span>) =&gt;</span> T[];</span><br></pre></td></tr></table></figure><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 类，泛型接口，Object中：类型名&lt;T&gt; */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 泛型接口 &amp; 多泛型 */</span></span><br><span class="line"><span class="keyword">interface</span> IX&lt;T,U&gt; &#123;</span><br><span class="line">    <span class="attr">key</span>: T;</span><br><span class="line">    <span class="attr">val</span>: U;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 泛型类 */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IMan</span>&lt;T&gt; &#123;</span><br><span class="line"><span class="attr">instance</span>: T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 泛型别名 */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ITypeArr</span>&lt;T&gt; = <span class="title class_">Array</span>&lt;T&gt;;</span><br></pre></td></tr></table></figure><h4 id="有点高级的语法"><a href="#有点高级的语法" class="headerlink" title="有点高级的语法"></a>有点高级的语法</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">函数的泛型</span><br><span class="line"><span class="comment">/* 泛型约束：限制泛型必须符合字符串 */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IGetRepeatStringArr</span> = &lt;T <span class="keyword">extends</span> <span class="built_in">string</span>&gt;<span class="function">(<span class="params">target: T</span>) =&gt;</span> T[]; </span><br><span class="line"><span class="keyword">const</span> <span class="attr">getstrArr</span>: <span class="title class_">IGetRepeatStringArr</span> = <span class="function"><span class="params">target</span> =&gt;</span> <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">100</span>).<span class="title function_">fill</span>(target);</span><br><span class="line"><span class="comment">/*报错：类型“number&quot;的参数不能赋给类型“string”的参数*/</span></span><br><span class="line"><span class="title function_">getstrArr</span>(<span class="number">123</span>);</span><br></pre></td></tr></table></figure><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">类型别名的泛型</span><br><span class="line"><span class="comment">/*泛型参数默认类型*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IGetRepeatArr</span>&lt;T = <span class="built_in">number</span>&gt;<span class="function">(<span class="params">target: T</span>) =&gt;</span> T[];</span><br><span class="line"><span class="keyword">const</span> <span class="attr">getRepeatArr</span>: <span class="title class_">IGetRepeatArr</span> target = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">100</span>).<span class="title function_">fill</span>(target);</span><br><span class="line"><span class="comment">/*报错：类型“string”的参数不能赋给类型“number&quot;的参数*/</span></span><br><span class="line"><span class="title function_">getRepeatArr</span>(<span class="string">&#x27;123&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="类型别名-amp-类型断言"><a href="#类型别名-amp-类型断言" class="headerlink" title="类型别名&amp;类型断言"></a>类型别名&amp;类型断言</h3><p>这段代码是使用TypeScript定义了一个函数”keyBy”，它用于将一个对象数组转换为一个键值对字典。</p><p>第1行：通过”type”关键字定义了一个别名类型”IObjArr”，它代表了一个对象数组，每个元素都是一个包含key属性与任意其他属性的对象。</p><p>第3行：声明了一个名为”keyBy”的函数，它参数为”objArr”，它类型为Array<T>，T继承自IObjArr，意味着objArr的元素必须是包含key属性的对象。</p><p>第5行：定义了一个名为result的变量，初始值是将objArr使用reduce方法转换为的对象，reduce方法会接收一个回调函数，对数组进行遍历，不断累积最终的结果。</p><p>第9行：使用”as”关键字断言result的类型为Record&lt;string,T&gt;，意味着result是一个以字符串为键，T类型为值的字典。</p><p>最后，返回result。</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*通过type关键字定义了I0 bjArrl的别名类型*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IObjArr</span> = <span class="title class_">Array</span>&lt;&#123;</span><br><span class="line">    <span class="attr">key</span>: <span class="built_in">string</span>;</span><br><span class="line">    [<span class="attr">objKey</span>: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;&gt;</span><br><span class="line"><span class="keyword">function</span> keyBy&lt;T <span class="keyword">extends</span> <span class="title class_">IObjArr</span>&gt;(<span class="attr">objArr</span>: <span class="title class_">Array</span>&lt;T&gt;)&#123;</span><br><span class="line"><span class="comment">/*未指定类型时，result类型为&#123;&#125;*/</span></span><br><span class="line">    <span class="keyword">const</span> result = objArr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">res, val, key</span>) =&gt;</span> &#123;</span><br><span class="line">    res[key] = val;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;,&#123;&#125;);</span><br><span class="line"><span class="comment">/*通过as关键字，断言result类型为正确类型*/</span></span><br><span class="line"><span class="keyword">return</span> result <span class="keyword">as</span> <span class="title class_">Record</span>&lt;<span class="built_in">string</span>,T&gt;;</span><br></pre></td></tr></table></figure><h3 id="字符串-数字-字面量"><a href="#字符串-数字-字面量" class="headerlink" title="字符串/数字 字面量"></a>字符串/数字 字面量</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*允许指定字符串/数字必须的固定值*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*IDomTag必须为html、body、div、span中的其一*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IDomTag</span> = <span class="string">&#x27;html&#x27;</span> | <span class="string">&#x27;body&#x27;</span> | <span class="string">&#x27;div&#x27;</span> | <span class="string">&#x27;span&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*I0 ddNumber必须为1、3、5、7、9中的其一*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IOddNumber</span> = <span class="number">1</span> |<span class="number">3</span> | <span class="number">5</span> | <span class="number">7</span> | <span class="number">9</span>;</span><br></pre></td></tr></table></figure><h2 id="高级类型"><a href="#高级类型" class="headerlink" title="高级类型"></a>高级类型</h2><h3 id="来自chatGPT"><a href="#来自chatGPT" class="headerlink" title="来自chatGPT"></a>来自chatGPT</h3><p>一些常用类型：</p><ol><li>可读属性</li><li>可选属性</li><li>索引签名</li><li>字面量类型</li></ol><p>常用的 TypeScript 高级类型有：</p><ol><li><p>交叉类型 (Intersection Types)</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Role</span> &#123;</span><br><span class="line">  <span class="attr">role</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">UserWithRole</span> = <span class="title class_">User</span> &amp; <span class="title class_">Role</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">userWithRole</span>: <span class="title class_">UserWithRole</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;John Doe&#x27;</span>,</span><br><span class="line">  <span class="attr">role</span>: <span class="string">&#x27;admin&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>联合类型 (Union Types)</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">UserID</span> = <span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">userID</span>: <span class="title class_">UserID</span> = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">anotherUserID</span>: <span class="title class_">UserID</span> = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误，因为true不是number或string</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">wrongUserID</span>: <span class="title class_">UserID</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure></li><li><p>类型别名 (Type Aliases)</p></li><li><p>映射类型 (Mapped Types)</p></li><li><p>条件类型 (Conditional Types)</p></li><li><p>可辨识联合类型 (Discriminated Unions)</p></li><li><p>类型推断 (Type Inference)</p></li><li><p>类型保护 (Type Guards)</p></li><li><p>索引类型 (Index Types)</p></li><li><p>联合类型推断 (Union Type Inference)</p></li></ol><h3 id="1-联合-交叉类型"><a href="#1-联合-交叉类型" class="headerlink" title="1.联合/交叉类型"></a>1.联合/交叉类型</h3><h4 id="为书籍列表编写类型"><a href="#为书籍列表编写类型" class="headerlink" title="为书籍列表编写类型"></a>为书籍列表编写类型</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bookList = [&#123;</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&#x27;xioaming&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">    <span class="attr">range</span>: <span class="string">&#x27;2001-2021&#x27;</span></span><br><span class="line">&#125;,&#123;</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&#x27;xiaoli&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;story&#x27;</span>,</span><br><span class="line">    <span class="attr">theme</span>: <span class="string">&#x27;love&#x27;</span>,</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><p>↓类型声明繁琐，存在较多重复</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IHistoryBook</span> &#123;</span><br><span class="line">    <span class="attr">author</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">range</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IStoryBook</span> &#123;</span><br><span class="line">    <span class="attr">author</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">theme</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IBookList</span> = <span class="title class_">Array</span>&lt;<span class="title class_">IHistoryBook</span> | <span class="title class_">IStoryBook</span>&gt;;</span><br></pre></td></tr></table></figure><h4 id="改进后"><a href="#改进后" class="headerlink" title="改进后"></a>改进后</h4><ul><li>联合类型：IA | IB    联合类型表示一个值可以是几种类型之一</li><li>交叉类型：IA &amp; IB   多种类型叠加到一起形成的一种类型，包含了所有所需的所有类型特性 </li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">IBookList</span> = <span class="title class_">Array</span>&lt;&#123;</span><br><span class="line">    <span class="attr">author</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125; &amp; (&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;history&#x27;</span>;</span><br><span class="line">    <span class="attr">range</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125; | &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;story&#x27;</span>;</span><br><span class="line">    <span class="attr">theme</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;)&gt;</span><br></pre></td></tr></table></figure><h3 id="2-类型保护-amp-类型守卫"><a href="#2-类型保护-amp-类型守卫" class="headerlink" title="2.类型保护&amp;类型守卫"></a>2.类型保护&amp;类型守卫</h3><h4 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IA &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">a2</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">interface</span> IB &#123;<span class="attr">b</span>: <span class="number">1</span>, <span class="attr">b1</span>: <span class="number">2</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">log</span>(<span class="params">args: IA | IB</span>) &#123;</span><br><span class="line"><span class="comment">/*报错：类型“IA|IB”上不存在属性“a”。类型“IB”上不存在属性“a”。*/</span></span><br><span class="line"><span class="comment">/*结论：访问联合类型时，处于程序安全，仅能访问联合类型中的交集部分*/</span></span><br><span class="line">    <span class="keyword">if</span>(arg.<span class="property">a</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">a1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">b1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="改造"><a href="#改造" class="headerlink" title="改造"></a>改造</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IA a:1,al:2</span><br><span class="line"><span class="keyword">interface</span> IB b:1,b1:2</span><br><span class="line"></span><br><span class="line">/*类型守卫：定义一个函数，它的返回值是一个类型谓词，生效范围为子作用域*/</span><br><span class="line">function getIsIA(arg: IA | IB): arg is IA &#123;</span><br><span class="line">    <span class="comment">/*as-断言,当存在a时，断言为IA类型*/</span></span><br><span class="line">    <span class="keyword">return</span> !!(arg <span class="keyword">as</span> <span class="variable constant_">IA</span>).<span class="property">a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">log2</span>(<span class="params">arg: IA | IB</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">getIsIA</span>(arg))&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">a1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">b1</span>);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="实现函数logBook类型"><a href="#实现函数logBook类型" class="headerlink" title="实现函数logBook类型"></a>实现函数logBook类型</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数接受书本类型，并logger出相关特征</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logBook</span>(<span class="params">book: IBookItem</span>) &#123;</span><br><span class="line">    <span class="comment">// 联合类型 + 类型保护 = 自动类型判断</span></span><br><span class="line">    <span class="keyword">if</span>(book.<span class="property">type</span> === <span class="string">&#x27;history&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(book.<span class="property">range</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(book.<span class="property">theme</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-merge函数类型"><a href="#3-merge函数类型" class="headerlink" title="3.merge函数类型"></a>3.merge函数类型</h3><h4 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*实现merge函数类型</span></span><br><span class="line"><span class="comment">*要求sourceObj必须为targetObj的子集</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">merge1</span>(<span class="params">sourceObj, targetObj</span>)&#123;</span><br><span class="line"><span class="keyword">const</span> result &#123;...sourceobj &#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> targetobj) &#123;</span><br><span class="line">        <span class="keyword">const</span> itemVal = sourceobj[key];</span><br><span class="line">        itemVal &amp;&amp; (result[key] = itemVal);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">merge2</span>(<span class="params">sourceObj, targetObj</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;...sourceobj,...targetobj &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="TS-1"><a href="#TS-1" class="headerlink" title="TS"></a>TS</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ISourceobj</span> &#123;</span><br><span class="line">    x?: <span class="built_in">string</span>;</span><br><span class="line">y?: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*定义时不明确，使用时才明确*/</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ITargetobj</span> &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">y</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IMerge</span> = <span class="function">(<span class="params">sourceobj: ISourceobj, targetobj: ITargetobj</span>) =&gt;</span> <span class="title class_">ITargetobj</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*类型实现繁琐：若obj类型较为复杂，则声明source和target便需要大量重复2遍</span></span><br><span class="line"><span class="comment">*容易出错：若target增加/减少key,则需要source联动去除</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IMerge</span> &#123;</span><br><span class="line">    &lt;T <span class="keyword">extends</span> <span class="title class_">Record</span>&lt;<span class="built_in">string</span>,<span class="built_in">any</span>&gt;&gt;(<span class="attr">sourceObj</span>: <span class="title class_">Partial</span>&lt;T&gt;, <span class="attr">targetObj</span>: T): T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IPartial</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;&gt; = &#123;</span><br><span class="line">    [P <span class="keyword">in</span> keyof T]?: T[P];</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IKeys</span> = keyof &#123; <span class="attr">a</span>: <span class="built_in">string</span>; <span class="attr">b</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line">        </span><br><span class="line"><span class="comment">/* 索引类型：</span></span><br><span class="line"><span class="comment">关键字【keyof】,其相当于取值对像中的所有key组成的字符串字面量，如=&gt;type IKeys &quot;a&quot;|&quot;b&quot;</span></span><br><span class="line"><span class="comment">关键字【in】,其相当于取值字符串字面量中的一种可能，配合泛型P,即表示每个key</span></span><br><span class="line"><span class="comment">关键字【?】，通过设定对象可选选项，即可自动推导出子集类型 </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h5 id="解释说明"><a href="#解释说明" class="headerlink" title="解释说明"></a>解释说明</h5><blockquote><p>这段代码是一个定义了多个TypeScript类型的代码。</p><ol><li><p>IMerge是一个接口，它定义了一个方法，该方法接受两个对象，并返回一个新的对象，其中第一个对象是Partial<T>类型，第二个对象是T类型，T是Record类型的泛型。</p></li><li><p>IPartial是一个类型别名，它定义了T类型的可选部分，T是Record类型的泛型。</p></li><li><p>IKeys是一个类型别名，它定义了一个名为’a’和’b’的对象的键的类型，其中’a’的类型是字符串，’b’的类型是数字。</p></li><li><p>关系：</p><ul><li><p><code>IMerge</code> 是一个接口，它定义了一个合并两个对象的方法，并将合并后的对象返回。它接受两个对象作为参数，分别是源对象和目标对象，返回值为目标对象。</p></li><li><p><code>IPartial</code> 是一个类型别名，它定义了一个可选字段的对象。也就是说，可以有一些字段是不是必填的。</p></li><li><p><code>IKeys</code> 是一个类型别名，它定义了一个字符串字面量类型的联合类型。它的值是 ‘a’ 和 ‘b’。</p></li></ul></li></ol></blockquote><h3 id="4-函数返回值类型"><a href="#4-函数返回值类型" class="headerlink" title="4.函数返回值类型"></a>4.函数返回值类型</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现函数delayCall的类型声明</span></span><br><span class="line"><span class="comment">// delayCall接受一个函数作为入参，其实现延迟1s运行函数</span></span><br><span class="line"><span class="comment">// 其返回promise,结果为入参函数的返回结果</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">delayCall</span>(<span class="params">func</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> result = <span class="title function_">func</span>();</span><br><span class="line">            <span class="title function_">resolve</span>(result)</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>↓怎么写个类型声明嘞？</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个类型别名, extends泛型限定为函数</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IDelayCall</span> = &lt; T <span class="keyword">extends</span> () =&gt; <span class="built_in">any</span> &gt;<span class="function">(<span class="params">func: T</span>) =&gt;</span> <span class="title class_">ReturnType</span>&lt;T&gt;;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IReturnType</span>&lt; T <span class="keyword">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span> &gt; = T <span class="keyword">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>) =&gt; infer R ? R : <span class="built_in">any</span>;                          <span class="comment">/*类型推断*/</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 关键字【extends】跟随泛型出现时，表示类型推断，其表达可类比三元表达式</span></span><br><span class="line"><span class="comment">// 如 T === 判断类型？类型A:类型B</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 关键字【infer】)出现在类型推荐中，表示定义类型变量，可以用于指代类型</span></span><br><span class="line"><span class="comment">// 如该场景下，将函数的返回值类型作为变量，使用新泛型R表示，使用在类型推荐命中的结果中    </span></span><br></pre></td></tr></table></figure><h4 id="解释说明-1"><a href="#解释说明-1" class="headerlink" title="解释说明"></a>解释说明</h4><blockquote><p>这段 TypeScript 代码定义了两种类型：<code>IDelayCall</code> 和 <code>IReturnType</code>.</p><ul><li><p><code>IDelayCall</code>是一个泛型函数，接受一个类型为 <code>(...args: any) =&gt; any</code> 的参数<code>func</code>，返回值为 <code>func</code> 的返回类型（使用了 TypeScript 的 <code>ReturnType</code> 内置类型）。</p></li><li><p><code>IReturnType</code> 也是一个泛型函数，它接受一个类型为 <code>(...args: any) =&gt; any</code> 的参数，并使用 TypeScript 的 <code>infer</code>关键字来推断该函数的返回类型，如果返回类型不能被推断出来，则默认为<code>any</code>类型。</p></li></ul><p>这两个类型定义之间是有关系的。</p><ul><li><p><code>IDelayCall</code> 类型定义了一个函数，接受一个函数 <code>func</code> 作为参数，并返回该函数的返回类型。</p></li><li><p>而 <code>IReturnType</code> 类型定义了一个模板类型，它接受一个函数类型为参数 <code>T</code>，并通过 TypeScript 的推导功能将该函数的返回类型推导为 <code>R</code>，最后返回结果为 <code>R</code> 或者 <code>any</code>，具体取决于 <code>T</code> 类型是否满足上述函数类型。</p></li></ul><p>因此，我们可以将 <code>IReturnType</code> 定义为 <code>IDelayCall</code> 函数的<strong>内部类型</strong>，以便进行更简洁、清晰的代码编写。</p></blockquote><h2 id="工程运用"><a href="#工程运用" class="headerlink" title="工程运用"></a>工程运用</h2><h3 id="浏览器Web"><a href="#浏览器Web" class="headerlink" title="浏览器Web"></a>浏览器Web</h3><h4 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h4><ol><li>配置<strong>webpack loader</strong>相关配置（处理ts文件，转化成js文件）</li><li>配置tsconfig.js文件</li><li>运行webpack启动/打包</li><li>loader处理ts文件时，会进行编译与类型检查</li></ol><p>相关loader：</p><ol><li>awesome-typescript-loader</li><li>babel-loader</li></ol><h3 id="NodeJs"><a href="#NodeJs" class="headerlink" title="NodeJs"></a>NodeJs</h3><p>使用TSC编译</p><ol><li>安装node npm</li><li>使用npm安装tsc</li><li>配置tsocnfig.js文件</li><li>使用tsc运行编译得到的js文件</li></ol>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS跟学笔记</title>
      <link href="/post/a33a.html"/>
      <url>/post/a33a.html</url>
      
        <content type="html"><![CDATA[<h1 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h1><p>正经人谁学</p><h2 id="一、本堂课重点内容："><a href="#一、本堂课重点内容：" class="headerlink" title="一、本堂课重点内容："></a><strong>一、本堂课重点内容：</strong></h2><p>（如何写好JS↓）</p><p>JS编码原则</p><ul><li>各司其责</li><li>组件封装（课程内容属实强，要花很长时间消化）</li><li>过程抽象</li></ul><p>Left-pad事故背景引入</p><p>JS代码质量优化</p><h2 id="二、详细知识点介绍："><a href="#二、详细知识点介绍：" class="headerlink" title="二、详细知识点介绍："></a><strong>二、详细知识点介绍：</strong></h2><h3 id="JS编码原则-各司其职"><a href="#JS编码原则-各司其职" class="headerlink" title="JS编码原则-各司其职"></a>JS编码原则-各司其职</h3><blockquote><p>让HTML、CSS、JS职能分离</p></blockquote><h4 id="举例-深夜食堂的明暗模式mode"><a href="#举例-深夜食堂的明暗模式mode" class="headerlink" title="举例-深夜食堂的明暗模式mode"></a>举例-深夜食堂的明暗模式mode</h4><p>HTML代码</p><p><img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/carbon.png" alt="carbon"></p><p>CSS代码</p><p><img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/carbon%20(1).png" alt="carbon (1)"></p><p><a href="https://code.juejin.cn/pen/7189551881298346039">码上掘金链接</a></p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul><li>三者各司其责</li><li>避免不必要的由JS直接操作样式</li><li>可以用class来表示状态</li><li>纯展示交互寻求零JS方案</li></ul><h3 id="JS编码原则-组件封装"><a href="#JS编码原则-组件封装" class="headerlink" title="JS编码原则-组件封装"></a>JS编码原则-组件封装</h3><blockquote><p>好的UI组件具备正确性、扩展性、复用性</p></blockquote><h4 id="举例-原生JS电商网站轮播图"><a href="#举例-原生JS电商网站轮播图" class="headerlink" title="举例-原生JS电商网站轮播图"></a>举例-原生JS电商网站轮播图</h4><h5 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h5><p><a href="https://code.juejin.cn/pen/7189574916541251643">轮播图-原型</a></p><h6 id="HTML-结构"><a href="#HTML-结构" class="headerlink" title="HTML-结构"></a>HTML-结构</h6><p><img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/carbon%20(2).png" alt="carbon (2)"></p><h6 id="CSS-表现"><a href="#CSS-表现" class="headerlink" title="CSS-表现"></a>CSS-表现</h6><p><img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/carbon%20(6).png" alt="carbon (6)"></p><h6 id="JS-行为（功能API、控制流Event）"><a href="#JS-行为（功能API、控制流Event）" class="headerlink" title="JS-行为（功能API、控制流Event）"></a>JS-行为（功能API、控制流Event）</h6><p><img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/carbon%20(5).png" alt="carbon (5)"></p><h5 id="重构-插件化"><a href="#重构-插件化" class="headerlink" title="重构-插件化"></a>重构-插件化</h5><p><a href="https://code.juejin.cn/pen/7189573539517693986">轮播图-插件化</a></p><h6 id="解耦"><a href="#解耦" class="headerlink" title="解耦"></a>解耦</h6><ul><li>将控制元素抽成插件</li><li>插件与组件之间通过<strong>依赖注入</strong>方式建立联系</li></ul><p><img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230117191726546.png" alt="image-20230117191726546"></p><p><img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/carbon%20(8).png" alt="carbon (8)"></p><h5 id="重构-模块化"><a href="#重构-模块化" class="headerlink" title="重构-模块化"></a>重构-模块化</h5><p><a href="https://code.juejin.cn/pen/7189563473347477541">轮播图-模块化</a></p><h6 id="解耦-1"><a href="#解耦-1" class="headerlink" title="解耦"></a>解耦</h6><ul><li>将HTML模板化，更易于扩展</li></ul><h6 id="抽象"><a href="#抽象" class="headerlink" title="抽象"></a>抽象</h6><ul><li>将组件通用模型抽象出来，组件框架</li></ul><p><img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/carbon%20(4).png" alt="carbon (4)"></p><p><img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/carbon%20(9).png" alt="carbon (9)"></p><h4 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h4><h5 id="组件设计原则"><a href="#组件设计原则" class="headerlink" title="组件设计原则"></a>组件设计原则</h5><ul><li>封装性</li><li>正确性</li><li>扩展性</li><li>复用性</li></ul><h5 id="实现组件的步骤"><a href="#实现组件的步骤" class="headerlink" title="实现组件的步骤"></a>实现组件的步骤</h5><ul><li>结构设计</li><li>展现效果</li><li>行为设计</li></ul><h5 id="三次重构"><a href="#三次重构" class="headerlink" title="三次重构"></a>三次重构</h5><ul><li>模块化</li><li>模板化</li><li>抽象化（组件框架-组件是指Web页面上抽出来的一个包含模板、功能、样式的单元。）</li></ul><h3 id="JS编码原则-过程抽象"><a href="#JS编码原则-过程抽象" class="headerlink" title="JS编码原则-过程抽象"></a>JS编码原则-过程抽象</h3><blockquote><p>应用函数式编程思想</p></blockquote><h4 id="过程抽象"><a href="#过程抽象" class="headerlink" title="过程抽象"></a>过程抽象</h4><ul><li>用来处理局部细节控制的一些方法</li><li>函数式编程思想的基础应用</li></ul><h4 id="高阶函数-HOF"><a href="#高阶函数-HOF" class="headerlink" title="高阶函数-HOF"></a>高阶函数-HOF</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">HOF</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h5><p>为了能让“只执行一次”的需求覆盖不用的事件处理，可以将该需求剥离出来，这个过程称为“过程抽象”。</p><h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5><ul><li>以函数作为参数</li><li>以函数作为返回值</li><li>常用于作为函数装饰器</li></ul><h5 id="常用高阶函数"><a href="#常用高阶函数" class="headerlink" title="常用高阶函数"></a>常用高阶函数</h5><ul><li>Once<img src="../images/JS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/carbon-1673957466450-60.png" alt="carbon"></li><li>Throttle 节流，限制函数执行间隔    <a href="https://code.juejin.cn/pen/7189592749836861455">栗子</a></li><li>Debounce 防抖，防止给服务器过多负担    <a href="https://code.juejin.cn/pen/7189593149349003279">栗子</a></li><li>Consumer /2 异步消耗    <a href="https://code.juejin.cn/pen/7189593573535416354">栗子</a></li><li>Iterative 迭代函数    <a href="https://code.juejin.cn/pen/7189594190404288571">栗子</a></li></ul><h4 id="编程范式"><a href="#编程范式" class="headerlink" title="编程范式"></a>编程范式</h4><h5 id="命令式"><a href="#命令式" class="headerlink" title="命令式"></a>命令式</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> mapl = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    mapl.<span class="title function_">push</span>(list[i] * <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="声明式"><a href="#声明式" class="headerlink" title="声明式"></a>声明式</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">double</span> = x =&gt; x * <span class="number">2</span>;</span><br><span class="line">list.<span class="title function_">map</span>(double);</span><br></pre></td></tr></table></figure><h5 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h5><p><a href="https://code.juejin.cn/pen/7189595739490943034">Toggle-命令式</a></p><p><a href="https://code.juejin.cn/pen/7189595796021444664">Toggle-声明式</a></p><p><a href="https://code.juejin.cn/pen/7189595847963705405">Toggle-三态</a>由此可见声明式更能减轻内容修改添加的代码量负担</p><h3 id="Left-pad事故背景引入"><a href="#Left-pad事故背景引入" class="headerlink" title="Left-pad事故背景引入"></a>Left-pad事故背景引入</h3><h4 id="栗子1-判断是否为单位矩阵"><a href="#栗子1-判断是否为单位矩阵" class="headerlink" title="栗子1-判断是否为单位矩阵"></a>栗子1-判断是否为单位矩阵</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isUnitMatrix2d</span>(<span class="params">m</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> m[<span class="number">0</span>] === <span class="number">1</span> &amp;&amp; m[<span class="number">1</span>] === <span class="number">0</span> &amp;&amp; m[<span class="number">2</span>] === <span class="number">0</span> &amp;&amp; m[<span class="number">3</span>] === <span class="number">1</span> &amp;&amp; m[<span class="number">4</span>] === <span class="number">0</span> &amp;&amp; m[<span class="number">5</span>] === <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>写代码最应该关注什么？</p><ul><li>风格——很重要，代码维护成本小关键</li><li>效率——很重要，结合场景选择合适代码，抉择是效率还是可读性</li><li>约定</li><li>使用场景</li><li>设计</li></ul><h4 id="栗子2-Left-pad事件"><a href="#栗子2-Left-pad事件" class="headerlink" title="栗子2-Left-pad事件"></a>栗子2-Left-pad事件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">leftpad</span>(<span class="params">str, len, ch</span>)&#123;</span><br><span class="line">    str = <span class="title class_">String</span>(str);</span><br><span class="line">    <span class="keyword">var</span> i = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(!ch &amp;&amp; ch !== <span class="number">0</span>) ch=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    len = len - str.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">while</span>(++i&lt;len)&#123;</span><br><span class="line">        str = ch + str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>事件本身槽点：</p><ul><li>NPM模块粒度——模块化、打包工具不成熟</li><li>代码风格——可读性不算好</li><li>代码效率质量——效率不算高</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">leftpad</span>(<span class="params">str, len, ch</span>)&#123;</span><br><span class="line">    str = <span class="string">&quot;&quot;</span> + str;</span><br><span class="line">    <span class="keyword">const</span> padLen = len - str.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">if</span>(padLen &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>(<span class="string">&quot;&quot;</span>+ch).<span class="title function_">repeat</span>(padLen) + str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>大佬优化：</p><ul><li>更简洁</li><li>更高效</li></ul><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat">巨佬优化</a></p><ul><li>性能更好</li></ul><p>但是就它的使用场景上，优化的意义不大。</p><p>（以下的部分本人效率就不高了，脑子转不动了，打算明天完善）</p><h3 id="JS代码质量优化"><a href="#JS代码质量优化" class="headerlink" title="JS代码质量优化"></a>JS代码质量优化</h3><h4 id="栗子1-交通灯状态切换"><a href="#栗子1-交通灯状态切换" class="headerlink" title="栗子1-交通灯状态切换"></a>栗子1-交通灯状态切换</h4><h5 id="1-过于繁琐，回调会出问题"><a href="#1-过于繁琐，回调会出问题" class="headerlink" title="1.过于繁琐，回调会出问题"></a>1.过于繁琐，回调会出问题</h5><p><a href="https://code.h5jun.com/jezew/2/edit?html,css,js,output">查看源码</a></p><h5 id="2-函数封装"><a href="#2-函数封装" class="headerlink" title="2.函数封装"></a>2.函数封装</h5><p><a href="https://code.h5jun.com/xof/5/edit?js,output">查看源码</a></p><h5 id="3-轮巡HOF"><a href="#3-轮巡HOF" class="headerlink" title="3.轮巡HOF"></a>3.轮巡HOF</h5><p><a href="https://code.h5jun.com/bodul/2/edit?js,output">查看源码</a></p><h5 id="4-异步命令式"><a href="#4-异步命令式" class="headerlink" title="4.异步命令式"></a>4.异步命令式</h5><p><a href="https://code.h5jun.com/jobe/3/edit?js,output">查看源码</a></p><p>可延伸异步声明式……</p><h4 id="栗子2-判断4的幂"><a href="#栗子2-判断4的幂" class="headerlink" title="栗子2-判断4的幂"></a>栗子2-判断4的幂</h4><h5 id="1-暴力循环"><a href="#1-暴力循环" class="headerlink" title="1.暴力循环"></a>1.暴力循环</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isPowerOfFour</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    num = <span class="built_in">parseInt</span>(num);</span><br><span class="line">    <span class="keyword">while</span>(num&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(num%<span class="number">4</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        num /= <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isPowerOfFour</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    num = <span class="built_in">parseInt</span>(num);</span><br><span class="line">    <span class="keyword">while</span>(num&gt;<span class="number">1</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span>(num&amp; <span class="number">0b11</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       num &gt;&gt;&gt;=<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isPowerOfFour</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    num = <span class="built_in">parseInt</span>(num);</span><br><span class="line">    <span class="keyword">return</span> num &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (num&amp;(num - <span class="number">1</span>)) === <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (num&amp; <span class="number">0xAAAAAAAA</span>) === <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="正则表达式-最喜欢的"><a href="#正则表达式-最喜欢的" class="headerlink" title="正则表达式-最喜欢的"></a>正则表达式-最喜欢的</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isPowerOfFour</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    num = <span class="built_in">parseInt</span>(num).<span class="title function_">toString</span>(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="regexp">/^1(?:00)*$/</span>.<span class="title function_">test</span>(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="栗子3-洗牌"><a href="#栗子3-洗牌" class="headerlink" title="栗子3-洗牌"></a>栗子3-洗牌</h4><p>5555我又懒得敲了，明天继续！</p><h5 id="1-简单实现"><a href="#1-简单实现" class="headerlink" title="1.简单实现"></a>1.简单实现</h5><p><a href="https://code.h5jun.com/cuvig/edit?js,console">https://code.h5jun.com/cuvig/edit?js,console</a></p><h5 id="2-正确性"><a href="#2-正确性" class="headerlink" title="2.正确性"></a>2.正确性</h5><p><a href="https://code.h5jun.com/venol/edit?js,console">https://code.h5jun.com/venol/edit?js,console</a></p><h5 id="3-公平性"><a href="#3-公平性" class="headerlink" title="3.公平性"></a>3.公平性</h5><p><a href="https://code.h5jun.com/huqi/edit?js,console">https://code.h5jun.com/huqi/edit?js,console</a></p><h5 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h5><p><a href="https://code.h5jun.com/zamuv/edit?js,console">https://code.h5jun.com/zamuv/edit?js,console</a></p><h4 id="栗子4-分红包"><a href="#栗子4-分红包" class="headerlink" title="栗子4-分红包"></a>栗子4-分红包</h4><h5 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h5><p><a href="https://code.h5jun.com/wuv/1/edit?js,output">https://code.h5jun.com/wuv/1/edit?js,output</a></p><h5 id="2-1"><a href="#2-1" class="headerlink" title="2."></a>2.</h5><p><a href="https://code.h5jun.com/luba/edit?js,output">https://code.h5jun.com/luba/edit?js,output</a></p><h2 id="三、课后个人总结："><a href="#三、课后个人总结：" class="headerlink" title="三、课后个人总结："></a><strong>三、课后个人总结：</strong></h2><p>优雅，实在是太优雅了！</p><p>JS竟然有这么多层优化，我好像只在第一层！！！！</p><h2 id="四、引用参考："><a href="#四、引用参考：" class="headerlink" title="四、引用参考："></a><strong>四、引用参考：</strong></h2><p>见上文一些链接</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS跟学笔记</title>
      <link href="/post/4b21.html"/>
      <url>/post/4b21.html</url>
      
        <content type="html"><![CDATA[<h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><p>正经人谁学CSS啊</p><h2 id="一、本堂课重点内容："><a href="#一、本堂课重点内容：" class="headerlink" title="一、本堂课重点内容："></a><strong>一、本堂课重点内容：</strong></h2><ul><li>了解CSS（是什么、如何使用、如何工作、一些重要属性键值、如何调试）</li><li>深入了解CSS（哪条规则生效、选择器特异度、CSS求值过程、CSS继承、布局、块级与行级）</li></ul><h2 id="二、详细知识点介绍："><a href="#二、详细知识点介绍：" class="headerlink" title="二、详细知识点介绍："></a><strong>二、详细知识点介绍：</strong></h2><h3 id="走进前端技术栈-CSS"><a href="#走进前端技术栈-CSS" class="headerlink" title="走进前端技术栈-CSS"></a>走进前端技术栈-CSS</h3><h4 id="什么是CSS"><a href="#什么是CSS" class="headerlink" title="什么是CSS"></a>什么是CSS</h4><ul><li>Cascading Style Sheets</li><li>用来定义页面元素的样式（字体、位置、动画效果等）</li></ul><h4 id="CSS组成"><a href="#CSS组成" class="headerlink" title="CSS组成"></a>CSS组成</h4><ul><li>选择器Selector</li><li>属性Property</li><li>属性值Value</li><li>声明Declaration  🌰： <code>selector &#123;   property: value;   （声明语句） &#125;</code></li></ul><h4 id="CSS使用"><a href="#CSS使用" class="headerlink" title="CSS使用"></a>CSS使用</h4><p>内联、嵌入、外链 </p><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218121629136.png" alt="image-20230218121629136"></p><h4 id="CSS的工作"><a href="#CSS的工作" class="headerlink" title="CSS的工作"></a>CSS的工作</h4><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218121638505.png" alt="image-20230218121638505"></p><h5 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h5><p>找出页面中的元素，以便给他们设置样式。</p><p>使用多种方式选择元素：按照标签名、类名或id，按照属性，按照DOM树中的位置</p><h6 id="选择器类型"><a href="#选择器类型" class="headerlink" title="选择器类型"></a>选择器类型</h6><ul><li>通配选择器 🌰:<code>* &#123;color:red; font-size: 20px&#125;</code></li><li>标签选择器</li><li>id选择器</li><li>类选择器（可出现多次，常用）</li><li>属性选择器</li></ul><p>属性🌰:<code>&lt;input value=&quot;haha&quot; disabled&gt;</code> <code>&lt;style&gt;[disabled] &#123;background: #eee;&#125;&lt;/style&gt;</code></p><p>带值属性🌰:<code>&lt;input type=&quot;passworld&quot;&gt;</code> <code>&lt;style&gt;input[type=&quot;passworld&quot;] &#123;color: red;&#125;&lt;/style&gt;</code></p><p>符合条件值属性🌰:<code>&lt;a href=&quot;#top&quot;回到顶部&gt;&lt;/a&gt;</code> <code>&lt;style&gt;a[href^=&quot;#&quot;] &#123;color: red;&#125;&lt;/style&gt;</code></p><ul><li><p>伪类（pseudo-classes）——不基于标签和属性定位元素</p><ul><li><p>状态性伪类🌰</p><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122353962.png" alt="image-20230218122353962"></p></li><li><p>结构性伪类🌰 （直接组合) </p><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122406549.png" alt="image-20230218122406549"></p></li><li><p>其他类型组合<img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122417953.png" alt="image-20230218122417953"></p></li></ul></li></ul><h6 id="选择器组"><a href="#选择器组" class="headerlink" title="选择器组"></a>选择器组</h6><p>🌰：<code>body, h1, h2 &#123;margin: 0; padding: 0;&#125;</code></p><h4 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h4><h5 id="RGB"><a href="#RGB" class="headerlink" title="RGB"></a>RGB</h5><ul><li>rgb(值，值，值)</li><li>#8fac87(00-ff值)</li></ul><h5 id="HSL——Hue色相-Saturation饱和度-Lightness亮度"><a href="#HSL——Hue色相-Saturation饱和度-Lightness亮度" class="headerlink" title="HSL——Hue色相 Saturation饱和度 Lightness亮度"></a>HSL——Hue色相 Saturation饱和度 Lightness亮度</h5><ul><li>hsl(0-360, 100%, 100%)</li></ul><h5 id="一些颜色名"><a href="#一些颜色名" class="headerlink" title="一些颜色名"></a>一些颜色名</h5><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122428812.png" alt="image-20230218122428812"></p><h5 id="alpha透明度"><a href="#alpha透明度" class="headerlink" title="alpha透明度"></a>alpha透明度</h5><ul><li>rgba(值，值，值，0-1值)</li><li>#ff000078(0-1转化成0-255)</li><li>hsla(同上，0透明 1不透明)</li></ul><h4 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h4><h5 id="字体族"><a href="#字体族" class="headerlink" title="字体族"></a>字体族</h5><p>font-family  🌰:<code>font-family:Optima,Georgia，Serif;</code></p><h6 id="经常放多个字体的原因"><a href="#经常放多个字体的原因" class="headerlink" title="经常放多个字体的原因"></a>经常放多个字体的原因</h6><p>不同客户使用的设备支持拥有和支持的字体不一样，有哪个用哪个。</p><h6 id="通用字体族"><a href="#通用字体族" class="headerlink" title="通用字体族"></a>通用字体族</h6><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122436470.png" alt="image-20230218122436470"></p><h6 id="使用Web-Fonts"><a href="#使用Web-Fonts" class="headerlink" title="使用Web Fonts"></a>使用Web Fonts</h6><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122443241.png" alt="image-20230218122443241"></p><h6 id="字体裁切"><a href="#字体裁切" class="headerlink" title="字体裁切"></a>字体裁切</h6><p>适当裁切字体，保证存储合适大小</p><h5 id="字体大小"><a href="#字体大小" class="headerlink" title="字体大小"></a>字体大小</h5><p>font-size(px,em,%)</p><h5 id="字体效果"><a href="#字体效果" class="headerlink" title="字体效果"></a>字体效果</h5><p>font-style(normal,italic斜体)</p><h5 id="字体粗细-字重"><a href="#字体粗细-字重" class="headerlink" title="字体粗细/字重"></a>字体粗细/字重</h5><p>font-weight(100-900,其中400:normal，700:bold)</p><h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><ul><li>字体后面一定要添加一个字体族，以防万一！！</li><li>英文字体尽量写在中文字体前面</li><li>字重与字体密切相关</li></ul><h4 id="排版"><a href="#排版" class="headerlink" title="排版"></a>排版</h4><h5 id="行高"><a href="#行高" class="headerlink" title="行高"></a>行高</h5><p>line-height(1.6 在自身字体大小的倍数)</p><h5 id="对齐"><a href="#对齐" class="headerlink" title="对齐"></a>对齐</h5><p>text-align(right,left,center,justify)</p><h5 id="间距"><a href="#间距" class="headerlink" title="间距"></a>间距</h5><p>spacing 属性类型：</p><ul><li>letter-spacing：字间距</li><li>word-spacing：单词间距</li></ul><h5 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h5><p>text-indent(px)</p><h5 id="文段格式"><a href="#文段格式" class="headerlink" title="文段格式"></a>文段格式</h5><p>text-decoration(none,underline,line-through,overline)</p><h5 id="空白符处理"><a href="#空白符处理" class="headerlink" title="空白符处理"></a>空白符处理</h5><p>white-space 属性值：</p><ul><li>normal：默认，空白会被浏览器忽略</li><li>nowrap：文本不换行，会在同一行继续，直到</li><li>pre：空白保留，类似&lt;pre标签</li><li>pre-wrap：保留空白符序列，但是正常地进行换行</li><li>pre-line：合并空白符序列，但是保留换行符</li><li>inherit：规定应该从父元素继承white-space属性值</li></ul><h4 id="调试CSS"><a href="#调试CSS" class="headerlink" title="调试CSS"></a>调试CSS</h4><p>【检查】页面</p><h3 id="深入CSS（一）"><a href="#深入CSS（一）" class="headerlink" title="深入CSS（一）"></a>深入CSS（一）</h3><h4 id="选择器样式优先级"><a href="#选择器样式优先级" class="headerlink" title="选择器样式优先级"></a>选择器样式优先级</h4><p>Inline style（内联样式） &gt; Internal style sheet（内部样式） &gt; External style sheet（外部样式）&gt;！important &gt; 内联样式 &gt; ID 选择器 &gt; 类选择器 = 属性选择器 = 伪类选择器 &gt; 标签选择器 = 伪元素选择器 &gt; 通配选择器</p><p>🌰:</p><ul><li><p>内联样式：写在标签属性style的样式，如 </p></li><li><p>ID选择器，如#id{…}</p></li><li><p>类选择器，如 .class{…}</p></li><li><p>属性选择器，如 input[type=”email”]{…}</p></li><li><p>伪类选择器，如a:hover{…}</p></li><li><p>伪元素选择器，如 p::before{…}</p></li><li><p>标签选择器，如 input{…}</p></li><li><p>通配选择器，如 *{…}</p></li></ul><h5 id="选择器的特异度Specificity"><a href="#选择器的特异度Specificity" class="headerlink" title="选择器的特异度Specificity"></a>选择器的特异度Specificity</h5><p>通过比较元素使用选择器类型和数量判断选择器的特异度 </p><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122452047.png" alt="image-20230218122452047"></p><h5 id="使用策略"><a href="#使用策略" class="headerlink" title="使用策略"></a>使用策略</h5><h6 id="复用"><a href="#复用" class="headerlink" title="复用"></a>复用</h6><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122501623.png" alt="image-20230218122501623"></p><h6 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h6><p>扩展-CSS属性的继承性分类（光码不看没有用）</p><ul><li>不可继承的：display、margin、border、padding、background、height、min-height、max- height、width、min-width、max-width、overflow、position、left、right、top、 bottom、z-index、float、clear、table-layout、vertical-align、page-break-after、 page-bread-before和unicode-bidi。</li><li>所有元素可继承：visibility和cursor。</li><li>内联元素可继承：letter-spacing、word-spacing、white-space、line-height、color、font、 font-family、font-size、font-style、font-variant、font-weight、text- decoration、text-transform、direction。</li><li>块状元素可继承：text-indent和text-align。</li><li>列表元素可继承：list-style、list-style-type、list-style-position、list-style-image。</li><li>表格元素可继承：border-collapse。</li></ul><p>显示继承</p><p>把不可继承的变成可继承的，属性值：inherit</p><h6 id="属性的初始值initial"><a href="#属性的初始值initial" class="headerlink" title="属性的初始值initial"></a>属性的初始值initial</h6><h5 id="CSS运算过程"><a href="#CSS运算过程" class="headerlink" title="CSS运算过程"></a>CSS运算过程</h5><p><a href="https://link.juejin.cn/?target=url">cdpn.io/webzhao/deb…</a></p><h4 id="布局Layout"><a href="#布局Layout" class="headerlink" title="布局Layout"></a>布局Layout</h4><p>听累了写累了，整点截图喘口气↓</p><h5 id="常规流"><a href="#常规流" class="headerlink" title="常规流"></a>常规流</h5><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122508756.png" alt="image-20230218122508756"></p><h5 id="属性关系"><a href="#属性关系" class="headerlink" title="属性关系"></a>属性关系</h5><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122516618.png" alt="image-20230218122516618"></p><h5 id="border属性"><a href="#border属性" class="headerlink" title="border属性"></a>border属性</h5><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122523744.png" alt="image-20230218122523744"></p><h5 id="padding属性略"><a href="#padding属性略" class="headerlink" title="padding属性略"></a>padding属性略</h5><h5 id="margin属性"><a href="#margin属性" class="headerlink" title="margin属性"></a>margin属性</h5><p><code>margin:auto</code>:水平居中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">margin collapse</span><br></pre></td></tr></table></figure><h5 id="box-sizing-border-box非常常用↓"><a href="#box-sizing-border-box非常常用↓" class="headerlink" title="box-sizing:border-box非常常用↓"></a><strong>box-sizing:border-box</strong>非常常用↓</h5><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230218122530721.png" alt="image-20230218122530721"></p><h5 id="overflow"><a href="#overflow" class="headerlink" title="overflow"></a>overflow</h5><ul><li>visible</li><li>hidden</li><li>scrool</li></ul><h3 id="深入CSS（二）"><a href="#深入CSS（二）" class="headerlink" title="深入CSS（二）"></a>深入CSS（二）</h3><h4 id="块级和行级"><a href="#块级和行级" class="headerlink" title="块级和行级"></a>块级和行级</h4><p>不行了真的不行了，以后还是得用自己的工具写文档 </p><p><img src="../images/CSS%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211095206059.png" alt="image-20230211095206059"></p><h2 id="三、课后个人总结："><a href="#三、课后个人总结：" class="headerlink" title="三、课后个人总结："></a><strong>三、课后个人总结：</strong></h2><p>1.跟着视频顺一遍真的很有用 2.选一款适合自己的写文档的工具很重要，不要图省事 3.写文档是个仔细活，需精进 4.不愧是CSS（脑子真的转不动了不知道怎么总结了，明天早上想好了写评论里）</p><h2 id="四、引用参考："><a href="#四、引用参考：" class="headerlink" title="四、引用参考："></a><strong>四、引用参考：</strong></h2><p><a href="https://link.juejin.cn/?target=https://www.nowcoder.com/questionTerminal/82951db93fec4c6bb1a5a44e649b2bfc">牛客真题1</a></p><p><a href="https://link.juejin.cn/?target=https://www.nowcoder.com/questionTerminal/e441b994986a411bb4872d640b790484">牛客真题2</a></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML跟学笔记</title>
      <link href="/post/f274.html"/>
      <url>/post/f274.html</url>
      
        <content type="html"><![CDATA[<h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><p>正经人谁学HTML啊</p><h2 id="一、本堂课重点内容："><a href="#一、本堂课重点内容：" class="headerlink" title="一、本堂课重点内容："></a><strong>一、本堂课重点内容：</strong></h2><ul><li>HTML基本标签、属性、属性值</li><li>HTML语义化</li></ul><h2 id="二、详细知识点介绍："><a href="#二、详细知识点介绍：" class="headerlink" title="二、详细知识点介绍："></a><strong>二、详细知识点介绍：</strong></h2><p>HTML： TyperText Markup Language</p><h3 id="HTML基本标签"><a href="#HTML基本标签" class="headerlink" title="HTML基本标签"></a>HTML基本标签</h3><h4 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h4><p><code>&lt;ol&gt;&lt;li&gt;序号排列&lt;/li&gt;&lt;/ol&gt;</code></p><p><code>&lt;ul&gt;&lt;li&gt;无序号排列&lt;/li&gt;&lt;/ul&gt;</code></p><p><code>&lt;dl&gt;&lt;dt&gt;描述列表标题&lt;/dt&gt;&lt;dd&gt;具体元素1&lt;/dd&gt;&lt;dd&gt;具体元素2&lt;/dd&gt;&lt;/dl&gt;</code></p><h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><p><code>&lt;a href=&quot;&quot; target=&quot;_blank&quot;&gt;这_blank属性是让在新的页面中打开链接&lt;/a&gt;</code></p><h4 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h4><p><code>&lt;img src=&quot;&quot; alt=&quot;降级文字&quot;/&gt;</code></p><h4 id="音频"><a href="#音频" class="headerlink" title="音频"></a>音频</h4><p><code>&lt;audio src=&quot;&quot; controls(默认显示)&gt;&lt;/audio&gt;</code></p><h4 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h4><p><code>&lt;video src=&quot;&quot; contiols(同上）&gt;&lt;/vedio&gt;</code></p><h4 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h4><p>好玩标签：</p><ul><li>input</li><li>textarea</li></ul><p>好玩属性：</p><ul><li>placeholder:未输入时的占位符</li></ul><p>好玩属性值：</p><ul><li>type=”range”滑动进度条</li><li>type=”number” min=”” max=””规定最大值最小值的数字输入</li><li>type=”date” min=”2022.12.31”规定最早从这个日期开始的日期输入</li></ul><p><img src="../images/HTML%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094752754.png" alt="image-20230211094752754"></p><h4 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h4><p>常规包裹：</p><p>!<img src="../images/HTML%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094742169.png" alt="image-20230211094742169">常规包裹</p><p>（坠后一种可以提供一些输入快捷提示)</p><p><img src="../images/HTML%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094725801.png" alt="image-20230211094725801"></p><h4 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h4><h5 id="块级引用"><a href="#块级引用" class="headerlink" title="块级引用"></a>块级引用</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">cite</span>=<span class="string">&quot;引用地址&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        一段话，比如说书内语句啥的</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="名称章节的短引用、具体内容的短引用"><a href="#名称章节的短引用、具体内容的短引用" class="headerlink" title="名称章节的短引用、具体内容的短引用"></a>名称章节的短引用、具体内容的短引用</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    在<span class="tag">&lt;<span class="name">cite</span>&gt;</span>第一章（斜体）<span class="tag">&lt;/<span class="name">cite</span>&gt;</span>，我们讲过<span class="tag">&lt;<span class="name">q</span>&gt;</span>字符号才能是不可变量（会有引号，表示之前写过的语句）<span class="tag">&lt;/<span class="name">q</span>&gt;</span>。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="代码的单行引用"><a href="#代码的单行引用" class="headerlink" title="代码的单行引用"></a>代码的单行引用</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">code</span>&gt;</span>const qvq = &quot;qvq&quot;<span class="tag">&lt;/<span class="name">code</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="代码的多行引用"><a href="#代码的多行引用" class="headerlink" title="代码的多行引用"></a>代码的多行引用</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span>&gt;</span></span><br><span class="line">const add = (a,b) =&gt; a + b;</span><br><span class="line">const multipy = (a,b) =&gt; a * b;</span><br><span class="line"><span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="紧急文本强调"><a href="#紧急文本强调" class="headerlink" title="紧急文本强调"></a>紧急文本强调</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    在投资前，<span class="tag">&lt;<span class="name">strong</span>&gt;</span>一定要做风险评估<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="语气文本强调"><a href="#语气文本强调" class="headerlink" title="语气文本强调"></a>语气文本强调</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    Cats <span class="tag">&lt;<span class="name">em</span>&gt;</span>are<span class="tag">&lt;/<span class="name">em</span>&gt;</span> cute animals.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果图见下方的</p><p><img src="../images/HTML%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094658863.png" alt="image-20230211094658863"></p><h3 id="HTML语义化"><a href="#HTML语义化" class="headerlink" title="HTML语义化"></a>HTML语义化</h3><h4 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h4><p><img src="../images/HTML%E8%B7%9F%E5%AD%A6%E7%AC%94%E8%AE%B0/image-20230211094624477.png" alt="image-20230211094624477"></p><h4 id="语义化作用"><a href="#语义化作用" class="headerlink" title="语义化作用"></a>语义化作用</h4><p>代码可读性、可维护性、搜索引擎优化、提升无障碍性</p><h4 id="如何做到语义化"><a href="#如何做到语义化" class="headerlink" title="如何做到语义化"></a>如何做到语义化</h4><ul><li><p>了解每个标签和属性的含义</p></li><li><p>思考什么标签最适合描述该内容</p></li><li><p>不使用可视化工具生成代码</p></li><li><p>涉及到的语义化标签整理</p></li></ul><h4 id="页面内容划分"><a href="#页面内容划分" class="headerlink" title="页面内容划分"></a>页面内容划分</h4><ul><li>header：页眉,通常包括网站标志、主导航、全站链接以及搜索框。</li><li>nav：标记导航。</li><li>main：页面主要内容，一个页面只能用一次。</li><li>article：定义外部的内容，其中的内容独立于文档的其余部分。</li><li>aside：定义其所处内容之外的内容。如侧栏、文章的一组链接、广告、友情链接、相关产品列表等。</li><li>footer：页脚，只有当父级是body时，才是整个页面的页脚。</li></ul><h4 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h4><ul><li>title：定义文档标题,只能在head标签内出现。</li><li>hn：h1~h6，分级标题，与 title 协调有利于搜索引擎优化。</li></ul><h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><ul><li>ul：无序列表。</li><li>ol：有序列表。</li></ul><h4 id="强调和引用"><a href="#强调和引用" class="headerlink" title="强调和引用"></a>强调和引用</h4><ul><li>small：呈现小号字体效果，指定细则，输入免责声明、注解、署名、版权。</li><li>strong：和 em 标签一样，用于强调文本，但它强调的程度更强一些。</li><li>em：将其中的文本表示为强调的内容，表现为斜体。</li><li>mark：使用黄色突出显示部分文本。</li><li>cite：表示所包含的文本对某个参考文献的引用，比如书籍或者杂志的标题。</li><li>blockquoto：块级引用，块引用拥有它们自己的空间。</li><li>q：短的引述，引用写过的内容。</li><li>code：标记代码。</li></ul><h2 id="三、课后个人总结："><a href="#三、课后个人总结：" class="headerlink" title="三、课后个人总结："></a><strong>三、课后个人总结：</strong></h2><p>回顾了常见的HTML语义化标签，进一步了解语义化标签优势。</p><h2 id="四、引用参考："><a href="#四、引用参考：" class="headerlink" title="四、引用参考："></a><strong>四、引用参考：</strong></h2><p><a href="https://link.juejin.cn/?target=_blanck">HTML语义化-CSDN</a></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vite跟学笔记</title>
      <link href="/post/db5b.html"/>
      <url>/post/db5b.html</url>
      
        <content type="html"><![CDATA[<h1 id="Vite跟学笔记"><a href="#Vite跟学笔记" class="headerlink" title="Vite跟学笔记"></a>Vite跟学笔记</h1><p>正经人谁学Vite啊</p><h2 id="Vite系列课程前言"><a href="#Vite系列课程前言" class="headerlink" title="Vite系列课程前言"></a>Vite系列课程前言</h2><h3 id="冰山一角"><a href="#冰山一角" class="headerlink" title="冰山一角"></a>冰山一角</h3><ol><li><p>Vite: 思维比较前卫而且先进的构建工具 他确实解决了一些webpack解决不了的问题, 同时降低了一些心智负担</p></li><li><p>已经有一些大厂在使用Vite去构建项目</p></li><li><p>Vite基于自己得天独厚的优势, 他未来一定会占有一席之地 前段时间阿里的面试已经在问Vite了</p></li><li><p>Vite是Vue团队的官方出品, 背靠这么大的生态, Vue-cli会在下面两个版本中将vite作为预设构建工具 </p></li><li><p>未来你使用vue-cli去构建vue项目的时候你要写的vue.config.js不再是webpack的配置而是vite的配置(目前只基于浏览器项目)</p></li><li><p>Vite也支持直接构建react项目, 也支持构建angular项目, svelte项目也支持构建</p></li></ol><h3 id="学习模块"><a href="#学习模块" class="headerlink" title="学习模块"></a>学习模块</h3><ol><li>什么是构建工具? </li><li>webpack的一个缺点在哪</li><li>es module的规范</li><li>vite他到底是什么东西 </li><li>vite的基本安装和使用</li><li>vite的编译结果</li><li>vite编译结果的分析</li><li>vite的配置文件(可能会有节课程)</li><li>vite中处理css, 静态资源怎么去做</li><li>vite的插件以及常用插件的使用</li><li>vite与ts的结合</li><li>vite生产打包</li><li>vite构建react项目, svelte项目, vue3项目</li><li>vite的一个构建原理 </li></ol><h2 id="什么是构建工具"><a href="#什么是构建工具" class="headerlink" title="什么是构建工具"></a>什么是构建工具</h2><p><strong>浏览器它只能识别html css js</strong></p><h3 id="企业及项目可能具备哪些功能"><a href="#企业及项目可能具备哪些功能" class="headerlink" title="企业及项目可能具备哪些功能"></a>企业及项目可能具备哪些功能</h3><ol><li>typescript: 如果遇到ts文件我们需要使用tsc将typescript代码转换为js代码   </li><li>React/Vue: 安装react-compiler / vue-complier, 将我们写的jsx文件或者.vue文件转换为render函数</li><li>less/sass/postcss/component-style: 我们又需要安装less-loader, sass-loader等一系列编译工具</li><li>语法降级: babel —&gt; 将es的新语法转换旧版浏览器可以接受的语法</li><li>体积优化: uglifyjs —&gt; 将我们的代码进行压缩变成体积更小性能更高的文件</li><li>…..</li></ol><p>稍微改一点点东西, 非常麻烦</p><blockquote><p>e.g.将App.tsx —&gt; tsc —&gt; App.jsx —&gt; React-complier —&gt; js文件 </p></blockquote><p>有一个东西能够帮你把tsc, react-compiler, less, babel, uglifyjs全部集成到一起，让我们只需要关心我们写的代码就好了 </p><blockquote><p>e.g.我们写的代码一变化 —&gt; 有人帮我们自动去tsc, react-compiler, less, babel, uglifyjs全部挨个走一遍 —&gt; js</p></blockquote><p>↑这个东西就叫做<strong>构建工具</strong></p><blockquote><p>打包: 将我们写的浏览器不认识的代码 交给构建工具进行编译处理的过程就叫做打包, 打包完成以后会给我们一个浏览器可以认识的文件</p></blockquote><h3 id="构建工具承担的工作"><a href="#构建工具承担的工作" class="headerlink" title="构建工具承担的工作"></a>构建工具承担的工作</h3><ol><li>模块化开发支持: 支持直接从node_modules里引入代码 + 多种模块化支持</li><li>处理代码兼容性: 比如babel语法降级, less,ts 语法转换(<strong>不是构建工具做的, 构建工具将这些语法对应的处理工具集成进来自动化处理</strong>)</li><li>提高项目性能: 压缩文件, <strong>代码分割</strong></li><li>优化开发体验: <ul><li>构建工具会帮你自动监听文件的变化, 当文件变化以后自动帮你调用对应的集成工具进行重新打包, 然后再浏览器重新运行（整个过程叫做热更新, hot replacement</li><li>开发服务器: 跨域的问题, 用react-cli create-react-element vue-cli  解决跨域的问题, </li></ul></li></ol><p>每次改一点 —&gt; 这个顺序还不能错 </p><h3 id="构建工具的作用"><a href="#构建工具的作用" class="headerlink" title="构建工具的作用"></a>构建工具的作用</h3><ol><li><p>构建工具让我们可以不用每次都关心我们的代码在浏览器中如何运行，我们只需要首次给构建工具提供一个配置文件（必须），有了这个集成的配置文件以后，我们就可以在下次需要更新的时候调用一次对应的命令就好了。</p></li><li><p>如果我们再结合热更新，我们就更加不需要管任何东西了。</p></li></ol><p>==它让我们不用关心生产的代码，也不用担心代码如何在浏览器运行，只需要关心我们开发怎么写得爽。==</p><h3 id="市面上主流构建工具"><a href="#市面上主流构建工具" class="headerlink" title="市面上主流构建工具"></a>市面上主流构建工具</h3><ul><li>webpack-国内主流</li><li>vite-国内主流，本次学习</li><li>parcel</li><li>esbuild-国内主流</li><li>rollup</li><li>grunt</li><li>gulp</li></ul><h2 id="vite相较于webpack的优势"><a href="#vite相较于webpack的优势" class="headerlink" title="vite相较于webpack的优势"></a>vite相较于webpack的优势</h2><blockquote><p>然而，当我们开始构建越来越大型的应用时，需要处理的 JavaScript 代码量也呈指数级增长。</p><p>包含数千个模块的大型项目相当普遍。基于 JavaScript 开发的工具就会开始遇到性能瓶颈：通常需要很长时间（甚至是几分钟！）才能启动开发服务器，即使使用模块热替换（HMR），文件修改后的效果也需要几秒钟才能在浏览器中反映出来。如此循环往复，迟钝的反馈会极大地影响开发者的开发效率和幸福感。</p><p>Vite 旨在利用生态系统中的新进展解决上述问题：浏览器开始原生支持 ES 模块，且越来越多 JavaScript 工具使用编译型语言编写。</p></blockquote><ul><li>==采取先开启开发服务器==</li><li>==不会把所有依赖都解析完==</li></ul><h3 id="构建工具存在的问题"><a href="#构建工具存在的问题" class="headerlink" title="构建工具存在的问题"></a>构建工具存在的问题</h3><p>项目越大，构建工具所需要处理的js代码就越多=&gt;构建工具需要很长时间才能启动开发服务器</p><h3 id="举一个webpack栗子"><a href="#举一个webpack栗子" class="headerlink" title="举一个webpack栗子"></a>举一个webpack栗子</h3><p>众所周知，==webpack支持多种模块化==，你的工程可能不止泡在浏览器端。</p><p>那webpack能不能改？一旦要改，将会动到它的大动脉。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loadsh = <span class="built_in">require</span>(<span class="string">&quot;loadsh&quot;</span>)<span class="comment">//commonjs规范</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span><span class="comment">//es6规范</span></span><br><span class="line">|</span><br><span class="line">|经过一定过程，webpack转换（构建工具是运行在服务端的）</span><br><span class="line">↓    </span><br><span class="line"><span class="keyword">const</span> loadsh = <span class="title function_">webpack_require</span>(<span class="string">&quot;loadsh&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Vue</span> = <span class="title function_">webpack_require</span>(<span class="string">&quot;vue&quot;</span>)</span><br><span class="line"></span><br><span class="line">延伸原理（不需要看懂）</span><br><span class="line">(<span class="keyword">function</span>(<span class="params">modules</span>)&#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">webpack_require</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="comment">//入口是index.js</span></span><br><span class="line">    <span class="comment">//通过webpack的配置文件得来的：webpack.config.js ./src/index.js</span></span><br><span class="line">    modules[entry](webpack_require);</span><br><span class="line">&#125;,(&#123;</span><br><span class="line">    <span class="string">&quot;./src/index.js&quot;</span>: <span class="function">(<span class="params">webpack_require</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> lodash = <span class="title function_">webpack_require</span>(<span class="string">&quot;lodash&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">Vue</span> = <span class="title function_">webpack_require</span>(<span class="string">&quot;vue&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure><p>因为webpack支持多种模块化，它一旦开始必须要统一模块化代码，意味着它需要将所有的依赖全部读一遍。</p><h3 id="Vite呢？"><a href="#Vite呢？" class="headerlink" title="Vite呢？"></a>Vite呢？</h3><p>当然不！</p><p>两者侧重点不一样。Vite基于es module，更关注浏览器端的开发体验；而webpack更多关注兼容性。</p><h2 id="vite和webpack启动工程比较"><a href="#vite和webpack启动工程比较" class="headerlink" title="vite和webpack启动工程比较"></a>vite和webpack启动工程比较</h2><ol><li>是通过使用vue-cli去构建一个基于webpack的vue工程</li><li>使用vite去构建一个基于vite的vue工程</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="literal">-g</span> @vue/<span class="built_in">cli</span></span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">yarn global add @vue/<span class="built_in">cli</span></span><br></pre></td></tr></table></figure><ul><li>全局安装: 这个依赖会被安装到你的用户目录, 某些依赖还会自动给你注入环境变量 别名注入一个vue<ul><li>webpack去找寻依赖的时候他并不会只找寻当前目录的node_modules, 他会依次往上找直到在根目录都没有找到对应的依赖, 他才会报错</li><li>所以我们全局安装的话无论在哪个文件夹下里都可以访问到这个依赖</li></ul></li><li>非全局安装<ul><li>生产状态: -S</li><li>开发状态: -D eslint </li></ul></li></ul><h2 id="搭建一个vite项目"><a href="#搭建一个vite项目" class="headerlink" title="搭建一个vite项目"></a>搭建一个vite项目</h2><h3 id="必须要理解的vite脚手架和vite"><a href="#必须要理解的vite脚手架和vite" class="headerlink" title="必须要理解的vite脚手架和vite"></a>必须要理解的vite脚手架和vite</h3><ol><li>全局安装create-vite ——vite脚手架</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create vite</span><br></pre></td></tr></table></figure><ol start="2"><li>直接运行create-vite bin目录下的一个执行配置</li></ol><ul><li>​    误区：认为官网中使用对应yarn create构建项目的过程也是vite在做的事情</li><li>​    create-vite和vite的关系：前者内置了后者</li></ul><h4 id="什么是精装修？（doge）"><a href="#什么是精装修？（doge）" class="headerlink" title="什么是精装修？（doge）"></a>什么是精装修？（doge）</h4><blockquote><p>vue-cli/create-react-app：把vue/react都下好了，同时还帮忙把配置调整到了最佳实践</p><p>create-vite： 给你一套预设，下载了各种东西，并且做好了最佳实践的配置</p></blockquote><h4 id="区分"><a href="#区分" class="headerlink" title="区分"></a>区分</h4><ul><li>vite–&gt;webpack</li><li>create-vite–&gt;vue-cli</li></ul><h3 id="vite启动项目初体验"><a href="#vite启动项目初体验" class="headerlink" title="vite启动项目初体验"></a>vite启动项目初体验</h3><p>vite开箱即用（out of box）：你不需要做任何额外的配置就可以使用vite来帮助你处理构建工作。</p><p>在默认情况下，esmodule去导入资源的时候，要么是绝对路径，要么是相对。</p><p>既然最佳实践就是node_modules，那么为什么es官方在给我们导入非绝对路径和绝对路径资源的饿时候不默认帮我们搜寻node_modules呢？？</p><p>通过网络请求去找的，太消耗性能了。</p><h3 id="vite的预加载"><a href="#vite的预加载" class="headerlink" title="vite的预加载"></a>vite的预加载</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&quot;lodash&quot;</span>; <span class="comment">// lodash可能也import了其他的东西</span></span><br></pre></td></tr></table></figure><p>在处理的过程中如果说看到了有非绝对路径或者相对路径的引用, 他则会尝试开启路径补全</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&quot;/node_modules/.vite/lodash&quot;</span>; <span class="comment">// lodash可能也import了其他的东西</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> __vite__cjsImport0_lodash <span class="keyword">from</span> <span class="string">&quot;/node_modules/.vite/deps/lodash.js?v=ebe57916&quot;</span>;</span><br></pre></td></tr></table></figure><p>找寻依赖的过程是自当前目录依次向上查找的过程, 直到搜寻到根目录或者搜寻到对应依赖为止 /user/node_modules/lodash, ../</p><h4 id="生产和开发"><a href="#生产和开发" class="headerlink" title="生产和开发"></a>生产和开发</h4><p>yarn dev —&gt; 开发(每次依赖预构建所重新构建的相对路径都是正确的)</p><p>vite会全权交给一个叫做rollup的库去完成生产环境的打包</p><p>缓存 —&gt; </p><p>实际上vite在考虑另外一个问题的时候就顺便把这个问题解决了</p><p>commonjs 规范的导出 module.exports </p><p>有的包他是以commonjs规范的格式导出 axios </p><p><strong>依赖预构建</strong>: 首先vite会找到对应的依赖, 然后调用esbuild(对js语法进行处理的一个库), 将其他规范的代码转换成esmodule规范, 然后放到当前目录下的node_modules/.vite/deps, 同时对esmodule规范的各个模块进行统一集成 </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> a  &#125; <span class="keyword">from</span> <span class="string">&quot;./a.js&quot;</span></span><br></pre></td></tr></table></figure><p>vite重写以后</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure><p>他解决了3个问题: </p><ol><li>不同的第三方包会有不同的导出格式(这个是vite没法约束人家的事情)</li><li>对路径的处理上可以直接使用.vite/deps, 方便路径重写</li><li>叫做网络多包传输的性能问题(也是原生esmodule规范不敢支持node_modules的原因之一), 有了依赖预构建以后无论他有多少的额外export 和import, vite都会尽可能的将他们进行集成最后只生成一个或者几个模块</li></ol><p>vite.config.js === webpack.config.hs</p><h1 id="vite-配置文件处理细节"><a href="#vite-配置文件处理细节" class="headerlink" title="vite 配置文件处理细节"></a>vite 配置文件处理细节</h1><ol><li>vite配置文件的语法提示<ol><li>如果你使用的是webstorm, 那你可以得到很好的语法补全</li><li>如果你使用是vscode或者其他的编辑器, 则需要做一些特殊处理</li></ol></li><li>关于环境的处理<br>过去我们使用webpack的时候, 我们要区分配置文件的一个环境<ul><li>webpack.dev.config</li><li>webpack.prod.config</li><li>webpack.base.config</li><li>webpackmerge</li></ul></li></ol><h1 id="vite和ts的结合"><a href="#vite和ts的结合" class="headerlink" title="vite和ts的结合"></a>vite和ts的结合</h1><blockquote><p>vite他天生就对ts支持非常良好, 因为vite在开发时态是基于esbuild, 而esbuild是天生支持对ts文件的转换的</p></blockquote><p>那么对ts的校验呢？</p><blockquote><p>vite只对ts文件进行转换, 并不会对ts文件进行类型检查</p></blockquote><ol><li>安装一个插件: vite-plugin-eslint</li></ol><p>  我们的这个插件只会在开发时态帮助我们校验ts语法</p><p>为什么我们在vite.config.js里可以使用esmodule: 主要是因为vite在读取配置文件并执行的前一刻会进行替换</p><h1 id="vite环境变量配置"><a href="#vite环境变量配置" class="headerlink" title="vite环境变量配置"></a>vite环境变量配置</h1><blockquote><p>环境变量: 会根据当前的代码环境产生值的变化的变量就叫做环境变量</p></blockquote><p>代码环境:</p><ol><li>开发环境</li><li>测试环境</li><li>预发布环境</li><li>灰度环境</li><li>生产环境</li></ol><p>举个例子: 百度地图sdk, 小程序的sdk</p><p>APP_KEY: 测试环境和生产还有开发环境是不一样的key </p><ul><li>开发环境: 110</li><li>生产环境: 111</li><li>测试环境: 112</li></ul><p>我们去请求第三方sdk接口的时候需要带上的一个身份信息</p><p>我们在和后端同学对接的时候, 前端在开发环境中请求的后端API地址和生产环境的后端API地址是一个吗？ 肯定不是同一个</p><ul><li>开发和测试: <a href="http://test.api/">http://test.api/</a></li><li>生产: <a href="https://api/">https://api/</a></li></ul><p>在vite中的环境变量处理:</p><p>vite内置了dotenv这个第三方库</p><p>dotenv会自动读取.env文件, 并解析这个文件中的对应环境变量 并将其注入到process对象下(但是vite考虑到和其他配置的一些冲突问题, 他不会直接注入到process对象下)</p><p>涉及到vite.config.js中的一些配置:</p><ul><li>root</li><li>envDir: 用来配置当前环境变量的文件地址</li></ul><p>vite给我们提供了一些补偿措施:我们可以调用vite的loadEnv来手动确认env文件</p><p>process.cwd方法: 返回当前node进程的工作目录</p><p>.env: 所有环境都需要用到的环境变量<br>.env.development: 开发环境需要用到的环境变量(默认情况下vite将我们的开发环境取名为development)<br>.env.production: 生产环境需要用到的环境变量(默认情况下vite将我们的生产环境取名为production)</p><p>yarn dev –mode development 会将mode设置为development传递进来</p><p>当我们调用loadenv的时候, 他会做如下几件事:</p><ol><li>直接找到.env文件不解释 并解析其中的环境变量 并放进一个对象里</li><li>会将传进来的mode这个变量的值进行拼接: <code>.env.development</code>,  并根据我们提供的目录去取对应的配置文件并进行解析, 并放进一个对象</li><li>我们可以理解为<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> baseEnvConfig = 读取.<span class="property">env</span>的配置</span><br><span class="line"><span class="keyword">const</span> modeEnvConfig = 读取env相关配置</span><br><span class="line"><span class="keyword">const</span> lastEnvConfig = &#123; ...baseEnvConfig, ...modeEnvConfig &#125;</span><br></pre></td></tr></table></figure></li></ol><p>如果是客户端, vite会将对应的环境变量注入到import.meta.env里去</p><p>vite做了一个拦截, 他为了防止我们将隐私性的变量直接送进import.meta.env中, 所以他做了一层拦截, 如果你的环境变量不是以VITE开头的, 他就不会帮你注入到客户端中去, 如果我们想要更改这个前缀, 可以去使用envPrefix配置</p><p>补充一个小知识: 为什么vite.config.js可以书写成esmodule的形式, 这是因为vite他在读取这个vite.config.js的时候会率先node去解析文件语法, 如果发现你是esmodule规范会直接将你的esmodule规范进行替换变成commonjs规范</p><h1 id="【原理篇】vite是怎么让浏览器可以识别-vue文件的"><a href="#【原理篇】vite是怎么让浏览器可以识别-vue文件的" class="headerlink" title="【原理篇】vite是怎么让浏览器可以识别.vue文件的"></a>【原理篇】vite是怎么让浏览器可以识别.vue文件的</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn install vite</span><br></pre></td></tr></table></figure><p>yarn create 实际上就等于在安装create-vite脚手架 然后使用脚手架的指令去构建项目</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create vite my-vue-app --template vue</span><br></pre></td></tr></table></figure><p>我们来实现一套简单的vite的开发服务器</p><ol><li>解决我们刚刚的这个问题</li><li>让大家对开发服务器的原理层面有一个基础的简单的认识</li></ol><p>会涉及到node的一些知识</p><p>koa: node端的一个框架</p><p>那么我们平时去访问一个网页的时候, 我们敲下域名: baidu.com</p><h1 id="在vite中处理css"><a href="#在vite中处理css" class="headerlink" title="在vite中处理css"></a>在vite中处理css</h1><p>vite天生就支持对css文件的直接处理</p><ol><li>vite在读取到main.js中引用到了Index.css</li><li>直接去使用fs模块去读取index.css中文件内容</li><li>直接创建一个style标签, 将index.css中文件内容直接copy进style标签里</li><li>将style标签插入到index.html的head中</li><li>将该css文件中的内容直接替换为js脚本(方便热更新或者css模块化), 同时设置Content-Type为js 从而让浏览器以JS脚本的形式来执行该css后缀的文件</li></ol><p>场景:</p><ul><li>一个组件最外层的元素类名一般取名 : wrapper</li><li>一个组件最底层的元素雷明明我们一般取名: .footer</li></ul><p>你取了footer这个名字, 别人因为没有看过你这个组件的源代码, 也可能去取名footer这个类名</p><p>最终可能会导致样式被覆盖（因为类名重复）, 这就是我们在协同开发的时候很容易出现的问题</p><p>cssmodule就是来解决这个问题的</p><p>大概说一下原理: </p><p>全部都是基于node</p><ol><li>module.css (module是一种约定, 表示需要开启css模块化)</li><li>他会将你的所有类名进行一定规则的替换（将footer 替换成 _footer_i22st_1）</li><li>同时创建一个映射对象{ footer: “_footer_i22st_1” }</li><li>将替换过后的内容塞进style标签里然后放入到head标签中 (能够读到index.html的文件内容)</li><li>将componentA.module.css内容进行全部抹除, 替换成JS脚本</li><li>将创建的映射对象在脚本中进行默认导出</li></ol><p>less(预处理器): less给我们提供了一些方便且非常实用的方法</p><h1 id="vite-config-js中css配置（modules篇）"><a href="#vite-config-js中css配置（modules篇）" class="headerlink" title="vite.config.js中css配置（modules篇）"></a>vite.config.js中css配置（modules篇）</h1><p>在vite.config.js中我们通过css属性去控制真个vite对于css的处理行为</p><ul><li>localConvention: 修改生成的配置对象的key的展示形式(驼峰还是中划线形式)</li><li>scopeBehaviour: 配置当前的模块化行为是模块化还是全局化 (有hash就是开启了模块化的一个标志, 因为他可以保证产生不同的hash值来控制我们的样式类名不被覆盖)</li><li>generateScopedName: 生成的类名的规则(可以配置为函数, 也可以配置成字符串规则: <a href="https://github.com/webpack/loader-utils#interpolatename">https://github.com/webpack/loader-utils#interpolatename</a>)</li><li>hashPrefix: 生成hash会根据你的类名 + 一些其他的字符串(文件名 + 他内部随机生成一个字符串)去进行生成, 如果你想要你生成hash更加的独特一点, 你可以配置hashPrefix, 你配置的这个字符串会参与到最终的hash生成, （hash: 只要你的字符串有一个字不一样, 那么生成的hash就完全不一样, 但是只要你的字符串完全一样, 生成的hash就会一样）</li><li>globalModulePaths: 代表你不想参与到css模块化的路径</li></ul><h1 id="vite配置文件中css配置流程-preprocessorOptions篇"><a href="#vite配置文件中css配置流程-preprocessorOptions篇" class="headerlink" title="vite配置文件中css配置流程(preprocessorOptions篇)"></a>vite配置文件中css配置流程(preprocessorOptions篇)</h1><p>主要是用来配置css预处理的一些全局参数</p><p>假设没有使用构建工具, 我们又想去编译less文件的话</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add less # lessc的编译器</span><br></pre></td></tr></table></figure><p>你只要安装了node, 你就可以使用node index.js</p><p>你只要安装了less 你就可以使用lessc去编译less文件</p><p>less是可以定义变量的</p><h2 id="sourceMap"><a href="#sourceMap" class="headerlink" title="sourceMap"></a>sourceMap</h2><p>文件之间的索引: </p><p>假设我们的代码被压缩或者被编译过了, 这个时候假设程序出错, 他将不会产生正确的错误位置信息 如果设置了sourceMap, 他就会有一个索引文件map </p><p>sourceMap解决的问题极其的微小, 但是他的实现过程非常的复杂</p><h1 id="postcss"><a href="#postcss" class="headerlink" title="postcss"></a>postcss</h1><p>vite天生对postcss有非常良好的支持</p><p>全屋净水系统有一个了解</p><p>水龙头里来的水是自来水 </p><p>自来水 从 管道里 先到这个全屋净水系统 给全屋净水系统做一些插槽 —&gt; 去除砂砾 –&gt; 净化细菌微生物 —&gt; … –&gt; 输送到水龙头 –&gt; 我们可以喝的纯净水 （为了保证到我们嘴里喝的水是万无一失）</p><p>postcss 他的工作基本和全屋净水系统一致: 保证css在执行起来是万无一失的</p><p><strong>都对postcss有一个误区: 他们认为postcss和less sass是差不多级别</strong></p><p>我们写的css代码(怎么爽怎么来) –&gt; postcss —&gt; less –&gt; 再次对未来的高级css语法进行降级 –&gt; 前缀补全 –&gt; 浏览器客户端 </p><p>目前来说 less和sass等一系列预处理器的postcss插件已经停止维护了 less插件 你自己去用less和sass编译完了, 然后你把编译结果给我</p><p><strong>所以业内就产生了一个新的说法: postcss是后处理器</strong> less的postcss的插件就ok了 </p><p>我们写的js代码(怎么爽怎么来) –&gt; babel –&gt; 将最新的ts语法进行转换js语法 –&gt; 做一次语法降级  –&gt; 浏览器客户端去执行</p><p>babel –&gt; 帮助我们让js执行起来万无一失 </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> &#123;&#125; <span class="comment">// es6的写法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;&#125; <span class="comment">// es3的语法</span></span><br></pre></td></tr></table></figure><p>浏览器的兼容性你能考虑到吗, 预处理器并不能够解决这些问题:</p><ol><li>对未来css属性的一些使用降级问题</li><li>前缀补全: Google非常卷 –webkit </li></ol><h2 id="使用postcss"><a href="#使用postcss" class="headerlink" title="使用postcss"></a>使用postcss</h2><ol><li><p>安装依赖</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add postcss-cli postcss -D</span><br></pre></td></tr></table></figure></li><li><p>书写描述文件</p></li></ol><p>postcss配置文件的格式</p><ul><li>postcss.config.js</li></ul><h1 id="为什么我们在服务端处理路径的时候一定要用path"><a href="#为什么我们在服务端处理路径的时候一定要用path" class="headerlink" title="为什么我们在服务端处理路径的时候一定要用path"></a>为什么我们在服务端处理路径的时候一定要用path</h1><h1 id="vite配置文件中css配置流程-postcss篇"><a href="#vite配置文件中css配置流程-postcss篇" class="headerlink" title="vite配置文件中css配置流程(postcss篇)"></a>vite配置文件中css配置流程(postcss篇)</h1><p>直接在css.postcss中进行配置, 该属性直接配置的就是postcss的配置</p><ul><li>postcss-preset-env: 支持css变量和一些未来css语法 自动补全(autoprefixer)</li></ul><h1 id="vite加载静态资源"><a href="#vite加载静态资源" class="headerlink" title="vite加载静态资源"></a>vite加载静态资源</h1><p>什么是静态资源？ </p><p>​    图片, 视频资源</p><p>除了动态API以外, 百分之九十九资源都被视作静态资源 API –&gt; 来了一个请求 /getUserName</p><p>vite对静态资源基本上是开箱即用的, 除了一些特殊情况(svg)</p><h1 id="resolve-alias的原理"><a href="#resolve-alias的原理" class="headerlink" title="resolve.alias的原理"></a>resolve.alias的原理</h1><h1 id="vite中处理svg资源"><a href="#vite中处理svg资源" class="headerlink" title="vite中处理svg资源"></a>vite中处理svg资源</h1><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul><li><p>vite对svg有特殊处理 (❌)</p></li><li><p>vite对svg依旧是开箱即用的</p></li><li><p>svg: scalable vector graphics 可伸缩矢量图形 (新的图片格式)</p></li><li><p>传统图片格式: jpg, jpeg…</p></li></ul><h2 id="svg特点"><a href="#svg特点" class="headerlink" title="svg特点"></a>svg特点</h2><ol><li><p>svg是不会失真的 </p></li><li><p>尺寸小</p></li></ol><h2 id="SVG缺点"><a href="#SVG缺点" class="headerlink" title="SVG缺点"></a>SVG缺点</h2><p>​    没法很好的去表示层次丰富的图片信息</p><blockquote><p> 前端领域里更多的是用svg 去做图标</p></blockquote><h1 id="vite在生产环境对静态资源的处理"><a href="#vite在生产环境对静态资源的处理" class="headerlink" title="vite在生产环境对静态资源的处理"></a>vite在生产环境对静态资源的处理</h1><p>当我们将工程进行打包以后, 会发现找不到原来的资源</p><p>baseUrl: “/“</p><p>打包后的静态资源为什么要有hash</p><p>浏览器是有一个缓存机制 静态资源名字只要不改, 那么他就会直接用缓存的</p><p>刷新页面: 请求的名字是不是同一个 读取缓存 </p><p>所以我们要尽量去避免名字一致</p><p>hash算法: 将一串字符串经过运算得到一个新的乱码字符串 全世界独一无二(uuid才是独一无二的 )</p><p>利用好hash算法 可以让我们更好的去控制浏览器的缓存机制</p><p>base64图片 </p><h1 id="vite插件"><a href="#vite插件" class="headerlink" title="vite插件"></a>vite插件</h1><p>插件是什么？</p><blockquote><p>vite会在生命周期的不同阶段中去调用不同的插件以达到不同的目的</p></blockquote><ol><li><p>生命周期: 其实就和我们人一样, vite从开始执行到执行结束, 那么着整个过程就是vite的生命周期</p></li><li><p>webpack: 输出html文件的一个插件 清除输出目录: clean-webpack-plugin</p></li><li><p>中间件 , 插件</p></li><li><p>redux中间件是干嘛的: redux会在整个生命周期的不同阶段去调用不同的中间件以达到不同的目的</p></li></ol><h1 id="vite-aliases"><a href="#vite-aliases" class="headerlink" title="vite-aliases"></a>vite-aliases</h1><p>插件学习由简入繁</p><p>vite-aliases可以帮助我们自动生成别名: 检测你当前目录下包括src在内的所有文件夹, 并帮助我们去生成别名</p><p>{</p><p>  “@”: “/**/src”,</p><p>  “@aseets”: “/**/src/assets”,</p><p>  “@components”: “/**/src/components”,</p><p>}</p><p>nvm: node的一个版本管理工具</p><h1 id="手写vite-alias插件"><a href="#手写vite-alias插件" class="headerlink" title="手写vite-alias插件"></a>手写vite-alias插件</h1><p>整个插件就是在vite的生命周期的不同阶段去做不同的事情 </p><p>比方说vue和react会给你提供一些生命周期函数:</p><ul><li><p>created</p></li><li><p>mounted</p></li></ul><p>生命周期钩子</p><p>我们去手写Vite-aliases其实就是抢在vite执行配置文件之前去改写配置文件</p><p>通过vite.config.js 返回出去的配置对象以及我们在插件的config生命周期中返回的对象都不是最终的一个配置对象</p><p>vite会把这几个配置对象进行一个merge合并</p><p>{…defaultConfig, …specifyConfig}</p><h1 id="vite常用插件之vite-plugin-html"><a href="#vite常用插件之vite-plugin-html" class="headerlink" title="vite常用插件之vite-plugin-html"></a>vite常用插件之vite-plugin-html</h1><p>webpack –&gt; webpack-html-plugin / clean-webpack-plugin (clean: true)</p><p>其实就是因为vite他内置了非常多的插件, 然后我们作为普通的开发者不需要承担这么高的心智负担</p><p>vue react </p><p>vite也集成了vue团队一贯的作风 减少心智负担 css-loader less-loader ts-loader</p><p>vite将很多核心插件全部内置了</p><p>就是帮我们动态的去控制整个html文件中内容</p><p>ejs在服务端会用的比较频繁 因为服务端可能经常会动态的去修改index.html的内容</p><h1 id="vite常用插件之vite-plugin-mock"><a href="#vite常用插件之vite-plugin-mock" class="headerlink" title="vite常用插件之vite-plugin-mock"></a>vite常用插件之vite-plugin-mock</h1><p>mock数据: 模拟数据</p><p>前后端一般是并行开发 用户列表 ( 接口文档 )</p><p>mock数据 去做你前端的工作 </p><ol><li>简单方式: 直接去写死一两个数据 方便调试</li></ol><ul><li><p>缺陷： </p><ul><li>没法做海量数据测试</li><li>没法获得一些标准数据 </li><li>没法去感知http的异常</li></ul><p>axios: http请求库 </p></li></ul><ol start="2"><li>mockjs: 模拟海量数据的， vite-plugin-mock的依赖项就是mockjs</li></ol><p><a href="https://github.com/vbenjs/vite-plugin-mock">https://github.com/vbenjs/vite-plugin-mock</a></p><p># 手写vite-plugin-mock</p><p>- config </p><p>- configureSever</p><p>- transformIndexHtml</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建工具 </tag>
            
            <tag> Vite </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>好面的糖炒栗子</title>
      <link href="/post/cf5c.html"/>
      <url>/post/cf5c.html</url>
      
        <content type="html"><![CDATA[<p>好面的糖炒栗子！坚持打基础、提素质！好好笔试面试！</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/%E8%8F%9C%E7%8B%97.gif" alt="菜狗"></p><h1 id="💻浏览器"><a href="#💻浏览器" class="headerlink" title="💻浏览器"></a>💻浏览器</h1><h2 id="✅从在地址栏输入url地址到页面渲染的详细过程"><a href="#✅从在地址栏输入url地址到页面渲染的详细过程" class="headerlink" title="✅从在地址栏输入url地址到页面渲染的详细过程"></a>✅从在地址栏输入url地址到页面渲染的详细过程</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Performance/How_browsers_work">MDN原文</a>  原文嵌套原文，建议大家好好看一下。我爱MDN</p><p>这一段过程主要分为五个阶段，分别是：导航、响应、解析、渲染、交互</p><h3 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h3><p>首先在浏览器中输入URL</p><h4 id="查找缓存"><a href="#查找缓存" class="headerlink" title="查找缓存"></a>查找缓存</h4><p>浏览器先查看浏览器缓存-系统缓存-路由缓存中是否有该地址页面，如果有则显示页面内容。如果没有则进行下一步。</p><ul><li>  浏览器缓存：浏览器会记录DNS一段时间，因此，只是第一个地方解析DNS请求；</li><li>  操作系统缓存:如果在浏览器缓存中不包含这个记录，则会使系统调用操作系统， 获取操作系统的记录(保存最近的DNS查询缓存)；</li><li>  路由器缓存：如果上述两个步骤均不能成功获取DNS记录，继续搜索路由器缓存；</li><li>  ISP缓存：若上述均失败，继续向ISP搜索（ISP本身是<strong>一种宽带接入提供商给网页批量访问加速的技术</strong>。 ISP会将当前访问量较大的网页内容放到ISP服务器的缓存中，当有新的用户请求相同内容时，可以直接从缓存中发送相关信息，不必每次都去访问真正的网站，从而加快了不同用户对相同内容的访问速度，同时也能节省网间流量结算成本）。</li></ul><h4 id="DNS域名解析"><a href="#DNS域名解析" class="headerlink" title="DNS域名解析"></a>DNS域名解析</h4><p>浏览器向<strong>DNS服务器</strong>发起请求，解析该URL中的域名对应的<strong>IP地址</strong>。这个IP地址会在浏览器缓存中记录一段时间↑</p><p><code>DNS服务器是基于UDP的，因此会用到UDP协议</code>。</p><h4 id="建立TCP连接"><a href="#建立TCP连接" class="headerlink" title="建立TCP连接"></a>建立TCP连接</h4><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/ssl.jpg" alt="DNS 查询、TCP 握手和 TLS 5 步握手（包括服务器和客户端之间的 clienthello、serverhello 以及证书、clientkey 和完成消息）。" style="zoom:50%;" /><p>解析出IP地址后，根据IP地址和默认80端口，和服务器建立TCP连接</p><h5 id="三次握手（TCP-Handshake）"><a href="#三次握手（TCP-Handshake）" class="headerlink" title="三次握手（TCP Handshake）"></a>三次握手（TCP Handshake）</h5><p>三次握手SYN-SYNACK-ACK，与服务器建立连接。</p><h6 id="三次握手过程"><a href="#三次握手过程" class="headerlink" title="三次握手过程"></a><a href="https://www.xiaolincoding.com/network/3_tcp/tcp_interview.html#tcp-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84">三次握手过程</a></h6><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230713102159611.png" alt="image-20230713102159611" style="zoom:67%;" /><p>图解释得已经非常清除了</p><h6 id="为什么是三次？"><a href="#为什么是三次？" class="headerlink" title="为什么是三次？"></a>为什么是三次？</h6><ul><li><p>阻止重复历史连接的初始化：浅浅做了个图↓(假设两次握手)</p><ul><li>客户端发送SYN报文，第一次拥塞第二次发出第一次先到</li><li>服务器接收到第一个，回复ACK-SYN报文，之后直接发送数据</li><li>结果不是，终端，数据作废</li></ul><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/%E5%9B%BE%E8%A7%A3.jpg" alt="图解" style="zoom: 67%;" /></li><li><p>同步双方初始序列号：<code>seqnum = client isn  acknum = seqnum + 1  seqnum = server isn  acknum = seqnum + 1</code></p></li><li><p>避免浪费资源：</p><ul><li>可合并→<code>seqnum = client isn  (acknum = seqnum + 1  seqnum = server isn)  acknum = seqnum + 1</code></li><li>避免历史链接重复建立而产生的冗余连接</li></ul></li></ul><p>以上三点才能建立一个比较可靠的链接。</p><h6 id="为什么每次建立TCP连接的初始序列号是不一样的？"><a href="#为什么每次建立TCP连接的初始序列号是不一样的？" class="headerlink" title="为什么每次建立TCP连接的初始序列号是不一样的？"></a>为什么每次建立TCP连接的初始序列号是不一样的？</h6><p>一是如果出现，那上面这种情况就莫得行了。</p><h6 id="ISN是如何随机生成的？"><a href="#ISN是如何随机生成的？" class="headerlink" title="ISN是如何随机生成的？"></a>ISN是如何随机生成的？</h6><h6 id="已经有了IP的MTU分片，为什么还要进行TCP的MSS分片？"><a href="#已经有了IP的MTU分片，为什么还要进行TCP的MSS分片？" class="headerlink" title="已经有了IP的MTU分片，为什么还要进行TCP的MSS分片？"></a>已经有了IP的MTU分片，为什么还要进行TCP的MSS分片？</h6><h6 id="第一次握手消失会发生什么？"><a href="#第一次握手消失会发生什么？" class="headerlink" title="第一次握手消失会发生什么？"></a>第一次握手消失会发生什么？</h6><p>客户端处在<code>SYN_SENT</code>状态，等待服务端返回<code>ACK</code>报文，但是第一次握手消失，服务端一直处在<code>CLOSE/LISTEN</code>状态，客户端也因为一直收不到服务端回复而进行超时发送，直到达到最大发送次数<code>tcp_syn_retries</code>，停止发送，返回<code>CLOSE</code>状态。</p><h6 id="第二次握手消失会发生什么？"><a href="#第二次握手消失会发生什么？" class="headerlink" title="第二次握手消失会发生什么？"></a>第二次握手消失会发生什么？</h6><p>第二次握手消失，此时不仅客户端没有收到<code>ACK</code>报文，服务器发送了<code>SYN-ACK</code>报文也一直处在半连接<code>SYN_RCVD</code>状态等待客户端发<code>ACK</code>。客户端以为服务端没收到自己发出的<code>SYN</code>报文，于是超时重传；服务端也认为客户端没收到<code>SYN-ACK</code>报文，于是超时重传。直到达到了最大发送次数<code>tcp_syn_retries&amp;tcp_synack_retries</code>而停止发送，都返回<code>CLOSE</code>状态。</p><h6 id="第三次握手消失会发生什么？"><a href="#第三次握手消失会发生什么？" class="headerlink" title="第三次握手消失会发生什么？"></a>第三次握手消失会发生什么？</h6><p>第三次握手消失，客户端已然是连接状态<code>ESTABLISHED</code>，服务端则依然是是在等待<code>ACK</code>报文的半连接状态。这个时候服务器会认为客户端可能没有收到自己发的<code>SYN-ACK</code>，于是超时重传，直到达到最大发送次数，返回关闭状态。</p><h6 id="SYN攻击是啥，如何避免？"><a href="#SYN攻击是啥，如何避免？" class="headerlink" title="SYN攻击是啥，如何避免？"></a>SYN攻击是啥，如何避免？</h6><p><strong>SYN攻击</strong>核心攻击方式就是攻击者仿了巨量不同的IP地址给指定服务器发送<code>SYN</code>报文，服务端每次收到一条<code>SYN</code>报文都会进入半连接状态，并给IP地址发送<code>SYN-ACK</code>报文。但是不妙的是，服务器是没有收到这些IP地址应答的，这导致服务器<strong>半连接队列</strong>(也就是SYN队列)逐渐占满，使得正常来服务器握手的客户端获得不到服务器的服务空间。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230717222012470.png" alt="image-20230717222012470" style="zoom:50%;" /><p><strong>避免</strong></p><ul><li>调大<code>netdev_max_backlog</code></li><li>增大TCP半连接队列</li><li>开启<code>tcp_syncookies</code></li><li>减少SYN+ACK重传次数</li></ul><h5 id="TLS协商（TLS-SSL-Handshake-SSL被TLS取代了）"><a href="#TLS协商（TLS-SSL-Handshake-SSL被TLS取代了）" class="headerlink" title="TLS协商（TLS/SSL Handshake SSL被TLS取代了）"></a>TLS协商（TLS/SSL Handshake SSL被TLS取代了）</h5><ul><li>时间：TLS传输层安全协议，该段握手在三次握手建立连接之后发生。</li><li>内容：<ul><li>指定要使用的TLS版本</li><li>决定密码套件</li><li>通过服务器公钥和SSL证书颁发机构的数字签名来验证服务器的身份</li><li>生成对话密钥，以在握手完成后使用对称加密。</li></ul></li><li>步骤(以RSA 密钥为例)：<ul><li>client hello：客户端发送问候消息，发送包含客户端支持的TLS版本、支持的密码套件、客户端随机数client random的消息。</li><li>server hello：服务器回复问候消息，发送包含SSL证书、服务器选择的密码套件、server random的消息。</li><li>身份验证：客户端使用证书颁发机构验证服务器的SSL证书，以确认服务器是其声称的身份，且客户端正在与该域的实际所有者进行交互。</li><li>预主密钥：客户端发送premaster secret，这个密钥是使用公钥加密的，只能通过服务器私钥解密。</li><li>私钥被使用：服务器解密预主密钥。</li><li>生成会话密钥：客户端和服务器均使用client random server random premaster secret生成共同的会话密钥。</li><li>客户端就绪：客户端发送已完成消息（会话密钥加密）。</li><li>服务器就绪：服务器发送已完成消息（会话密钥加密）。</li><li>实现安全对称加密：实现双方会话密钥加密通信。</li></ul></li><li>TLS1.3更快更安全：客户端问候-服务器生成主密钥-服务器问候完成-客户端验证生成主密钥发送完成-实现安全对称加密。</li></ul><p>在发送真正的请求内容之前还需要三次↑往返服务器。</p><h4 id="发送HTTP请求"><a href="#发送HTTP请求" class="headerlink" title="发送HTTP请求"></a>发送HTTP请求</h4><p>浏览器发起读取文件的初始HTTP GET请求</p><h3 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h3><h4 id="服务器响应请求并返回结果"><a href="#服务器响应请求并返回结果" class="headerlink" title="服务器响应请求并返回结果"></a>服务器响应请求并返回结果</h4><p>服务器对浏览器请求做出响应，并把对应的html文件发送给浏览器</p><h5 id="慢启动-14KB规则"><a href="#慢启动-14KB规则" class="headerlink" title="慢启动 / 14KB规则"></a>慢启动 / 14KB规则</h5><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/congestioncontrol.jpg" alt="TCP 慢启动" style="zoom:50%;" /><p>慢启动是一种衡量网络连接速度的算法，通过逐渐增加发送数据的数量来达到网络的最大带宽。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230712215533543.png" alt="image-20230712215533543" style="zoom:67%;" /><p>一般情况下，初始包是是个数据包，大约14K，第二次28K，第三次……成倍递增，直到达到最大带宽或者遇到拥塞。</p><h5 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h5><p><code>ssthresh - slow start threshold</code> 慢启动门限  cwnd拥塞窗口 swnd发送窗口</p><ul><li><p>慢启动：发送方每收到一个ACK，拥塞窗口cwnd对应增加，一般是指数增加。当到达门限sst(最大带宽)时，就开始拥塞避免了。</p></li><li><p>拥塞避免：发送方每收到一个ACK，cwnd+1，线性。</p></li><li><p>拥塞发生：网络出现拥塞了，发生数据包重传。若发生超时重传</p><p>这个时候 <code>sst=cwnd/2  cwnd=1</code>。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/29.jpg" alt="拥塞发送 —— 超时重传" style="zoom: 50%;" /></li><li><p>快速恢复：快速恢复一般和快速重传搭配使用。相比起超时重传慢开始，快速重传认为当接收方丢掉一个中间包时，发送三次前一个包的ACK，发送方会重新快速重传，不必等待超时重传。</p><p>此时 <code>cwnd /= 2  sst = cwnd</code>，随后进入快速恢复算法，<code>cwnd = sst + 3</code>-重传丢失包-若再收到重复ACK，<code>cwnd ++</code>-收到新数据时，可以接受正常数据了，恢复回<code>cwnd = sst</code>-随及进入拥塞避免状态。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/%E6%8B%A5%E5%A1%9E%E5%8F%91%E7%94%9F-%E5%BF%AB%E9%80%9F%E9%87%8D%E4%BC%A0.drawio.png" alt="快速重传和快速恢复" style="zoom:50%;" /></li></ul><p>关于重传，有快速重传和超时重传两种，两者使用的拥塞发生算法是不一样的↑</p><blockquote><p>其他：关于重传</p><p>常见的重传机制：超时重传、快速重传、SACK、D-SACK</p><p>超时重传：发送数据时设计一个定时器，超过指定的时间后没有收到ACK报文，那就回重新发送数据。</p><p>快速重传：发送端发送数据过程中意外丢失了一个数据包，随后，发送端连续接收了三次相同ACK报文，此时开启快速重传，随后快速回复。有个问题：重发丢失数据包后接着哪个包发送？如果连续丢失了俩，如果已经发了很多后续包……</p><p>SACK：Selective Acknowledgment，选择性确认。在TCP头部添加SACK字段，用来记录发送已经收到了哪些数据信息。使得当发生包丢失的时候，只重传丢失的数据。这个重传机制需要发送接收双方都支持才可哦。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230717094859472.png" alt="image-20230717094859472" style="zoom:67%;" /><p>D-SACK：Duplicate SACK，重复。SACK存放的是接受重复的数据。使得发送方可以接收到反馈来的具体情况。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230717102507759.png" alt="image-20230717102507759" style="zoom:67%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230717212708861.png" alt="image-20230717212708861" style="zoom:67%;" /></blockquote><h4 id="关闭TCP连接"><a href="#关闭TCP连接" class="headerlink" title="关闭TCP连接"></a>关闭TCP连接</h4><h5 id="TCP四次挥手"><a href="#TCP四次挥手" class="headerlink" title="TCP四次挥手"></a>TCP四次挥手</h5><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230720104908581.png" alt="image-20230720104908581" style="zoom:67%;" /><ul><li>第一次：客户端向服务端发送TCP首部标志<code>FIN=1</code>的报文，之后进入<code>FIN_WAIT_1</code>状态</li><li>第二次：服务端收到FIN报文，向客户端返回<code>ACK</code>报文，之后进入<code>CLOSED_WAIT</code>状态，客户端收到后变为<code>FIN_WAIT_2</code>状态</li><li>第三次：服务端向客户端发送<code>FIN</code>报文，之后进入<code>LAST_ACK</code>状态</li><li>第四次：客户端收到FIN报文，向服务端发送<code>ACK</code>报文，之后进入<code>TIME_WAIT</code>状态，服务端收到后<code>CLOSE</code>，客户端一段时间(2MSL)后自动进入<code>CLOSE</code>状态。</li></ul><blockquote><p>MSL是网络中数据包最长的生存时间，大概两分钟</p><p>FIN报文不管是进程正常退出也好异常退出也好，服务器内核都会发送FIN报文，完成四次挥手</p></blockquote><h6 id="粗暴关闭-amp-优雅关闭"><a href="#粗暴关闭-amp-优雅关闭" class="headerlink" title="粗暴关闭&amp;优雅关闭"></a>粗暴关闭&amp;优雅关闭</h6><p>关闭连接函数相关。关闭连接的函数有两种↓</p><p><strong>close函数</strong>：同时socket关闭发送方和读取放，这个方法使得直接关闭发送数据和接收数据的能力。如果有多进程/线程共享同一个socket，其中一个进程调用了close，那么socket引用计数将-1，当计数减为0时，才会发送FIN报文。</p><p><strong>shutdown函数</strong>：可指定socket只关闭发送方向，不关闭读取方向，数据能收不能发了。如果有多个进程/线程共享同一个socket，管你几个，直接关关关！直接发FIN！</p><p><strong>粗暴关闭</strong></p><p>如果客户端用↑<code>close</code>函数关闭连接，那么在四次挥手过程中，客户端一旦又收到了服务端发送的数据，客户端会直接返回一个RST报文给服务端，解释自己已经没有收发数据的能力了，赶紧关闭吧，然后服务器内核就会释放掉连接，直接close掉。</p><p>此外，这个close函数使得FIN_WAIT_2状态等待时间是有限的，所以过了等待时间<code>tcp_fin_timeout</code>，也就关掉了。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/3b5f1897d2d74028aaf4d552fbce1a74.png" alt="在这里插入图片描述" style="zoom: 50%;" /><p><strong>优雅关闭</strong></p><p>就是↓这样子的四次挥手了。用的<code>shutdown</code>函数，客户端还能正常读一下数据，然后才关关。这里FION_WAIT_2状态等待时间是没有限制的，等不到死等。</p><h6 id="为啥是四次？"><a href="#为啥是四次？" class="headerlink" title="为啥是四次？"></a>为啥是四次？</h6><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230720112455802.png" alt="image-20230720112455802" style="zoom:67%;" /><ul><li>关闭连接的时候，客户端向服务端发送FIN报文的时候，仅仅代表客户端不再发送数据了，但是还是会收到数据的。</li><li>服务器收到报文之后，先回答一个ACK，随后服务端可能(还有一些未完全处理的数据需要发给客户端或者数据还没传完)(等待一段时间使得客户端有一定时间获取到ACK报文，一般也是2MSL)，这几种情况完事儿之后，会再发一个FIN表示服务器不会再向客户端发送数据了。</li><li>客户端收到FIN报文后就可以给服务端发一个可以关闭了的消息了。</li></ul><h6 id="四次挥手可不可以变成三次挥手？"><a href="#四次挥手可不可以变成三次挥手？" class="headerlink" title="四次挥手可不可以变成三次挥手？"></a>四次挥手可不可以变成三次挥手？</h6><p>可以，抓包的时候会有抓到这种三次挥手包的情况。也就是ACK和FIN合并成一条从服务器发送到客户端。</p><p>那么什么情况下才会出现三次挥手呢？</p><p><strong>没有数据需要发送或者正在发送了+开启了TCP延迟确认机制。</strong></p><h6 id="啥又是“TCP确认机制“？"><a href="#啥又是“TCP确认机制“？" class="headerlink" title="啥又是“TCP确认机制“？"></a>啥又是“TCP确认机制“？</h6><p>当发送没有携带数据的ACK报文的时候，它的网络效率是很低的。为了解决这个问题，衍生出来了这个确认机制。策略如下↓</p><ul><li>当有响应数据发送的时候，ACK会带着数据麻溜发送给对方</li><li>当没有响应数据发送的时候，ACK会延迟一段时间，等待是否有响应数据一起发送，如果没有那还是要发的</li><li>如果延迟等待发送ACK期间，第二个数据报文又到达了，那还是赶紧发过去ACK报文吧</li></ul><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/33f3d2d54a924b0a80f565038327e0e4.png" alt="img" style="zoom:50%;" /><p>每个系统这一块基本都有一个最小延迟时间和最大延迟时间，和系统的时钟频率相关。HZ/25  HZ/5</p><p>关闭TCP延时确认机制：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 表示开启 TCP_QUICKACK，即关闭 TCP 延迟确认机制</span></span><br><span class="line"><span class="type">int</span> value = <span class="number">1</span>;</span><br><span class="line">setsockopt(socketfd, IPPROTO_TCP, TCP_QUICKACK, (<span class="type">char</span>*)&amp; value, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"><span class="comment">// 同理，如果执行过程中读到value值为0，那说明这个延迟策略是开启的。</span></span><br></pre></td></tr></table></figure><h6 id="第一次挥手无会发生啥"><a href="#第一次挥手无会发生啥" class="headerlink" title="第一次挥手无会发生啥"></a>第一次挥手无会发生啥</h6><p>客户端重传重传重传，到限了，关了；服务器一直开着。</p><h6 id="第二次无"><a href="#第二次无" class="headerlink" title="第二次无"></a>第二次无</h6><p>客户端重传重传重传，到限了，关了；服务器一直<code>CLOSE_WAIT</code>。</p><h6 id="第三次无"><a href="#第三次无" class="headerlink" title="第三次无"></a>第三次无</h6><p>服务端重传重传重传，到限(tcp_orpha_retrie)了，从<code>LAST_ACK</code>变为关了；</p><p>客户端一直<code>CLOSE_WAIT_2</code>，倘若客户端这边使用的是close函数，那么过一会儿关了，如果是shutdown函数，那么死等了。</p><h6 id="第四次无"><a href="#第四次无" class="headerlink" title="第四次无"></a>第四次无</h6><p>服务器以为服务端没收到，重传重传重传，到限了，关了；</p><p>客户端每次收到服务器FIN都会重置一次2MSL定时器然后回复ACK，无奈ACK一直到不了，最后服务器已经关了，那这边等等也就关了。</p><h6 id="为啥TIME-WAIT等待时间是2MSL？？"><a href="#为啥TIME-WAIT等待时间是2MSL？？" class="headerlink" title="为啥TIME_WAIT等待时间是2MSL？？"></a>为啥TIME_WAIT等待时间是2MSL？？</h6><p><code>MSL-maximum segment lifetime</code>报文最大生存时间，它是任何报文在网络上存在的最长时间，超时这个报文就会被丢弃。</p><p>众所周知TCP协议是基于IP，协议的，IP头中有TTL字段，该字段是IP数据报可以经过的最大路由数，路过一个路由器-1，直到0，数据报被丢弃，同时发送ICMP报文通知源主机。</p><p>MSL&gt;=TTL消耗到0的时间</p><p>之所以2MSL，有一种解释是数据报发过去还需要等接收方返回来一个确认报文，一来一回所以是两倍。</p><h6 id="为啥有TIME-WAIT这个状态环节？？"><a href="#为啥有TIME-WAIT这个状态环节？？" class="headerlink" title="为啥有TIME_WAIT这个状态环节？？"></a>为啥有TIME_WAIT这个状态环节？？</h6><ul><li>主动发起关闭的一方才会有这个状态</li><li>防止历史连接中的数据被后面相同四元组的连接错误接收</li><li>保证被动接收连接的一方能够正确关闭</li></ul><h6 id="↑过多会有啥危害？"><a href="#↑过多会有啥危害？" class="headerlink" title="↑过多会有啥危害？"></a>↑过多会有啥危害？</h6><ul><li>客户端：如果状态过多，客户端占满了所有的端口资源，那么就无法对目的IP&amp;PORT相同的服务端发送连接了。当然被使用的端口还是可以向其他不同的服务端发送连接的。客户端的端口是可以复用的。</li><li>服务端：由于服务端只监听一个端口，且一个四元组唯一确定一个TCP连接，所以服务端可以建立很多连接。但是状态过多，TCP连接过多的话，会占用系统资源。</li></ul><h6 id="↑如何优化它？"><a href="#↑如何优化它？" class="headerlink" title="↑如何优化它？"></a>↑如何优化它？</h6><h6 id="↑服务器大量出现它的原因？"><a href="#↑服务器大量出现它的原因？" class="headerlink" title="↑服务器大量出现它的原因？"></a>↑服务器大量出现它的原因？</h6><p>了解它需要了解何时服务器才会主动断开连接。</p><ul><li><strong>HTTP没有使用长连接</strong>(两方请求头均有Connction: Keep-Alive，有一个是close就完蛋)，每次请求都需要建立TCP-请求资源-响应资源-释放连接。那么在频繁四次挥手的过程中，就会有TIME_WAIT。</li><li><strong>HTTP长连接超时</strong>(长连接有一个特点，如果没有一方提出断开，那么连接一直存在)，服务端通常给长连接设置<code>keepalive_timeout</code>参数。也就是说在连接中处理好一次请求后，若这段时间内没有再次发起新请求，那么出发回调函数来关闭连接，这时候服务端就会出现这个状态。</li><li><strong>HTTP长连接的请求数量达到上限</strong>，服务端通常给一条HTTP长连接设置一个最大能处理请求的数量<code>keepalive_requests</code>，当数量达到时，会主动关闭连接，那么这个时候服务端也会出现这个状态。</li></ul><h6 id="服务器大量出现CLOSE-WAIT状态原因？"><a href="#服务器大量出现CLOSE-WAIT状态原因？" class="headerlink" title="服务器大量出现CLOSE_WAIT状态原因？"></a>服务器大量出现CLOSE_WAIT状态原因？</h6><ul><li>被动关闭方才会有的状态。如果被动方没有调用close函数关闭连接，那么将无法FIN报文发出，那么就不会变为LAST_ACK状态。反过来，如果服务器出现大量该状态，说明服务器没有调用close函数关闭连接。因此，我们可以分析什么情况不会调用close函数↓</li><li>具体原因参照服务端TCP流程</li></ul><h6 id="如果已经建立了连接但是客户端突然故障咋办？"><a href="#如果已经建立了连接但是客户端突然故障咋办？" class="headerlink" title="如果已经建立了连接但是客户端突然故障咋办？"></a>如果已经建立了连接但是客户端突然故障咋办？</h6><p>如果连接成功了，客户端突然因为一些原因故障了，那么这个时候要是服务端一直不发送数据给客户端，服务器是无法感知客户端故障的。为了避免这种情况，TCP建立了一种保活机制↓</p><p>定义一个时间段，在该时间段内，如果没有任何连接相关的活动，那么保活机制开始作用，每隔一段时间发送一个探测报文(数据量很少)，如果连续几个探测报文都没有得到回应，那么判定当前TCP连接死亡，系统内核向上层应用程序发送错误通知信息。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">保活时间net.<span class="property">ipv4</span>.<span class="property">tcp_keepalive_time</span></span><br><span class="line">保活探测次数...intvl</span><br><span class="line">保活探测时间间隔...probes</span><br></pre></td></tr></table></figure><p>开启保活机制无非三种情况：</p><ul><li>对端正常，探测报文能被正常响应，此时TCP保活时间会被重置</li><li>对端宕机然后重启了，赶上了探测报文的发送，但是这个时候对端是没有什么连接信息的，所以给服务端返回了RST报文。此时TCP连接被发现重置</li><li>对端宕机了，TCP保活探测信息无法抵达，没有任何响应，那么达到最大保活探测次数后，确认TCP连接死亡，并上报。</li></ul><p>真的好强，好多知识点啊！由于保活时间较长，可以在应用层自行实现一个心跳机制。一般服务器软件都会提供keepalive_timeout参数来确定HTTP长连接时间，时间一超，就启动一个定时器，定时器时间一到，直接触发回调来释放连接。</p><h6 id="↑服务器突然故障咋办？"><a href="#↑服务器突然故障咋办？" class="headerlink" title="↑服务器突然故障咋办？"></a>↑服务器突然故障咋办？</h6><p>之前有提到过，无论服务器正常断开连接还是非正常断开连接，都不会影响内核发送FIN挥手以及后续挥手过程的正常进行。</p><h3 id="解析渲染-浏览器渲染"><a href="#解析渲染-浏览器渲染" class="headerlink" title="解析渲染-浏览器渲染"></a>解析渲染-浏览器渲染</h3><p>客户端（浏览器）解析HTML内容并渲染出来，浏览器接收到数据包后的解析流程为：</p><ul><li>  构建DOM树：词法分析然后解析成DOM树（dom tree），是由dom元素及属性节点组成，树的根是document对象</li><li>  构建CSS规则树：生成CSS规则树（CSS Rule Tree）</li><li>  构建render树：Web浏览器将DOM和CSSOM结合，并构建出渲染树（render tree）</li><li>  布局（Layout）：计算出每个节点在屏幕中的位置</li><li>  绘制（Painting）：即遍历render树，并使用UI后端层绘制每个节点。</li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a90660027f0d4c559732519bad4c6323~tplv-k3u1fbpfcp-zoom-1.image" alt="浏览器渲染流程图"></p><h4 id="CRF"><a href="#CRF" class="headerlink" title="CRF"></a>CRF</h4><p>关键渲染路径CRF(Critical Rendering Path)，指浏览器渲染网页时所执行的一系列关键步骤。包括服务器请求响应、加载、执行脚本、渲染、布局、绘制每个像素到显示屏等。（浏览器部分性能优化也是在这些方面优化）</p><h4 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h4><p>文档对象模型。它是增量的，包含页面所有元素。HTML文件响应变成令牌token，令牌编程节点，节点编程DOM树。</p><p>单个节点从startTag令牌开始到endTag令牌结束，节点包含HTML元素的所有信息。节点根据令牌层次结构连接到DOM树中。节点数越多，关键路径后续事件的花费就越长。</p><h4 id="CSSOM"><a href="#CSSOM" class="headerlink" title="CSSOM"></a>CSSOM</h4><p>样式对象模型。它不是增量的，它是级联的，包含页面所有样式。解析CSS过程中根据样式规则和选择器，将对应的样式属性添加到CSSOM中。</p><p>CSSOM使得JS可以通过DOM接口来修改页面样式。CSS是渲染阻塞的，浏览器会阻塞页面渲染直到接收执行了所有CSS完成CSSOM才会渲染内容。CSS之所以是阻塞渲染的是因为规则可以被覆盖。CSSOM随着CSS解析逐渐构建，直到完成都不能被用来构建渲染树，因为样式将会被之后的解析所覆盖，而不是渲染到屏幕上。换句话，CSSOM没有构建完成，RenderTree不会开始构建。</p><h4 id="RenderTree"><a href="#RenderTree" class="headerlink" title="RenderTree"></a>RenderTree</h4><p>渲染树。浏览器从DOM根节点开始检查每个节点，决定哪些CSS规则被添加，最后形成一个DOM和CSSOM的结合体。</p><p>渲染树只包含可见内容，例如如果有一个元素的display: none，那么这个元素以及其后代均不会出现在渲染树中。</p><h4 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h4><p>页面布局。布局决定了如何在页面中放置元素，以及这些元素的宽高和元素间的相关性。</p><p>布局取决于屏幕尺寸，布局性能受DOM影响，节点越多，布局花费时间更长。因此，为了而减少布局事件的频率和时长，应尽量避免改动盒模型，或者批量更新。</p><h4 id="绘制"><a href="#绘制" class="headerlink" title="绘制"></a>绘制</h4><p>一旦布局完成，像素就可以被绘制在屏幕上。若有改动将进行重绘等操作。</p><p>浏览器被优化为只重绘需要重绘的最小区域。计算布局+重绘这两个是绘制环节优化的重要方面，而不是关注样式属性的增加和移除。因为前者计算布局并绘制花费时间比单纯移除一个样式属性花费时间要更加明显。进行性能优化的时候要先测量确定布局重绘的时间开销，确定好性能瓶颈所在。</p><h3 id="拓展：CRF优化"><a href="#拓展：CRF优化" class="headerlink" title="拓展：CRF优化"></a>拓展：CRF优化</h3><ul><li>异步、延迟加载、消除非关键资源的请求数量</li><li>优化必须的请求数量和每个请求文件的体积</li><li>区分关键资源的优先级来优化被加载资源的顺序，缩短关键路径的长度</li></ul><h3 id="回顾：CSS根据什么样的规则生成"><a href="#回顾：CSS根据什么样的规则生成" class="headerlink" title="回顾：CSS根据什么样的规则生成"></a>回顾：CSS根据什么样的规则生成</h3><ul><li>规则集RuleSet：由选择器和一组样式组成</li><li>样式规则的组织：CSSOM样式规则类似树状结构，根节点是文档根节点，其他规则集成为各子节点</li><li>嵌套规则：一个规则集包含另一个规则集</li><li>样式属性：有些样式是可以继承的，有些不能被继承</li><li>选择器权重：权重越高优先级越高，相同权重看后一个<ul><li>!important</li><li>1000  内联样式：在元素的style中定义</li><li>0100  ID选择器：通过元素id属性定义</li><li>0010  类选择器/属性选择器/伪类选择器：class/[type=1]/:hover</li><li>0001  元素选择器/伪元素选择器：p,div/::before,::after</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: white&quot;</span>&gt;</span>啊啊啊啊啊<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">!important&gt;内联样式&gt;id选择器&gt;类选择器&gt;元素选择器</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#div1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  <span class="attribute">background-color</span>:blue <span class="meta">!important</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230726162808919.png" alt="image-20230726162808919"></p><h2 id="JS引擎解析过程"><a href="#JS引擎解析过程" class="headerlink" title="JS引擎解析过程"></a>JS引擎解析过程</h2><p>调用JS引擎执行JS代码（JS的解释阶段，预处理阶段，执行阶段生成执行上下文，VO，作用域链、回收机制等等）</p><ul><li>  创建window对象：全局执行环境在页面产生时就被创建，所有的全局变量和函数都属于window的属性和方法，而DOM Tree也会映射在window的doucment对象上。当关闭网页或者关闭浏览器时，全局执行环境会被销毁。</li><li>  加载文件：完成js引擎分析它的语法与词法是否合法，如果合法进入预编译</li><li>  预编译：在预编译的过程中，浏览器会寻找全局变量声明，把它作为window的属性加入到window对象中，并给变量赋值为’undefined’；寻找全局函数声明，把它作为window的方法加入到window对象中，并将函数体赋值给他（匿名函数是不参与预编译的，因为它是变量）。而变量提升作为不合理的地方在ES6中已经解决了，函数提升还存在。</li><li>  解释执行：执行到变量就赋值，如果变量没有被定义，也就没有被预编译直接赋值，在ES5非严格模式下这个变量会成为window的一个属性，也就是成为全局变量。string、int这样的值就是直接把值放在变量的存储空间里，object对象就是把指针指向变量的存储空间。函数执行，就将函数的环境推入一个环境的栈中，执行完成后再弹出，控制权交还给之前的环境。JS作用域其实就是这样的执行流机制实现的。</li></ul><h2 id="✅浏览器缓存机制-强制缓存和协商缓存"><a href="#✅浏览器缓存机制-强制缓存和协商缓存" class="headerlink" title="✅浏览器缓存机制-强制缓存和协商缓存"></a>✅浏览器缓存机制-强制缓存和协商缓存</h2><h4 id="缓存机制"><a href="#缓存机制" class="headerlink" title="缓存机制"></a>缓存机制</h4><p><strong>是什么</strong></p><p>浏览器缓存机制是浏览器在访问网页时，<strong>将一些数据保存至本地的一种技术</strong>。</p><p><strong>为什么</strong></p><p>我们都知道浏览器和服务器之间的通信是基于两者建立连接的。两者建立连接通常会耗费一定时间。很多响应是需要浏览器与服务器多次往返通信才能形成一个完整的响应。这个过程中很有可能会增加访问服务器的资源成本。因此浏览器利用缓存机制，让浏览器可以<strong>重用一些响应数据，从而减少多次交互带来的资源占用</strong>。</p><p><strong>具体解释</strong></p><p>浏览器缓存的主要步骤：</p><ul><li>在浏览器发出请求前，会先去到浏览器缓存中查看是否有对应的结果和缓存标识，如果有，很好，如果没有，向服务器发出请求。</li><li>服务器将相应结果和缓存标识返回给浏览器，浏览器根据响应头中的缓存标识决定是否将结果和标识存入缓存。</li></ul><p>浏览器缓存机制分为强制缓存和协商缓存，两者相互配合完成任务：</p><ul><li><p><strong>强制缓存</strong>：浏览器向浏览器缓存中查询请求结果，并根据缓存规则决定是否使用该缓存结果。</p><p>控制强制缓存的字段：Cache-Control &gt; Expires(废弃)</p><p><code>Cache-Control: max-age=100,s-maxage=200,public</code></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230802163623701.png" alt="image-20230802163623701"></p><ul><li>不存在缓存结果和缓存标识：强制缓存失效，直接发出请求</li><li>存在但缓存结果失效：强制缓存失效，使用协商缓存</li><li>存在且有效：强制缓存生效，直接返回结果</li></ul></li><li><p><strong>协商缓存</strong>：浏览器向服务器发送携带缓存标识的请求，服务器根据缓存标识决定是否使用该缓存。</p><p>控制协商缓存的字段：Etag / If-None-Match &gt; Last-Modified / If-Modified-Since </p><p>a. 在服务器端读出文件修改时间，将读出的修改时间赋给lastmodified，cachecontrol设置nocache。次访问时，会有ifmodifiedsince，值为次修改时服务器给它的时间。</p><p>b. Etag比较文件指纹。首次请求，服务器将读取目标文件计算出的文件指纹放响应头etag字段。二次请求，客户端读取Etag，赋给ifnonematch字段，让上次文件指纹跟随请求一起去到服务端。服务端拿到idnonematch字段后再次读取目标资源并生成文件指纹，俩指纹做对比，如果完全一致，返回304，如果不同，返回新的Etag。</p><p>c. 第二种方式优点()缺点(计算开销、服务器性能、弱验性-提取文件部分属性生成哈希值-快但准确率不高-降低协商缓存有效性)</p><ul><li>协商缓存生效：返回304</li><li>协商缓存失效：返回200+请求结果</li></ul></li></ul><h4 id="哪些是强缓存哪些是协商缓存"><a href="#哪些是强缓存哪些是协商缓存" class="headerlink" title="哪些是强缓存哪些是协商缓存"></a>哪些是强缓存哪些是协商缓存</h4><p>所有带304的资源都是协商缓存，所有标注（从内存读取/从磁盘读取）的资源都是强缓存。</p><h2 id="✅前端如何实现缓存资源"><a href="#✅前端如何实现缓存资源" class="headerlink" title="✅前端如何实现缓存资源"></a>✅前端如何实现缓存资源</h2><p>前端之所以缓存是为了减少不必要的网络传输，加速页面加载，减少服务器负载。</p><p>前端缓存主要分为浏览器缓存和http缓存。</p><h4 id="1-http缓存"><a href="#1-http缓存" class="headerlink" title="1.http缓存"></a>1.http缓存</h4><p>http缓存是web前端缓存的核心。↑</p><h4 id="2-浏览器缓存"><a href="#2-浏览器缓存" class="headerlink" title="2.浏览器缓存"></a>2.浏览器缓存</h4><table><thead><tr><th>比较</th><th>Cookie</th><th>localstorage</th><th>sessionstorage</th><th>Indexed_db</th></tr></thead><tbody><tr><td>定义</td><td>一种存储在客户端的小型文本文件。</td><td>H5提供的一种在浏览器端本地存储数据的机制。</td><td>H5提供的一种在浏览器端存储会话数据的机制。</td><td>浏览器提供的JSAPI，用于在浏览器存储和查询结构化的数据。异步、对象存储、妥妥的数据库</td></tr><tr><td>存储位置</td><td>document.cookie(浏览器的cookie文件夹)</td><td>localStorage</td><td>sessionStorage</td><td>indexedDB.open()<br />db.createObjectStore()<br />add()或 put()<br />get()或 getAll()<br />close()</td></tr><tr><td>大小</td><td>4KB</td><td>&gt;=5MB</td><td>&gt;=5MB</td><td>大得多</td></tr><tr><td>生命周期</td><td>默认会话，可设置</td><td>永久，除非手动清除或过期</td><td>会话</td><td>永久，除非操作删除</td></tr><tr><td>场景</td><td>身份验证和会话管理、用户偏好、跟踪用户行为</td><td>用户首选项、会话状态、本地缓存、应用程序配置、计数器和标记</td><td>表单数据临时存储、会话状态、临时缓存</td><td>大量结构化数据、离线应用、复杂的数据查询、数据索引、日志记录</td></tr></tbody></table><h5 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h5><p>少量缓存。它由服务器在http响应中设置，保存在浏览器中，每次请求同一个服务器的时候，将Cookie发送回服务器。</p><p>在PaperTODO中我们有用到NextAuth，其中用户登录后拿到的token就是存在cookie中的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置一个 Cookie</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;username=John Doe; expires=Thu, 02 Aug 2023 12:00:00 UTC; path=/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取一个 Cookie</span></span><br><span class="line"><span class="keyword">const</span> cookieValue = <span class="variable language_">document</span>.<span class="property">cookie</span>;</span><br></pre></td></tr></table></figure><h5 id="LocalStorage"><a href="#LocalStorage" class="headerlink" title="LocalStorage"></a>LocalStorage</h5><p>一种本地存储方案。少量缓存</p><p>将一些数据存储到本地存储中，相当于在本地缓存了一些数据，使得在下一次打开网页时的快速访问。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, value) <span class="comment">// +</span></span><br><span class="line"><span class="keyword">let</span> cachedVal = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key) <span class="comment">// 查询</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key) <span class="comment">// -</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">clear</span>() <span class="comment">// ---</span></span><br></pre></td></tr></table></figure><h5 id="SessionStorage"><a href="#SessionStorage" class="headerlink" title="SessionStorage"></a>SessionStorage</h5><p>一种本地存储方案。少量缓存</p><p>将一些数据存储到会话存储中，相当于在会话范围内存储一些数据，方便在会话内快速访问。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sessionStorage.<span class="title function_">setItem</span>(key, value)</span><br><span class="line"><span class="keyword">let</span> cachedVal = sessionStorage.<span class="title function_">getItem</span>(key)</span><br><span class="line">sessionStorage.<span class="title function_">removeItem</span>(key)</span><br><span class="line">sessionStorage.<span class="title function_">clear</span>()</span><br></pre></td></tr></table></figure><h4 id="3-ServiceWorker"><a href="#3-ServiceWorker" class="headerlink" title="3.ServiceWorker"></a>3.ServiceWorker</h4><p>是一个独立的浏览器特性，用于实现一种浏览器和网络代理之间的代理层。它允许开发者拦截和处理网络请求，从而实现离线缓存、推送通知、拦截请求并返回自定义响应的功能。</p><p>特点</p><ul><li>它是一个JS线程，运行在浏览器后台，独立于页面</li><li>充当网络代理，可以拦截和控制请求和响应</li><li>只在HTTPS网站上工作，避免恶意注入和拦截敏感数据</li><li>离线缓存、数据预取、消息推送</li></ul><p>场景</p><ul><li>离线缓存</li><li>数据预取/预加载</li><li>响应拦截和修改</li><li>推送通知</li></ul><p>浏览器后台脚本，可以拦截网络请求并进行缓存管理，通过使用它，可以实现更加灵活的缓存策略。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在Service Worker脚本中实现缓存</span></span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  event.<span class="title function_">respondWith</span>(</span><br><span class="line">    caches.<span class="title function_">match</span>(event.<span class="property">request</span>).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 如果缓存中有匹配的资源，直接返回缓存的结果</span></span><br><span class="line">      <span class="keyword">if</span> (response) &#123;</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 否则发起网络请求，并将请求结果缓存到本地</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">fetch</span>(event.<span class="property">request</span>).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> caches.<span class="title function_">open</span>(<span class="string">&#x27;my-cache&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">          cache.<span class="title function_">put</span>(event.<span class="property">request</span>, response.<span class="title function_">clone</span>());</span><br><span class="line">          <span class="keyword">return</span> response;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="✅什么是内存泄露，哪些情况会造成-如何查看泄露情况？"><a href="#✅什么是内存泄露，哪些情况会造成-如何查看泄露情况？" class="headerlink" title="✅什么是内存泄露，哪些情况会造成/如何查看泄露情况？"></a>✅什么是内存泄露，哪些情况会造成/如何查看泄露情况？</h2><p>内存泄露指程序中内存资源被无法访问的对象占用，导致这些内存资源不能被垃圾回收，最终导致程序占用的内存不断增加，可能导致程序性能下降崩溃。</p><p>内存泄漏往往由程序中一些错误和不良编程实践导致。</p><ul><li>未释放对象引用</li><li>未关闭资源</li><li>事件监听器未移除</li><li>大量缓存数据</li><li>循环数据结构</li></ul><p>查看泄露情况（说实话我不大会这个）。</p><ul><li>浏览器开发者工具</li><li>内存分析工具</li><li>代码审查</li><li>使用性能分析工具</li></ul><h2 id="✅JS垃圾回收-Garbage-collection-机制"><a href="#✅JS垃圾回收-Garbage-collection-机制" class="headerlink" title="✅JS垃圾回收(Garbage collection)机制"></a>✅JS垃圾回收(Garbage collection)机制</h2><p>在计算机编程中，查找删除一些不被其他对象引用的对象处理过程。</p><ol><li><p>项目中，如果存在大量不被释放的内存（堆/栈/上下文），页面性能会变得很慢。当某些代码操作不能被合理释放，就会造成内存泄漏。我们尽可能减少使用闭包，因为它会消耗内存。</p></li><li><p>浏览器垃圾回收机制/内存回收机制:</p><blockquote><p>浏览器的<code>Javascript</code>具有自动垃圾回收机制(<code>GC:Garbage Collecation</code>)，垃圾收集器会定期（周期性）找出那些不在继续使用的变量，然后释放其内存。</p></blockquote><p><strong>标记清除</strong>:在<code>js</code>中，最常用的垃圾回收机制是标记清除：当变量进入执行环境时，被标记为“进入环境”，当变量离开执行环境时，会被标记为“离开环境”。垃圾回收器会销毁那些带标记的值并回收它们所占用的内存空间。</p><p><strong>谷歌浏览器</strong>：“查找引用”，浏览器不定时去查找当前内存的引用，如果没有被占用了，浏览器会回收它；如果被占用，就不能回收。</p><p><strong>IE浏览器</strong>：“引用计数法”，当前内存被占用一次，计数累加1次，移除占用就减1，减到0时，浏览器就回收它。</p></li><li><p>优化手段：</p><ul><li><p>内存优化，避免过多全局变量 ；</p></li><li><p>手动释放引用，用不到的手动设置为null等；</p></li><li><p>合理使用闭包，少一点闭包，多一点内释放；</p></li><li><p>避免循环引用，循环引用指两个或多个对象相互引用，这导致无法被访问，无法被垃圾回收；</p></li><li><p>使用对象池，预先创建一个对象，这个对象可以被复用，在需要创建大量临时对象时可减少回收负担；</p></li><li><p>性能优化循环，避免在大型循环中创建新对象，尽量还是复用对象，减少内存分配和垃圾回收次数；</p></li><li><p>使用RAF，代替延时器定时器，更好促进浏览器渲染引擎的协同工作，使得动画更加丝滑；</p></li><li><p>使用现代JS特性，尽量使用优化迭代后的新特性，而不是var/eval/with这类；</p></li><li><p>使用WebWorker，将大型计算等任务从主线程中分离出来，减少主线程垃圾回收对性能的影响；</p></li><li><p>监控和优化内存应用，使用F12内存工具监控页面内存使用情况，并进行针对性优化，及时优化。</p></li></ul></li><li><p>常见的内存泄漏</p><ul><li>主要：全局变量、闭包、定时器、DOM元素的引用</li><li>其他：未解除事件监听、循环引用、未释放的资源(请求等)、使用缓存不当、大对象的反复重用</li></ul></li></ol><h2 id="✅浏览器存储"><a href="#✅浏览器存储" class="headerlink" title="✅浏览器存储"></a>✅浏览器存储</h2><p>WebStorage、Cookie、indexedDB</p><p>具体见上方浏览器缓存。</p><h2 id="✅存储-cookie的生命周期"><a href="#✅存储-cookie的生命周期" class="headerlink" title="✅存储 cookie的生命周期"></a>✅存储 cookie的生命周期</h2><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><p>服务器通过HTTP响应头↓将一个新的Cookie发送给客户端</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Set</span>-<span class="title class_">Cookie</span>: username=<span class="title class_">JohnDoe</span>; expires=<span class="title class_">Wed</span>, <span class="number">02</span> <span class="title class_">Aug</span> <span class="number">2023</span> <span class="number">12</span>:<span class="number">00</span>:<span class="number">00</span> <span class="variable constant_">UTC</span>; path=/</span><br></pre></td></tr></table></figure><h3 id="存储"><a href="#存储" class="headerlink" title="存储"></a>存储</h3><p>浏览器收到cookie后将其存入特定的文件夹中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cookie = <span class="variable language_">document</span>.<span class="property">cookie</span></span><br></pre></td></tr></table></figure><h3 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h3><p>当客户端向同一个服务器发送请求时，浏览器会检查该服务器的cookie，并将匹配的cookie添加到HTTP报文头中，服务器可以通过读取请求的cookie来获取客户端的信息。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;....&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WriteCookie</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">   now.<span class="title function_">setMonth</span>( now.<span class="title function_">getMonth</span>() - <span class="number">1</span> );</span><br><span class="line">   cookievalue = <span class="built_in">escape</span>(<span class="variable language_">document</span>.<span class="property">myform</span>.<span class="property">customer</span>.<span class="property">value</span>) + <span class="string">&quot;;&quot;</span></span><br><span class="line"></span><br><span class="line">   <span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;name=&quot;</span> + cookievalue;</span><br><span class="line">   <span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;expires=&quot;</span> + now.<span class="title function_">toUTCString</span>() + <span class="string">&quot;;&quot;</span></span><br><span class="line">   <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;Setting Cookies : &quot;</span> + <span class="string">&quot;name=&quot;</span> + cookievalue );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="过期"><a href="#过期" class="headerlink" title="过期"></a>过期</h3><p>设置过期时间的cookie会在过期时间后过期，过期时间通过max-age/expires(废弃)设置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Set</span>-<span class="title class_">Cookie</span>: username=<span class="title class_">JohnDoe</span>; max-age=<span class="number">3600</span>; path=/</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>过期时间到达或者通过设置过期时间为过去的时间，可以使得cookie被删除</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="✅cookie安全"><a href="#✅cookie安全" class="headerlink" title="✅cookie安全"></a>✅cookie安全</h2><ul><li>cookie可能被禁用</li><li>cookie是与浏览器相关的，不同浏览器存储的cookie是不同的</li><li>cookie可能被删除</li><li>cookie安全性不够高，所有cookie都是以纯文本的形式记录在文件中的，因此要适时进行信息加密</li></ul><h2 id="✅cookie-有哪些属性字段呢"><a href="#✅cookie-有哪些属性字段呢" class="headerlink" title="✅cookie 有哪些属性字段呢"></a>✅cookie 有哪些属性字段呢</h2><p><code>name=value;</code>键值对：每个网页最多一个cookie，每个cookie最多20个键值对，value长度不能超过4K。</p><p><code>domain=http://qvq.com;</code>Domain域名：默认情况下用户访问网页的域名会存放在cookie，如果设置该值，代表域名上所有的服务器都可以访问该cookie，通常不能这样搞。</p><p><code>path=/login;</code>目录路径：指定哪个目录的网页可以访问cookie。</p><p><code>expires=date.toGMTString();</code>存活时间：默认情况下用户关闭浏览器cookie自动清除，若配置该值，设置GMT格式时间，cookie将在时间到期后过期。</p><p><code>secure=true/false;</code>https发送cookie：true必须通过https发送cookie。</p><h2 id="✅怎么不让前端去修改cookie？"><a href="#✅怎么不让前端去修改cookie？" class="headerlink" title="✅怎么不让前端去修改cookie？"></a>✅怎么不让前端去修改cookie？</h2><ul><li>http-only：<code>http-only=true;</code> 限制cookie仅通过http/https请求发送到服务器，而无法通过JS<code>document.cookie</code>访问，防止大部分的XSS</li><li>same-site ：<code>same-site=strict/lax;</code>限制cookie仅在同一站点的请求中发送，防止跨站点请求伪造攻击CSRF</li><li>secure ：<code>secure=true;</code>使得只能通过https传输，防止在非加密连接上窃取cookie</li><li>对cookie值进行签名：设置cookie时将cookie值与服务器生成的签名进行结合，并存储在cookie中，服务器在接收到cookie的时候先验证签名的有效性，防止cookie伪造</li></ul><h2 id="✅同源策略"><a href="#✅同源策略" class="headerlink" title="✅同源策略"></a>✅同源策略</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>“同源”指的是==协议、主机、端口==相同的文档源。任何一个不同，就不是同源。</p><p>同源策略限制不同源之间的资源交互，这样做的原因是隔离开潜在恶意文件，从而提升资源交互的安全性。</p><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>页面中所有的对象都继承其所属文档源。</p><h3 id="文件源"><a href="#文件源" class="headerlink" title="文件源"></a>文件源</h3><p>使用<code>file:///</code>协议加载的文件被视为不透明来源，即 将本地文件视为来自一个特殊不安全的文件源。</p><p>处于安全考虑，若一个文件包括来自同一个文件夹下的其他文件，两者被认为不来自同一个源，CORS错误。</p><p>想要解决这个问题可以在本地开一个服务器，使用<a href="http://localhoost等自定义域名进行文件加载,避免cors问题./">http://localhoost等自定义域名进行文件加载，避免CORS问题。</a></p><h3 id="更改"><a href="#更改" class="headerlink" title="更改"></a>更改</h3><p>在限定条件下，页面可以修改源↓</p><h3 id="跨域数据存储和访问"><a href="#跨域数据存储和访问" class="headerlink" title="跨域数据存储和访问"></a>跨域数据存储和访问</h3><p>每一个源都有自己单独的存储空间。WebStorage和IndexedDB都是以源划分存储的。</p><p>Cookie使用不同的源定义方式，也就是说，相比起cookie受同源策略限制的。</p><h2 id="✅怎么解决跨域问题？"><a href="#✅怎么解决跨域问题？" class="headerlink" title="✅怎么解决跨域问题？"></a>✅怎么解决跨域问题？</h2><h3 id="CORS跨域共享-优先-主要方案-双向-标准"><a href="#CORS跨域共享-优先-主要方案-双向-标准" class="headerlink" title="CORS跨域共享-优先-主要方案-双向-标准"></a>CORS跨域共享-优先-主要方案-双向-标准</h3><p>通过服务器设置响应头部中CORS规则，允许其他域名的网页访问该服务器上的资源，包括cookie（设置一个白名单）。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Origin</span>: <span class="attr">https</span>:<span class="comment">//www.example.com</span></span><br><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Methods</span>: <span class="variable constant_">GET</span>, <span class="variable constant_">POST</span>, <span class="variable constant_">PUT</span>, <span class="variable constant_">DELETE</span></span><br><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Headers</span>: <span class="title class_">Content</span>-<span class="title class_">Type</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 允许所有来源的跨域请求</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">  res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;GET, POST, PUT, DELETE&#x27;</span>);</span><br><span class="line">  res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;Content-Type&#x27;</span>);</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在这里处理你的路由和逻辑...</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server started on port 3000&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h3><p>该方法是将代理服务器作为浏览器和目标服务器的中间层，充当一个转发请求的角色。</p><p>vue脚手架、vite框架都会提供代理服务器，可以根据情况进行配置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://api.example.com&#x27;</span>, <span class="comment">// 目标服务器的URL</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// 设置为true，以便正确处理跨域请求</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 将/api路径重写为空字符串，以便正确匹配目标服务器的请求</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my-react-app&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;proxy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://api.example.com&quot;</span> <span class="comment">// 设置代理服务器的目标URL</span></span><br><span class="line">  <span class="comment">// 其他配置项...</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="postMessage-安全-不同窗口-加验证"><a href="#postMessage-安全-不同窗口-加验证" class="headerlink" title="postMessage-安全-不同窗口-加验证"></a>postMessage-安全-不同窗口-加验证</h3><p>在不同窗口或iframe之间，使用哪个该API进行跨域通信。该方式允许窗口间以安全的方式传递数据，跨源数据存储。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>http://example.com<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Parent Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;sendMessage()&quot;</span>&gt;</span>Send Message to Iframe<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">sendMessage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> targetDomain = <span class="string">&#x27;http://subdomain.example.com&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> iframeWindow = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myIframe&#x27;</span>).<span class="property">contentWindow</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> message = <span class="string">&#x27;Hello from Parent Page!&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            iframeWindow.<span class="title function_">postMessage</span>(message, targetDomain);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;myIframe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://subdomain.example.com/iframe.html&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>http://subdomain.example.com/iframe.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Iframe Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 监听message事件</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, receiveMessage, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">receiveMessage</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// event.origin是发送消息的窗口的源</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (event.<span class="property">origin</span> === <span class="string">&#x27;http://example.com&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> message = event.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">`Received Message: <span class="subst">$&#123;message&#125;</span>`</span>); <span class="comment">// &#x27;Hello from Parent Page!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><p>使用script标签加载跨域资源，先创建一个回调函数，将回调函数名绑定在src里callback上，从而使得能在前端调用该函数。函数中带有获取到的数据作为入参，即可对参数做一些处理。可能会有XSS漏洞。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">handleResponse</span>(<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://api.example.com/data?callback=handleResponse&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="document-domain（弃用）"><a href="#document-domain（弃用）" class="headerlink" title="document.domain（弃用）"></a>document.domain（弃用）</h3><p>将该值设置为<strong>当前域或父域</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">domain</span> = <span class="string">&quot;qvq.com&quot;</span></span><br></pre></td></tr></table></figure><p>缺点：</p><ul><li>仅适用于子域名之间的跨域</li><li>无法处理不同端口号间的跨域</li><li>将其设置为顶级域名，影响子域安全性，很有可能收到XSS和CSRF攻击</li><li>用该方式解决跨域要求双方都要更改document.domain</li></ul><h2 id="✅script标签defer，async和没有标识的区别，加载情况，执行情况，对页面的阻塞情况"><a href="#✅script标签defer，async和没有标识的区别，加载情况，执行情况，对页面的阻塞情况" class="headerlink" title="✅script标签defer，async和没有标识的区别，加载情况，执行情况，对页面的阻塞情况"></a>✅<code>script</code>标签defer，async和没有标识的区别，加载情况，执行情况，对页面的阻塞情况</h2><ol><li><strong>没有标识的情况</strong>：<ul><li>默认情况下，如果不指定 <code>defer</code> 或 <code>async</code> 属性，浏览器会按照 <code>&lt;script&gt;</code> 标签在页面中的顺序来加载和执行脚本。</li><li>这会导致浏览器在遇到脚本标签时立即停止渲染页面，开始下载并执行脚本，然后再继续渲染。</li><li>页面加载过程中，脚本的执行会阻塞后续 DOM 解析和渲染，直到脚本执行完毕。</li></ul></li><li><strong><code>defer</code> 属性</strong>：<ul><li>使用 <code>defer</code> 属性的脚本会在 HTML 解析完毕后、DOMContentLoaded 事件之前加载和执行。</li><li>多个带有 <code>defer</code> 属性的脚本会按照它们在页面中的顺序依次执行。</li><li><code>defer</code> 脚本不会阻塞页面的解析和渲染，因此页面可以继续渲染。</li></ul></li><li><strong><code>async</code> 属性</strong>：<ul><li>使用 <code>async</code> 属性的脚本会在下载完成后立即执行，而不会阻塞 HTML 解析。</li><li>多个带有 <code>async</code> 属性的脚本也会并行下载，但不保证执行顺序。</li><li>由于脚本的执行是异步的，所以它们可能会在页面的 DOMContentLoaded 事件之前或之后执行。</li></ul></li></ol><h2 id="✅浏览器内核"><a href="#✅浏览器内核" class="headerlink" title="✅浏览器内核"></a>✅浏览器内核</h2><p>浏览器内核是浏览器的核心组件，主要负责解析和渲染网页内容。</p><p>浏览器内核通常包括两个主要组件：</p><ol><li>渲染引擎<ol><li>负责解析三件，然后转换成网页内容</li><li>DOM CSSOM → RenderTree → 像素</li></ol></li><li>JS引擎<ol><li>解析和执行网页上的JS代码</li><li>交互</li></ol></li></ol><p>浏览器内核的工作方式是多线程的。主线程用于处理界面和渲染，其他线程用于网络请求、JS执行、其他后台服务(垃圾回收、处理文件、管理存储等)。</p><h1 id="🖥️计网"><a href="#🖥️计网" class="headerlink" title="🖥️计网"></a>🖥️计网</h1><h2 id="五层模型"><a href="#五层模型" class="headerlink" title="五层模型"></a>五层模型</h2><ul><li>应用层：HTTP SMTP……</li><li>传输层：TCP UDP DNS TLS</li><li>网络层：IP</li><li>数据链路层</li><li>物理层</li></ul><h2 id="TCP-IP网络模型"><a href="#TCP-IP网络模型" class="headerlink" title="TCP/IP网络模型"></a>TCP/IP网络模型</h2><table><thead><tr><th>各层</th><th>应用层</th><th>传输层</th><th>网络层</th><th>网络接口层</th></tr></thead><tbody><tr><td>作用</td><td>用户所使用的各种应用软件</td><td>传输给对方数数据包，分块TCP段</td><td>传输IP报文，分片</td><td>封装数据帧</td></tr><tr><td>封装格式</td><td>应用数据</td><td>TCP头-应用数据</td><td>IP头-TCP头-应用数据</td><td>帧头-IP头-TCP头-应用数据-帧尾</td></tr><tr><td>协议</td><td>HTTP/FTP/SMTP/DNS…</td><td>TCP/UDP</td><td>IP</td><td></td></tr></tbody></table><h2 id="DNS解析域名的具体过程"><a href="#DNS解析域名的具体过程" class="headerlink" title="DNS解析域名的具体过程"></a>DNS解析域名的具体过程</h2><p>迭代？递归？</p><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[HTTP] --&gt; B[基本概念]</span><br><span class="line">A --&gt; C[GET&amp;POST]</span><br><span class="line">A --&gt; D[特性]</span><br><span class="line">A --&gt; E[缓存技术]</span><br><span class="line">A --&gt; F[HTTP&amp;HTTPS]</span><br><span class="line">A --&gt; G[版本演化]</span><br><span class="line">B --&gt; H[是什么]</span><br><span class="line">B --&gt; I[常见字段]</span><br><span class="line">B --&gt; J[常见状态码]</span><br><span class="line">C --&gt; K[区别]</span><br><span class="line">C --&gt; L[安全幂等吗]</span><br></pre></td></tr></table></figure><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>HTTP是超文本传输协议HyperTextTransferProtocol。</p><p>它是在<strong>客户端-服务端</strong>或<strong>服务端-服务端</strong>之间传输数据的约定和规范。</p><p>第二种之间的传输通信主要场景：</p><ul><li>负载均衡：通过HTTP请求将请求发往不同的服务器，提高性能和可靠性</li><li>分布式系统：分布式系统需要各服务器间协调工作、共享数据、执行分布式任务，HTTP在此充当一种通信手段</li><li>数据同步：如果多个服务器存储着相同/相关的数据，可通过HTTP请求将数据同步到其他服务器，保持数据一致</li><li>微服务架构：微架构中不同的微服务可能运行在不同的服务器上，它们之间通过HTTP通信来完成服务之间交互</li></ul><h3 id="常见字段"><a href="#常见字段" class="headerlink" title="常见字段"></a>常见字段</h3><p>Host→服务器域名</p><p>Content-Length←数据长度</p><p>Connection: Keep-Alive/close    长链接机制，只要任意一段不明确提出断开连接，则保持TCP的连接状态。</p><blockquote><p>HTTP和TCP的keepalive不是一个登西！</p><p>前者由应用层实现，叫HTTP长连接</p><p>后者在TCP层，叫TCP保活</p><p>前者是解决HTTP频繁短连接（建立TCP连接-请求资源-响应资源-释放连接）而增加连接开销的问题，且为HTTP流水线(但是需要kepalive_timeout限制一下防止队头拥塞)提供可能。</p><p>后者是是一种TCP保活机制，如果两端TCP连接一直没有数据交互，那么就触发了TCP保活机制的条件，这时内核会发送探测报文。如果对端正常响应，无事；如果对端宕机，TCP会报告TCP连接死亡。socket接口设置SO_KEEPALIVE选项。</p></blockquote><p>Accept→告知自己可接受哪些数据格式 e.g.<code>Accept: */*</code></p><p>Content-Type←告知数据格式 e.g.<code>Content-Type: text/html; Charset=utf-8</code></p><p>Accept-Encoding→告知能接受哪些数据压缩方法 e.g.<code>Accept-Encoding: gzip deflate</code></p><p>Content-Encoding←说明数据压缩方法 e.g.<code>Content-Encoding: gzip</code></p><h3 id="🈯常见状态码"><a href="#🈯常见状态码" class="headerlink" title="🈯常见状态码"></a>🈯常见状态码</h3><h3 id="GET-amp-POST"><a href="#GET-amp-POST" class="headerlink" title="GET&amp;POST"></a>GET&amp;POST</h3><h4 id="两者区别"><a href="#两者区别" class="headerlink" title="两者区别"></a>两者区别</h4><table><thead><tr><th>区别</th><th>GET</th><th>POST</th></tr></thead><tbody><tr><td>语义</td><td>从服务器获取指定资源</td><td>根据请求负荷(body)对指定资源做出处理</td></tr><tr><td>参数位置</td><td>URL</td><td>body</td></tr><tr><td>限制</td><td>请求参数：ASCII<br />浏览器对其URL长度有限制</td><td>任意格式，两方协商好即可<br />浏览器对其莫得大小限制</td></tr><tr><td>RFC安全</td><td>√ 只读操作，不会修改服务器上的数据</td><td>× 会修改服务器资源</td></tr><tr><td>RFC幂等</td><td>√ 只读操作，服务器上数据安全，结果同</td><td>× 多次提交数据会创建多个资源</td></tr><tr><td>可缓存</td><td>√ 可以对GET请求的数据做缓存(浏览器/代理)</td><td>× 浏览器一般不会缓存POST请求，也不会将请求保存为书签</td></tr></tbody></table><h4 id="两者都是安全和幂等的吗？↑"><a href="#两者都是安全和幂等的吗？↑" class="headerlink" title="两者都是安全和幂等的吗？↑"></a>两者都是安全和幂等的吗？↑</h4><p>根据RFC规范定义的两种方法看：</p><p>安全：请求方法不全不会破坏服务器上的资源</p><p>幂等：多次执行相同的操作，结果是相同的</p><p>但是实际开发中，开发者可能不会遵循以上规范，get也能post，post也能get，body谁都可以用，然而这样不好……</p><h3 id="缓存技术"><a href="#缓存技术" class="headerlink" title="缓存技术"></a>缓存技术</h3><p>跳转：<a href="#%E2%9C%85%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6-%E5%BC%BA%E5%88%B6%E7%BC%93%E5%AD%98%E5%92%8C%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98">强制缓存/协商缓存</a></p><h3 id="HTTP特性"><a href="#HTTP特性" class="headerlink" title="HTTP特性"></a>HTTP特性</h3><h4 id="HTTP-1-1优点"><a href="#HTTP-1-1优点" class="headerlink" title="HTTP/1.1优点"></a>HTTP/1.1优点</h4><p>简单灵活易于扩展应用广泛跨平台</p><ul><li>简单：Header+Body，Header：key-value</li><li>灵活益于扩展：提供各类请求方法、URL/URI、状态码、头字段等，允许自定义扩充</li><li>应用广泛跨平台：阿巴阿巴</li></ul><h4 id="HTTP-1-1缺点"><a href="#HTTP-1-1缺点" class="headerlink" title="HTTP/1.1缺点"></a>HTTP/1.1缺点</h4><p>无状态明文传输不安全</p><ul><li>无状态：虽然服务器不会记忆HTTP状态，不需要额外资源记录状态信息，减轻服务器负担；但是一旦没有记忆能力，完成有关联性操作时会有些麻烦。怎么解决？Cookie！</li><li>明文传输：虽然方便阅读，带来极大便利；但信息裸奔</li><li>不安全：<ul><li>使用明文传输：不加密，内容可能会被窃听</li><li>不验证通过对方身份：可能遭遇伪装</li><li>无法证明报文的完整性：可能被篡改</li></ul></li></ul><p>怎么办？HTTPS</p><h4 id="HTTP-1-1性能"><a href="#HTTP-1-1性能" class="headerlink" title="HTTP/1.1性能"></a>HTTP/1.1性能</h4><p>一般般，长链接管道网络传输队头阻塞</p><ul><li>长链接：相比1.0，1.1有了长链接。</li><li>管道网络传输：在同一个TCP连接中发起多个请求，流水线式发送，减少整体响应时间。</li><li>队头阻塞：<ul><li>√ 请求的队头阻塞：服务器处理请求时耗时较长，后续请求会被阻塞</li><li>× 响应队头阻塞</li></ul></li></ul><h3 id="HTTP-amp-HTTPS"><a href="#HTTP-amp-HTTPS" class="headerlink" title="HTTP&amp;HTTPS"></a>HTTP&amp;HTTPS</h3><h4 id="区别？"><a href="#区别？" class="headerlink" title="区别？"></a>区别？</h4><ul><li>前者是明文传输，后者是加密传输</li><li>前者连接相对简单，后者还需SSL/TLS握手（Secure Sockets Layer / Transport Layer Security）</li><li>前者默认端口80，后者433</li><li>前者免费，后者需要CA申请整数</li></ul><h4 id="HTTPS解决了HTTP哪些问题？"><a href="#HTTPS解决了HTTP哪些问题？" class="headerlink" title="HTTPS解决了HTTP哪些问题？"></a>HTTPS解决了HTTP哪些问题？</h4><p>不再明文传输，而在HTTP和TCP层之间加入了SSL/TLS协议。信息不容易被窃取，网站有身份验证，内容有校验机制↓</p><ul><li>混合加密保证机密性，解决窃听（对称加密和非对称加密混合）<ul><li>通信建立前，使用<strong>非对称加密</strong>方式交换会话密钥。非对称需要<strong>公钥和私钥</strong>，公钥任意分发，私钥保密。交换速度较慢↓</li><li>通信过程中全部使用<strong>对称加密</strong>的会话密钥方式加密明文。<strong>只需一个</strong>保密密钥，运算速度快但不太安全↑</li></ul></li><li>摘要算法+数字签名保证完整性，解决篡改（携带指纹传输）<ul><li>先对内容计算出一个指纹，随内容一起传输给对端</li><li>对端拿到后也对内容计算出一个指纹，对比两个指纹是否一致，否则可能被篡改过</li><li>！哈希算法虽可确保内容不被篡改，但不能保证不被中间人替换。因为缺少对客户端收到的消息是否来源于服务端的证明。为避免这种情况，可用非对称加密算法提供的公私钥解决，相互加解密。<ul><li><strong>公钥加密私钥解密：保证内容传输安全</strong>，只有持有私钥的才能解密（摘）</li><li><strong>私钥加密公钥解密：保证消息不被冒充</strong>，若公正常解密出来，说明是对应端发来的（数）</li></ul></li></ul></li><li>服务器公钥放入数字证书中，防止冒充（CA颁布数字证书包裹公钥，身份验证，防止替换）<ul><li>服务器将自己的公钥注册到CA</li><li>CA用自己的密钥对该公钥进行签名，颁发数字证书</li><li>客户端拿到数字证书后用CA公钥进行确认</li><li>从证书中获取公钥后对报文进行加密</li><li>服务器拿到报文后用私钥解密</li></ul></li></ul><h4 id="HTTPS是如何而建立连接的？期间交互了啥？"><a href="#HTTPS是如何而建立连接的？期间交互了啥？" class="headerlink" title="HTTPS是如何而建立连接的？期间交互了啥？"></a>HTTPS是如何而建立连接的？期间交互了啥？</h4><p><a href="https://xiaolincoding.com/network/2_http/http_interview.html#https-%E6%98%AF%E5%A6%82%E4%BD%95%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E7%9A%84-%E5%85%B6%E9%97%B4%E4%BA%A4%E4%BA%92%E4%BA%86%E4%BB%80%E4%B9%88">原文</a></p><ul><li>ClientHello→支持的TLS版本，支持的加密算法，Client Random随机数</li><li>ServerHello←确认的TLS版本，确认的加密算法，Server Random随机数，数字证书</li><li>ClientResponse→根据CA公钥验证证书，拿到公钥，生成pre-master key，公钥加密，加密通信算法改变通知，握手结束通知</li><li>ServerResponse←计算出会话密钥，加密通信算法改变通知，握手结束通知</li></ul><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/23-HTTPS%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.jpeg" alt="HTTPS 连接建立过程"></p><p>CA证书颁发过程：</p><ul><li>CA将持有者的公钥、用途、颁发者、有效时间等信息打包</li><li>Hash算法计算得到一个值</li><li>用私钥加密该值，生成Certificate Signature（签名）</li><li>将签名添加到文件证书上，形成数字证书</li></ul><p>校验过程：</p><ul><li>使用同样的Hash算法获取证书，得到值</li><li>使用浏览器和操作系统继承的CA公钥信息去解密证书，得到值</li><li>两值比较，若值相同，可信赖；反之不可信</li></ul><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/%E8%AF%81%E4%B9%A6%E7%9A%84%E6%A0%A1%E9%AA%8C.png" alt="img"></p><p>证书层级：</p><ul><li>客户端收到证书后发现该帧数的签发者不是根证书，那么无法根据本地的公钥去验证。于是根据签发者找到证书颁发机构，请求中间证书</li><li>拿到证书后发现这个证书没有上级签发机构了，说明这个就是根证书，然后去验证。</li><li>这个可信的话，拿到了下层证书的公钥，然后验证。</li></ul><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/%E7%94%A8%E6%88%B7%E4%BF%A1%E4%BB%BB.png" alt="img"></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/%E8%AF%81%E4%B9%A6%E9%93%BE.png" alt="img"></p><p>为何要形成一个证书链？——保证根证书的绝对安全性。</p><h4 id="HTTPS应用数据是如何保证完整性的？"><a href="#HTTPS应用数据是如何保证完整性的？" class="headerlink" title="HTTPS应用数据是如何保证完整性的？"></a>HTTPS应用数据是如何保证完整性的？</h4><p>TLS分为握手协议和记录协议两层。</p><ul><li>握手协议：四次握手期间，协商加密算法，生成对称密钥，保护HTTP数据</li><li>记录协议：数据交互期间，保护应用程序数据并返回完整性和来源</li></ul><p>TLS记录协议消息压缩、加密、认证的过程</p><ul><li>将消息分段</li><li>压缩片段</li><li>加入通过哈希算法计算出的消息认证码——Mac值</li><li>对称加密这段</li><li>加上数据的类型、版本、长度</li></ul><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/%E8%AE%B0%E5%BD%95%E5%8D%8F%E8%AE%AE.png" alt="img"></p><h4 id="场景-HTTPS一定安全可靠吗？"><a href="#场景-HTTPS一定安全可靠吗？" class="headerlink" title="场景-HTTPS一定安全可靠吗？"></a>场景-HTTPS一定安全可靠吗？</h4><h5 id="场景描述1"><a href="#场景描述1" class="headerlink" title="场景描述1"></a>场景描述1</h5><p>客户端通过浏览器发请求的时候，被假基站转发到一个中间人服务器，和中间人服务器完成了TLS握手，然后中间人服务器和目标服务器完成了真正的TLS握手。具体步骤如下：</p><blockquote><p>“假基站”</p><p>是指一个恶意的设备或系统，它伪装成合法的移动通信基站，与移动设备建立连接，以便拦截、监听或干扰通信流量。假基站可以用来进行中间人攻击，即在通信双方之间插入自己，以便监视或篡改通信。</p></blockquote><ul><li>客户端向服务端发送HTTPS请求时，被假基站转发到了一个中间站服务器，接着，中间站服务器向这个请求所指明的服务端发送HTTPS请求。此时，客户端与中间人服务器进行TLS握手，中间人服务器与真正的服务器进行TLS握手。</li><li>客户端和中间服务器进行握手过程中，中间服务器发送自己的公钥证书给客户端（<strong>这不就露馅了？？</strong>），客户端验证证书真伪，拿到证书公钥，生成随机数后拿公钥加密，发送给中间服务器。中间服务器用私钥解密得到随机数。随后两者开启对称加密通信。</li><li>中间服务器和服务端进行握手过程中，也是上述类似操作，随后进入对称加密通信阶段。</li><li>在后续的通信过程中，中间服务器使用对称加密密钥A解密客户端发来的请求，然后通过B加密信息转发给服务器，随后B解密服务器传回的信息，A加密信息返回给客户端。</li></ul><p>从客户端角度看，它是看收不到有个中间服务器给转发请求的响应的。也就说这个中间服务器可以偷看信息交互内容！！</p><h5 id="但是这种场景的发生是有前提的"><a href="#但是这种场景的发生是有前提的" class="headerlink" title="但是这种场景的发生是有前提的"></a>但是这种场景的发生是有前提的</h5><ul><li>客户单点击接受了中间人服务器证书。换句话说，确实露馅，客户端在验证服务端证书的时候当然能确定这个中间服务器是非法的，浏览器会给提示的。但是同意的话，那没跑了。（讲真好几年前真的见过很多次这种情况，大多数都被我同意了，因为是查作业题……害怕）</li><li>电脑病毒，被恶意注入了不安全的根证书</li></ul><h5 id="如何避免？"><a href="#如何避免？" class="headerlink" title="如何避免？"></a>如何避免？</h5><ol><li><p>以上两点做好防护</p></li><li><p>HTTPS双向认证，服务端也需认证客户端身份</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81.png" alt="img"></p></li></ol><h5 id="所以HTTPS一定安全可靠吗？"><a href="#所以HTTPS一定安全可靠吗？" class="headerlink" title="所以HTTPS一定安全可靠吗？"></a>所以HTTPS一定安全可靠吗？</h5><p>通过分析上述这个问题，问题所达到的前提其实是和HTTPS无关的。</p><p>HTTPS协议本身目前为止是没有漏洞的……</p><h5 id="场景描述2"><a href="#场景描述2" class="headerlink" title="场景描述2"></a>场景描述2</h5><p>既然如此，为啥抓包能抓到HTTPS数据？</p><p>对于HTTPS来说，中间人能够看到明文数据，需要满足以下两点：</p><ul><li>服务端不会校验客户端身份√</li><li>客户端信任服务端——服务端必须有对应域名的私钥？</li></ul><p>想要拿到私钥，有以下三种方式</p><ul><li>去网站服务端拿到私钥</li><li>去CA证书拿域名签发私钥</li><li>自己签发证书，需要浏览器信任</li></ul><p>抓包其实使用的就是第三种方式，客户端首先需要安装一个Fiddler证书，这里起的就是认证作用。</p><h4 id="HTTP-1-1-gt-HTTP-2-gt-HTTP-3的演变"><a href="#HTTP-1-1-gt-HTTP-2-gt-HTTP-3的演变" class="headerlink" title="HTTP/1.1=&gt;HTTP/2=&gt;HTTP/3的演变"></a>HTTP/1.1=&gt;HTTP/2=&gt;HTTP/3的演变</h4><table><thead><tr><th>比较</th><th>1.1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>改进</td><td>持久化<br />管道化<br /></td><td>头部压缩<br />二进制格式<br />并行传输，解决队头阻塞<br />双方都可建立流(客奇服偶)</td><td>解决TCP队头阻塞<br />直接改用UDP↑<br />更快建立连接<br />连接迁移</td></tr><tr><td>缺陷</td><td>响应头无法压缩延迟大<br />多次相同首部浪费多<br />没有优先级控制<br />服务器被动响应<br />响应队头阻塞</td><td>TCP层的队头拥塞(丢包)</td><td></td></tr></tbody></table><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/27-HTTP3.jpeg" alt="HTTP/1 ~ HTTP/3"></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/28-HTTP3%E4%BA%A4%E4%BA%92%E6%AC%A1%E6%95%B0.jpeg" alt="TCP HTTPS（TLS/1.3） 和 QUIC HTTPS "></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/4cad213f5125432693e0e2a512c2d1a1-20230309231022316.png" alt="好怪诶"></p><p>QUIC协议怎么看着这么常用！</p><blockquote><p>那么<strong>当移动设备的网络从 4G 切换到 WIFI 时，意味着 IP 地址变化了，那么就必须要断开连接，然后重新建立连接</strong>。而建立连接的过程包含 TCP 三次握手和 TLS 四次握手的时延，以及 TCP 慢启动的减速过程，给用户的感觉就是网络突然卡顿了一下，因此连接的迁移成本是很高的。</p><p>而 QUIC 协议没有用四元组的方式来“绑定”连接，而是通过<strong>连接 ID</strong> 来标记通信的两个端点，客户端和服务器可以各自选择一组 ID 来标记自己，因此即使移动设备的网络变化后，导致 IP 地址变化了，只要仍保有上下文信息（比如连接 ID、TLS 密钥等），就可以“无缝”地复用原连接，消除重连的成本，没有丝毫卡顿感，达到了<strong>连接迁移</strong>的功能。</p></blockquote><p>介绍一下WebSocket</p><p>首先再次介绍一下TCP协议，TCP协议是全双工，但是HTTP/1.1却只允许半双工。为啥？</p><p>因为HTTP协议设计之初就是为了客户端请求服务器数据获得网页展示和响应，没有考虑到网页游戏这种需要大量互动的情景。所以一种新的应用层协议WebSocket被设计出来。</p><p>怎么建立Websocket连接？</p><ul><li><p>TCP三次握手后，先用HTTP协议进行一次通信</p></li><li><p>如果想用Websocket，那么在HTTP请求中带上特殊请求头</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">header</span><span class="punctuation">: </span>&#123;</span><br><span class="line">    Connection: Upgrade 升级协议</span><br><span class="line">    Upgrade: WebSocket WebSocket协议 </span><br><span class="line">    Sec-WebSocket-Key: T2a6wZlAwhgQNqruZ2YUyg==\r\n  随机生成的base64代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>【一次握手】如果对端支持WebSocket，那么开始WebSocket握手，并且根据随机码用某种公开的算法生成另一段字符串，放在Set-WebSocket-Accept头中，带上101协议切换状态码，返回给浏览器</p></li><li><p>【两次握手】浏览器也用这种公开算法去将那个随机码转化成一段字符串，对比一致则通过验证</p></li><li><p>然后就可以使用Websocket格式通信了</p><blockquote><p>WebSocket 是基于HTTP的新协议 ××××！！！！</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/3a63a86e5d7e72a37b9828fc6e65c21f.png" alt="图片"></p></blockquote></li></ul><p>介绍一下RPC</p><p>RPC协议出现的比HTTP协议早，没有TCP粘包问题。</p><h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[TCP] --&gt; B[基本认识]</span><br><span class="line">A --&gt; C[建立连接]</span><br><span class="line">A --&gt; D[连接断开]</span><br><span class="line">A --&gt; E[Socket编程]</span><br></pre></td></tr></table></figure><h3 id="✅基本认识"><a href="#✅基本认识" class="headerlink" title="✅基本认识"></a>✅基本认识</h3><p>TCP头部格式</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/format,png-20230309230534096.png" alt="TCP 头格式" style="zoom:50%;" /><p>确定一个TCP连接：源地址、源端口、目的地址、目的端口</p><p>最大TCP连接数=客户端IP数+客户端端口数</p><h3 id="✅TCP和UDP的区别"><a href="#✅TCP和UDP的区别" class="headerlink" title="✅TCP和UDP的区别"></a>✅TCP和UDP的区别</h3><p>两者都是传输层协议。</p><ul><li>UDP不提供复杂的控制机制，利用IP提供面向<strong>无连接</strong>的通信服务。TCP是面向连接的，传输前需要先建立连接。</li><li>UDP<strong>一对一或者一对多或者多对多</strong>服务。TCP一对一两点服务。</li><li>UDP尽最大努力交付，<strong>不保证可靠交付数据</strong>(QUIC解决)。TCP是可靠交付数据，无差错不丢失不重复按序到达。</li><li>UDP<strong>没有拥塞控制</strong>，发送速率很快。TCP有拥塞控制和流量控制，能保证数据安全性。</li><li>UDP<strong>首部固定且小</strong>，8字节。TCP首部长，开销大。</li><li>UDP<strong>包发送，有边界，可能会丢包乱序</strong>。TCP流发送，没有边界。</li><li>UDP的分片是分的<strong>IP层MTU</strong>，在IP层分片重组然后在给传输层。TCP分的是传输层MMS，在传输层分层组装。</li></ul><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/format,png-20230309230439961.png" alt="UDP 头部格式" style="zoom:60%;" /><p>场景</p><ul><li>UDP经常用于包数量小的一些如DNS、SNMP、视频通话、多媒体等</li><li>TCP经常用于FTP文件传输、HTTP/THHPS传输等</li></ul><h3 id="✅TCP和UDP可以使用同一个端口吗？"><a href="#✅TCP和UDP可以使用同一个端口吗？" class="headerlink" title="✅TCP和UDP可以使用同一个端口吗？"></a>✅TCP和UDP可以使用同一个端口吗？</h3><p>可以。</p><p>传输层端口号的作用是<strong>区分同一个主机上不同应用程序的数据包</strong>。</p><blockquote><p>在数据链路层中，通过 MAC 地址来寻找局域网中的主机。在网际层中，通过 IP 地址来寻找网络中互连的主机或路由器。在传输层中，需要通过端口进行寻址，来识别同一计算机中同时通信的不同应用程序。</p></blockquote><p>两者在内核中时两完全相互独立的软件模块。在主机收到数据包时，可以在IP头的协议号字段中得知数据包时TCP还是UDP，从而分送处理。随后根据给的端口号送到对应程序处理。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/tcp%E5%92%8Cudp%E6%A8%A1%E5%9D%97.jpeg" alt="img" style="zoom:50%;" /><h3 id="✅多个TCP服务进程可以绑定同一个端口吗？"><a href="#✅多个TCP服务进程可以绑定同一个端口吗？" class="headerlink" title="✅多个TCP服务进程可以绑定同一个端口吗？"></a>✅多个TCP服务进程可以绑定同一个端口吗？</h3><p>同时绑定一个地址的情况下绑定同一个端口肯定是不行的（Address already in use）；</p><p>绑定的地址不同的情况下绑定同一个端口是可行的。</p><p>——两个TCP同时绑定IP和端口号都相同，执行<code>bind()</code>时会出错↑</p><p>当然还有一个特殊情况：绑定0.0.0.0这个地址意味着绑定了主机上所有的IP地址。</p><h3 id="✅客户端的端口可以重复使用吗？"><a href="#✅客户端的端口可以重复使用吗？" class="headerlink" title="✅客户端的端口可以重复使用吗？"></a>✅客户端的端口可以重复使用吗？</h3><p>可以，只要保证源IP地址、目的IP地址、源端口、目的端口有一不一致（TCP连接不同）就好。</p><h3 id="✅如何解决服务端重启时，报错“Address-already-in-use”的问题？"><a href="#✅如何解决服务端重启时，报错“Address-already-in-use”的问题？" class="headerlink" title="✅如何解决服务端重启时，报错“Address already in use”的问题？"></a>✅如何解决服务端重启时，报错“Address already in use”的问题？</h3><blockquote><p>当我们重启 TCP 服务进程的时候，意味着通过服务器端发起了关闭连接操作，于是就会经过四次挥手，而对于主动关闭方，会在 TIME_WAIT 这个状态里停留一段时间，这个时间大约为 2MSL。</p><p>当 TCP 服务进程重启时，服务端会出现 TIME_WAIT 状态的连接，TIME_WAIT 状态的连接使用的 IP+PORT 仍然被认为是一个有效的 IP+PORT 组合，相同机器上不能够在该 IP+PORT 组合上进行绑定，那么执行 bind() 函数的时候，就会返回了 Address already in use 的错误。</p></blockquote><p>要解决这个问题，我们可以对 socket 设置 SO_REUSEADDR 属性。</p><p>这样即使存在一个和绑定 IP+PORT 一样的 TIME_WAIT 状态的连接，依然可以正常绑定成功，因此可以正常重启成功。</p><h3 id="✅客户端-TCP-连接-TIME-WAIT-状态过多，会导致端口资源耗尽而无法建立新的连接吗？"><a href="#✅客户端-TCP-连接-TIME-WAIT-状态过多，会导致端口资源耗尽而无法建立新的连接吗？" class="headerlink" title="✅客户端 TCP 连接 TIME_WAIT 状态过多，会导致端口资源耗尽而无法建立新的连接吗？"></a>✅客户端 TCP 连接 TIME_WAIT 状态过多，会导致端口资源耗尽而无法建立新的连接吗？</h3><p>要看客户端是否都是与同一个服务器（目标地址和目标端口一样）建立连接。</p><p>如果客户端都是与同一个服务器（目标地址和目标端口一样）建立连接，那么如果客户端 TIME_WAIT 状态的连接过多，当端口资源被耗尽，就无法与这个服务器再建立连接了。即使在这种状态下，还是可以与其他服务器建立连接的，只要客户端连接的服务器不是同一个，那么端口是重复使用的。</p><h3 id="✅如何解决客户端-TCP-连接-TIME-WAIT-过多，导致无法与同一个服务器建立连接的问题？"><a href="#✅如何解决客户端-TCP-连接-TIME-WAIT-过多，导致无法与同一个服务器建立连接的问题？" class="headerlink" title="✅如何解决客户端 TCP 连接 TIME_WAIT 过多，导致无法与同一个服务器建立连接的问题？"></a>✅如何解决客户端 TCP 连接 TIME_WAIT 过多，导致无法与同一个服务器建立连接的问题？</h3><p>打开 net.ipv4.tcp_tw_reuse 这个内核参数。</p><p>因为开启了这个内核参数后，客户端调用 connect 函数时，如果选择到的端口，已经被相同四元组的连接占用的时候，就会判断该连接是否处于 TIME_WAIT 状态。</p><p>如果该连接处于 TIME_WAIT 状态并且 TIME_WAIT 状态持续的时间超过了 1 秒，那么就会重用这个连接，然后就可以正常使用该端口了。</p><h3 id="🈯连接🈯断开"><a href="#🈯连接🈯断开" class="headerlink" title="🈯连接🈯断开"></a>🈯连接🈯断开</h3><h3 id="🈯拥塞处理"><a href="#🈯拥塞处理" class="headerlink" title="🈯拥塞处理"></a>🈯<a href="#####%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6">拥塞处理</a></h3><h3 id="✅TCP怎么保证可靠性？"><a href="#✅TCP怎么保证可靠性？" class="headerlink" title="✅TCP怎么保证可靠性？"></a>✅TCP怎么保证可靠性？</h3><ol><li>序列号和确认：TCP 中的每个数据段都有一个唯一的序列号，以便接收方可以按正确的顺序重组数据。接收方会发送确认消息（ACK）来告知发送方已经成功接收到数据。如果发送方在合理的时间内没有收到确认，它会重传相应的数据段。</li><li>数据重传：如果发送方没有收到接收方的确认消息，或者接收方检测到丢失的数据，TCP 会自动重传丢失的数据段，以确保数据的完整性和可靠性。</li><li>流量控制：TCP 使用窗口机制来控制数据的流量，以防止发送方发送过多的数据，导致接收方无法处理。接收方可以通过调整窗口大小来告知发送方其可接受的数据量。</li><li>拥塞控制：TCP 使用拥塞控制算法来防止网络拥塞。如果网络中发生拥塞，TCP 会减少发送速率以减轻网络压力，然后逐渐增加发送速率以测试网络是否已恢复正常。</li><li>延迟确认：TCP 允许接收方延迟发送确认消息，以减少网络上的确认消息数量，从而提高效率。但是，发送方通常会采用超时重传机制，以确保数据及时被接收确认。</li><li>有限状态机：TCP 在通信的不同阶段使用有限状态机来管理连接的建立、维护和关闭。这有助于确保连接的稳定性和可靠性。</li></ol><h3 id="✅https-建立连接的过程中，为什么用非对称加密来交换密钥？"><a href="#✅https-建立连接的过程中，为什么用非对称加密来交换密钥？" class="headerlink" title="✅https 建立连接的过程中，为什么用非对称加密来交换密钥？"></a>✅https 建立连接的过程中，为什么用非对称加密来交换密钥？</h3><p>主要目的是确保通信的机密性和安全性。</p><ul><li>一把公钥一把私钥，公钥可传递，私钥自己攥着，很安全</li><li>CA认证，数字签名，是否真实</li><li>使用非对称加密交换会话密钥</li></ul><h3 id="✅如果有第三方传给客服端一个假密钥呢，如何判定？"><a href="#✅如果有第三方传给客服端一个假密钥呢，如何判定？" class="headerlink" title="✅如果有第三方传给客服端一个假密钥呢，如何判定？"></a>✅如果有第三方传给客服端一个假密钥呢，如何判定？</h3><p>CA认证+自主判断…</p><h3 id="🈯怎么通过数字证书验证服务端身份的呢？"><a href="#🈯怎么通过数字证书验证服务端身份的呢？" class="headerlink" title="🈯怎么通过数字证书验证服务端身份的呢？"></a>🈯怎么通过数字证书验证服务端身份的呢？</h3><h3 id="✅为什么-https-建立连接用非对称加密，传输数据用对称加密呢？"><a href="#✅为什么-https-建立连接用非对称加密，传输数据用对称加密呢？" class="headerlink" title="✅为什么 https 建立连接用非对称加密，传输数据用对称加密呢？"></a>✅为什么 https 建立连接用非对称加密，传输数据用对称加密呢？</h3><p>前者是为了确认信息传输的两方是否是对的，后者是确认好人之后能够高效的加密解密数据。</p><h3 id="💦Socket编程"><a href="#💦Socket编程" class="headerlink" title="💦Socket编程"></a>💦Socket编程</h3><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/format,png-20230309230545997.png" alt="基于 TCP 协议的客户端和服务端工作" style="zoom:50%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/socket%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.drawio.png" alt="socket 三次握手" style="zoom:50%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/format,png-20230309230538308.png" alt="客户端调用 close 过程" style="zoom:50%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/3.jpg" alt="半连接队列与全连接队列" style="zoom:50%;" /><h2 id="IP"><a href="#IP" class="headerlink" title="IP"></a><a href="https://xiaolincoding.com/network/4_ip/ip_base.html#%E5%89%8D%E8%8F%9C-ip-%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%86">IP</a></h2><h2 id="✅DNS解析过程（应用层-两种方式）"><a href="#✅DNS解析过程（应用层-两种方式）" class="headerlink" title="✅DNS解析过程（应用层-两种方式）"></a>✅DNS解析过程（应用层-两种方式）</h2><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/c9b1c8aa6b5afb3b7ce3c11da4050b95.jpg" alt="c9b1c8aa6b5afb3b7ce3c11da4050b95"></p><h2 id="✅交换机-链路层-自学习过程"><a href="#✅交换机-链路层-自学习过程" class="headerlink" title="✅交换机(链路层)自学习过程"></a>✅交换机(链路层)自学习过程</h2><p>交换机自学习（Switch Self-Learning）是指网络交换机通过监视和学习数据包的源MAC地址来构建MAC地址表，以便正确地转发数据包到适当的目标端口。以下是交换机自学习的过程：</p><ol><li><p>初始状态：当交换机首次启动或重置时，其MAC地址表为空。交换机不知道任何设备的位置或MAC地址。</p></li><li><p>数据包到达：当数据包到达交换机的某个端口时，交换机会检查数据包中的源MAC地址。</p></li><li><p>学习源MAC地址：交换机将源MAC地址与接收到数据包的端口关联起来，并将这个信息添加到其MAC地址表中。如果交换机已经知道这个MAC地址，它会更新该地址的条目。</p></li><li><p>广播数据包：如果交换机无法在其MAC地址表中找到目标MAC地址（即目标MAC地址不在MAC地址表中），它将数据包广播到所有其他端口，以便找到目标设备。这是因为交换机不知道目标设备的确切位置，所以它需要广播以确定目标设备在哪个端口上。</p></li><li><p>学习目标MAC地址：当目标设备响应广播并将响应数据包发送回交换机时，交换机会学习到目标设备的MAC地址，并将其与接收到数据包的端口关联起来，然后将其添加到MAC地址表中。</p></li><li><p>更新MAC地址表：交换机会持续监视流经它的数据包，不断学习和更新MAC地址表。这使得交换机能够在以后的数据包中直接将数据包转发到正确的端口，而无需广播。</p></li></ol><p>通过这个自学习的过程，交换机能够有效地管理和优化数据流，减少网络中的广播风暴，并提高网络性能。它通过构建和维护MAC地址表来确定每个设备的位置，从而在数据包转发时能够更精确地选择目标端口。这有助于减少网络拥塞，提高数据包传输效率。</p><h2 id="✅服务端如何知道多个请求属于哪个用户？"><a href="#✅服务端如何知道多个请求属于哪个用户？" class="headerlink" title="✅服务端如何知道多个请求属于哪个用户？"></a>✅服务端如何知道多个请求属于哪个用户？</h2><ol><li>会话管理：<ul><li>会话是一种服务器用来跟踪用户在网站上的活动的方式。每个用户在访问网站时都会获得一个唯一的会话标识，通常以会话cookie的形式存储在用户的浏览器中。服务器可以使用这个会话标识来识别用户并将多个请求关联到同一个用户。</li><li>会话管理可以在服务器端实现，通常会使用服务器端的存储（如内存、数据库或缓存）来存储会话数据。一旦用户成功登录，服务器会为用户创建一个会话，并将会话标识发送到用户的浏览器。随后的每个请求都会包含这个会话标识，服务器通过它来确定请求属于哪个用户。</li></ul></li><li>身份验证：<ul><li>用户登录是识别用户的另一种常见方式。当用户进行登录操作时，服务器会验证其凭据（通常是用户名和密码），并在成功验证后将用户标识与会话相关联。</li><li>身份验证可以基于不同的机制，包括基本身份验证、令牌验证、OAuth 2.0、OpenID Connect 等。一旦用户登录，服务器就可以在后续请求中使用用户的身份信息来确定请求属于哪个用户。</li></ul></li><li>IP 地址和其他标识符：<ul><li>服务器还可以根据用户的 IP 地址和其他浏览器提供的标识符来尝试识别用户。然而，这种方法通常不够可靠，因为多个用户可能共享相同的 IP 地址，而且一些用户可能使用代理服务器或 VPN，导致 IP 地址变化频繁。</li></ul></li></ol><h2 id="🈯服务器状态码"><a href="#🈯服务器状态码" class="headerlink" title="🈯服务器状态码"></a>🈯服务器状态码</h2><h1 id="⚙️OS"><a href="#⚙️OS" class="headerlink" title="⚙️OS"></a>⚙️OS</h1><p><a href="https://xiaolincoding.com/os/4_process/process_base.html#_5-1-%E8%BF%9B%E7%A8%8B%E3%80%81%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">target</a></p><h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>当我们在运行一个可执行文件的时候，这个文件会被装载到内存中，接着CPU会执行这个程序中的每一条指令，这个运行中的程序被称为进程。    </p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/6-%E5%81%9A%E8%8F%9C%E5%AF%B9%E5%BA%94%E8%BF%9B%E7%A8%8B%E5%85%B3%E7%B3%BB.jpg" alt="img" style="zoom: 67%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/5-%E5%B9%B6%E5%8F%91%E4%B8%8E%E5%B9%B6%E8%A1%8C.jpg" alt="并发与并行" style="zoom:67%;" /><h3 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h3><ul><li>运行</li><li>就绪</li><li>阻塞</li></ul><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/7-%E8%BF%9B%E7%A8%8B%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E7%8A%B6%E6%80%81.jpg" alt="进程的三种基本状态" style="zoom: 67%;" /><ul><li>创建</li><li>结束</li></ul><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/8-%E8%BF%9B%E7%A8%8B%E4%BA%94%E4%B8%AA%E7%8A%B6%E6%80%81.jpg" alt="进程五种状态的变迁" style="zoom:67%;" /><ul><li>阻塞</li><li>挂起</li></ul><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/10-%E8%BF%9B%E7%A8%8B%E4%B8%83%E4%B8%AD%E7%8A%B6%E6%80%81.jpg" alt="七种状态变迁" style="zoom:67%;" /><h3 id="进程的控制结构"><a href="#进程的控制结构" class="headerlink" title="进程的控制结构"></a>进程的控制结构</h3><p>在OS中，使用**进程控制块PCB(process control clock)**数据结构来描述进程。</p><ul><li>PCB是进程存在的唯一标识</li><li>PCB包含的信息<ul><li>进程描述信息：进程标识符、用户标识符</li><li>进程控制和管理信息：状态、优先级</li><li>资源分配清单：内存/虚拟地址空间信息、文件列表和I/O设备信息</li><li>CPU相关信息：CPU状态信息等</li></ul></li><li>每个PCB如何组织<ul><li>链接：将相同状态的进程链在一起，组成各种队列，有运行指针<img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/12-PCB%E7%8A%B6%E6%80%81%E9%93%BE%E8%A1%A8%E7%BB%84%E7%BB%87.jpg" alt="就绪队列和阻塞队列"></li><li>索引：将相同的状态的进程组织在一个索引表中，索引表每项指向响应的PCB</li><li>一般会选择链接方式，因为临时进程的创建和销毁频繁，更适合这种灵活插入删除的结构！</li></ul></li></ul><h3 id="进程的控制"><a href="#进程的控制" class="headerlink" title="进程的控制"></a>进程的控制</h3><p>创建—终止—阻塞—唤醒的过程。</p><ol><li>创建：OS允许在一个进程中创建另一个进程，并允许子进程继承父进程的所有资源。过程↓<ol><li>申请一个空白的PCB，向PCB中填写一些控制管理进程的信息（唯一标识）</li><li>分配运行时所必需的资源</li><li>将PCB插入到就绪队列，等待被调度运行</li></ol></li><li>终止：正/异常结束、外界干预导致进程终止。子进程被终止的时候将资源还给父进程；父进程终止后子进程变成孤儿进程，会被1号进程收养，并由1号进程对它完成状态收集工作。过程↓<ol><li>查找需要终止的进程的PCB</li><li>如果处于执行状态，立即终止，将CPU分配给其他进程</li><li>如果还有子进程，将其交给1号进程接管</li><li>将该进程所有的资源归还给OS</li><li>将其从PCB所在的队列中删除</li></ol></li><li>阻塞：当进程需要等待某一事件完成时，可以调用阻塞语句将自己阻塞等待，一旦被阻塞等待，就只能由另一个进程唤醒。过程↓<ol><li>找到即将被阻塞进程标识号对应的PCB</li><li>如果为运行状态，保护现场，转换状态，停止运行</li><li>将PCB移到阻塞队列里</li></ol></li><li>唤醒：正在阻塞队列中的进程所期待的事件出现，才能被唤醒。过程↓<ol><li>找到这个PCB</li><li>将这个PCB从阻塞队列移出</li><li>想这个PCB放进就绪队列里</li></ol></li></ol><h3 id="进程的上下文切换"><a href="#进程的上下文切换" class="headerlink" title="进程的上下文切换"></a>进程的上下文切换</h3><p>一个进程切换到另一个进程。</p><h4 id="CPU上下文切换"><a href="#CPU上下文切换" class="headerlink" title="CPU上下文切换"></a>CPU上下文切换</h4><p>大多数OS支持多任务，即大于CPU数量的任务同时运行。但实际上并非同时运行。</p><p>OS需要事先帮CPU设置好<strong>CPU寄存器和程序计数器</strong>。寄存器这个东西是一个内部容量小但是速度极快的缓存。计数器是用来存储CPU正在执行的指令位置、或者即将执行的下一条指令的位置。</p><p>CPU寄存器和计数器是CPU在运行任何任务之前，所必须依赖的环境。这些环境就叫做<strong>CPU上下文</strong>。</p><p><strong>CPU上下文切换</strong>就是把前一个任务的上下文保存起来(系统内核)，然后加载好新的上下文，最后根据计数器所指的新任务进行跳转运行。</p><p>↑当之前那个任务再次被分配给 CPU 运行时，CPU 会根据内核中保存的信息重新加载这些上下文，这样就能保证任务原来的状态不受影响，让任务看起来还是连续运行。</p><h4 id="进程上下文切换"><a href="#进程上下文切换" class="headerlink" title="进程上下文切换"></a>进程上下文切换</h4><p>进程上下文切换不仅包括虚拟内存、栈、全局变量等用户空间资源，还包括内核堆栈、寄存器等内核空间的资源。</p><p>通常将交换信息保存在进程的PCB中，当要运行这个进程的时候，需要从PCB中取出上下文，将其恢复到CPU中，运行。</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/13-%E8%BF%9B%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2.jpg" alt="进程上下文切换"></p><p>进程上下文切换的开销非常关键，应该把更多的时间花费在执行程序上，而不是切换。</p><h4 id="发生进程上下文切换的场景"><a href="#发生进程上下文切换的场景" class="headerlink" title="发生进程上下文切换的场景"></a>发生进程上下文切换的场景</h4><ul><li>公平调度，CPU时间切片，轮流分配</li><li>进程在系统资源不足，需要更多资源，挂起，执行别的先</li><li>进程sleep函数主动挂起</li><li>优先级更高的来了</li><li>发生硬件中断</li></ul><h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><p>thread</p><h3 id="为什么使用线程什么是线程"><a href="#为什么使用线程什么是线程" class="headerlink" title="为什么使用线程什么是线程"></a>为什么使用线程什么是线程</h3><p>线程是一种实体，它满足</p><ul><li>实体之间可以并发运行</li><li>实体之间共享相同的地址空间</li></ul><p><strong>线程是进程当中一条执行流程</strong>。每个线程都有各自一套独立的寄存器和栈，这样可以确保现成的控制流是相对独立的。</p><h3 id="线程的优缺点"><a href="#线程的优缺点" class="headerlink" title="线程的优缺点"></a>线程的优缺点</h3><p>优点</p><ul><li>一个进程中可以同时有多条线程</li><li>各个线程之间可以并发执行</li><li>各个线程之间可以共享地址空间和文件等资源</li></ul><p>缺点</p><ul><li>当进程中一条线程崩溃时，会导致所属进程所有线程崩溃</li></ul><h3 id="两者的比较↓↓"><a href="#两者的比较↓↓" class="headerlink" title="两者的比较↓↓"></a>两者的比较↓↓</h3><h3 id="线程的上下文切换"><a href="#线程的上下文切换" class="headerlink" title="线程的上下文切换"></a>线程的上下文切换</h3><p>现成是调度的基本单位，所谓“OS的任务调度”，实际上调度的对象就是线程，而进程只是给线程提供了虚拟内存和全局变量等资源。</p><ul><li>若两线程属于同一个进程，切换过程和切换进程上下文一样</li><li>若两线程不属于同一进程，虚拟内存保持不动，切换线程的私有数据、寄存器等不共享的数据即可</li></ul><h3 id="线程的实现"><a href="#线程的实现" class="headerlink" title="线程的实现"></a>线程的实现</h3><h4 id="线程实现方式分三种"><a href="#线程实现方式分三种" class="headerlink" title="线程实现方式分三种"></a>线程实现方式分三种</h4><ul><li>用户线程User：在用户空间内实现的线程，由用户态的线程库来完成的线程管理</li><li>内核线程Kernel：内核中实现的线程，是内核管理的线程</li><li>轻量级进程LightWeight：在内核中用来支持用户线程</li></ul><h4 id="用户线程和内核线程的对应关系："><a href="#用户线程和内核线程的对应关系：" class="headerlink" title="用户线程和内核线程的对应关系："></a>用户线程和内核线程的对应关系：</h4><p>一对一、多对一、多对多</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/18-%E5%86%85%E6%A0%B8%E7%BA%BF%E7%A8%8B%E4%B8%8E%E7%94%A8%E6%88%B7%E7%BA%BF%E7%A8%8B-%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E7%B3%BB.jpg" alt="一对一" style="zoom: 33%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/17-%E5%86%85%E6%A0%B8%E7%BA%BF%E7%A8%8B%E4%B8%8E%E7%94%A8%E6%88%B7%E7%BA%BF%E7%A8%8B-%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB.jpg" alt="多对一" style="zoom: 33%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/19-%E5%86%85%E6%A0%B8%E7%BA%BF%E7%A8%8B%E4%B8%8E%E7%94%A8%E6%88%B7%E7%BA%BF%E7%A8%8B-%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB.jpg" alt="多对多" style="zoom: 33%;" /></p><h4 id="用户线程的理解和优缺点"><a href="#用户线程的理解和优缺点" class="headerlink" title="用户线程的理解和优缺点"></a>用户线程的理解和优缺点</h4><p>理解：</p><p>用户线程是基于用户态的线程管理库实现的。线程控制块<strong>TCB</strong>也是在库里实现的，对于OS而言是看不到TCB的。</p><p>所以用户线程整个线程的管理调度OS不直接参与，而是通过用户级线程库来实现。包括创建、终止、同步和调度。</p><p>用户级线程模型(多对一)：<img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/20-%E7%BA%BF%E7%A8%8BPCB-%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB.jpg" alt="用户级线程模型" style="zoom:50%;" /></p><p>优点：</p><ul><li>TCB由用户级线程管理库函数来维护，可用于不支持线程技术的OS</li><li>用户线程切换也是↑，无需用户态和内核态切换，速度很快</li></ul><p>缺点：</p><ul><li>OS不参与线程调度，某用户线程发起系统调用一阻塞，所有用户线程都无法执行</li><li>CPU使用权用户态线程是无权打断别的县城然后使用的，只用OS才有，但用户线程不受OS管理</li><li>时间片分配给了进程，那么多线程执行的时候每个线程得到的时间片就少了</li></ul><h4 id="内核线程的理解和优缺点"><a href="#内核线程的理解和优缺点" class="headerlink" title="内核线程的理解和优缺点"></a>内核线程的理解和优缺点</h4><p>理解：</p><p>内核是由OS管理的，TCB放OS里。</p><p>内核线程模型(一对一)：<img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/21-%E7%BA%BF%E7%A8%8BPCB-%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E7%B3%BB.jpg" alt="内核线程模型" style="zoom:50%;" /></p><p>优点：</p><ul><li>一个进程中，某内核线程发起的系统调用被阻塞，不会影响其他内核线程的运行。</li><li>分配给线程，多线程的进程获得更多的CPU运行时间</li></ul><p>缺点：</p><ul><li>支持内核线程的OS中，由内核来维护进程和线程的上下文信息</li><li>线程的状态变化都由OS把控，开销点大</li></ul><h4 id="轻量级进程的理解和优缺点"><a href="#轻量级进程的理解和优缺点" class="headerlink" title="轻量级进程的理解和优缺点"></a>轻量级进程的理解和优缺点</h4><p>理解：</p><p><em><strong>Light-weight process，LWP</strong></em> 是内核支持的用户线程，一个进程可以有一个或多个LWP，每个LWP是跟内核线程一对一映射的，且LWP由内核管理并和普通进程一样被调度。</p><blockquote><p>在大多数系统中，<strong>LWP与普通进程的区别也在于它只有一个最小的执行上下文和调度程序所需的统计信息</strong>。</p></blockquote><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/22-LWP.jpg" alt="LWP 模型" style="zoom:30%;" /><p>(1:1 / N:1 / M:N / 组合)模式</p><p>优点/缺点?</p><h2 id="调度"><a href="#调度" class="headerlink" title="调度"></a>调度</h2><p>选择一个进程运行这一功能是在操作系统中完成的，通常称为<strong>调度程序</strong>（<em>scheduler</em>）</p><h3 id="✅调度时机"><a href="#✅调度时机" class="headerlink" title="✅调度时机"></a>✅调度时机</h3><p>在进程生命周期中，当进程行一个运行状态到另外一个状态的时候，其实会触发一次调度。</p><h3 id="✅调度原则"><a href="#✅调度原则" class="headerlink" title="✅调度原则"></a>✅调度原则</h3><ol><li>当触发I/O请求，等待时CPU是空闲的，调度程序需要从就绪队列中选择一个进程来执行。</li><li>要提高系统的吞吐率，调度程序要权衡长任务和短任务进程的进行时间和运行完成的数量。</li><li>周转时间越小越好，等待时间不宜过长(周转时间=运行时间+等待时间)。</li><li>就绪队列中进程的等待时间不宜过长。</li><li>交互式较强的应用，响应时间最好短一些。</li></ol><p>✅基于上述五条原则，我们需要</p><ul><li>↑<strong>CPU利用率</strong>：让CPU忙起来</li><li>~<strong>吞吐量</strong>：控制吞吐量合适</li><li>↓<strong>周转时间</strong>：越短越好</li><li>↓<strong>等待时间</strong>：越短越好</li><li>↓<strong>响应时间</strong>：越短越好</li></ul><h3 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h3><ul><li>先来先服务first come first serve</li><li>最短作业优先shortest job first-运行时长</li><li>高响应比优先highest response ratio next-$优先权=(等待时间+要求服务时间)/要求服务时间$，些许理想难实现</li><li>时间片轮转round robin-哐叮哐叮哐叮，长短要合适20ms-50ms</li><li>最高优先级highest priority first-(静态优先级，动态优先级)(抢占式，非抢占式)</li><li>多级反馈队列multilevel feedback queue-RR+HPF，多个队列，优先级从高到低，时间片从短到长</li></ul><h2 id="✅进程和线程的区别"><a href="#✅进程和线程的区别" class="headerlink" title="✅进程和线程的区别"></a>✅进程和线程的区别</h2><p>进程（Process）是资源拥有的基本单位；线程（Thread）是调度的基本单位。</p><p>一些重要的区别：</p><ol><li><p><strong>定义</strong>：</p><ul><li>进程：进程是操作系统分配资源的基本单位，它包括一个独立的内存空间、一个或多个线程以及与其他进程隔离的系统资源（如文件句柄、网络连接等）。</li><li>线程：线程是进程内的执行单元，一个进程可以包含多个线程，它们共享相同的内存空间和系统资源。</li></ul></li><li><p><strong>资源分配</strong>：</p><ul><li>进程：进程之间相互独立，每个进程有自己的内存空间和系统资源，进程之间的通信通常需要使用特定的机制（如进程间通信，IPC）。</li><li>线程：线程共享相同的进程内存和资源，线程之间的通信更加容易，因为它们可以直接访问相同的内存空间。</li></ul></li><li><p><strong>开销</strong>：</p><ul><li>进程：创建和销毁进程通常比较耗费资源，因为需要分配和释放独立的内存空间以及管理进程的状态。</li><li>线程：创建和销毁线程通常比较轻量，因为它们共享相同的资源，只需分配和释放少量内存来存储线程的上下文。</li></ul></li><li><p><strong>并发性和多核利用</strong>：</p><ul><li>进程：不同进程之间可以在多核处理器上并行执行，但进程间的通信成本较高。</li><li>线程：线程可以更有效地利用多核处理器，因为它们共享相同的地址空间，可以更容易地实现并发执行。</li></ul></li><li><p><strong>稳定性</strong>：</p><ul><li>进程：由于进程之间的隔离性，一个进程的崩溃通常不会影响其他进程。</li><li>线程：一个线程的错误可能会影响同一进程内的其他线程，因为它们共享相同的内存空间。</li></ul></li><li><p><strong>适用场景</strong>：</p><ul><li>进程：适用于需要高度隔离的任务，如运行不同的应用程序，每个应用程序都作为一个独立的进程运行。</li><li>线程：适用于需要轻量级并发的任务，如图形界面应用程序、服务器应用程序和多线程编程。</li></ul></li></ol><p>综上所述，进程和线程都有其自身的优点和适用场景。选择使用哪种方式取决于任务的性质和要求。在某些情况下，也可以同时使用进程和线程来充分利用计算资源。</p><h2 id="进程之间的通信方式"><a href="#进程之间的通信方式" class="headerlink" title="进程之间的通信方式"></a>进程之间的通信方式</h2><p>每个进程的用户空间都是独立的，一般不能相互访问；内核空间共享，所有进程之间的通信必须通过内核。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/4-%E8%BF%9B%E7%A8%8B%E7%A9%BA%E9%97%B4.jpg" alt="img" style="zoom:67%;" /><ul><li>管道：效率较低，不适合频繁交换数据<ul><li>前者输出是后者输入</li><li>管道传输数据是单向的</li><li>匿名管道、命名管道</li></ul></li><li>消息队列：不适合放较大数据，存在用户态和内核态之间的数据拷贝开销<ul><li>保存在内核中的消息链表</li></ul></li><li>共享内存：速度提升，无需拷贝<ul><li>不同进程拿出一块虚拟地址映射到相同的物理内存空间</li></ul></li><li>信号量<ul><li>一个整数计数器，主要用于实现进程间的互斥和同步，而不是缓存进程之间的通信数据</li><li>为了防止多进程竞争共享资源，而造成的数据错乱</li><li>PV操作 (P -1若减后&lt;0，说明已被占用，需要阻塞等待； V +1若加后&lt;=0，说明有阻塞，唤起该进程)<img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/11-%E4%BF%A1%E5%8F%B7%E9%87%8F-%E5%90%8C%E6%AD%A5.jpg" alt="img"></li></ul></li><li>信号：对于异常情况下的工作模式，就需要用「信号」的方式来通知进程。</li><li>Socket：前面提到的管道、消息队列、共享内存、信号量和信号都是在同一台主机上进行进程间通信，那要想<strong>跨网络与不同主机上的进程之间通信，就需要 Socket 通信了。</strong><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20231005192832392.png" alt="image-20231005192832392" style="zoom:67%;" /></li></ul><h2 id="✅如何解决多线程冲突"><a href="#✅如何解决多线程冲突" class="headerlink" title="✅如何解决多线程冲突"></a>✅如何解决多线程冲突</h2><p>对于共享资源，如果没有上锁，那么在多线程的环境里，容易发生冲突。</p><p>多线程相互竞争操作共享变量时，结果有不确定性。由于多线程执行操作共享变量的这段代码可能会导致竞争状态，称这段代码为<strong>临界区</strong>。它是访问贡献资源的片段，一定不能给多线程同时执行。</p><h3 id="互斥和同步"><a href="#互斥和同步" class="headerlink" title="互斥和同步"></a>互斥和同步</h3><p>互斥：保证一个线程在临界区执行，其他线程应该被阻止进入临界区。</p><p>同步：并发进程/线程在一些关键点上需要相互等待和通信，这种制约等待和交互信息称为同步。</p><p>实现：</p><ul><li>加锁解锁</li><li>信号量PV操作</li></ul><h3 id="生产者消费者"><a href="#生产者消费者" class="headerlink" title="生产者消费者"></a>生产者消费者</h3><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/21-%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B.jpg" alt="img"></p><h3 id="哲学家就餐"><a href="#哲学家就餐" class="headerlink" title="哲学家就餐"></a>哲学家就餐</h3><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/24-%E5%93%B2%E5%AD%A6%E5%AE%B6%E8%BF%9B%E9%A4%90-%E6%96%B9%E6%A1%88%E4%B8%80%E7%A4%BA%E4%BE%8B.jpg" alt="img"></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/26-%E5%93%B2%E5%AD%A6%E5%AE%B6%E8%BF%9B%E9%A4%90-%E6%96%B9%E6%A1%88%E4%BA%8C%E7%A4%BA%E4%BE%8B.jpg" alt="img"></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/28-%E5%93%B2%E5%AD%A6%E5%AE%B6%E8%BF%9B%E9%A4%90-%E6%96%B9%E6%A1%88%E4%B8%89%E7%A4%BA%E4%BE%8B.jpg" alt="img"></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/30-%E5%93%B2%E5%AD%A6%E5%AE%B6%E8%BF%9B%E9%A4%90-%E6%96%B9%E6%A1%88%E5%9B%9B%E7%A4%BA%E4%BE%8B.jpg" alt="img"></p><h3 id="读者写者"><a href="#读者写者" class="headerlink" title="读者写者"></a>读者写者</h3><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/32-%E8%AF%BB%E8%80%85%E5%86%99%E8%80%85-%E6%96%B9%E6%A1%88%E4%B8%80%E7%A4%BA%E4%BE%8B.jpg" alt="img"></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/33-%E8%AF%BB%E8%80%85%E5%86%99%E8%80%85-%E6%96%B9%E6%A1%88%E4%BA%8C%E7%A4%BA%E4%BE%8B.jpg" alt="img"></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/34-%E8%AF%BB%E8%80%85%E5%86%99%E8%80%85-%E6%96%B9%E6%A1%88%E4%B8%89%E7%A4%BA%E4%BE%8B.jpg" alt="img"></p><h2 id="✅怎么避免死锁"><a href="#✅怎么避免死锁" class="headerlink" title="✅怎么避免死锁"></a>✅怎么避免死锁</h2><h3 id="死锁概念"><a href="#死锁概念" class="headerlink" title="死锁概念"></a>死锁概念</h3><p>两个线程为了保护两个不同的资源使用了两个互斥锁，两个锁应用不当时，可能会造成两个线程都在等待对方解锁，从而形成死锁的局面。</p><p>条件缺一不可成死锁</p><ol><li>互斥条件：多个线程不能同时使用同一个资源</li><li>持有并等待条件：线程A在等待资源2的同时并不会释放自己已持有的资源1</li><li>不可剥夺条件：资源在自己使用完之前不能被其他线程获取</li><li>环路等待条件：两个线程获取资源的顺序构成了环形链</li></ol><h3 id="死锁成因↑"><a href="#死锁成因↑" class="headerlink" title="死锁成因↑"></a>死锁成因↑</h3><h3 id="利用工具排查死锁"><a href="#利用工具排查死锁" class="headerlink" title="利用工具排查死锁"></a>利用工具排查死锁</h3><p>jstack</p><h3 id="避免死锁的办法"><a href="#避免死锁的办法" class="headerlink" title="避免死锁的办法"></a>避免死锁的办法</h3><p>资源有序分配</p><p>线程 A 和 线程 B 获取资源的顺序要一样，当线程 A 是先尝试获取资源 A，然后尝试获取资源 B 的时候，线程 B 同样也是先尝试获取资源 A，然后尝试获取资源 B。也就是说，线程 A 和 线程 B 总是以相同的顺序申请自己想要的资源。</p><p>我们使用资源有序分配法的方式来修改前面发生死锁的代码，我们可以不改动线程 A 的代码。</p><p>我们先要清楚线程 A 获取资源的顺序，它是先获取互斥锁 A，然后获取互斥锁 B。</p><p>所以我们只需将线程 B 改成以相同顺序的获取资源，就可以打破死锁了。</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/%E8%B5%84%E6%BA%90%E6%9C%89%E5%BA%8F%E5%88%86%E9%85%8D.png" alt="img"></p><h2 id="悲观锁乐观锁等各种锁"><a href="#悲观锁乐观锁等各种锁" class="headerlink" title="悲观锁乐观锁等各种锁"></a>悲观锁乐观锁等各种锁</h2><p><a href="https://xiaolincoding.com/os/4_process/pessim_and_optimi_lock.html">原文</a></p><h2 id="✅一个进程可以创建多少个线程"><a href="#✅一个进程可以创建多少个线程" class="headerlink" title="✅一个进程可以创建多少个线程"></a>✅一个进程可以创建多少个线程</h2><p>因素：</p><ul><li>进程的虚拟内存空间上限</li><li>系统参数限制</li></ul><h2 id="线程崩溃进程也会崩溃吗"><a href="#线程崩溃进程也会崩溃吗" class="headerlink" title="线程崩溃进程也会崩溃吗"></a>线程崩溃进程也会崩溃吗</h2><p>实在是不打算了解了呃呃</p><h1 id="🎨HTML-CSS"><a href="#🎨HTML-CSS" class="headerlink" title="🎨HTML/CSS"></a>🎨HTML/CSS</h1><h2 id="✅HTML5相对于其他版本的优势"><a href="#✅HTML5相对于其他版本的优势" class="headerlink" title="✅HTML5相对于其他版本的优势"></a>✅HTML5相对于其他版本的优势</h2><ul><li>增加了很多语义化标签，比如header main article section footer nav aside等</li><li>增加媒体标签，使更好替代flash，比如audio vedio </li><li>更加侧重语义化，对SEO搜索引擎优化很友好</li><li>针对JS增加了很多可操作的接口和全局属性</li><li>可移植性增强，多端适配</li><li>其他：canvasJS绘图、webWorkers、WebSockets、RAF、离线存储</li></ul><h2 id="✅HTML5优势细说"><a href="#✅HTML5优势细说" class="headerlink" title="✅HTML5优势细说"></a>✅HTML5优势细说</h2><h3 id="标签分类"><a href="#标签分类" class="headerlink" title="标签分类"></a>标签分类</h3><h4 id="布局标签状态标签列表标签文本标签……"><a href="#布局标签状态标签列表标签文本标签……" class="headerlink" title="布局标签状态标签列表标签文本标签……"></a>布局标签状态标签列表标签文本标签……</h4><h3 id="新增表单功能"><a href="#新增表单功能" class="headerlink" title="新增表单功能"></a>新增表单功能</h3><table><thead><tr><th>属性名</th><th>功能</th></tr></thead><tbody><tr><td>placeholder</td><td>提示文字（注意：不是默认值， value 是默认值），适用于文字输入类的表单控件。昂昂！</td></tr><tr><td>required</td><td>表示该输入项必填， 适用于除按钮外其他表单控件。</td></tr><tr><td>autofocus</td><td>自动获取焦点，适用于所有表单控件。果然会用到这个！</td></tr><tr><td>autocomplete</td><td>自动完成，可以设置为 on 或 off ，适用于文字输入类的表单控件。注意：密码输入框、多行输入框不可用。</td></tr><tr><td>pattern</td><td>填写正则表达式，适用于文本输入类表单控件。注意：多行输入不可用，且空的输入框不会验证，往往与 required 配合。</td></tr></tbody></table><h3 id="音频视频标签"><a href="#音频视频标签" class="headerlink" title="音频视频标签"></a>音频视频标签</h3><h3 id="新增全局属性"><a href="#新增全局属性" class="headerlink" title="新增全局属性"></a>新增全局属性</h3><table><thead><tr><th>属性名</th><th>功能</th></tr></thead><tbody><tr><td>contenteditable</td><td>表示元素是否可被用户编辑，可选值如下：true ：可编辑false ：不可编辑</td></tr><tr><td>draggable</td><td>表示元素可以被拖动，可选值如下：true ：可拖动false ：不可拖动</td></tr><tr><td>hidden</td><td>隐藏元素</td></tr><tr><td>spellcheck</td><td>规定是否对元素进行拼写和语法检查，可选值如下：true ：检查false ：不检查</td></tr><tr><td>contextmenu</td><td>规定元素的上下文菜单，在用户鼠标右键点击元素时显示。</td></tr><tr><td>==data-* 这个用过哦！==</td><td>==用于存储页面的私有定制数据。doc.dataset.* 这个和下一个都是H5中非常有用的自定义属性！==</td></tr><tr><td>==aria-*==</td><td>==用于增强网页的可访问性，特别是对于使用屏幕阅读器等辅助技术的用户。==</td></tr><tr><td>lang</td><td>语言</td></tr><tr><td>class/id/style/title</td><td>样式、标识、标签等</td></tr></tbody></table><h3 id="离线存储"><a href="#离线存储" class="headerlink" title="离线存储"></a>离线存储</h3><p>H5使用离线存储机制，使得网页应用程序可以在用户离线时仍可正常运行。也就是说用户离线了，也可以利用浏览器中缓存的一些数据进行一些操作，提高用户体验。</p><h4 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h4><p>ApplicationCache应用缓存程序——一个存储机制，允许开发者定义哪些资源应该被缓存，保证离线也能加载。这些资源包括文档、样式、JS、图像等。</p><h4 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h4><ol><li><p>创建缓存清单文件CacheManifest：创建一个扩展名为.appcache的文本文件</p></li><li><p>在HTML中引用缓存清单：<code>&lt;html manifest:&#39;....appcache&#39;&gt;&lt;/html&gt;</code></p></li><li><p>配置缓存策略：<img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230728145131981.png" alt="image-20230728145131981" style="zoom: 67%;" />cache需要缓存的network不需要缓存的fallback替代资源</p></li><li><p>设置离线事件处理：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">applicationCache</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;updateready&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">applicationCache</span>.<span class="property">status</span> === <span class="variable language_">window</span>.<span class="property">applicationCache</span>.<span class="property">UPDATEREADY</span>) &#123;</span><br><span class="line">    <span class="comment">// 缓存已更新，执行相关操作cached、noupdate、downloading、updateready</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">applicationCache</span>.<span class="title function_">swapCache</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure></li></ol><h3 id="浏览器兼容性"><a href="#浏览器兼容性" class="headerlink" title="浏览器兼容性"></a>浏览器兼容性</h3><ul><li>向后兼容：正常处理旧版</li><li>旧浏览器理解：使用Shims/Polyfills等包使得实现H5功能</li><li>渐进增强和优雅降级：前者是开发时先构建基本功能，再逐步增加高级特新；后者是从高级功能开始，逐渐适配较旧的浏览器。</li><li>特性检测：开发者可以对浏览器进行特性检测，评估浏览器能力，提供对应的代码功能服务。</li><li>标准化：H5是W3C标准化的，开发者可以比较安心地在不同浏览器上实现相同效果。</li><li>移动优先：H5设计考虑了移动设备的普及，提供了移动端友好特性，比如书响应式、触摸、移动设备优化等。</li><li>CanvasSVG：灵活绘制复杂图形。</li></ul><h2 id="✅SEO搜索引擎优化"><a href="#✅SEO搜索引擎优化" class="headerlink" title="✅SEO搜索引擎优化"></a>✅SEO搜索引擎优化</h2><p><a href="https://zh.wikipedia.org/wiki/%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E%E6%9C%80%E4%BD%B3%E5%8C%96">Wiki</a></p><p>好牛的一方面，似乎会有专门的SEO工程师做这一块。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230728164749800.png" alt="image-20230728164749800" style="zoom:80%;" /><h2 id="✅前端跨浏览器-多端兼容性-适配问题"><a href="#✅前端跨浏览器-多端兼容性-适配问题" class="headerlink" title="✅前端跨浏览器/多端兼容性/适配问题"></a>✅前端跨浏览器/多端兼容性/适配问题</h2><p><strong>多端</strong>兼容适配指应用在各种设备（电脑，手机）上能够正常显示和交互。</p><ul><li>遵循标准</li><li>使用浏览器兼容性检测工具</li><li>响应式设计</li><li>现代框架</li><li>服务端渲染</li><li>……</li><li>持续监控更新</li></ul><p><strong>跨浏览器</strong>兼容适配指web应用在不同浏览器中能够正常显示盒交互。</p><ul><li>遵循Web规范标准</li><li>响应式设计</li><li>特性检测，分类给服</li><li>CSS前缀后备</li><li>用可靠的包</li><li>……</li><li>多浏览器测试</li></ul><h2 id="✅优化页面性能"><a href="#✅优化页面性能" class="headerlink" title="✅优化页面性能"></a>✅优化页面性能</h2><h3 id="MDN版："><a href="#MDN版：" class="headerlink" title="MDN版："></a>MDN版：</h3><blockquote><p>Web 性能是客观的衡量标准，是用户对加载时间和运行时的直观体验。</p></blockquote><p>Web性能优化请看准关键性能。</p><h4 id="🥗使用dns-prefetch"><a href="#🥗使用dns-prefetch" class="headerlink" title="🥗使用dns-prefetch"></a>🥗使用dns-prefetch</h4><p>(有预制菜内味儿了)</p><p>DNS-prefetch尝试在请求资源前解析域名。可能是后面要加载的文件/用户尝试打开的链接目标。</p><p>浏览器从第三方请求资源的时候必须先将该跨源域名解析为IP地址，然后才可发出请求。（DNS解析）</p><p>DNS缓存可以帮助减少对此的延迟，而<strong>DNS解析可以导致请求增加明显的延迟</strong>。</p><p>dns-pre的作用即为帮<strong>助开发人员掩盖DNS解析的延迟</strong>。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用↓ 每当站点引用跨源资源的时候，都应在head中如此放置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://fonts.googleapis.com/&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 其他 head 元素 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 你的页面内容 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Link</span><span class="punctuation">: </span>&lt;https://fonts.googleapis.com/&gt;; rel=dns-prefetch</span><br><span class="line">指定为http标头之一↑</span><br></pre></td></tr></table></figure><p>注意事项：</p><ul><li><p>dns-pre仅对跨源域上DNS的查找有效，因此需要避免指向本站点/域(浏览器看到提示时站点背后的IP已被解析)</p></li><li><p>考虑将 <code>dns-prefetch</code> 与 <code>preconnect</code> 提示配对。<code>dns-prefetch</code> 只执行 DNS 查询，而 <code>preconnect</code> 则是建立与服务器的连接。这个过程包括 DNS 解析，以及建立 TCP 连接，如果是 HTTPS 网站，就进一步执行 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/TLS">TLS</a> 握手。将这两者结合起来，可以进一步减少<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS">跨源请求</a>的感知延迟。（preconnect最好只用在关键连接上）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preconnect&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://fonts.googleapis.com/&quot;</span> <span class="attr">crossorigin</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://fonts.googleapis.com/&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="🥙优化启动性能"><a href="#🥙优化启动性能" class="headerlink" title="🥙优化启动性能"></a>🥙优化启动性能</h4><p>(启动速度，直接影响用户体验)</p><h5 id="异步化"><a href="#异步化" class="headerlink" title="异步化"></a>异步化</h5><ul><li><p>启动时，在使用<strong>异步脚本标签中加入defer(异步)/async</strong>(不阻塞加载但阻塞运行)属性，便于解析器高效处理文档</p></li><li><p>若需要<strong>解码资源文件</strong>，最好在<strong>worker</strong>中做此事</p></li><li><p>处理浏览器支持的数据格式时，使用设备/浏览器<strong>内置的解码器</strong>更优</p></li><li><p>所有能并行的数据处理都该<strong>并行化</strong></p></li><li><p>不要强迫Web引擎构建<strong>不必要的DOM</strong></p><p>一种简单的hack方式：将html代码保留在文档中，包裹在注释内，阻止渲染，需要的时候再渲染</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;foo&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    &lt;div&gt; ... 此处放置需要延迟渲染的HTML代码</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo.<span class="property">innerHTML</span> = foo.<span class="property">firstChild</span>.<span class="property">nodeValue</span>; <span class="comment">// 以此触发渲染</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="下载时间"><a href="#下载时间" class="headerlink" title="下载时间"></a>下载时间</h5><p>缩小体积</p><h5 id="GPU占用时间"><a href="#GPU占用时间" class="headerlink" title="GPU占用时间"></a>GPU占用时间</h5><h5 id="数据大小"><a href="#数据大小" class="headerlink" title="数据大小"></a>数据大小</h5><p>缩小体积</p><h5 id="主观因素"><a href="#主观因素" class="headerlink" title="主观因素"></a>主观因素</h5><p>过渡动画、进度条，委婉让用户知晓状态的一些功能</p><h4 id="🥪CSS动画和JS动画性能"><a href="#🥪CSS动画和JS动画性能" class="headerlink" title="🥪CSS动画和JS动画性能"></a>🥪CSS动画和JS动画性能</h4><p>主要分析CSS(<strong>transition，animation</strong>)和JS(<strong>requestAnimationFrame()</strong>)动画性能的差异。</p><p>.一个简单的的方式去创造当前样式与结束状态样式之间的动画</p><p>.提供通过一个初始状态属性值集合与最终状态属性值集合创造动画</p><p>.提供一种用 JavaScript 代码制作动画的高效方式，在绘制下一帧前由浏览器调用</p><p>简单动画完全可以使用CSS，若实在复杂，JS是佳选。</p><h4 id="🌮关键渲染路径"><a href="#🌮关键渲染路径" class="headerlink" title="🌮关键渲染路径"></a>🌮关键渲染路径</h4><p>这条将HTMLCSSJS转换为屏幕上的像素的过程无疑是优化性能的关键一环（CRF）。</p><ul><li>异步/延迟加载或消除非关键资源</li><li>优化请求数量和每个请求文件的体积</li><li>通过区分关键资源优先级来优化被加载资源的顺序，缩短关键路径长度</li></ul><h4 id="🌯懒加载"><a href="#🌯懒加载" class="headerlink" title="🌯懒加载"></a>🌯懒加载</h4><p>延迟加载，非关键资源加载的策略。</p><ul><li>拆分代码，入口/import</li><li>CSS尽量小，尽快送达</li><li>字体preload</li><li>非关键图片懒加载, loading=”lazy”</li><li>事件处理器加载</li></ul><h4 id="🍔渲染页面：浏览器工作原理"><a href="#🍔渲染页面：浏览器工作原理" class="headerlink" title="🍔渲染页面：浏览器工作原理"></a>🍔渲染页面：浏览器工作原理</h4><p>就是↓</p><h3 id="民间版："><a href="#民间版：" class="headerlink" title="民间版："></a>民间版：</h3><p>请去看URL-&gt;渲染过程，根据这一系列的步骤来优化。</p><ul><li>请求阶段<ul><li>善用缓存</li><li>使用httpDNS</li><li>减少重定向</li><li>静态资源服务器</li><li>服务器升级带宽</li><li>数据库优化</li><li>缓存动态网页</li><li>高防服务器</li></ul></li><li>解析加载阶段<ul><li>DNS预解析预解析html预加载linkscript，尽量避免阻塞，缩短阻塞时间(少，早)</li><li>按需加载</li><li>合适统一替代</li><li>缓存</li><li>并行请求</li><li>SSR</li></ul></li><li>渲染阶段<ul><li>少操作DOM</li></ul></li></ul><h2 id="✅CSS3新特性"><a href="#✅CSS3新特性" class="headerlink" title="✅CSS3新特性"></a>✅CSS3新特性</h2><ul><li>圆角：border-radius</li><li>渐变：gradient</li><li>阴影：box-shadow text-shadow</li><li>透明度：opacity</li><li>过渡：transition</li><li>动画：@keyframes: animation</li><li>多列布局：column-count column-width</li><li>媒体查询：@media</li><li>自定义字体：@font-face</li><li>伪元素伪类：::before ::after :hover</li><li>Flex布局：display: flex</li><li>Grid布局：display: grid</li><li>过滤：filter</li></ul><h2 id="Flex布局"><a href="#Flex布局" class="headerlink" title="Flex布局"></a>Flex布局</h2><p>flex-basis flex </p><h2 id="Grid布局"><a href="#Grid布局" class="headerlink" title="Grid布局"></a>Grid布局</h2><h2 id="rem布局"><a href="#rem布局" class="headerlink" title="rem布局"></a>rem布局</h2><h2 id="浮动布局"><a href="#浮动布局" class="headerlink" title="浮动布局"></a>浮动布局</h2><h2 id="🈯BFC"><a href="#🈯BFC" class="headerlink" title="🈯BFC"></a>🈯BFC</h2><p>Block Formating Context 块级格式化上下文</p><p>我对它的理解是它其实是浏览器一个隐藏方法，当满足一定条件的时候就会调用，这个时候我们就可以说BFC开启了。</p><p>BFC开启主要解决这些问题：</p><ul><li>margin塌陷</li><li>元素内元素开启浮动的时候，元素宽高塌陷</li><li>浮动元素被另一个兄弟元素覆盖</li></ul><p>开启BFC的方式有很多：</p><ul><li>个人认为副作用最小的是<code>display: flow-root</code></li><li>浮动定位、绝对定位</li><li>行内块元素inline-block</li><li>flex/grid/table布局 多列容器</li><li>overflow!=visible</li></ul><h2 id="✅CSS选择器优先级-amp-权重"><a href="#✅CSS选择器优先级-amp-权重" class="headerlink" title="✅CSS选择器优先级&amp;权重"></a>✅CSS选择器优先级&amp;权重</h2><h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><h4 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[title]</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href=<span class="string">&#x27;...&#x27;</span>]</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[class~=<span class="string">&#x27;warn&#x27;</span>]</span> <span class="comment">/* 含有warn */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-attr">[lang|=<span class="string">&#x27;zh&#x27;</span>]</span> <span class="comment">/* 正为/一开始为此值 */</span></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-attr">[class^=<span class="string">&#x27;box-&#x27;</span>]</span> <span class="comment">/* 开头是此字段 */</span></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-attr">[class$=<span class="string">&#x27;-box&#x27;</span>]</span> <span class="comment">/* 结尾是此字段 */</span></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-attr">[class*=<span class="string">&#x27;box&#x27;</span>]</span> <span class="comment">/* 至少出现一次该字段 */</span></span><br></pre></td></tr></table></figure><h4 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">:frist-child</span><br><span class="line">:last-child</span><br><span class="line">:only-child</span><br><span class="line">:invalid</span><br><span class="line"></span><br><span class="line">:hover</span><br><span class="line">:focus</span><br></pre></td></tr></table></figure><h4 id="伪元素选择器"><a href="#伪元素选择器" class="headerlink" title="伪元素选择器"></a>伪元素选择器</h4><blockquote><p><strong>好奇妙的</strong></p><p>格式化呀↓</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">artical <span class="selector-tag">p</span><span class="selector-pseudo">::first-line</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">::before</span> </span><br><span class="line"><span class="selector-pseudo">::after</span> </span><br><span class="line"><span class="comment">/* 适合用来插入图标，不太适合插入字符串 */</span></span><br><span class="line"><span class="comment">/* “生成内容”——将其content属性设为空字符串，即可进行一些更为样式化的操作 */</span></span><br></pre></td></tr></table></figure><blockquote><p>一组特别的伪元素↑</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230726193431669.png" alt="image-20230726193431669" style="zoom: 67%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230726193624388.png" alt="image-20230726193624388" style="zoom:67%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230726193823520.png" alt="image-20230726193823520" style="zoom:67%;" /></blockquote><h4 id="关系选择器"><a href="#关系选择器" class="headerlink" title="关系选择器"></a>关系选择器</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 经典的后代选择器-凡是后代 */</span></span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">article</span> <span class="selector-tag">p</span> &#123;&#125;</span><br></pre></td></tr></table></figure><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230726195259096.png" alt="image-20230726195259096" style="zoom:67%;" /><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 子代关系选择器-直接的子元素 */</span></span><br><span class="line"><span class="selector-tag">article</span> &gt; <span class="selector-tag">p</span> &#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 邻接兄弟选择器-紧随之后的元素 */</span></span><br><span class="line"><span class="selector-tag">p</span> + <span class="selector-tag">img</span> &#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 通用兄弟选择器-都叽吧鸽们！ */</span></span><br><span class="line"><span class="selector-tag">p</span> ~ <span class="selector-tag">img</span> &#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 组合一下 */</span></span><br><span class="line"><span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span><span class="selector-attr">[class*=<span class="string">&#x27;detail&#x27;</span>]</span></span><br></pre></td></tr></table></figure><p>以上这些特殊的选择器蛮多的，去MDN查吧！会有意外收获的~</p><h3 id="选择器权重"><a href="#选择器权重" class="headerlink" title="选择器权重"></a>选择器权重</h3><ul><li><strong>!important</strong></li><li><strong>内联样式1000</strong>：在元素的style中定义</li><li><strong>ID选择器100</strong>：通过元素id属性定义</li><li><strong>类选择器/属性选择器/伪类选择器10</strong>：class / [type=1] / :hover</li><li><strong>元素选择器(类型选择器)/伪元素选择器1</strong>：p, div / ::before, ::after</li><li><strong>全局通用选择器/关系选择器/组合器0</strong>：* / img~p</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: white&quot;</span>&gt;</span>啊啊啊啊啊<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">!important&gt;内联样式&gt;id选择器&gt;类选择器&gt;元素选择器</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#div1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  <span class="attribute">background-color</span>:blue <span class="meta">!important</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230726162808919.png" alt="image-20230726162808919"></p><h2 id="✅盒模型"><a href="#✅盒模型" class="headerlink" title="✅盒模型"></a>✅盒模型</h2><p>CSS中所有元素都被一个个盒子包围。广泛使用的两种盒子：块级盒子、内联盒子。两种盒子会在页面流和元素间关系方面表现出不同的行为。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Building_blocks/The_box_mode">MDN原文</a></p><h3 id="块级盒子"><a href="#块级盒子" class="headerlink" title="块级盒子"></a>块级盒子</h3><ul><li>盒子会在内联方向上扩展并占据父容器在该方向上的所有可用的空间，大部分情况下和父容器盒子一样宽</li><li>每个盒子都换行</li><li>width/height属性可以发挥作用</li><li>内边距、外边距、边框会将其他元素从当前盒子周围推开</li></ul><h3 id="内联盒子"><a href="#内联盒子" class="headerlink" title="内联盒子"></a>内联盒子</h3><ul><li>盒子不会产生换行</li><li>width/height不起作用</li><li>水平方向内边距、外边距、边框会被应用但不会把其他处于inline状态的盒子推开</li><li>垂直方向内边距、外边距、边框会被应用且会把处于inline状态的盒子推开</li></ul><h3 id="CSS盒模型"><a href="#CSS盒模型" class="headerlink" title="CSS盒模型"></a>CSS盒模型</h3><p>模型定义了content padding border margin这些部分</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/box-model.png" alt="Diagram of the box model"></p><p>CSS中组成一个块级盒子需要：</p><ul><li>ContentBox</li><li>PaddingBox</li><li>BorderBox</li><li>MarginBox</li></ul><p>为了增加一些额外的复杂性，有了两类盒模型，一个是标准盒模型，一个是替代盒模型↓</p><h4 id="标准盒模型"><a href="#标准盒模型" class="headerlink" title="标准盒模型"></a>标准盒模型</h4><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/standard-box-model.png" alt="Showing the size of the box when the standard box model is being used."></p><p>标准盒模型宽高是ContentBox的宽高。</p><p>浏览器默认使用这种标准盒模型<code>box-sizing: content-box</code>。</p><h4 id="替代-IE-盒模型"><a href="#替代-IE-盒模型" class="headerlink" title="替代(IE)盒模型"></a>替代(IE)盒模型</h4><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/alternate-box-model.png" alt="Showing the size of the box when the alternate box model is being used."></p><p>替代盒模型的宽高是ContentBox+PaddingBox+BorderBox的宽高（可见宽高）。</p><p>可以通过<code>box-sizing: border-box</code>来实现替代盒模型。</p><h3 id="其他常见盒模型"><a href="#其他常见盒模型" class="headerlink" title="其他常见盒模型"></a>其他常见盒模型</h3><ul><li>内联盒子-display: inline-box</li><li>内联块级盒子-inline-block</li><li>弹性盒子-flex</li><li>网格盒子-grid</li><li>表格盒子-table table-row table-cell</li><li>浮动盒子-fload: left/right</li><li>绝对定位盒子-position: absolute</li></ul><h4 id="内联盒子-1"><a href="#内联盒子-1" class="headerlink" title="内联盒子"></a>内联盒子</h4><ul><li>水平方向排列</li><li>宽度由内容决定，高度由字体大小决定</li><li>不会自动换行，不会独占一行</li><li>仅支持水平方向内外边距和边框</li></ul><h4 id="内联块级盒子"><a href="#内联块级盒子" class="headerlink" title="内联块级盒子"></a>内联块级盒子</h4><ul><li>水平方向，一行内，不自动换行</li><li>但是支持宽高设置和垂直方向边距和边框</li></ul><h2 id="✅行内元素和块元素"><a href="#✅行内元素和块元素" class="headerlink" title="✅行内元素和块元素"></a>✅行内元素和块元素</h2><h3 id="行内元素-inline"><a href="#行内元素-inline" class="headerlink" title="行内元素-inline"></a>行内元素-inline</h3><p>a span em strong img input</p><ul><li>水平、不独占一行、不自动换行</li><li>宽高由内容和字体大小决定，也就是说设置宽高无效</li><li>垂直方向内外边距和边框失效</li><li><strong>行内元素不能包含块级元素</strong>，只能来点小文本/其他行内元素</li></ul><h3 id="块级元素-block"><a href="#块级元素-block" class="headerlink" title="块级元素-block"></a>块级元素-block</h3><p>hn p div ul/ol/li form</p><ul><li>独占一行、自动换行</li><li>宽度默认父元素100%，宽高有效</li><li>内外边距和边框都有效</li><li>块级元素内可以包含块级元素、行内元素、文本</li></ul><h2 id="背景和边框"><a href="#背景和边框" class="headerlink" title="背景和边框"></a>背景和边框</h2><h2 id="z-index在什么情况下生效（-gt-层叠样式表"><a href="#z-index在什么情况下生效（-gt-层叠样式表" class="headerlink" title="z-index在什么情况下生效（=&gt;层叠样式表"></a>z-index在什么情况下生效（=&gt;层叠样式表</h2><h2 id="position常见属性"><a href="#position常见属性" class="headerlink" title="position常见属性"></a>position常见属性</h2><h2 id="实现水平垂直居中"><a href="#实现水平垂直居中" class="headerlink" title="实现水平垂直居中"></a>实现水平垂直居中</h2><h2 id="实现元素居中"><a href="#实现元素居中" class="headerlink" title="实现元素居中"></a>实现元素居中</h2><h2 id="如何隐藏元素"><a href="#如何隐藏元素" class="headerlink" title="如何隐藏元素"></a>如何隐藏元素</h2><h2 id="如何清除浮动样式"><a href="#如何清除浮动样式" class="headerlink" title="如何清除浮动样式"></a>如何清除浮动样式</h2><h2 id="css实现透明度的方式"><a href="#css实现透明度的方式" class="headerlink" title="css实现透明度的方式"></a>css实现透明度的方式</h2><h2 id="实现Flex两栏布局"><a href="#实现Flex两栏布局" class="headerlink" title="实现Flex两栏布局"></a>实现Flex两栏布局</h2><h2 id="实现三列布局"><a href="#实现三列布局" class="headerlink" title="实现三列布局"></a>实现三列布局</h2><h2 id="实现流式布局"><a href="#实现流式布局" class="headerlink" title="实现流式布局"></a>实现流式布局</h2><h2 id="预处理器和css变量"><a href="#预处理器和css变量" class="headerlink" title="预处理器和css变量"></a>预处理器和css变量</h2><h1 id="🦴JS"><a href="#🦴JS" class="headerlink" title="🦴JS"></a>🦴JS</h1><h2 id="🈯ES6里面的E和S分别指的是什么？"><a href="#🈯ES6里面的E和S分别指的是什么？" class="headerlink" title="🈯ES6里面的E和S分别指的是什么？"></a>🈯ES6里面的E和S分别指的是什么？</h2><p>ES6中E指的是ECMAScript，S指的是Script。</p><p>前者是JS的标准化版本，定义了JS的核心语言功能，包括变量、数据类型、操作符、控制结构等。 </p><p>后者表示的是JS的脚本编程特性，使其适用于在Web浏览器中创建交互式和动态的网页。</p><h2 id="🈯JavaScript和ECMAScript区别？"><a href="#🈯JavaScript和ECMAScript区别？" class="headerlink" title="🈯JavaScript和ECMAScript区别？"></a>🈯JavaScript和ECMAScript区别？</h2><p>JS是一种基于ECMAScript标准的编程语言，是它的一种实现。它包括了EC定义的核心语言功能，但也包括了其他功能和API，以便在Web环境中进行网页开发。</p><h2 id="🈯从JavaScript中把ECMAScript踢出去，剩下的是什么？"><a href="#🈯从JavaScript中把ECMAScript踢出去，剩下的是什么？" class="headerlink" title="🈯从JavaScript中把ECMAScript踢出去，剩下的是什么？"></a>🈯从JavaScript中把ECMAScript踢出去，剩下的是什么？</h2><p>剔出的话就非常受限了，JS将失去编程语言的特性，只剩下一些浏览器特定API，比如DOM、BOM等。这些API用于操作网页元素、与浏览器交互，但是无法构建完整的应用程序或者应用程序进行通用的编程任务。</p><h2 id="🈯ES6新特性"><a href="#🈯ES6新特性" class="headerlink" title="🈯ES6新特性"></a>🈯ES6新特性</h2><p>蛮多的……看看能不能尽量往会的地方引，一下是之前整理过的↓</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230727152654985.png" alt="image-20230727152654985" style="zoom: 80%;" /><h2 id="✅const一个数组-可以修改数组元素吗"><a href="#✅const一个数组-可以修改数组元素吗" class="headerlink" title="✅const一个数组 可以修改数组元素吗"></a>✅const一个数组 可以修改数组元素吗</h2><p>const声明，表示变量的引用是不可改变的，也就是说不能重新分配一个不同的数组给变量。</p><p>换一句话说就是：数组是引用变量，能通过中括号和一些数组方法进行修改，但是完整替换是不行的。</p><h2 id="map-map的实现方式-set-weakmap-weakset-bigint"><a href="#map-map的实现方式-set-weakmap-weakset-bigint" class="headerlink" title="map(map的实现方式) set weakmap weakset bigint"></a>map(map的实现方式) set weakmap weakset bigint</h2><h2 id="✅原型-amp-原型链"><a href="#✅原型-amp-原型链" class="headerlink" title="✅原型&amp;原型链"></a>✅原型&amp;原型链</h2><h3 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h3><p>什么是原型呢？在JS中几乎每一个对象都有一个与之关联的对象，对象从这个关联的对象中继承一些属性，那么这个关联的对象就可以被称为是这个对象的原型。</p><p>值得注意的是，通过字面量创建的对象，原型对象都可以通过<code>Object.prototype</code>来引用。用new 构造函数创建的对象，原型是构造函数中prototype所指……</p><h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><p>原型链是什么呢？原型链它是一种JS的主要继承方式。<br>它的基本思想就是通过原型，继承多个引用类型的属性和方法。它的基本构想就是在实例和原型间构造一条长链。<br>具体解释一下就是，每一个构造函数，都有一个属性指向原型对象，原型又有一个属性指回构造函数，通过这些构造函数实例化的对象有一个属性指向它的原型对象。这就是一个三要素连起来的小链了。然后我们可以想一下原型对象，这个原型对象可能继承了其他对象，那么它也有自己的原型对象，那么此时它也应该有一个属性来指向它的原型，以此类推，就出现了一条长长的原型链。</p><p>这使得，当我们要从一个对象中查询一个属性的时候，先会这个对象的自有属性中有无，如果有，很好找到了；如果没有，去看到它从它的原型中继承来的属性；如果有很好找到了；如果没有，去到它这个原型的原型中找，以此类推，直到JS规定的<code>Object.prototype.__proto__ = null</code>这个顶端终点为止。</p><h2 id="✅数组底层数据结构"><a href="#✅数组底层数据结构" class="headerlink" title="✅数组底层数据结构"></a>✅数组底层数据结构</h2><p>~从与其他语言对比上讲：</p><p>JS数组不像传统的语言一样是一块连续的区域，而是一种稀疏的，不必连续，允许有空隙的数据结构。且不像传统数组一样要求所有元素类型相同，元素可以是字符串甚至是对象、函数。</p><p>~从JS继承上讲：</p><p>JSArray实际上是继承自JSObject的，它是一个特殊对象。特殊在哪里呢？举个例子，数组[1,  2,  3]，底层结构实际上是{ ‘0’: 1, ‘1’: 2, ‘2’: 3 , length: 3}——通过键值对的形式存储数组的索引和值，并且有一个带有length属性，且这个属性值为数组长度的对象，且会随着数组内元素的变化而相应变化。</p><p>~之前有看过一个大佬讲V8源码对于数组的实现-<a href="https://juejin.cn/post/6844903943638794248">原文链接</a>：</p><p>在用类似于我刚才举的例子的代码验证时，发现底层实际是个map，key索引value值。且JS数组有两种表现形式：一种是快数组FastElements，采用的快速后备存储结构FixedArray，一种是慢数组DictionaryElements，采用的是缓慢后备存储结构HashTable。</p><ul><li>FixedArray是V8实现的一个类似于数组的类，表示一段固定长度的连续的内存，适合一致、连续、密集的数组</li><li>HashArray就是哈希表，根据散列表中的Key，通过散列函数，可以查询到内存存储的Value</li></ul><p>快慢数组详细解释</p><ul><li>快数组：快数组存储方式是线性的，新创建的空数组默认是快数组的存储方式。快数组长度可变，可根据数组的增删，通过扩容和收缩机制来动态调整存储空间大小。<ul><li>扩容：<code>new_capacity = (old_capacity&gt;&gt;1) + old_capacity + 16</code>——1.5倍旧空间+16。扩容后会将数组拷贝到新的空间里</li><li>收缩：<code>if(capicity &gt; 2 * length + 16) &#123;需要收缩  收缩的大小 =  (length+1==old_length?(opacity-length)/2:capicity-length)&#125; else &#123;使用holes对象填充&#125;</code></li><li>hoels空洞对象：分配了空间但是没有存放元素的位置。快数组有专门模式FastHoelyElements，也是分配连续空间，但给没有赋值的数组索引下会存储一个<code>undefined</code></li></ul></li><li>慢数组：慢数组存储方式是哈希表，不用开辟大块连续空间，但是维护起来效率比前者低一些。</li><li>快慢数组转换<ul><li>快=&gt;慢：这个 过程式动态进行的。<code>if(新容量 &gt;= 3*扩容后的容量*2) &#123;转换&#125;</code>     <code>if(new_index-cur_capicity &gt;= 1024) &#123;转换&#125;</code></li><li>慢=&gt;快：这个过程是不可逆的，因为慢数组一旦变复杂(类型/稀疏)，无法恢复成一个慢数组。<code>每次发现数组增长的时候，V8启发式算法检查其占用量，当空洞减少到一定程度(空间节省50%及以上)的时候，转换为快数组</code></li><li>各自优势：快数组，用空间换时间，空间大了效率高了；慢数组，用时间换空间，效率慢了空间小了。</li></ul></li></ul><p>ArrayBuffer</p><p>ES6出的可以按需分配连续内存的数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bf = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">1024</span>) <span class="comment">// 申请到的连续空间</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> <span class="title class_">Int32Array</span>(bf) <span class="comment">// 使用这个连续空间的定型数组</span></span><br></pre></td></tr></table></figure><p>~总结一下就是：</p><p>JS数组和传统数组底层确实不一样，是通过JS V8引擎在底层做了一层封装，使用两种类型的数据结构实现了它，并能通过时间和空间纬度取舍从而优化它的性能。</p><h2 id="🈯闭包"><a href="#🈯闭包" class="headerlink" title="🈯闭包"></a>🈯闭包</h2><h2 id="为什么闭包中的局部变量不会被垃圾回收清理？"><a href="#为什么闭包中的局部变量不会被垃圾回收清理？" class="headerlink" title="为什么闭包中的局部变量不会被垃圾回收清理？"></a>为什么闭包中的局部变量不会被垃圾回收清理？</h2><h2 id="讲一下js中的上下文"><a href="#讲一下js中的上下文" class="headerlink" title="讲一下js中的上下文"></a>讲一下js中的上下文</h2><h2 id="JS变量作用域"><a href="#JS变量作用域" class="headerlink" title="JS变量作用域"></a>JS变量作用域</h2><h2 id="🈯对象-数组常用API"><a href="#🈯对象-数组常用API" class="headerlink" title="🈯对象/数组常用API"></a>🈯对象/数组常用API</h2><h2 id="🈯new一个对象的过程"><a href="#🈯new一个对象的过程" class="headerlink" title="🈯new一个对象的过程"></a>🈯new一个对象的过程</h2><h2 id="✅new一个对象和Object-create-的区别"><a href="#✅new一个对象和Object-create-的区别" class="headerlink" title="✅new一个对象和Object.create()的区别"></a>✅new一个对象和Object.create()的区别</h2><p>new一个对象的具体做法是<code>new Object()</code>，此时使用的是Object构造函数，这样做，新建的对象原型将指向Object的prototype。</p><p>Object.create()的话，是继承括号内传进去的对象，也就是说这样创建的对象原型指向的是括号内的对象。</p><h2 id="✅使用map构建的对象与普通的对象有什么不同"><a href="#✅使用map构建的对象与普通的对象有什么不同" class="headerlink" title="✅使用map构建的对象与普通的对象有什么不同"></a>✅使用map构建的对象与普通的对象有什么不同</h2><table><thead><tr><th>不同</th><th>普通对象</th><th>map构建对象</th></tr></thead><tbody><tr><td>键的类型</td><td>String/Symbols</td><td>任意类型</td></tr><tr><td>键值对的顺序</td><td>无序</td><td>插入顺序</td></tr><tr><td>大小获取</td><td>获取不到</td><td>通过.size获取到</td></tr><tr><td>迭代</td><td>for/in Object.keys()</td><td>forEach for/of内置迭代</td></tr><tr><td>继承关系</td><td>继承它的原型或者Object的原型</td><td>继承Map的原型</td></tr></tbody></table><h2 id="✅深浅拷贝"><a href="#✅深浅拷贝" class="headerlink" title="✅深浅拷贝"></a>✅深浅拷贝</h2><h3 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h3><p>仅拷贝引用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(target, source)</span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">slice</span>()</span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">concat</span>()</span><br><span class="line">[...array]</span><br></pre></td></tr></table></figure><h3 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h3><p>引用也需要复制全新一份。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>()&#123;&#125;</span><br><span class="line">一些第三方库的方法</span><br></pre></td></tr></table></figure><h3 id="💦深拷贝寿司"><a href="#💦深拷贝寿司" class="headerlink" title="💦深拷贝寿司"></a>💦深拷贝寿司</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">obj, visited = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span>) &#123;</span><br><span class="line">    <span class="comment">// 基本数据类型</span></span><br><span class="line">    <span class="keyword">if</span> (obj === <span class="literal">null</span> || <span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 数组</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj)) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="title function_">deepCopy</span>(item))</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Date</span></span><br><span class="line">    <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="title class_">Date</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(obj)    </span><br><span class="line">    &#125;   </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 循环应用</span></span><br><span class="line">    <span class="keyword">if</span> (visited.<span class="title function_">has</span>(obj)) &#123;</span><br><span class="line">        <span class="keyword">return</span> visited.<span class="title function_">get</span>(obj)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 对象</span></span><br><span class="line">    <span class="keyword">const</span> newObj = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        newObj[key] = <span class="title function_">deepCopy</span>(obj[key])</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> newObj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="✅平地起高楼"><a href="#✅平地起高楼" class="headerlink" title="✅平地起高楼"></a>✅平地起高楼</h2><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230920143104689.png" alt="image-20230920143104689"></p><h2 id="🈯判断一个变量是什么数据类型的"><a href="#🈯判断一个变量是什么数据类型的" class="headerlink" title="🈯判断一个变量是什么数据类型的"></a>🈯判断一个变量是什么数据类型的</h2><p>typeof 判断基本类型和引用类型，其中symbol-&gt;function null-&gt;object</p><p>instanceof详细判断引用类型</p><p>object.prototype.Stirng最为准确的判断方式</p><h2 id="栈和队列和堆"><a href="#栈和队列和堆" class="headerlink" title="栈和队列和堆"></a>栈和队列和堆</h2><ul><li>栈是一种线性结构，先进后出。</li><li>队列是一种线性结构，先进先出。</li><li>堆是一种树状结构，用于存储动态分配的内存。没有特定顺序，满足堆属性。常用于大小根堆。</li></ul><h2 id="数组和链表"><a href="#数组和链表" class="headerlink" title="数组和链表"></a>数组和链表</h2><h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><h3 id="this-看代码说结果"><a href="#this-看代码说结果" class="headerlink" title="this 看代码说结果"></a>this 看代码说结果</h3><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><h3 id="引入原因"><a href="#引入原因" class="headerlink" title="引入原因"></a>引入原因</h3><h2 id="✅apply-call-bind区别"><a href="#✅apply-call-bind区别" class="headerlink" title="✅apply/call/bind区别"></a>✅apply/call/bind区别</h2><p>同：</p><p>传参均为(所指向的对象，参数)</p><p>异(第二参)：</p><ul><li>apply：数组</li><li>call：<code>,</code>分隔的序列</li><li>bind：<code>,</code>分隔的序列；返回的是一个可被调用的函数，方便在合适的时间调用。</li></ul><h2 id="✅🥬函数柯里化Currying"><a href="#✅🥬函数柯里化Currying" class="headerlink" title="✅🥬函数柯里化Currying"></a>✅🥬函数柯里化Currying</h2><p>​    又称 <strong>Partial Evaluation部分求值</strong></p><p>​    把传统的一次性接受多个参数的函数转化成——接受这个函数的函数，执行这个函数 所传入的参数数量 可以<code>&lt;=</code>传统参数数量，可以返回一个继续接收剩余参数的函数。</p><p>​    这个和函数递归是联系起来的，当传统函数接受n多个参数的时候，currying函数可以是这样。</p><p>​    引用该<a href="https://tsejx.github.io/javascript-guidebook/core-modules/ecmascript-function-objects/function-types/function-currying/#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B">网站</a>所给示例，但是发现代码有误，自行修改了一下(已提交issue)。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> currying = <span class="keyword">function</span> (<span class="params">fn, ...args</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> len = fn.<span class="property">length</span>; <span class="comment">// 函数参数的个数</span></span><br><span class="line">    args = args || [];</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">...<span class="variable language_">arguments</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> totalArgs = [...args].<span class="title function_">concat</span>([...<span class="variable language_">arguments</span>]);</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">return</span> totalArgs.<span class="property">length</span> &gt;= len</span><br><span class="line">        ? fn.<span class="title function_">call</span>(<span class="variable language_">this</span>, ...totalArgs)</span><br><span class="line">        : currying.<span class="title function_">call</span>(<span class="variable language_">this</span>, fn, ...totalArgs);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 测试1</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">sum</span> = (<span class="params">a, b, c</span>) =&gt; a + b + c;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> newSum = <span class="title function_">currying</span>(sum);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> res = <span class="title function_">newSum</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">// =&gt; 6</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 测试2</span></span><br><span class="line">  <span class="keyword">const</span> find = <span class="keyword">function</span> (<span class="params">arr, value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">indexOf</span>(value) !== -<span class="number">1</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> newFind = <span class="title function_">currying</span>(find)([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">  <span class="keyword">const</span> test = <span class="title function_">newFind</span>(<span class="number">3</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(test) <span class="comment">// =&gt; true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="尾递归有什么用"><a href="#尾递归有什么用" class="headerlink" title="尾递归有什么用"></a>尾递归有什么用</h2><h2 id="js变量提升的好处"><a href="#js变量提升的好处" class="headerlink" title="js变量提升的好处"></a>js变量提升的好处</h2><h2 id="事件代理"><a href="#事件代理" class="headerlink" title="事件代理"></a>事件代理</h2><h2 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h2><h2 id="暂存死区是啥"><a href="#暂存死区是啥" class="headerlink" title="暂存死区是啥"></a>暂存死区是啥</h2><h2 id="event-target-和-event-currentTarget"><a href="#event-target-和-event-currentTarget" class="headerlink" title="event.target 和 event.currentTarget"></a>event.target 和 event.currentTarget</h2><h2 id="Promise-all-race-手搓"><a href="#Promise-all-race-手搓" class="headerlink" title="Promise all race 手搓"></a>Promise all race 手搓</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">all</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(promises)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">rej</span>(<span class="string">&#x27;Need array&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">const</span> results = []</span><br><span class="line">        <span class="keyword">let</span> cnt = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> (promises.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">res</span>(results)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                results[i] = res</span><br><span class="line">                cnt++</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (cnt === promises.<span class="property">length</span>) &#123;</span><br><span class="line">                    <span class="title function_">res</span>(results)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(rej)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">race</span>(<span class="params">promises</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promises</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(promises)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">rej</span>(<span class="string">&#x27;Need array&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> pro <span class="keyword">of</span> promises) &#123;</span><br><span class="line">            pro.<span class="title function_">then</span>(res, rej)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现一个函数柯里化加法函数，使得"><a href="#实现一个函数柯里化加法函数，使得" class="headerlink" title="实现一个函数柯里化加法函数，使得"></a>实现一个函数柯里化加法函数，使得</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">numberPlus</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">numberPlus</span>()) <span class="comment">// 3</span></span><br><span class="line"><span class="title function_">numberPlus</span>(<span class="number">3</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">numberPlus</span>()) <span class="comment">// 6</span></span><br><span class="line"><span class="title function_">numberPlus</span>(<span class="number">4</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">numberPlus</span>()) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (args.<span class="property">length</span> === fn.<span class="property">length</span>) &#123;</span><br><span class="line">            sum = fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (args.<span class="property">length</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            sum = fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, [...args, sum])</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> sum </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> numberPlus = <span class="title function_">curry</span>(add)</span><br></pre></td></tr></table></figure><h2 id="Promise如何解决异步问题（还有状态，还有如何控制并发，具体一些用法年数"><a href="#Promise如何解决异步问题（还有状态，还有如何控制并发，具体一些用法年数" class="headerlink" title="Promise如何解决异步问题（还有状态，还有如何控制并发，具体一些用法年数"></a>Promise如何解决异步问题（还有状态，还有如何控制并发，具体一些用法年数</h2><h2 id="promise和async"><a href="#promise和async" class="headerlink" title="promise和async"></a>promise和async</h2><h2 id="Await和Async的作用"><a href="#Await和Async的作用" class="headerlink" title="Await和Async的作用"></a>Await和Async的作用</h2><h2 id="🈯事件循环Event-Loop（叙述、看代码说结果，一定要分清哪些哪些）"><a href="#🈯事件循环Event-Loop（叙述、看代码说结果，一定要分清哪些哪些）" class="headerlink" title="🈯事件循环Event Loop（叙述、看代码说结果，一定要分清哪些哪些）"></a>🈯事件循环Event Loop（叙述、看代码说结果，一定要分清哪些哪些）</h2><p>这里只放一些看代码说结果</p><h2 id="为什么要把异步任务拆分成宏任务和微任务？"><a href="#为什么要把异步任务拆分成宏任务和微任务？" class="headerlink" title="为什么要把异步任务拆分成宏任务和微任务？"></a>为什么要把异步任务拆分成宏任务和微任务？</h2><h2 id="如何处理让多个异步任务让它们同时并发去执行？"><a href="#如何处理让多个异步任务让它们同时并发去执行？" class="headerlink" title="如何处理让多个异步任务让它们同时并发去执行？"></a>如何处理让多个异步任务让它们同时并发去执行？</h2><h2 id="✅DOM的回流-重排-和重绘"><a href="#✅DOM的回流-重排-和重绘" class="headerlink" title="✅DOM的回流(重排)和重绘"></a>✅DOM的回流(重排)和重绘</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>回流：元素位置/大小/内容发生变化的时候，触发重新布局，导致渲染树重新计算布局。</p><p>重绘：不会触发重新布局，仅改变一些颜色、透明度、背景色啥的。</p><h3 id="如何最小化回流次数？"><a href="#如何最小化回流次数？" class="headerlink" title="如何最小化回流次数？"></a>如何最小化回流次数？</h3><ol><li>减少DOM深度，不必要不深排</li><li>减少CSS规则数量，移出未使用的CSS规则</li><li>动画等复杂渲染尽量脱离文档流</li><li>避免复杂的CSS选择器（尤其是子选择器）</li></ol><h1 id="TS"><a href="#TS" class="headerlink" title="TS"></a>TS</h1><p>开源组织和工作都用到的语言，需要搞明白这个。打算做题+看项目。</p><p>在这里主要放面试题了。。</p><h2 id="一些基本的"><a href="#一些基本的" class="headerlink" title="一些基本的"></a>一些基本的</h2><p>TS：是一种强类型的JS的超集，为JS提供了静态类型系统。</p><p>type: 在TS中用于定义类型别名、联合类型、交叉类型等复杂类型的声明方式。仅在编译阶段进行类型检查。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">StringOrNumber</span> = <span class="built_in">string</span> | <span class="built_in">number</span> <span class="comment">// 联合</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;<span class="attr">name</span>: <span class="built_in">string</span>&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Age</span> = &#123;<span class="attr">age</span>: <span class="built_in">number</span>&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = <span class="title class_">Name</span> &amp; <span class="title class_">Age</span> <span class="comment">// 交叉</span></span><br></pre></td></tr></table></figure><p>interface: 主要用于定义对象的类型和形状。支持继承和实现，适合创建复杂的对象类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">speak</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">breed</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Labrador</span> <span class="keyword">implements</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">breed</span>: <span class="built_in">string</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, breed:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">breed</span> = breed;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">clg</span>(<span class="string">&#x27;miao&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Type和Interface的区别？"><a href="#Type和Interface的区别？" class="headerlink" title="Type和Interface的区别？"></a>Type和Interface的区别？</h2><p>首先两者都是仅在编译阶段才起作用。</p><h1 id="🖽框架"><a href="#🖽框架" class="headerlink" title="🖽框架"></a>🖽框架</h1><h2 id="Vue-amp-React"><a href="#Vue-amp-React" class="headerlink" title="Vue&amp;React"></a>Vue&amp;React</h2><h3 id="✅实现原理上的区别"><a href="#✅实现原理上的区别" class="headerlink" title="✅实现原理上的区别"></a>✅实现原理上的区别</h3><ol><li><strong>原始库 vs. 渐进框架</strong>:<ul><li>React是一个用于构建用户界面的JavaScript库，它关注于组件化和状态管理。React本身<strong>只提供了UI层面的解决方案</strong>，其他功能（如路由和状态管理）通常需要第三方库的支持。</li><li>Vue.js是一个渐进框架，它<strong>提供了一整套的解决方案，包括视图层、路由、状态管理等</strong>。Vue的核心库相对更大，可以独立使用，但也可以与其他库和工具集成，根据需要逐渐引入功能。</li></ul></li><li><strong>语法和模板</strong>:<ul><li>React使用JSX（JavaScript XML）来定义组件的结构，这是一种在JavaScript中嵌入XML标记的语法。React组件可以通过JavaScript编写，JSX允许在代码中嵌入HTML样式的标记。.js .ts</li><li>Vue.js使用模板语法，允许在HTML模板中直接声明组件的结构。Vue的模板语法类似于普通HTML，容易理解和使用。.vue(html)</li></ul></li><li><strong>数据绑定</strong>:<ul><li>React使用单向数据流，父组件通过props将数据传递给子组件，并通过回调函数进行状态管理。</li><li>Vue.js使用双向数据绑定，可以通过<code>v-model</code>指令轻松实现数据的双向绑定，这使得处理表单输入和交互更加简单。</li></ul></li></ol><p>就自身使用体验上，写Vue更像是写一些可以配置的页面，写React更像是用JSTS写一些可以基于逻辑来嵌套拼接的积木。</p><h3 id="✅React单向数据流和Vue双向数据流的区别"><a href="#✅React单向数据流和Vue双向数据流的区别" class="headerlink" title="✅React单向数据流和Vue双向数据流的区别"></a>✅React单向数据流和Vue双向数据流的区别</h3><p>Vue是有一种双向绑定数据的特性，具体指令是<code>v-model=某数据</code>。这个指令在元素中使用的时候，Vue的响应式系统会自动追踪数据的依赖关系，数据变化时会引发视图更新。我认为双向绑定的一个最显著的优点是表单数据可以随时更改。但是也不能算是缺点吧，如果过多使用v-model，每次改每次刷新，视图维护显得有点复杂。</p><p>React推崇的是单向数据流，具体就是父给子穿数据，子不能直接改父数据，而是需要绑定回调或者将状态提升给父来操作。这种固定的单相数据流的方式某种程度上简化数状态的管理，这也使得状态管理可预测，可控。</p><h3 id="✅reactHOOK和vueHooks的区别"><a href="#✅reactHOOK和vueHooks的区别" class="headerlink" title="✅reactHOOK和vueHooks的区别"></a>✅reactHOOK和vueHooks的区别</h3><p>两者都是用于在函数式组件中管理状态和副作用的方式。</p><p>react的HOOK可以帮助在组件中使用不同的react功能。只允许在函数内进行使用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useState, useEffect &#125; from &#x27;react&#x27;</span><br><span class="line">export defualt function() &#123;</span><br><span class="line">    const [cnt, setCnt] = useState(0)</span><br><span class="line">    useEffect(() =&gt; &#123;</span><br><span class="line">        document.title =cnt</span><br><span class="line">    &#125;, [cnt])</span><br><span class="line">    </span><br><span class="line">    return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;p&gt;Count: &#123;cnt&#125;&lt;/p&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setCnt(cnt + 1)&#125;&gt;点击+1&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>vue的hooks为vue提供更灵活的方式来组织和共享组件逻辑。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;Count: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;Increment&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const count = ref(0);</span><br><span class="line"></span><br><span class="line">    const increment = () =&gt; &#123;</span><br><span class="line">      count.value++;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      document.title = `Count: $&#123;count.value&#125;`;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      count,</span><br><span class="line">      increment,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="✅vue2Mixin和vue3Hook的区别"><a href="#✅vue2Mixin和vue3Hook的区别" class="headerlink" title="✅vue2Mixin和vue3Hook的区别"></a>✅vue2Mixin和vue3Hook的区别</h3><p>Mixin是Vue2的一种选项式API特性，允许定义一组选项，可以拿来复用。主要用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin = &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">showName</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;mixin&#125; from &#x27;../mixin&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#x27;Student&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            name: &quot;王一一&quot;,</span><br><span class="line">            sex: &quot;female&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mixins:[mixin]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>Hook是Vue3的一种组合式API特性，可以在组件内以函数的形式定义，被拿去复用。主要用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, onMounted, onBeforeUnmount &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 实现鼠标“打点”相关数据</span></span><br><span class="line">    <span class="keyword">let</span> point = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">savePoint</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        point.<span class="property">x</span> = event.<span class="property">pageX</span></span><br><span class="line">        point.<span class="property">y</span> = event.<span class="property">pageY</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> point</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import usePoint from &#x27;../hooks/usePoint&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;Demo&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let sum = ref(0);</span><br><span class="line">        let point = usePoint()</span><br><span class="line">        return &#123;</span><br><span class="line">            sum,</span><br><span class="line">            point,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="✅虚拟DOM"><a href="#✅虚拟DOM" class="headerlink" title="✅虚拟DOM"></a>✅虚拟DOM</h3><p>虚拟DOM（Virtual DOM）是一种前端开发中的概念和技术，它是为了提高页面渲染性能而设计的。</p><p>在传统的前端开发中，当数据发生变化时，我们通常会直接操作真实的DOM来更新页面。这种做法可能会导致频繁的DOM操作，影响页面性能，特别是在数据变化频繁的复杂应用中。为了解决这个问题，虚拟DOM应运而生。</p><p>虚拟DOM是一个轻量级的、与真实DOM结构类似的JavaScript对象树。在虚拟DOM中，每个DOM元素都由一个JavaScript对象表示，这些对象可以包含元素的标签名、属性、文本内容以及子元素等信息。虚拟DOM可以通过比较新旧状态的差异来减少真实DOM的更新次数，从而提高页面渲染性能。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 虚拟DOM</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">sel</span>: <span class="string">&quot;div&quot;</span>,</span><br><span class="line">    <span class="attr">elm</span>: <span class="literal">undefined</span>, <span class="comment">// 表示虚拟节点还没有上树</span></span><br><span class="line">    <span class="attr">key</span>: <span class="literal">undefined</span>, <span class="comment">// 唯一标识</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">class</span>: &#123; <span class="string">&quot;box&quot;</span> : <span class="literal">true</span>&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">sel</span>: <span class="string">&quot;h2&quot;</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&quot;标题&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">sel</span>: <span class="string">&quot;ul&quot;</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">                &#123; <span class="attr">sel</span>: li, <span class="attr">data</span>: &#123;&#125;, <span class="attr">text</span>: <span class="string">&quot;1&quot;</span>&#125;,</span><br><span class="line">                &#123; <span class="attr">sel</span>: li, <span class="attr">data</span>: &#123;&#125;, <span class="attr">text</span>: <span class="string">&quot;2&quot;</span>&#125;,</span><br><span class="line">                &#123; <span class="attr">sel</span>: li, <span class="attr">data</span>: &#123;&#125;, <span class="attr">text</span>: <span class="string">&quot;3&quot;</span>&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>虚拟DOM的工作原理如下：</p><ol><li><p>初始渲染：当应用首次加载时，将会创建一个虚拟DOM树，该树与真实DOM结构相对应。这个过程称为初始渲染。</p></li><li><p>数据变化：当应用数据发生变化时，会触发组件的重新渲染。此时，虚拟DOM会通过与之前的虚拟DOM树进行比较，找出新旧状态的差异，生成一个更新补丁（Patch）。</p></li><li><p>应用补丁：将生成的更新补丁应用到真实DOM上，实现页面的更新。</p></li></ol><p>虚拟DOM的优势包括：</p><ol><li><p>减少真实DOM操作：通过比较虚拟DOM树，减少了对真实DOM的直接操作次数，提高了页面渲染性能。</p></li><li><p>跨平台支持：虚拟DOM是对真实DOM的抽象，因此可以轻松实现在不同平台上的应用，例如浏览器、移动设备、服务器端等。</p></li><li><p>保持性能：在大规模数据更新时，虚拟DOM可以智能地批量处理DOM更新，减少了因频繁更新而导致的页面抖动。</p></li></ol><p>虚拟DOM的一些常见实现包括React的虚拟DOM、Vue的虚拟DOM等。这些框架利用虚拟DOM机制，提供了高效的、响应式的组件化开发体验，使得前端开发更加高效和舒适。</p><h3 id="✅React虚拟DOM和Vue虚拟DOM的区别"><a href="#✅React虚拟DOM和Vue虚拟DOM的区别" class="headerlink" title="✅React虚拟DOM和Vue虚拟DOM的区别"></a>✅React虚拟DOM和Vue虚拟DOM的区别</h3><p>Vue</p><p>Vue的虚拟DOM是通过Vue组件的模板编译而来的：模板中包含数据绑定和指令，Vue将模板编译为渲染函数，该渲染函数生成虚拟DOM。</p><ul><li>组件数据发生变化时，Vue会触发数据响应系统，检测哪些虚拟DOM节点需要更新</li><li>根据更新后的数据形成虚拟DOM树，此树与之前的虚拟DOM树进行比较</li><li>使用差异计算Diffing算法比较新旧虚拟DOM树，找出要更新的部分</li><li>将找到的差异转化为最小的DOM操作，应用于真实DOM上</li></ul><p>React</p><p>React的虚拟DOM是React组件树的抽象表示，虚拟DOM由React元素构成，每个元素描述了一个组件的类型和属性。即：渲染组件时生成虚拟DOM。</p><ul><li>组件渲染时，生成一个虚拟DOM树，树中包括组件元素的状态和属性</li><li>组件状态/属性发生变化时，React重新渲染组件，生成一个新的虚拟DOM树，与旧虚拟DOM树进行比较</li><li>使用协调Reconciliation算法，找出更新部分</li><li>将差异转化为最小DOM操作，应用于真实DOM上</li></ul><h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><h3 id="✅Diffing算法"><a href="#✅Diffing算法" class="headerlink" title="✅Diffing算法"></a>✅Diffing算法</h3><p>查阅发现是基于深搜。</p><p>基本思想如下：</p><ol><li>key是当前节点的唯一标识，可以告诉diff算法更改前后哪一对是同一节点</li><li>对于同一节点，才会进行精细化比较；否则就是直接拆出旧的，添加新的。</li><li>只进行同层比较，不会进行跨层比较。</li></ol><blockquote><p>在Javascript中，渲染 <code>真实DOM </code>的开销是非常大的，比如我们修改了某个数据，如果直接渲染到 真实DOM，会引起整个 DOM树 的 <code>回流和重绘</code>。那么有没有可能实现只更新我们修改的那一小块DOM而不会引起整个DOM更新？此时我们就需要先根据 <code>真实DOM</code> 生成 <code>虚拟DOM</code> ，当 <code>虚拟DOM</code> 某个节点的数据改变后会生成一个 <code>新的Vnode</code>，然后 <code>新的Vnode</code> 和 <code>旧的Vnodde</code> 进行比较，发现有不一样的地方就直接修改到 <code>真实DOM 上</code>，然后使 <code>旧的Vnode</code> 的值变成<code> 新的Vnode</code>。</p><p>Vue就是使用虚拟DOM的创建和使用diff算法的比较从而进行上述操作。</p><p> <code>diff算法</code> 的过程就是 <code>patch函数</code> 的调用，比较新旧节点，一边比较一边给 真实的DOM 打补丁。</p><p>在采用 <code>diff算法</code> 比较新旧节点的时候，<code>只会进行同层级的比较</code>。在 <code>patch方法</code> 中，首先比较<code>新旧虚拟节</code>点是否是同一个节点，<code>如果不是同一个节点</code>，那么就会将旧的节点删除掉，插入新的虚拟节点，然后再使用 <code>createElement函数</code> 创建 真实DOM，渲染到真实的 DOM树。<code>如果是同一个节点</code>，使用 <code>patchVnode函数</code> 比较新旧节点，包括属性更新、文本更新、子节点更新，新旧节点均有子节点，则需要进行 <code>diff算法</code>，调用<code>updateChildren方法</code>，如果新节点没有文本内容而旧节点有文本内容，则需要将旧节点的文本删除，然后再增加子节点，如果新节点有文本内容，则直接替换旧节点的文本内容。</p><p> <code>updateChildren方法</code> 将新旧节点的子节点都提取出来，然后使用的是<code> 双指针</code> 的方式进行<code>四种优化策略</code>循环比较。分别是：<code>①、新前与旧前比较  ②、新后与旧后比较  ③、新后与旧前比较  ④、新前与旧后比较。</code>如果四种优化策略方法均没有命中，则会进行遍历方法进行比较（<code>源码中使用了Map对象进行了缓存，加快了比较的速率</code>），如果设置了 key，就会使用<code>key</code>进行比较，找到当前的新节点的子节点在 <code>Map 中的映射位置</code>，如果<code>不存在，则需要添加节点</code>，<code>存在则需要移动节点</code>。最后，循环结束之后，如果<code>新节点还有剩余节点</code>，则说明需要<code>添加节点</code>，如果<code>旧节点还有剩余节点</code>，则说明需要<code>删除节点</code>。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建虚拟DOM函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">vnode</span>(<span class="params">sel, data, children, text, elm</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> key = data.<span class="property">key</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        sel,</span><br><span class="line">        data,</span><br><span class="line">        children,</span><br><span class="line">        text,</span><br><span class="line">        elm,</span><br><span class="line">        key</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// h函数，判断+生成虚拟DOM</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">sel, data, c</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">arguments</span>.<span class="property">length</span> !== <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="title class_">Error</span>(<span class="string">&#x27;传入参数必须是三个&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> c === <span class="string">&#x27;string&#x27;</span> || <span class="keyword">typeof</span> c === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">vnode</span>(sel, data, <span class="literal">undefined</span>, c, <span class="literal">undefined</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(c)) &#123;</span><br><span class="line">        <span class="keyword">let</span> children = []</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; c.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!(<span class="keyword">typeof</span> c[i] === <span class="string">&#x27;object&#x27;</span> &amp;&amp; c[i].<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;sel&#x27;</span>))) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="title class_">Error</span>(<span class="string">&#x27;数组中有一项不是h函数&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            children.<span class="title function_">push</span>(s[i])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">vnode</span>(sel, data, c, <span class="literal">undefined</span>, <span class="literal">undefined</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> c === <span class="string">&#x27;object&#x27;</span> &amp;&amp; c.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;sel&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">let</span> children = [c]</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">vnode</span>(sel, data, children, <span class="literal">undefined</span>, <span class="literal">undefined</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="title class_">Error</span>(<span class="string">&#x27;传入参数的格式不对&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// patch函数：判断是否是同一个节点类型，从而方便后续进行精细化对比</span></span><br><span class="line"><span class="comment">// 流程：oldVnode是否是虚拟节点→是，和newVnode是否是一个节点→是，精细化比较</span></span><br><span class="line"><span class="comment">//                          →否，将其变为虚拟节点↑       → 否，暴力删插 </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">patch</span>(<span class="params">oldVnode, newVnode</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (oldVnode.<span class="property">sel</span> == <span class="string">&#x27;&#x27;</span> ||oldVnode.<span class="property">sel</span> == <span class="literal">undefined</span>) &#123; <span class="comment">// 判断旧虚拟节点存在</span></span><br><span class="line">        oldVnode = <span class="title function_">emptyNodeAt</span>(oldVnode) </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldVnode, newVnode)) &#123; <span class="comment">// 判断新旧虚拟节点是同一个节点</span></span><br><span class="line">        <span class="keyword">if</span> (oldVnode === newVnode) <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (newVnode.<span class="property">text</span> &amp;&amp; (newVnode.<span class="property">children</span> === <span class="literal">undefined</span> || newVnode.<span class="property">children</span>.<span class="property">length</span> === <span class="number">0</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!(newVnode.<span class="property">text</span> === oldVnode.<span class="property">text</span>)) &#123;</span><br><span class="line">                olfVnode.<span class="property">elm</span>.<span class="property">innerText</span> = newVnode.<span class="property">text</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (oldVnode.<span class="property">children</span> !== <span class="literal">undefined</span> &amp;&amp; oldVnode.<span class="property">children</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                oldVnode.<span class="property">elm</span>.<span class="property">innerText</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newVnode.<span class="property">children</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                    <span class="keyword">let</span> dom = <span class="title function_">createElement</span>(newVnode.<span class="property">children</span>[i])</span><br><span class="line">                    oldVnode.<span class="property">elm</span>.<span class="title function_">appendChild</span>(dom)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> newVnodeElm = <span class="title function_">createElement</span>(newVnode)</span><br><span class="line">        <span class="keyword">if</span> (oldVnode.<span class="property">elm</span>.<span class="property">parentNode</span> &amp;&amp; oldVnode.<span class="property">elm</span>) &#123;</span><br><span class="line">            oldVnode.<span class="property">elm</span>.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(newVnodeElm, oldVnode.<span class="property">elm</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        oldVnode.<span class="property">elm</span>.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(oldVnode.<span class="property">elm</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">emptyNodeAt</span>(<span class="params">elm</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">vnode</span>(elm.<span class="property">tagName</span>.<span class="title function_">toLowerCase</span>(), &#123;&#125;, [], <span class="literal">undefined</span>, elm)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sameVnode</span>(<span class="params">old, <span class="keyword">new</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (old.<span class="property">data</span> ? old.<span class="property">data</span>.<span class="property">key</span> : <span class="literal">undefined</span>) === (<span class="keyword">new</span>.<span class="property">data</span> ? <span class="keyword">new</span>.<span class="property">data</span>.<span class="property">key</span> : <span class="literal">undefined</span>) &amp;&amp; old.<span class="property">sel</span> === <span class="keyword">new</span>.<span class="property">sel</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建虚拟节点</span></span><br><span class="line"><span class="keyword">const</span> myVnode1 = <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, <span class="string">&#x27;oldVnode有text&#x27;</span>)</span><br><span class="line"><span class="title function_">patch</span>(container, myVnode1)</span><br><span class="line"><span class="keyword">const</span> myVnode2 = <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, [</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, <span class="string">&#x27;A&#x27;</span>),</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, <span class="string">&#x27;B&#x27;</span>),</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, <span class="string">&#x27;C&#x27;</span>),</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, <span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">])</span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">patch</span>(myVnode1, myVnode2)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 备注：appendChild在父节点中子节点的末尾添加新的节点 / insertBefore在已有节点前添加新的节点</span></span><br></pre></td></tr></table></figure><h3 id="渐进式框架"><a href="#渐进式框架" class="headerlink" title="渐进式框架"></a>渐进式框架</h3><h3 id="✅Vue2-Vue3区别"><a href="#✅Vue2-Vue3区别" class="headerlink" title="✅Vue2/Vue3区别"></a>✅Vue2/Vue3区别</h3><ul><li>性能方面：Vue3通过新的响应式系统和编译器优化提高性能。Proxy Object.defineProperty</li><li>模板语法CompositionAPI: Vue3引入一套组合式API，方便更好组织和重用代码。Vue2混合mixin代码共享</li><li>更好的TS支持: 使用TS重构，自身提供更好的TS支持，类型声明，使得代码更可靠。</li><li>更轻量：包更小，可以更快加载运行。TreeShaking友好，按需打包</li><li>新特性：引入Teleport Suspense，在组件树中任何位置渲染内容，允许多个根节点；允许数组加载完成前显示占位符加载状态，无需遍历整个组件树。</li><li>语法API改进：更简洁直观，便于理解。生命周期钩子，Setup等</li></ul><h3 id="✅Vue2响应式原理"><a href="#✅Vue2响应式原理" class="headerlink" title="✅Vue2响应式原理"></a>✅Vue2响应式原理</h3><p>当将JS对象传给Vue实例作为一个data选项，Vue将遍历这个对象的所有property，使用Object.defineProperty把这些property全部转化为getter和setter。</p><blockquote><p>Object.defineProperty</p><p>这是一个静态方法，会直接在一个对象里定义一个新属性或者修改其原有的属性，并返回对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, prop, descriptor) <span class="comment">// 对象 属性 值</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(obj) <span class="comment">// 阻止修改现有的obj的property</span></span><br></pre></td></tr></table></figure></blockquote><p>这些getter和setter是不可见的，但是内部可以让Vue可以追踪依赖，当这些property被访问修改时通知变更。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/data.png" alt="data" style="zoom:50%;" /><p>每一个组件实例都有一个watcher实例，这个实例会在组件渲染的过程中，把“接触”到的所有数据property<strong>记录为依赖</strong>。之后当依赖项的setter触发的时候，会<strong>通知watcher</strong>，从而使得这个依赖项关联的组件重新渲染。</p><h4 id="对象和数组检测变化"><a href="#对象和数组检测变化" class="headerlink" title="对象和数组检测变化"></a>对象和数组检测变化</h4><h5 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h5><p>首先就是考虑到Vue在组件初始化的时候对对象进行遍历property和生成getter/setter，所以这些property需要在data选项中存在才能转换为响应式。</p><p>如果说这个实例已经创建好了，想额外添加一个property，但是Vue是不允许动态添加根级别响应式property，这个时候就可以使用<code>Vue.set(vm.obj, name, val) / this.$set(...)</code>方法来嵌套响应式property。</p><p>还有要使用Object.assign()/_.extend()de 的时候，要注意将原对象和混合进去的属性一起创建一个新对象。</p><h5 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h5><p>单独设置某索引下的值和修改数组的长度是不能被Vue检测到的。所以需要通过以下方式↓。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">this.$set(this.items, index, newVal)</span><br><span class="line">this.items.splice(item, 1, newVal)</span><br></pre></td></tr></table></figure><h4 id="声明响应式"><a href="#声明响应式" class="headerlink" title="声明响应式"></a>声明响应式</h4><p>Vue不允许动态添加根级响应式，所以必须在初始化前声明所有的响应式，哪怕是一个空值。</p><p>为什么会这样？这样可以消除依赖项跟踪系统的一类边界情况，使得Vue能够更好配合类型检查工作。</p><h4 id="异步更新队列"><a href="#异步更新队列" class="headerlink" title="异步更新队列"></a>异步更新队列</h4><p>Vue在更新DOM时是异步执行的。当监听到数据发生变化的时候，会开启一个异步任务队列，缓冲同一事件循环中发生的所有数据变更。</p><p>也就是说很有可能同一个watcher被触发很多次，但其实为了避免不必要的计算和操作DOM，我们只想将这些很多次变化合成一次推入队列，所以需要在缓冲时去除重复数据。</p><p>然后在下一个事件循环’tick’中，Vue刷新队列执行实际要执行的工作，这部分工作显然是去重之后的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise.then MutationObserver setImmediate    setTimeout(fn, 0)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建observer并使用</span></span><br><span class="line"><span class="comment">// 选择需要观察变动的节点</span></span><br><span class="line"><span class="keyword">const</span> targetNode = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;some-id&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 观察器的配置（需要观察什么变动）属性 子节点 后代节点</span></span><br><span class="line"><span class="keyword">const</span> config = &#123; <span class="attr">attributes</span>: <span class="literal">true</span>, <span class="attr">childList</span>: <span class="literal">true</span>, <span class="attr">subtree</span>: <span class="literal">true</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当观察到变动时执行的回调函数</span></span><br><span class="line"><span class="keyword">const</span> callback = <span class="keyword">function</span>(<span class="params">mutationsList, observer</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> mutation <span class="keyword">of</span> mutationsList) &#123;</span><br><span class="line">        <span class="comment">// forEach和switch也挺好</span></span><br><span class="line">        <span class="keyword">if</span> (mutation.<span class="property">type</span> === <span class="string">&#x27;childList&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;A child node has been added or removed.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (mutation.<span class="property">type</span> === <span class="string">&#x27;attributes&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The &#x27;</span> + mutation.<span class="property">attributeName</span> + <span class="string">&#x27; attribute was modified.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个观察器实例并传入回调函数</span></span><br><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(callback);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上述配置开始观察目标节点</span></span><br><span class="line">observer.<span class="title function_">observe</span>(targetNode, config);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 之后，可停止观察</span></span><br><span class="line">observer.<span class="title function_">disconnect</span>();</span><br></pre></td></tr></table></figure><h3 id="✅Vue3响应式原理"><a href="#✅Vue3响应式原理" class="headerlink" title="✅Vue3响应式原理"></a>✅Vue3响应式原理</h3><p>Proxy</p><p>无需遍历对象，直接对整个对象生成一个Proxy实例。随后以来追踪→派发更新。</p><h3 id="✅选项式API和组合式API"><a href="#✅选项式API和组合式API" class="headerlink" title="✅选项式API和组合式API"></a>✅选项式API和组合式API</h3><p>前者是基于后者实现的。Vue的基础知识和概念在两者之间是相通的。</p><p>前者以组件实例(this)为概念中心，将响应相关的细节抽象出来，强制按照选项来组织代码。见名知意，很适合上手。</p><p>后者核心思想是直接在函数作用域内定义响应式状态变量。并将多个函数中得到的状态组合起来处理复杂问题。形式自由，更适合逻辑自定义。</p><h3 id="数据双向绑定原理"><a href="#数据双向绑定原理" class="headerlink" title="数据双向绑定原理"></a>数据双向绑定原理</h3><p>v-mode =&gt; v-bind  and  @input</p><h3 id="数组添加了一个数字，vue怎么知道数组变化了"><a href="#数组添加了一个数字，vue怎么知道数组变化了" class="headerlink" title="数组添加了一个数字，vue怎么知道数组变化了"></a>数组添加了一个数字，vue怎么知道数组变化了</h3><h3 id="生命周期钩子"><a href="#生命周期钩子" class="headerlink" title="生命周期钩子"></a>生命周期钩子</h3><h3 id="请求数据在哪个周期"><a href="#请求数据在哪个周期" class="headerlink" title="请求数据在哪个周期"></a>请求数据在哪个周期</h3><h3 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h3><h3 id="父子组件生命周期"><a href="#父子组件生命周期" class="headerlink" title="父子组件生命周期"></a>父子组件生命周期</h3><h3 id="✅计算属性和监听器的区别"><a href="#✅计算属性和监听器的区别" class="headerlink" title="✅计算属性和监听器的区别"></a>✅计算属性和监听器的区别</h3><p>computed watch</p><ul><li>前者是函数返回值，返回对data属性的操作计算结果；后者是一个对象，键是需要观察的属性，值是回调</li><li>前者会被缓存；后者不会</li><li>前者大多用于一个属性受多个属性影响时使用；后者是监听一个属性对可能多条数据的影响</li></ul><h3 id="✅如何监听a-b-c，如何立即监听"><a href="#✅如何监听a-b-c，如何立即监听" class="headerlink" title="✅如何监听a.b.c，如何立即监听"></a>✅如何监听a.b.c，如何立即监听</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> defualt &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">a</span>: &#123;</span><br><span class="line">                <span class="attr">b</span>: &#123;</span><br><span class="line">                    <span class="attr">c</span>: <span class="string">&#x27;haha&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;a.b.c&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="title function_">handler</span>(<span class="params">newVal, oldVal</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;发生变化&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="✅ref"><a href="#✅ref" class="headerlink" title="✅ref"></a>✅ref</h3><p>被用来给元素或子组件注册引用的信息（id的替代）。ref应用在html标签上获取的是真实DOM元素，应用在组件标签上获取的是组件实例对象。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div ref=&#x27;haha&#x27;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">...&#123;</span><br><span class="line">        this.$refs.haha...</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="ref-refs"><a href="#ref-refs" class="headerlink" title="ref refs"></a>ref refs</h3><h3 id="✅v-for为啥要加key"><a href="#✅v-for为啥要加key" class="headerlink" title="✅v-for为啥要加key"></a>✅v-for为啥要加key</h3><p>这跟虚拟DOM比较和视图更新有关。</p><p>假定这里有一个v-for列表，key可以作为列表中的每个项目的唯一标识，从而方便在比较这一个列表节点中所有子节点。</p><h3 id="✅自定义指令"><a href="#✅自定义指令" class="headerlink" title="✅自定义指令"></a>✅自定义指令</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;custom-directive&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">// 指令的钩子函数</span></span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">el, bingding, vnode</span>) &#123;</span><br><span class="line">        <span class="comment">// 指令绑定到元素时触发</span></span><br><span class="line">        <span class="keyword">const</span> arg = binding.<span class="property">arg</span>; <span class="comment">// 参数名 &#x27;param1&#x27;</span></span><br><span class="line">        <span class="keyword">const</span> modifiers = binding.<span class="property">modifiers</span>; <span class="comment">// 修饰符 &#123; modifier1: true, modifier2: true &#125;</span></span><br><span class="line">        <span class="keyword">const</span> value = binding.<span class="property">value</span>; <span class="comment">// 值 &#x27;value1&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;highlight&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">bind</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;white&#x27;</span></span><br><span class="line">    el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseenter&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      el.<span class="property">style</span>.<span class="property">backgroundColor</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">    el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseleave&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      el.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;white&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">        &lt;div v-custom-directive:param1=&quot;value1&quot; .modifier1.modifier2=&quot;value2&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div v-highlight=&#x27;yellow&#x27;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>自定义指令的定义包括一系列的选项，这些选项是指令的钩子函数。常见的自定义指令选项：</p><ul><li><code>bind(el, binding, vnode)</code>：在指令第一次绑定到元素时触发。这里可以执行一些初始化操作。</li><li><code>inserted(el, binding, vnode)</code>：当包含指令的元素插入到父元素中时触发。</li><li><code>update(el, binding, vnode, oldVnode)</code>：当元素的绑定值发生变化时触发。</li><li><code>componentUpdated(el, binding, vnode, oldVnode)</code>：当元素和它的子元素都被更新后触发。</li><li><code>unbind(el, binding, vnode)</code>：在指令从元素上解绑时触发。</li></ul><h3 id="✅vue-动态添加响应式属性"><a href="#✅vue-动态添加响应式属性" class="headerlink" title="✅vue 动态添加响应式属性"></a>✅vue 动态添加响应式属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$set(<span class="variable language_">this</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;val&#x27;</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">set</span>(vm, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;val&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="✅在vue组件中-添加的定时器要手动清除吗"><a href="#✅在vue组件中-添加的定时器要手动清除吗" class="headerlink" title="✅在vue组件中 添加的定时器要手动清除吗"></a>✅在vue组件中 添加的定时器要手动清除吗</h3><p>嗯嗯，为了防止内存泄漏和不必要的性能问题，是需要手动清除定时器的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeDestory</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">timer</span>) &#123;</span><br><span class="line">        clear...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="✅mixin混入"><a href="#✅mixin混入" class="headerlink" title="✅mixin混入"></a>✅mixin混入</h3><p>mixin提供了一种灵活的方式，来分发组件中可复用的功能。一个混入对象可以包含任意组件选项。当一个组件使用某混入对象的时候，这个组件会吸纳这个混入对象的所有选项。</p><h4 id="选项合并二三事"><a href="#选项合并二三事" class="headerlink" title="选项合并二三事"></a>选项合并二三事</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> amixin = &#123;</span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aminxin&#x27;s created&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;，</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">hi</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hi&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vc = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="attr">mixins</span>: [amixin],</span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;vc&#x27;s created&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">num</span>: <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">hi</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hi~!&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据递归合并冲突</span></span><br><span class="line">vm.<span class="property">num</span> === <span class="number">2</span> <span class="comment">// 组件数据优先</span></span><br><span class="line"><span class="comment">// 对象键名冲突</span></span><br><span class="line">vc.<span class="title function_">hi</span>() <span class="comment">// 组件键的值优先</span></span><br><span class="line"><span class="comment">// 选项合并</span></span><br><span class="line"><span class="string">&quot;aminxin&#x27;s created&quot;</span> <span class="comment">// 同名钩子函数，混入先调用</span></span><br><span class="line"><span class="string">&quot;vc&#x27;s created&quot;</span> <span class="comment">// 组件后调用</span></span><br></pre></td></tr></table></figure><h4 id="全局混入"><a href="#全局混入" class="headerlink" title="全局混入"></a>全局混入</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Please use it wisely~</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;...&#125;)</span><br></pre></td></tr></table></figure><h4 id="硬核：自定义选项合并策略"><a href="#硬核：自定义选项合并策略" class="headerlink" title="硬核：自定义选项合并策略"></a>硬核：自定义选项合并策略</h4><p>上述先调用mixin和数据、键值以组件内数据为先等策略是选项合并的默认策略。</p><p>可以通过<code>Vue.config.optionMergeStrategies</code>进行自定义↓</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">myOption</span> = <span class="keyword">function</span>(<span class="params">toVal, fromVal</span>) &#123;</span><br><span class="line">    <span class="comment">// 返回合并后的值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 举例</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span>.<span class="property">customEvent</span> = <span class="keyword">function</span> (<span class="params">parentVal, childVal</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!parentVal) &#123;</span><br><span class="line">    <span class="comment">// 如果父组件没有定义 customEvent，则使用子组件的值</span></span><br><span class="line">    <span class="keyword">return</span> childVal;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!childVal) &#123;</span><br><span class="line">    <span class="comment">// 如果子组件没有定义 customEvent，则使用父组件的值</span></span><br><span class="line">    <span class="keyword">return</span> parentVal;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 自定义合并逻辑，将父组件和子组件的处理函数合并为一个数组</span></span><br><span class="line">    <span class="keyword">return</span> parentVal.<span class="title function_">concat</span>(childVal);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="组件自定义事件"><a href="#组件自定义事件" class="headerlink" title="组件自定义事件"></a>组件自定义事件</h3><h3 id="✅自定义插件"><a href="#✅自定义插件" class="headerlink" title="✅自定义插件"></a>✅自定义插件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plugins/test.js创建</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">Test</span> = &#123;</span><br><span class="line">    <span class="title function_">install</span>(<span class="params">Vue, options</span>) &#123;</span><br><span class="line">        <span class="comment">// 添加全局组件、指令、混入</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="title function_">components</span>(<span class="string">&#x27;全局组件，指令，混入&#x27;</span>)</span><br><span class="line">        <span class="comment">// 添加全局方法或属性</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myGlobalMethod</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 调用：this.$myGlobalMethod()</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 添加全局混入</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">            <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="comment">// 每个组件的创建周期中执行的逻辑</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js注册</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Test</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;....&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Test</span>, &#123; 选项 &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// test.vue使用</span></span><br><span class="line"><span class="title function_">mouted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$myGlobalMethod()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="✅讲一下nextTick"><a href="#✅讲一下nextTick" class="headerlink" title="✅讲一下nextTick"></a>✅讲一下nextTick</h3><p>在下一次DOM更新结束后执行指定的回调函数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;example&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;span&gt;&#123;&#123; message &#125;&#125;&lt;/span&gt;&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;未更新&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1</span></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="attr">updateMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;已更新&#x27;</span></span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span>.<span class="property">textContent</span>) <span class="comment">// =&gt; &#x27;未更新&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.$nextTick(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span>.<span class="property">textContent</span>) <span class="comment">// =&gt; &#x27;已更新&#x27;</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2</span></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="attr">updateMessage</span>: <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;已更新&#x27;</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span>.<span class="property">textContent</span>) <span class="comment">// =&gt; &#x27;未更新&#x27;</span></span><br><span class="line">        <span class="keyword">await</span> <span class="variable language_">this</span>.$nextTick()</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span>.<span class="property">textContent</span>) <span class="comment">// =&gt; &#x27;已更新&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="eventbus-和-vuex-分别适合什么场景"><a href="#eventbus-和-vuex-分别适合什么场景" class="headerlink" title="eventbus 和 vuex 分别适合什么场景"></a>eventbus 和 vuex 分别适合什么场景</h3><h3 id="介绍vuex"><a href="#介绍vuex" class="headerlink" title="介绍vuex"></a>介绍vuex</h3><h3 id="mutations主要存放一些什么方法"><a href="#mutations主要存放一些什么方法" class="headerlink" title="mutations主要存放一些什么方法"></a>mutations主要存放一些什么方法</h3><h3 id="✅vue-router的两种模式"><a href="#✅vue-router的两种模式" class="headerlink" title="✅vue-router的两种模式"></a>✅vue-router的两种模式</h3><p>对于一个url来说，什么是hash值？——#及其后面的内容就是hash值</p><p>hash值不包括在http请求中，即：hash值不会带给服务器</p><p>前者DOM后者BOM</p><ul><li>hash模式：</li><li><ol><li>地址中永远带着#号，不美观</li><li>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法</li><li>兼容性较好</li></ol></li><li>history模式：</li><li><ol><li>地址干净，美观</li><li>兼容性和hash模式相比略差</li><li>应用部署上线时需要后端人员支持，解决刷新页面服务器404的问题</li></ol></li></ul><ol><li><strong>哈希模式（Hash Mode）</strong>：<ul><li><strong>URL 格式</strong>：在哈希模式下，URL 中的 <code>#</code> 符号后面的部分被称为哈希片段（Hash Fragment）。例如，<code>http://example.com/#/path</code> 中的 <code>/path</code> 是哈希片段。</li><li><strong>原理</strong>：在哈希模式中，浏览器的 URL 中的哈希片段不会被发送到服务器。因此，当用户在单页面应用程序中进行导航时，Vue Router 实际上是通过 JavaScript 监听 URL 的哈希片段变化来管理路由状态的。</li><li>工作流程：<ol><li>用户点击链接或手动输入 URL。</li><li>浏览器发送请求到服务器。</li><li>服务器返回单一的 HTML 文件，包括 Vue.js 应用程序的 JavaScript 代码。</li><li>浏览器加载页面并执行 JavaScript 代码，包括 Vue Router 配置。</li><li>Vue Router 监听 URL 的哈希片段变化，根据哈希片段的不同渲染不同的视图。</li></ol></li></ul></li><li><strong>历史模式（History Mode）</strong>：<ul><li><strong>URL 格式</strong>：在历史模式下，URL 更加干净，不包含 <code>#</code> 符号，例如 <code>http://example.com/path</code>。</li><li><strong>原理</strong>：历史模式使用 HTML5 历史记录 API，即 <code>pushState</code> 和 <code>replaceState</code>，来管理浏览器的历史记录和路由状态。这允许前端路由器更自然地处理 URL，并在不刷新页面的情况下更改路由。</li><li>工作流程：<ol><li>用户点击链接或手动输入 URL。</li><li>浏览器发送请求到服务器。</li><li>服务器返回单一的 HTML 文件，包括 Vue.js 应用程序的 JavaScript 代码。</li><li>浏览器加载页面并执行 JavaScript 代码，包括 Vue Router 配置。</li><li>Vue Router 使用历史记录 API 来修改浏览器的地址栏，而不触发页面的刷新，以匹配用户导航的路由。</li></ol></li></ul></li></ol><h3 id="✅vue-router页面跳转用的原生JS的哪一个API？"><a href="#✅vue-router页面跳转用的原生JS的哪一个API？" class="headerlink" title="✅vue-router页面跳转用的原生JS的哪一个API？"></a>✅vue-router页面跳转用的原生JS的哪一个API？</h3><ol><li><p>**<code>window.location.href</code>**：通过修改 <code>window.location.href</code> 属性，你可以改变浏览器的当前 URL，从而实现页面跳转。例如，要将用户重定向到新的 URL，你可以使用以下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javascriptCopy code</span><br><span class="line">window.location.href = &quot;https://example.com/new-page&quot;;</span><br></pre></td></tr></table></figure></li><li><p>**<code>window.location.replace()</code>**：这个方法可以用来立即将用户重定向到一个新的 URL，并且不会在浏览器的历史记录中留下前一个页面的记录。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javascriptCopy code</span><br><span class="line">window.location.replace(&quot;https://example.com/new-page&quot;);</span><br></pre></td></tr></table></figure></li><li><p>**<code>window.location.assign()</code>**：这个方法可以用于加载一个新的 URL，类似于 <code>window.location.href</code>，但会在浏览器的历史记录中留下前一个页面的记录。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javascriptCopy code</span><br><span class="line">window.location.assign(&quot;https://example.com/new-page&quot;);</span><br></pre></td></tr></table></figure></li><li><p>**<code>window.location.reload()</code>**：这个方法可以用于重新加载当前页面。如果你希望在用户执行某个操作后刷新页面，可以使用这个方法。</p></li></ol><h3 id="router原理"><a href="#router原理" class="headerlink" title="router原理"></a>router原理</h3><h3 id="router-和-route"><a href="#router-和-route" class="headerlink" title="router 和 route"></a>router 和 route</h3><h3 id="路由守卫如何配置？"><a href="#路由守卫如何配置？" class="headerlink" title="路由守卫如何配置？"></a>路由守卫如何配置？</h3><p>路由守卫是可以帮助我们在路由导航发生前中后执行一些逻辑的自定义逻辑。</p><p>导航解析流程：</p><ol><li>导航被触发</li><li>在失活的组件中调用beforeRouteLeave</li><li>调用全局beforeEach</li><li>在重用的组件中调用beforeRouteUpdate</li><li>在路由配置中调用beforeEnter</li><li>解析异步路由组件</li><li>在被激活的组件里调用beforeRouteEnter</li><li>调用全局的beforeResolve</li><li>导航被确认</li><li>调用全局的afterEach</li><li>触发DOM更新</li><li>调用beforeRouteEnter守卫中传给next的回调，创建好的组件实例会作为回调函数的参数传入</li></ol><p>主要分为：</p><h4 id="全局前置路由守卫"><a href="#全局前置路由守卫" class="headerlink" title="全局前置路由守卫"></a>全局前置路由守卫</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">beforeEach</span>(<span class="title function_">async</span>(to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 获取用户登录凭证</span></span><br><span class="line">  <span class="keyword">let</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;TOKEN&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> name = store.<span class="property">state</span>.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">name</span></span><br><span class="line">  <span class="keyword">if</span> (token !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span> || to.<span class="property">path</span> === <span class="string">&#x27;/register&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/&#x27;</span>) </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">      <span class="keyword">if</span> (name !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="title function_">next</span>()  </span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">        <span class="keyword">try</span>&#123; </span><br><span class="line">          <span class="keyword">await</span> store.<span class="title function_">dispatch</span>(<span class="string">&#x27;getUserInfo&#x27;</span>) </span><br><span class="line">          <span class="title function_">next</span>()</span><br><span class="line">        &#125; <span class="keyword">catch</span>(error) &#123;</span><br><span class="line">          <span class="title function_">alert</span>(<span class="string">&#x27;用户验证已过期，请重新登陆!&#x27;</span>)</span><br><span class="line">          <span class="keyword">await</span> store.<span class="title function_">dispatch</span>(<span class="string">&#x27;userLogout&#x27;</span>)</span><br><span class="line">          <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> toPath = to.<span class="property">path</span></span><br><span class="line">    <span class="keyword">if</span> (toPath.<span class="title function_">includes</span>(<span class="string">&#x27;/myorder&#x27;</span>) || toPath.<span class="title function_">includes</span>(<span class="string">&#x27;/center&#x27;</span>) || toPath.<span class="title function_">includes</span>(<span class="string">&#x27;/paysuccess&#x27;</span>) || toPath.<span class="title function_">includes</span>(<span class="string">&#x27;/trade&#x27;</span>) || toPath.<span class="title function_">includes</span>(<span class="string">&#x27;/pay&#x27;</span>)) &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/login?redirect=&#x27;</span> + toPath)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure><h4 id="全局解析守卫"><a href="#全局解析守卫" class="headerlink" title="全局解析守卫"></a>全局解析守卫</h4><p>解析守卫刚好会在被确认前、所有组件内守卫和异步路由组件被解析后调用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">beforeResolve</span>(<span class="keyword">async</span> to =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">requiresCamera</span>) &#123; <span class="comment">// 注意这里的meta，很有用的</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">askForCameraPermission</span>()</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">if</span> (error <span class="keyword">instanceof</span> <span class="title class_">NotAllowedError</span>) &#123;</span><br><span class="line">        <span class="comment">// ... 处理错误，然后取消导航</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 意料之外的错误，取消导航并把错误传给全局处理器</span></span><br><span class="line">        <span class="keyword">throw</span> error</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="全局后置钩子"><a href="#全局后置钩子" class="headerlink" title="全局后置钩子"></a>全局后置钩子</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, failure</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!failure) <span class="title function_">sendToAnalytics</span>(to.<span class="property">fullPath</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="路由独享守卫"><a href="#路由独享守卫" class="headerlink" title="路由独享守卫"></a>路由独享守卫</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> defualt [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/trade&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;@/pages/Trade&quot;</span>),</span><br><span class="line">    <span class="attr">meta</span>: &#123; <span class="attr">show</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;trade&quot;</span>,</span><br><span class="line">    <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">from</span>.<span class="property">path</span> === <span class="string">&#x27;/shopCart&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">next</span>()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>(<span class="literal">false</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="组件内的守卫"><a href="#组件内的守卫" class="headerlink" title="组件内的守卫"></a>组件内的守卫</h4><p>提供了三个可配置的API：beforeRouteEnter  beforeRouteUpdate  beforeRouteLeave（Vue2）</p><p>onBeforeRouteUpdate  onBeforeRouteLeave（Vue3）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">UserDetails</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`...`</span>,</span><br><span class="line">  <span class="title function_">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 在渲染该组件的对应路由被验证前调用</span></span><br><span class="line">    <span class="comment">// 不能获取组件实例 `this` ！</span></span><br><span class="line">    <span class="comment">// 但是可以↑next(vm =&gt; &#123;&#125;)</span></span><br><span class="line">    <span class="comment">// 因为当守卫执行时，组件实例还没被创建！</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteUpdate</span>(<span class="params">to, <span class="keyword">from</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 在当前路由改变，但是该组件被复用时调用</span></span><br><span class="line">    <span class="comment">// 举例来说，对于一个带有动态参数的路径 `/users/:id`，在 `/users/1` 和 `/users/2` 之间跳转的时候，</span></span><br><span class="line">    <span class="comment">// 由于会渲染同样的 `UserDetails` 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span></span><br><span class="line">    <span class="comment">// 因为在这种情况发生的时候，组件已经挂载好了，导航守卫可以访问组件实例 `this`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteLeave</span>(<span class="params">to, <span class="keyword">from</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 在导航离开渲染该组件的对应路由时调用</span></span><br><span class="line">    <span class="comment">// 与 `beforeRouteUpdate` 一样，它可以访问组件实例 `this`</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="✅路由懒加载如何实现"><a href="#✅路由懒加载如何实现" class="headerlink" title="✅路由懒加载如何实现"></a>✅路由懒加载如何实现</h3><p>在写routes规则的时候引入，而不是在开头引入。</p><p>这种方式可以减小初始加载包的大小，按需加载。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;@/pages/Home/RHome.vue&quot;</span>), <span class="comment">// 直接在这里引入</span></span><br><span class="line">    <span class="attr">meta</span>: &#123; <span class="attr">show</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">    ....</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="vue路由跳转方式"><a href="#vue路由跳转方式" class="headerlink" title="vue路由跳转方式"></a>vue路由跳转方式</h3><h3 id="axios实现原理（遇到非200怎么捕获err"><a href="#axios实现原理（遇到非200怎么捕获err" class="headerlink" title="axios实现原理（遇到非200怎么捕获err"></a>axios实现原理（遇到非200怎么捕获err</h3><h3 id="封装axios"><a href="#封装axios" class="headerlink" title="封装axios"></a>封装axios</h3><h3 id="为什么有一种说法是vue适合中小型项目"><a href="#为什么有一种说法是vue适合中小型项目" class="headerlink" title="为什么有一种说法是vue适合中小型项目"></a>为什么有一种说法是vue适合中小型项目</h3><h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="Diff-amp-amp-Reconciliation-算法"><a href="#Diff-amp-amp-Reconciliation-算法" class="headerlink" title="Diff &amp;&amp; Reconciliation(?)算法"></a>Diff &amp;&amp; Reconciliation(?)算法</h3><p>传统Web应用往往会把实时更新的数据变化更新到页面上，也就是微小变动即要重新渲染DOM。</p><p>而React虚拟DOM是将定量内所有的操作累加起来，统计计算所有变化，然后统一更新一次DOM。</p><p>React分别对 tree diff   component diff  element diff 进行算法优化</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/ae909a6c9cc046f584c9b95a6a555371tplv-k3u1fbpfcp-zoom-in-crop-mark1512000.webp" alt="03.jpg"></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/fbfadec74b74493bb4b4deb6b9b971batplv-k3u1fbpfcp-zoom-in-crop-mark1512000.webp" alt="04.png"></p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/926e09ea740f44048f057361d28f5a79tplv-k3u1fbpfcp-zoom-in-crop-mark1512000.webp" alt="05.png"></p><h3 id="✅React设计哲学"><a href="#✅React设计哲学" class="headerlink" title="✅React设计哲学"></a>✅React设计哲学</h3><p>在实现一个功能的时候，先将功能根据原型拆分成一套组件；</p><p>再使用React实现各个组件的静态，使用自上而下单项数据流方式进行数据的初步传递；</p><p>然后，找出UI交互所需的精简且完整的state，确保数据DRY(Don’t repeat yourself)；</p><p>​    我们可以先分析组件中要用到/操作哪些数据，然后加以判定↓</p><ul><li>不是从父组件拿到的</li><li>不是一直不变的</li><li>不是基于已存在与组件中的state或props拿到的</li></ul><p>找出state合理的存放位置；</p><p>​    验证每一个基于特定state渲染的位置，找它们共同的父组件，考虑如何放置↓，用useState创建</p><ul><li>一般情况下，选择共同的父组件</li><li>父组件的上层也可</li><li>找不到一个有意义拥有这个state的地方，单独创建一个组件管理这个state，并将该组件添加到它们父组件上层</li></ul><p>添加反向数据流，实现动作响应；</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230805140613374.png" alt="image-20230805140613374" style="zoom: 67%;" /><h3 id="React中的两种模型数据"><a href="#React中的两种模型数据" class="headerlink" title="React中的两种模型数据"></a>React中的两种模型数据</h3><p>props：传递的参数</p><p>state：组件的内存，追踪交互</p><p>两者可配合</p><h3 id="Diff"><a href="#Diff" class="headerlink" title="Diff"></a>Diff</h3><h3 id="react-a-b-c-改变c的值会触发更新吗"><a href="#react-a-b-c-改变c的值会触发更新吗" class="headerlink" title="react a.b.c 改变c的值会触发更新吗"></a>react a.b.c 改变c的值会触发更新吗</h3><h3 id="生命周期钩子-1"><a href="#生命周期钩子-1" class="headerlink" title="生命周期钩子"></a>生命周期钩子</h3><h3 id="组件通信-1"><a href="#组件通信-1" class="headerlink" title="组件通信"></a>组件通信</h3><h3 id="HOOK出现原因"><a href="#HOOK出现原因" class="headerlink" title="HOOK出现原因"></a>HOOK出现原因</h3><h3 id="HOOK应用场景"><a href="#HOOK应用场景" class="headerlink" title="HOOK应用场景"></a>HOOK应用场景</h3><h3 id="ReactHOOK为什么要在最外层使用？"><a href="#ReactHOOK为什么要在最外层使用？" class="headerlink" title="ReactHOOK为什么要在最外层使用？"></a>ReactHOOK为什么要在最外层使用？</h3><h3 id="HOOK优势和劣势"><a href="#HOOK优势和劣势" class="headerlink" title="HOOK优势和劣势"></a>HOOK优势和劣势</h3><h3 id="fiber架构出现的原因"><a href="#fiber架构出现的原因" class="headerlink" title="fiber架构出现的原因"></a>fiber架构出现的原因</h3><h3 id="react调度器怎么判断事件优先级"><a href="#react调度器怎么判断事件优先级" class="headerlink" title="react调度器怎么判断事件优先级"></a>react调度器怎么判断事件优先级</h3><h3 id="react-thunk的原理"><a href="#react-thunk的原理" class="headerlink" title="react-thunk的原理"></a>react-thunk的原理</h3><h3 id="useReducer的使用场景"><a href="#useReducer的使用场景" class="headerlink" title="useReducer的使用场景"></a>useReducer的使用场景</h3><h3 id="useMemo底层原理"><a href="#useMemo底层原理" class="headerlink" title="useMemo底层原理"></a>useMemo底层原理</h3><h3 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h3><h3 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h3><h3 id="react为什么设计合成事件"><a href="#react为什么设计合成事件" class="headerlink" title="react为什么设计合成事件"></a>react为什么设计合成事件</h3><h2 id="SPA-amp-MPA"><a href="#SPA-amp-MPA" class="headerlink" title="SPA&amp;MPA"></a>SPA&amp;MPA</h2><p>通过动态重写当前页面来与用户交互，而非从服务器中重新加载整个页面。这种方法避免了页面之间切换打断用户体验，使应用程序更像是个桌面应用程序。</p><h3 id="SPA"><a href="#SPA" class="headerlink" title="SPA"></a>SPA</h3><p>特点</p><ul><li>单页面：用户在浏览该页面的时候不需要加载新的页面，而是通过JS动态加载能容并更新页面</li><li>无刷新导航：用户交互通常不会触发整个页面的刷新，而是获取数据后对当前页面的内容进行更新</li><li>前端路由：</li></ul><p>优点</p><p>缺点</p><h2 id="服务端渲染"><a href="#服务端渲染" class="headerlink" title="服务端渲染"></a>服务端渲染</h2><p>服务端渲染SSR-Server Side Rendering</p><h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3><p>是一种前端开发技术，通过在服务器进行页面初始渲染来提高性能。</p><p>核心思想：将网页的初始渲染工作从客户端转移到服务端。</p><p>与客户端的单页应用（SPA）相比，SSR优势在于：</p><ul><li><strong>更快的首屏加载</strong>：<ul><li>服务端渲染的HTML无需等到所有JS下载执行完才显示</li><li>数据获取过程在首次访问时于服务端完成，比在客户端能有更快的数据库连接</li></ul></li><li><strong>统一的心智模型</strong>：相同的语言、声明式、面向组件的心智模型，无需前后来回转换</li><li><strong>更好的SEO</strong>：爬虫可以直接看到完全渲染的页面</li></ul><h3 id="需要考虑的因素"><a href="#需要考虑的因素" class="headerlink" title="需要考虑的因素"></a>需要考虑的因素</h3><ul><li>在开发中，一些外部库需要特殊处理才能在SSR中运行；浏览器端一些代码只能在某些特定钩子中使用</li><li>构建配置和部署需要支持SSR</li><li>跟高的服务端负载，渲染一个完整的应用比仅托管静态资源更加占用CPU</li></ul><h3 id="SSR和SSG"><a href="#SSR和SSG" class="headerlink" title="SSR和SSG"></a>SSR和SSG</h3><p>MPA</p><p>静态站点生成SSG-Static Site Generation，被称为预渲染。将在构建之前就知道的数据和页面进行渲染成静态html然后放在服务器托管。</p><p>和SSR一样首屏加载速度都很快。而且比SSR花销更小，更容易部署——静态。</p><h3 id="关于Next-js"><a href="#关于Next-js" class="headerlink" title="关于Next.js"></a>关于Next.js</h3><p>支持SSR也支持SSG</p><p>静态生成</p><ul><li>营销页面</li><li>产品列表</li><li>博客简历</li><li>帮助文档</li></ul><p>当仅使用静态生成，遇到需要现实请求后数据的时候，可以将静态生成和客户端渲染结合，或者使用服务器渲染。</p><p>服务端端渲染</p><p>在每次页面请求时重新生成页面的HTML。</p><p>这东西放在项目里阐述吧，内容很多。。。</p><h2 id="mvc-gt-mvvm的过渡，对比mvc与mvvm"><a href="#mvc-gt-mvvm的过渡，对比mvc与mvvm" class="headerlink" title="mvc-&gt;mvvm的过渡，对比mvc与mvvm"></a>mvc-&gt;mvvm的过渡，对比mvc与mvvm</h2><h2 id="require和import的区别"><a href="#require和import的区别" class="headerlink" title="require和import的区别"></a>require和import的区别</h2><h1 id="🛠️前端工程化"><a href="#🛠️前端工程化" class="headerlink" title="🛠️前端工程化"></a>🛠️前端工程化</h1><h2 id="pnpm解决了npm什么痛点"><a href="#pnpm解决了npm什么痛点" class="headerlink" title="pnpm解决了npm什么痛点"></a>pnpm解决了npm什么痛点</h2><h2 id="Webpack和Vite打包的区别"><a href="#Webpack和Vite打包的区别" class="headerlink" title="Webpack和Vite打包的区别"></a>Webpack和Vite打包的区别</h2><h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><h3 id="webpack-tree-shaking的原理"><a href="#webpack-tree-shaking的原理" class="headerlink" title="webpack tree shaking的原理"></a>webpack tree shaking的原理</h3><h3 id="webpack常用配置？"><a href="#webpack常用配置？" class="headerlink" title="webpack常用配置？"></a>webpack常用配置？</h3><h3 id="loader是怎么样的机制？"><a href="#loader是怎么样的机制？" class="headerlink" title="loader是怎么样的机制？"></a>loader是怎么样的机制？</h3><h3 id="webpack的出现解决了什么问题？"><a href="#webpack的出现解决了什么问题？" class="headerlink" title="webpack的出现解决了什么问题？"></a>webpack的出现解决了什么问题？</h3><h2 id="Vite"><a href="#Vite" class="headerlink" title="Vite"></a>Vite</h2><h3 id="为什么Vite更快"><a href="#为什么Vite更快" class="headerlink" title="为什么Vite更快"></a>为什么Vite更快</h3><h1 id="🔮Git"><a href="#🔮Git" class="headerlink" title="🔮Git"></a>🔮Git</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>基本使用：</p><ul><li><p>git commit</p></li><li><p>git checkout -b 分支名，创建分支</p></li><li><p>git merge 分支，生成一次新的合并commit在分支上</p></li><li><p>git rebase 分支，将分支合并到指定分支</p></li></ul><p>相对引用：</p><ul><li><p>git checkout 提交记录，使得HEAD分离出来</p></li><li><p>git checkout 分支^，跳到分支的parent提交点</p></li><li><p>git checkout HEAD^，跳到HEAD节点的parent提交点</p></li><li><p>git checkout HEAD~3，向上跳了三次</p></li><li><p>git branch -f 分支 HEAD~3，强制修改分支位置到第三级parent提交</p></li></ul><p>撤销变更</p><ul><li><p>git reset HEAD~1，改写历史，向上移动分支，撤销一次变更</p></li><li><p>git revert HEAD，撤销一次更改并分享给别人</p></li></ul><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230720213417014.png" alt="image-20230720213417014" style="zoom: 50%;" /><p>整理提交记录</p><ul><li>git cherry-pick</li></ul><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230720214715356.png" alt="image-20230720214715356" style="zoom:50%;" /> → <img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230720214740339.png" alt="image-20230720214740339" style="zoom:50%;" /></p><ul><li>交互式rebase  git rebase –interactive(-i)</li></ul><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230721215402321.png" alt="image-20230721215402321" style="zoom:50%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230721215422110.png" alt="image-20230721215422110" style="zoom: 50%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230721215440497.png" alt="image-20230721215440497" style="zoom:50%;" /></p><h2 id="git-merge-main-和-git-rebase-main的区别"><a href="#git-merge-main-和-git-rebase-main的区别" class="headerlink" title="git merge main 和 git rebase main的区别"></a>git merge main 和 git rebase main的区别</h2><h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><p>merge会<strong>在feature分支中新增一个新的merge commit</strong>，然后将两个分支的历史联系在一起。</p><p>是一种<strong>非破坏性的操作</strong>，对现有的分支不会造成任何方式的改变。</p><p>分支每次需要合并上游更改时，它都产生一个额外的和并提交。</p><p><strong>如果main分支提交十分活跃，那么可能会严重污染feature分支记录</strong>，可以使用git log来解决。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/S5YmfCK7wW1JxTB.png" alt="git-merge" style="zoom: 33%;" /><h3 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h3><p>rebase会将整个feature分支移动到main分支的顶端，有效整合了所有main分支的提交。</p><p>rebase通过为原始分支中每个提交创建全新commits来重写项目历史记录。</p><p>rebase能使得获得更清晰的项目历史，消除了git merge那样不必要的和并提交。</p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/F1qIGKTNDW6aRul.png" alt="git-rebase" style="zoom:33%;" /><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230720203517949.png" alt="image-20230720203517949" style="zoom: 50%;" /><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230720203413810.png" alt="image-20230720203413810" style="zoom: 50%;" /></p><p>rebase rebase feature，等效与创建了新提交，且老的提交只是不能再被访问使用</p><h1 id="🧰项目"><a href="#🧰项目" class="headerlink" title="🧰项目"></a>🧰项目</h1><h2 id="工作经历"><a href="#工作经历" class="headerlink" title="工作经历"></a>工作经历</h2><h3 id="客户端直传"><a href="#客户端直传" class="headerlink" title="客户端直传"></a><a href="https://help.aliyun.com/zh/oss/use-cases/client-direct-transmission-overview">客户端直传</a></h3><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/p704084.png" alt="image.png"></p><p>好处：少在网络中传输一次，节约开销。</p><p>实现：</p><ul><li>跨域</li><li>安全授权<ul><li>服务端STS临时访问凭证：适用于基于分片上传大文件、基于分片断点续传场景，需要进行缓存和刷新优化，不要频繁调用。</li><li>服务端生成Post签名和PostPolicy：适合限制客户端上传文件大小类型等，不支持分片上传大文件、基于分片断点续传场景。</li><li>服务端生成签名URL：简单上传，不适合大文件、基于分片断点续传场景。</li></ul></li></ul><p>TS相关</p><p>electron</p><h2 id="技术难点"><a href="#技术难点" class="headerlink" title="技术难点"></a>技术难点</h2><h3 id="路由二次封装"><a href="#路由二次封装" class="headerlink" title="路由二次封装"></a>路由二次封装</h3><h3 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h3><h3 id="状态管理-1"><a href="#状态管理-1" class="headerlink" title="状态管理"></a>状态管理</h3><h3 id="前端工程化"><a href="#前端工程化" class="headerlink" title="前端工程化"></a>前端工程化</h3><h3 id="使用Prisma简化数据库操作"><a href="#使用Prisma简化数据库操作" class="headerlink" title="使用Prisma简化数据库操作"></a>使用Prisma简化数据库操作</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install prisma --save--dev</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .env.development.local</span></span><br><span class="line"></span><br><span class="line">DATABASE_URL=<span class="string">&quot;mongodb+srv://....&quot;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib/db.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PrismaClient</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@prisma/client&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prisma = <span class="keyword">new</span> <span class="title class_">PrismaClient</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> db = prisma;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// prisma/schema.prisma</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据库简单配置</span></span><br><span class="line">datasource db &#123;</span><br><span class="line">  provider = <span class="string">&quot;mongodb&quot;</span></span><br><span class="line">  url      = <span class="title function_">env</span>(<span class="string">&quot;DATABASE_URL&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">generator client &#123;</span><br><span class="line">  provider = <span class="string">&quot;prisma-client-js&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建对应model-关键一步</span></span><br><span class="line"><span class="comment">// 底层数据库表</span></span><br><span class="line"><span class="comment">// 作为生成Prisma客户端API的基础</span></span><br><span class="line">model <span class="title class_">Account</span> &#123;</span><br><span class="line">  id                <span class="title class_">String</span>  @id @<span class="title function_">default</span>(<span class="title function_">auto</span>()) @<span class="title function_">map</span>(<span class="string">&quot;_id&quot;</span>) @db.<span class="property">ObjectId</span></span><br><span class="line">  userId            <span class="title class_">String</span>  @db.<span class="property">ObjectId</span></span><br><span class="line">  type              <span class="title class_">String</span></span><br><span class="line">  provider          <span class="title class_">String</span></span><br><span class="line">  providerAccountId <span class="title class_">String</span></span><br><span class="line">  refresh_token     <span class="title class_">String</span>?</span><br><span class="line">  access_token      <span class="title class_">String</span>?</span><br><span class="line">  expires_at        <span class="title class_">Int</span>?</span><br><span class="line">  token_type        <span class="title class_">String</span>?</span><br><span class="line">  scope             <span class="title class_">String</span>?</span><br><span class="line">  idToken           <span class="title class_">String</span>?</span><br><span class="line">  session_state     <span class="title class_">String</span>?</span><br><span class="line"></span><br><span class="line">  user <span class="title class_">User</span> @<span class="title function_">relation</span>(<span class="attr">fields</span>: [userId], <span class="attr">references</span>: [id], <span class="attr">onDelete</span>: <span class="title class_">Cascade</span>)</span><br><span class="line"></span><br><span class="line">  @@<span class="title function_">unique</span>([provider, providerAccountId])</span><br><span class="line">  @@<span class="title function_">map</span>(<span class="string">&quot;accounts&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CRUD</span></span><br><span class="line"><span class="keyword">const</span> user = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;elsa@prisma.io&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Elsa Prisma&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> user = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">findUnique</span>(&#123;</span><br><span class="line">  <span class="attr">where</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;60d5922d00581b8f0062e3a8&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> users = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">findMany</span>()<span class="comment">// findFirst()</span></span><br><span class="line"><span class="keyword">const</span> updateUser = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">update</span>(&#123;<span class="comment">// updateMany()upsert()</span></span><br><span class="line">  <span class="attr">where</span>: &#123;</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;viola@prisma.io&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Viola the Magnificent&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> deletePosts = prisma.<span class="property">post</span>.<span class="title function_">deleteMany</span>(&#123;</span><br><span class="line">  <span class="attr">where</span>: &#123;</span><br><span class="line">    <span class="attr">authorId</span>: <span class="number">7</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> deleteUser = prisma.<span class="property">user</span>.<span class="title function_">delete</span>(&#123;</span><br><span class="line">  <span class="attr">where</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">7</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> transaction = <span class="keyword">await</span> prisma.$transaction([deletePosts, deleteUser])</span><br></pre></td></tr></table></figure><h3 id="NextAuth-js简化用户登录认证"><a href="#NextAuth-js简化用户登录认证" class="headerlink" title="NextAuth.js简化用户登录认证"></a>NextAuth.js简化用户登录认证</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install next-auth</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib/auth.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; getServerSession &#125; <span class="keyword">from</span> <span class="string">&quot;next-auth&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">GitHub</span> <span class="keyword">from</span> <span class="string">&quot;next-auth/providers/github&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PrismaAdapter</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@auth/prisma-adapter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; db &#125; <span class="keyword">from</span> <span class="string">&quot;./db&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> authConfig = &#123;</span><br><span class="line">  <span class="attr">adapter</span>: <span class="title class_">PrismaAdapter</span>(db),</span><br><span class="line">  <span class="attr">session</span>: &#123;</span><br><span class="line">    <span class="attr">strategy</span>: <span class="string">&quot;jwt&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title class_">GitHub</span>(&#123;</span><br><span class="line">      <span class="attr">clientId</span>: process.<span class="property">env</span>.<span class="property">AUTH_GITHUB_ID</span>,</span><br><span class="line">      <span class="attr">clientSecret</span>: process.<span class="property">env</span>.<span class="property">AUTH_GITHUB_SECRET</span>,</span><br><span class="line">      <span class="attr">httpOptions</span>: &#123;</span><br><span class="line">        <span class="comment">// 以防网络不好超时报错</span></span><br><span class="line">        <span class="attr">timeout</span>: <span class="number">1000</span> * <span class="number">5</span> * <span class="number">1</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">pages</span>: &#123;</span><br><span class="line">    <span class="attr">signIn</span>: <span class="string">&quot;/signin&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">callbacks</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">jwt</span>(<span class="params">&#123; token, user &#125;</span>) &#123; <span class="comment">//json web token</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> db.<span class="property">user</span>.<span class="title function_">findUnique</span>(&#123;</span><br><span class="line">        <span class="attr">where</span>: &#123;</span><br><span class="line">          <span class="attr">email</span>: token.<span class="property">email</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!result) &#123;</span><br><span class="line">        token.<span class="property">id</span> = user.<span class="property">id</span>;</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">id</span>: result.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">name</span>: result.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">email</span>: result.<span class="property">email</span>,</span><br><span class="line">        <span class="attr">image</span>: result.<span class="property">image</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">session</span>(<span class="params">&#123; session, token &#125;</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!!token) &#123;</span><br><span class="line">        session.<span class="property">user</span>.<span class="property">id</span> = token.<span class="property">id</span>;</span><br><span class="line">        session.<span class="property">user</span>.<span class="property">name</span> = token.<span class="property">name</span>;</span><br><span class="line">        session.<span class="property">user</span>.<span class="property">email</span> = token.<span class="property">email</span>;</span><br><span class="line">        session.<span class="property">user</span>.<span class="property">image</span> = token.<span class="property">image</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> session;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useServerSession</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">getServerSession</span>(authConfig);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// auth/[...nextauth]/route.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NextAuth</span> <span class="keyword">from</span> <span class="string">&quot;next-auth&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; authConfig &#125; <span class="keyword">from</span> <span class="string">&quot;@/lib/auth&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const handler = async (request, response) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   // 在这里可以进一步对请求和响应进行处理</span></span><br><span class="line"><span class="comment">//   return await NextAuth(request, response, authConfig);</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handler = <span class="title class_">NextAuth</span>(authConfig);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; handler <span class="keyword">as</span> <span class="variable constant_">GET</span>, handler <span class="keyword">as</span> <span class="variable constant_">POST</span> &#125;;</span><br></pre></td></tr></table></figure><h3 id="token怎么生成的？token怎么加密？"><a href="#token怎么生成的？token怎么加密？" class="headerlink" title="token怎么生成的？token怎么加密？"></a>token怎么生成的？token怎么加密？</h3><h3 id="useMemo和memo"><a href="#useMemo和memo" class="headerlink" title="useMemo和memo"></a>useMemo和memo</h3><p>一个在每次重新渲染后缓存计算结果的钩子。</p><ul><li>跳过代价昂贵的重新计算</li><li>跳过组件的重新渲染</li><li>记忆另一个HOOK依赖</li><li>记忆一个函数</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params">&#123; todos, theme, tab &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> visibleTodos = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> <span class="title function_">filterTodos</span>(todos, tab),</span><br><span class="line">    [todos, tab]</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;theme&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Note: <span class="tag">&lt;<span class="name">code</span>&gt;</span>List<span class="tag">&lt;/<span class="name">code</span>&gt;</span> is artificially slowed down!<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">List</span> <span class="attr">items</span>=<span class="string">&#123;visibleTodos&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">List</span> = <span class="title function_">memo</span>(<span class="keyword">function</span> <span class="title function_">List</span>(<span class="params">&#123; items &#125;</span>) &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useMemo-和-useCallback"><a href="#useMemo-和-useCallback" class="headerlink" title="useMemo 和 useCallback"></a>useMemo 和 useCallback</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 包裹函数显得有些笨拙</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Page</span>(<span class="params">&#123; productId, referrer &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> handleSubmit = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">orderDetails</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">post</span>(<span class="string">&#x27;/product/&#x27;</span> + productId + <span class="string">&#x27;/buy&#x27;</span>, &#123;</span><br><span class="line">        referrer,</span><br><span class="line">        orderDetails</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [productId, referrer]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleSubmit&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有专门包函数的钩子！</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Page</span>(<span class="params">&#123; productId, referrer &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> handleSubmit = <span class="title function_">useCallback</span>(<span class="function">(<span class="params">orderDetails</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&#x27;/product/&#x27;</span> + productId + <span class="string">&#x27;/buy&#x27;</span>, &#123;</span><br><span class="line">      referrer,</span><br><span class="line">      orderDetails</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [productId, referrer]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleSubmit&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h3><p>一个可以让读取和订阅组件中的context钩子。</p><ul><li>向数组深层传递数据</li><li>通过context更新传递数据</li><li>指定回退默认值</li><li>覆盖组件树一部分的context</li><li>在传递对象的和函数时优化重新渲染</li></ul><p>如何进行状态管理?</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// contexts/TodoContext.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">TodoContext</span> = <span class="title function_">createContext</span>(&#123;&#125;);</span><br><span class="line"><span class="keyword">export</span> defualt <span class="keyword">function</span> <span class="title function_">TodoProvider</span>(<span class="params">&#123;children&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [todos, setTodos] = <span class="title function_">useState</span>(<span class="literal">null</span>)</span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      (<span class="title function_">async</span>() =&gt; &#123;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> acios.<span class="title function_">get</span>(<span class="string">&#x27;api/..&#x27;</span>), &#123;</span><br><span class="line">                 <span class="attr">params</span>: &#123;</span><br><span class="line">                     ....</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="title function_">setTodos</span>(data)</span><br><span class="line">         &#125;  <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">             <span class="title function_">clg</span>(err)</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;)()  </span><br><span class="line">    &#125;, [])</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">TodoProvider.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;todos,</span> <span class="attr">setTodos</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;!!todos ? childern : <span class="tag">&lt;<span class="name">Loading</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">TodoProvider.Provider</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useTodoContext</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useContext</span>(<span class="title class_">TodoContext</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">const</span> &#123; todos, setTodos &#125; = <span class="title function_">useTodoContext</span>()</span><br></pre></td></tr></table></figure><h3 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h3><p>一个允许向组件中添加一个reducer。和useState有相似的效果，在组件顶层创建用于状态管理。</p><ol><li>一般用法就是创建一个<code>reducer(state, action)</code>方法，定义操作状态</li><li>然后<code>const [state, dispatch] = useReducer(reducer, initialArg, init?)</code>，给state一个初始为init的状态，使用dispatch函数和reducer函数统一操作管理状态</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="comment">// state是initialArg  action是dispatch传来的对象</span></span><br><span class="line">    <span class="keyword">switch</span>(action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;changeAge&#x27;</span>: &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                <span class="attr">age</span>: nextAge,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;changeHeight&#x27;</span>: &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                <span class="attr">age</span>: nextHeight,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> initialArg = &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;20&#x27;</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;167&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialArg)</span><br><span class="line"><span class="title function_">dispatch</span>(&#123;<span class="attr">type</span>: <span class="string">&#x27;changeAge&#x27;</span>, <span class="attr">nextAge</span>: <span class="string">&#x27;21&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><h2 id="业务思考"><a href="#业务思考" class="headerlink" title="业务思考"></a>业务思考</h2><h3 id="什么是状态？为什么要管理状态？组件是如何感知到状态的变化的？state和props的区别？"><a href="#什么是状态？为什么要管理状态？组件是如何感知到状态的变化的？state和props的区别？" class="headerlink" title="什么是状态？为什么要管理状态？组件是如何感知到状态的变化的？state和props的区别？"></a>什么是状态？为什么要管理状态？组件是如何感知到状态的变化的？state和props的区别？</h3><p>状态是React中一个非常重要的概念之一。表示一个组件的数据，这些数据可以随着时间推移而改变，通常用于存储组件可变的信息。</p><p>为何管理状态</p><ul><li>响应用户状态：捕获变化处理变化（按钮、键入文本</li><li>数据驱动视图：这是React的一个核心思想，用数据状态变化驱动视图变化代替了自主操作DOM</li><li>组件通信：将状态和自定义事件回调传递给子组件，方便父子组件之间通信</li><li>性能优化：有效管理状态更新，必要时重新渲染组件</li></ul><p>组件如何感知状态变化</p><ul><li>setState(过时了已经…)</li><li>useState</li><li>useEffect</li></ul><p>state和props的区别</p><ol><li><strong>State（状态）：</strong> 是组件自己管理和维护的数据，用于存储组件的可变信息。可以通过<code>this.state</code>（在类组件中）或<code>useState</code>（在函数式组件中）来声明和更新状态。状态通常在组件内部使用，只能被组件自身修改。</li><li><strong>Props（属性）：</strong> 是从父组件传递给子组件的数据。它们是不可变的，子组件不能直接修改props。props用于在组件之间传递数据，以使组件可以展示不同的信息或根据外部数据进行自定义渲染。</li></ol><h3 id="实现无限列表的加载"><a href="#实现无限列表的加载" class="headerlink" title="实现无限列表的加载"></a>实现无限列表的加载</h3><h3 id="为什么二次封装axios"><a href="#为什么二次封装axios" class="headerlink" title="为什么二次封装axios"></a>为什么二次封装axios</h3><h3 id="为什么二次封装vuerouter"><a href="#为什么二次封装vuerouter" class="headerlink" title="为什么二次封装vuerouter"></a>为什么二次封装vuerouter</h3><h3 id="如何避免一次性出现许多错误弹出框"><a href="#如何避免一次性出现许多错误弹出框" class="headerlink" title="如何避免一次性出现许多错误弹出框"></a>如何避免一次性出现许多错误弹出框</h3><h3 id="实现轮播图"><a href="#实现轮播图" class="headerlink" title="实现轮播图"></a>实现轮播图</h3><h3 id="点击发请求按键优化"><a href="#点击发请求按键优化" class="headerlink" title="点击发请求按键优化"></a>点击发请求按键优化</h3><p>快速点击几个item，每一个item携带自己的id发送请求，dom展示数据，最后显示的是哪个item的数据？怎么让页面显示的是最后一个点击的item的数据？</p><h3 id="如何提高性能"><a href="#如何提高性能" class="headerlink" title="如何提高性能"></a>如何提高性能</h3><h3 id="如何保证代码上线稳定性"><a href="#如何保证代码上线稳定性" class="headerlink" title="如何保证代码上线稳定性"></a>如何保证代码上线稳定性</h3><h3 id="关于登录"><a href="#关于登录" class="headerlink" title="关于登录"></a>关于登录</h3><p>token 存在 localStorage 里有风险吗？</p><p>有风险，cv</p><p>token 是放在 cookie 里更合理还是放到 localStorage 里更合理？</p><p>token 存到 localStorage，是没有过期时间的，怎么实现有过期时间呢？</p><h1 id="🥴手撕"><a href="#🥴手撕" class="headerlink" title="🥴手撕"></a>🥴手撕</h1><h2 id="CSS相关"><a href="#CSS相关" class="headerlink" title="CSS相关"></a>CSS相关</h2><h3 id="实现三角形"><a href="#实现三角形" class="headerlink" title="实现三角形"></a>实现三角形</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#triangle</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">40px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">40px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">80px</span> solid lightblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(为什么会被问到这样的问题？？)[]</p><h3 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h3><h3 id="图片背景"><a href="#图片背景" class="headerlink" title="图片背景"></a>图片背景</h3><h3 id="图片自适应"><a href="#图片自适应" class="headerlink" title="图片自适应"></a>图片自适应</h3><p>图片在盒子里不会被剪裁，宽或高需要撑满盒子，不会被拉伸挤压。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>; </span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex; </span><br><span class="line">  <span class="attribute">justify-content</span>: center; </span><br><span class="line">  <span class="attribute">align-items</span>: center; </span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.image</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">100%</span>; </span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">100%</span>; </span><br><span class="line">  <span class="attribute">width</span>: auto; </span><br><span class="line">  <span class="attribute">height</span>: auto; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>图片在盒子里宽或高需要撑满盒子，不留空隙，可以适当剪裁。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.image</span> &#123;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">100%</span>; </span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100%</span>; </span><br><span class="line">  <span class="attribute">width</span>: auto; </span><br><span class="line">  <span class="attribute">height</span>: auto; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="左侧固定，右侧占满"><a href="#左侧固定，右侧占满" class="headerlink" title="左侧固定，右侧占满"></a>左侧固定，右侧占满</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex; <span class="comment">/* 使用 Flex 布局 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left-sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>; <span class="comment">/* 左侧栏的固定宽度 */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>; <span class="comment">/* 左侧栏的高度占据整个视口高度 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f0f0f0</span>; <span class="comment">/* 左侧栏的背景颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right-content</span> &#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>; <span class="comment">/* 右侧栏占满剩余空间 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#e0e0e0</span>; <span class="comment">/* 右侧栏的背景颜色 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="业务相关"><a href="#业务相关" class="headerlink" title="业务相关"></a>业务相关</h2><h3 id="✅html写一个计时器，页面上展示读秒，三个按钮，分别是开始，停止和重置"><a href="#✅html写一个计时器，页面上展示读秒，三个按钮，分别是开始，停止和重置" class="headerlink" title="✅html写一个计时器，页面上展示读秒，三个按钮，分别是开始，停止和重置"></a>✅html写一个计时器，页面上展示读秒，三个按钮，分别是开始，停止和重置</h3><p><a href="https://codepen.io/3879055132-qq-com/pen/MWZjdpM?editors=1111">效果</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;timer&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;handleStart()&quot;</span>&gt;</span>开始<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&quot;handleStop()&quot;</span>&gt;</span>停止<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&quot;handleReset()&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> sec = <span class="number">0</span></span><br><span class="line">timer = <span class="built_in">setInterval</span>(updateTimer, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleStart</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">    timer = <span class="built_in">setInterval</span>(updateTimer, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleStop</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">  timer = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleReset</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">handleStop</span>()</span><br><span class="line">  sec = <span class="number">0</span></span><br><span class="line">  <span class="title function_">handleStart</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateTimer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;timer&#x27;</span>).<span class="property">innerText</span> = sec</span><br><span class="line">  sec += <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="✅有一个表单，表单内有个提交按钮，写一个避免重复提交的通用方案"><a href="#✅有一个表单，表单内有个提交按钮，写一个避免重复提交的通用方案" class="headerlink" title="✅有一个表单，表单内有个提交按钮，写一个避免重复提交的通用方案"></a>✅有一个表单，表单内有个提交按钮，写一个避免重复提交的通用方案</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;myForm&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;要提交的数据&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&#x27;submitBtn&#x27;</span>&gt;</span>点击提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> form = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myForm&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> msg = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;msg&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> submitBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;submitBtn&#x27;</span>)</span><br><span class="line"></span><br><span class="line">form.<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  event.<span class="title function_">preventDefault</span>()</span><br><span class="line">  submitBtn.<span class="property">disabled</span> = <span class="literal">true</span></span><br><span class="line">  msg.<span class="property">disabled</span> = <span class="literal">true</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;模仿发请求获得相应的过程&#x27;</span>, msg.<span class="property">value</span>)</span><br><span class="line">    submitBtn.<span class="property">disabled</span> = <span class="literal">false</span></span><br><span class="line">    msg.<span class="property">disabled</span> = <span class="literal">false</span></span><br><span class="line">    msg.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// =&gt; (输入框和按钮禁用) &quot;模仿发请求获得相应的过程&quot; &quot;提交内容&quot; (输入框内容清空，输入框按钮回复可用)</span></span><br></pre></td></tr></table></figure><h3 id="id-xxx-parentId-yyy-order-1-这种结构的数组转化成一个树型结构-order代表同组子节点的优先级，怎么优化，减少循环次数"><a href="#id-xxx-parentId-yyy-order-1-这种结构的数组转化成一个树型结构-order代表同组子节点的优先级，怎么优化，减少循环次数" class="headerlink" title="{ id:xxx , parentId: yyy, order: 1 } 这种结构的数组转化成一个树型结构,order代表同组子节点的优先级，怎么优化，减少循环次数"></a>{ id:xxx , parentId: yyy, order: 1 } 这种结构的数组转化成一个树型结构,order代表同组子节点的优先级，怎么优化，减少循环次数</h3><h3 id="💥父子组件通信"><a href="#💥父子组件通信" class="headerlink" title="💥父子组件通信"></a>💥父子组件通信</h3><p>忘得差不多了，似乎是这样字写</p><h4 id="React-1"><a href="#React-1" class="headerlink" title="React"></a>React</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">function grandfather() &#123;</span><br><span class="line">    function getData(data) &#123;</span><br><span class="line">        clg(data)</span><br><span class="line">    &#125;</span><br><span class="line">    return (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;Parent onGetData=&#123;getData&#125; /&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Parent(props) &#123;</span><br><span class="line">    const &#123; onGetData &#125; = props</span><br><span class="line">    const [num, setNum] = useState(1)</span><br><span class="line">    const name = &#x27;liz&#x27;</span><br><span class="line">    function handleClick() &#123;</span><br><span class="line">        onGetData(name)</span><br><span class="line">    &#125;</span><br><span class="line">    function getNum(data) &#123;</span><br><span class="line">        setNum(data)</span><br><span class="line">    &#125;</span><br><span class="line">    return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">            &lt;button onClick=&#123;handleClick&#125;&gt;点我给我的父组件发送数据&lt;/button&gt;</span><br><span class="line">            &lt;Children num=&#123;num&#125; onGetNum=&#123;getNum&#125; /&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Children(props) &#123;</span><br><span class="line">    const &#123; num, onGetNum &#125; = props</span><br><span class="line">    function handleClick() &#123;</span><br><span class="line">        onGetNum(num + 1)</span><br><span class="line">    &#125;</span><br><span class="line">    return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">        &lt;button onClick=&#123;handleClick&#125;&gt;点我 num+1 =&gt; &#123;num&#125;&lt;/button&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Vue-1"><a href="#Vue-1" class="headerlink" title="Vue"></a>Vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;Children name onGetNum=&#x27;getNum()&#x27;&gt;&lt;/Children&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const Father = new Vue(&#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return () &#123;</span><br><span class="line">                name: &#x27;liz&#x27;,</span><br><span class="line">                num: 1,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            getNum(data) &#123;</span><br><span class="line">                this.num = num</span><br><span class="line">                clg(this.num)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;button onclick=&#x27;handleClick&#x27;&gt;&lt;/button&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const Father = new Vue(&#123;</span><br><span class="line">        props: [name]</span><br><span class="line">        data() &#123;</span><br><span class="line">            return () &#123;</span><br><span class="line">                num: 100,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            handleClick(data) &#123;</span><br><span class="line">                onGetNum.$emit(this.num)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="语法特性相关"><a href="#语法特性相关" class="headerlink" title="语法特性相关"></a>语法特性相关</h2><h3 id="✅0-1-0-2-0-3原因，解决"><a href="#✅0-1-0-2-0-3原因，解决" class="headerlink" title="✅0.1 + 0.2 != 0.3原因，解决"></a>✅0.1 + 0.2 != 0.3原因，解决</h3><p>JS浮点数精度问题。JavaScript使用IEEE 754标准来表示数字，该标准采用二进制浮点数表示法，而不是使用十进制浮点数表示法。在二进制浮点数表示法中，有些小数无法准确表示，因此可能会导致计算结果不精确。</p><p>0.1 和 0.2 在二进制浮点数表示法中无法精确表示，它们会被近似为有限的二进制小数，导致计算时产生微小舍入误差。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.1</span> (十进制) ≈ <span class="number">0.00011001100110011001100110011001100110011001100110011</span>... (二进制)</span><br><span class="line"><span class="number">0.2</span> (十进制) ≈ <span class="number">0.0011001100110011001100110011001100110011001100110011</span>... (二进制)</span><br><span class="line"><span class="number">0.3</span> (十进制) ≈ <span class="number">0.0100110011001100110011001100110011001100110011001100</span>... (二进制)</span><br><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> ≈ <span class="number">0.0100110011001100110011001100110011001100110011001101</span>... (二进制)</span><br></pre></td></tr></table></figure><p>解决1：先将小数转换为整数，计算后还原成小数。</p><p>解决2：用专门的精确计算库(bignumber.js math.js)。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ans1 = <span class="keyword">new</span> <span class="title class_">BigNumber</span>(<span class="number">0.1</span> + <span class="number">0.2</span>)</span><br><span class="line"><span class="keyword">let</span> ans2 = math.evaluate(<span class="string">&#x27;0.1 + 0.2&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="✅二进制转换十进制为什么会造成精度丢失"><a href="#✅二进制转换十进制为什么会造成精度丢失" class="headerlink" title="✅二进制转换十进制为什么会造成精度丢失?"></a>✅二进制转换十进制为什么会造成精度丢失?</h3><p>因为二进制无法准确表示小数。IEEE 754二进制浮点表示法中，一个浮点数由符号位、指数位、尾数位表示，指数位指明小数点的位置，尾数位是小数点后的二进制表示。</p><p>而一些小数比如0.1，在二进制表示中可能是一个循环小数的表示，也就是说无法精确表示0.1↑，所以当这样的无限循环小数从二进制转换回十进制后，就会出现精度丢失。</p><h3 id="✅指定深度的flat"><a href="#✅指定深度的flat" class="headerlink" title="✅指定深度的flat"></a>✅指定深度的flat</h3><p>主要是个递归</p><ul><li>如果深度不合法，报错</li><li>如果深度=1，直接返回</li><li>如果深度&gt;1，遍历<ul><li>如果遍历到的元素是数组，递归，且传入深度 = 深度 - 1，然后添加到结果集</li><li>如果遍历到的元素是基本，直接添加到结果集</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">flat</span>(<span class="params">arr, depth = <span class="number">1</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Number</span>.<span class="title function_">isInteger</span>(depth) ||depth &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;深度不合法，必须为&gt;=1的整数&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (depth === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> result = []</span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(item)) &#123;</span><br><span class="line">            result = result.<span class="title function_">concat</span>(<span class="title function_">flat</span>(item, depth - <span class="number">1</span>))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result.<span class="title function_">push</span>(item)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="✅This的指向"><a href="#✅This的指向" class="headerlink" title="✅This的指向"></a>✅This的指向</h3><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/a3ce87515a4f6acbbdaa8b84b155c1e1.jpeg" alt="a3ce87515a4f6acbbdaa8b84b155c1e1" style="zoom:50%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// =&gt; undefined 构造函数的this指向了空对象，因此this.name是undefined</span></span><br><span class="line"><span class="comment">// =&gt; &#123;x: &#x27;z&#x27;&#125; 给箭头函数.call指能有效传进去参数，this传进去无效</span></span><br></pre></td></tr></table></figure><h3 id="✅ES6-var一个对象"><a href="#✅ES6-var一个对象" class="headerlink" title="✅ES6 var一个对象"></a>✅ES6 var一个对象</h3><p>看输出结果</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// T1</span></span><br><span class="line"><span class="keyword">var</span> = &#123; <span class="attr">n</span>: <span class="number">10</span> &#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">out</span>(<span class="params">obj</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> b = obj;</span><br><span class="line"><span class="keyword">var</span> c = b; <span class="comment">// b c 是同一个引用</span></span><br><span class="line">b.<span class="property">n</span> = <span class="number">30</span>;</span><br><span class="line">c = &#123; <span class="attr">n</span>: <span class="number">40</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">n</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">n</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">n</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">out</span>(a); <span class="comment">// =&gt; 30 30 40</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// T2</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">bar</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = <span class="string">&#x27;bar1&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> o2 = &#123; <span class="attr">bar</span>: <span class="string">&#x27;bar2&#x27;</span>, <span class="attr">foo</span>: foo &#125;;</span><br><span class="line"><span class="keyword">var</span> o3 = &#123; <span class="attr">bar</span>: <span class="string">&#x27;bar3&#x27;</span>, <span class="attr">foo</span>: <span class="function">() =&gt;</span> &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">bar</span>) &#125; &#125;;</span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// =&gt; bar1 this指向全局（本身就是个全局函数）</span></span><br><span class="line">o2.<span class="title function_">foo</span>(); <span class="comment">// =&gt; bar2 this绑定o2</span></span><br><span class="line">o3.<span class="title function_">foo</span>(); <span class="comment">// =&gt; bar1 this指向全局（箭头函数不绑定this，依附于其所在上下文，全局）</span></span><br></pre></td></tr></table></figure><h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h3><p>任何一个Promise被拒绝，返回的Promise将被拒绝，并携带拒绝原因。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>, <span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([promise1, promise2, promise3]).<span class="title function_">then</span>(<span class="function">(<span class="params">values</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(values);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// Expected output: Array [3, 42, &quot;foo&quot;]</span></span><br></pre></td></tr></table></figure><h3 id="💥异步任务队列，可以同时指定任务队列长度"><a href="#💥异步任务队列，可以同时指定任务队列长度" class="headerlink" title="💥异步任务队列，可以同时指定任务队列长度"></a>💥异步任务队列，可以同时指定任务队列长度</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AsyncQueue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">maxLength</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span> = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">maxLength</span> = maxLength;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">running</span> = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">addTask</span>(<span class="params">taskFunction</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="title function_">task</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">running</span>++;</span><br><span class="line">          <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">taskFunction</span>();</span><br><span class="line">          <span class="title function_">resolve</span>(result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">running</span>--;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">processQueue</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">push</span>(task);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">running</span> &lt; <span class="variable language_">this</span>.<span class="property">maxLength</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">processQueue</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">processQueue</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">running</span> &gt;= <span class="variable language_">this</span>.<span class="property">maxLength</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> task = <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">shift</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (task) &#123;</span><br><span class="line">      <span class="title function_">task</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用示例</span></span><br><span class="line"><span class="keyword">const</span> maxQueueLength = <span class="number">3</span>; <span class="comment">// 最大队列长度</span></span><br><span class="line"><span class="keyword">const</span> asyncTaskQueue = <span class="keyword">new</span> <span class="title class_">AsyncQueue</span>(maxQueueLength);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">simulateAsyncTask</span>(<span class="params">taskId, duration</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Task <span class="subst">$&#123;taskId&#125;</span> completed after <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">      <span class="title function_">resolve</span>();</span><br><span class="line">    &#125;, duration);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> taskId = i;</span><br><span class="line">    <span class="keyword">const</span> taskDuration = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">3000</span>) + <span class="number">1000</span>; <span class="comment">// 模拟异步任务执行时间</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> asyncTaskQueue.<span class="title function_">addTask</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Task <span class="subst">$&#123;taskId&#125;</span> added to the queue`</span>);</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">simulateAsyncTask</span>(taskId, taskDuration);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">main</span>();</span><br></pre></td></tr></table></figure><h3 id="💥超时重传Promise-race"><a href="#💥超时重传Promise-race" class="headerlink" title="💥超时重传Promise.race"></a>💥超时重传Promise.race</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个函数来执行网络请求</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendRequest</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 模拟一个网络请求，这里使用setTimeout模拟延迟响应</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> shouldFail = <span class="title class_">Math</span>.<span class="title function_">random</span>() &lt; <span class="number">0.3</span>; <span class="comment">// 模拟请求失败的情况</span></span><br><span class="line">      <span class="keyword">if</span> (shouldFail) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Request failed&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&#x27;Request successful&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>); <span class="comment">// 模拟1秒的请求延迟</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个函数来执行超时重传</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">retryWithTimeout</span>(<span class="params">requestData, maxAttempts, timeout</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> attempt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">doRequest</span>(<span class="params"></span>) &#123;</span><br><span class="line">    attempt++;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">sendRequest</span>(requestData)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Attempt <span class="subst">$&#123;attempt&#125;</span>: <span class="subst">$&#123;response&#125;</span>`</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Attempt <span class="subst">$&#123;attempt&#125;</span> failed: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (attempt &lt; maxAttempts) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Retrying in <span class="subst">$&#123;timeout / <span class="number">1000</span>&#125;</span> seconds...`</span>);</span><br><span class="line">          <span class="built_in">setTimeout</span>(doRequest, timeout); <span class="comment">// 在超时后重试</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Max attempts reached (<span class="subst">$&#123;maxAttempts&#125;</span>), giving up.`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">doRequest</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用超时重传函数</span></span><br><span class="line"><span class="keyword">const</span> requestData = &#123; <span class="comment">/* 请求数据 */</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> maxAttempts = <span class="number">5</span>; <span class="comment">// 最大重试次数</span></span><br><span class="line"><span class="keyword">const</span> timeout = <span class="number">2000</span>; <span class="comment">// 超时时间，单位毫秒</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">retryWithTimeout</span>(requestData, maxAttempts, timeout);</span><br></pre></td></tr></table></figure><h3 id="✅节流函数的多种实现方式"><a href="#✅节流函数的多种实现方式" class="headerlink" title="✅节流函数的多种实现方式"></a>✅节流函数的多种实现方式</h3><p>时间戳</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttled</span>(<span class="params">fn, delay = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> oldTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span>,</span><br><span class="line">            args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">let</span> newTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (newTime - oldTime &gt;= delay) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            oldTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>延时器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttled</span>(<span class="params">fn, delay = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span>,</span><br><span class="line">            args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">                timer = <span class="literal">null</span></span><br><span class="line">            &#125;, delay)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>延时器+时间戳——更加精确的节流</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttled</span>(<span class="params">fn, delay = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">let</span> startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> content = <span class="variable language_">this</span>,</span><br><span class="line">            args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">let</span> remaining = delay - (<span class="title class_">Date</span>.<span class="title function_">now</span>() - startTime)</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        <span class="keyword">if</span> (remaining &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(fn, remaining)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="✅防抖函数的实现"><a href="#✅防抖函数的实现" class="headerlink" title="✅防抖函数的实现"></a>✅防抖函数的实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounced</span>(<span class="params">fn, wait = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span>,</span><br><span class="line">            args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">if</span> (timer)<span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">        &#125;, wait)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 立即执行</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounced</span>(<span class="params">fn, wait = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span>,</span><br><span class="line">            args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            flag = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (timer) <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(func)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传入第三参数控制是否立即执行</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounced</span>(<span class="params">fn, wait = <span class="number">500</span>, immediate = <span class="literal">false</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span>,</span><br><span class="line">            args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">if</span> (timer) <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            &#125;, wait)</span><br><span class="line">       timer = <span class="literal">null</span></span><br><span class="line">            immediate = <span class="literal">false</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            &#125;, wait)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 拓展取消功能</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, wait = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">debounced</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> context = <span class="variable language_">this</span>,</span><br><span class="line">                args = <span class="variable language_">arguments</span></span><br><span class="line">            <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">                flag = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (timer) <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(func)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    debounced.<span class="property">cancel</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> debounced;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="深拷贝的实现"><a href="#深拷贝的实现" class="headerlink" title="深拷贝的实现"></a>深拷贝的实现</h3><h2 id="算法相关"><a href="#算法相关" class="headerlink" title="算法相关"></a>算法相关</h2><h3 id="17-电话号码的字母组合"><a href="#17-电话号码的字母组合" class="headerlink" title="17. 电话号码的字母组合"></a><a href="https://leetcode.cn/problems/letter-combinations-of-a-phone-number/">17. 电话号码的字母组合</a></h3><p>深/广搜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">digits</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string[]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> letterCombinations = <span class="keyword">function</span> (<span class="params">digits</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!digits || digits.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> list = [<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;def&#x27;</span>, <span class="string">&#x27;ghi&#x27;</span>, <span class="string">&#x27;jkl&#x27;</span>, <span class="string">&#x27;mno&#x27;</span>, <span class="string">&#x27;pqrs&#x27;</span>, <span class="string">&#x27;tuv&#x27;</span>, <span class="string">&#x27;wxyz&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> ans = []</span><br><span class="line">    <span class="comment">// BFS</span></span><br><span class="line">    ans.<span class="title function_">push</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; digits.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> len = ans.<span class="property">length</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; len; j++) &#123;</span><br><span class="line">            <span class="keyword">let</span> cur = ans.<span class="title function_">shift</span>()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> l <span class="keyword">of</span> list[digits[i]]) &#123;</span><br><span class="line">                ans.<span class="title function_">push</span>(cur + l)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// DFS</span></span><br><span class="line">    <span class="comment">// function dfs(s, idx) &#123;</span></span><br><span class="line">    <span class="comment">//     if (idx === digits.length) &#123;</span></span><br><span class="line">    <span class="comment">//         ans.push(s)</span></span><br><span class="line">    <span class="comment">//         return</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">//     for (let c of list[digits[idx]]) &#123;</span></span><br><span class="line">    <span class="comment">//         dfs(s + c, idx + 1)</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// dfs(&#x27;&#x27;, 0)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="排序有哪些算法？sort-函数排序用的是哪种排序算法？"><a href="#排序有哪些算法？sort-函数排序用的是哪种排序算法？" class="headerlink" title="排序有哪些算法？sort()函数排序用的是哪种排序算法？"></a>排序有哪些算法？sort()函数排序用的是哪种排序算法？</h3><p>sort是快排</p><h3 id="如何对单链表进行排序"><a href="#如何对单链表进行排序" class="headerlink" title="如何对单链表进行排序"></a>如何对单链表进行排序</h3><h3 id="如何判断一个json数组是另外一个json数组的子集"><a href="#如何判断一个json数组是另外一个json数组的子集" class="headerlink" title="如何判断一个json数组是另外一个json数组的子集"></a>如何判断一个json数组是另外一个json数组的子集</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isSubset</span>(<span class="params">subset, superset</span>) &#123;</span><br><span class="line">  <span class="comment">// 遍历子集数组中的每个元素</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; subset.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> elementFound = <span class="literal">false</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 检查当前子集元素是否在父数组中存在</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; superset.<span class="property">length</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(superset[j]) === <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(subset[i])) &#123;</span><br><span class="line">        elementFound = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// 找到匹配的元素后可以跳出循环</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 如果当前子集元素不存在于父数组中，返回 false</span></span><br><span class="line">    <span class="keyword">if</span> (!elementFound) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 所有子集元素都存在于父数组中，返回 true</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例用法</span></span><br><span class="line"><span class="keyword">const</span> parentArray = [&#123; <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span> &#125;, &#123; <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Bob&quot;</span> &#125;, &#123; <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Charlie&quot;</span> &#125;];</span><br><span class="line"><span class="keyword">const</span> subsetArray = [&#123; <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span> &#125;, &#123; <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Bob&quot;</span> &#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">isSubset</span>(subsetArray, parentArray);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 输出 true</span></span><br></pre></td></tr></table></figure><h3 id="用栈判断括号匹配的具体过程"><a href="#用栈判断括号匹配的具体过程" class="headerlink" title="用栈判断括号匹配的具体过程"></a>用栈判断括号匹配的具体过程</h3><h3 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h3><h3 id="写一个函数进行数字格式转换"><a href="#写一个函数进行数字格式转换" class="headerlink" title="写一个函数进行数字格式转换"></a>写一个函数进行数字格式转换</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 数字转为含分隔符，并保留两位小数的字符串（写在第一面背面）</span><br><span class="line">// 1234567 -&gt; 1,234,567.00</span><br><span class="line">// 100 -&gt; 100.00</span><br><span class="line">// 12.21 -&gt; 12.21</span><br></pre></td></tr></table></figure><p>解法如下：</p><h3 id="对象数组去重"><a href="#对象数组去重" class="headerlink" title="对象数组去重"></a>对象数组去重</h3><h3 id="找出最长不重复字母的子串"><a href="#找出最长不重复字母的子串" class="headerlink" title="找出最长不重复字母的子串"></a>找出最长不重复字母的子串</h3><h3 id="最长递增子序列"><a href="#最长递增子序列" class="headerlink" title="最长递增子序列"></a>最长递增子序列</h3><h3 id="如何将浮点数点左边的数每三位添加一个逗号，如12000000-11转化为12-000-000-11"><a href="#如何将浮点数点左边的数每三位添加一个逗号，如12000000-11转化为12-000-000-11" class="headerlink" title="如何将浮点数点左边的数每三位添加一个逗号，如12000000.11转化为12,000,000.11?"></a>如何将浮点数点左边的数每三位添加一个逗号，如12000000.11转化为12,000,000.11?</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">commafy</span>(<span class="params">num</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> num &amp;&amp; num</span><br><span class="line">    .<span class="title function_">toString</span>()</span><br><span class="line">    .<span class="title function_">replace</span>(<span class="regexp">/\d(?=(\d&#123;3&#125;)+\.)/g</span>, <span class="keyword">function</span>(<span class="params">_, $2</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> $2 + <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">commafy</span>(<span class="number">1231423423.22</span>))<span class="comment">//1,231,423,423.22</span></span><br></pre></td></tr></table></figure><h3 id="✅console-log-transform-‘123abc456def’-abc123def456”"><a href="#✅console-log-transform-‘123abc456def’-abc123def456”" class="headerlink" title="✅console.log(transform(‘123abc456def’)); //abc123def456”"></a>✅console.log(transform(‘123abc456def’)); //abc123def456”</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">transform</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">replace</span>(<span class="regexp">/(\d+)([a-z]+)/g</span>, <span class="keyword">function</span>(<span class="params">_, digits, letters</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;letters&#125;</span><span class="subst">$&#123;digits&#125;</span>`</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// replace(regexp|subStr, newSubStr|function)</span></span><br><span class="line"><span class="comment">// function(match, p1, p2, ..., offset, string)匹配的子串，正则中的每个括号部分，偏移量，原字符串↓</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">replace</span>(<span class="regexp">/([a])([b])/g</span>, <span class="keyword">function</span>(<span class="params">_, a, b, offset, string</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`匹配到的字符串<span class="subst">$&#123;_&#125;</span>, <span class="subst">$&#123;b&#125;</span>, <span class="subst">$&#123;a&#125;</span>, 偏移量<span class="subst">$&#123;offset&#125;</span>, 原字符串<span class="subst">$&#123;string&#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>(<span class="string">&#x27;cab&#x27;</span>)) <span class="comment">// &quot;c匹配到的字符串ab, b, a, 偏移量1, 原字符串cab&quot;</span></span><br></pre></td></tr></table></figure><h3 id="分隔字符串"><a href="#分隔字符串" class="headerlink" title="分隔字符串"></a>分隔字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">input</span>: <span class="attr">str</span>: <span class="string">&quot;1234567,123456,1234567,1234567890,123456789,1,2,3,4,5,6&quot;</span></span><br><span class="line">   <span class="attr">length</span>: <span class="number">14</span></span><br><span class="line"><span class="attr">ouput</span>: [</span><br><span class="line"><span class="string">&quot;1234567,123456&quot;</span>,</span><br><span class="line"><span class="string">&quot;1234567&quot;</span>,</span><br><span class="line"><span class="string">&quot;1234567890&quot;</span>,</span><br><span class="line"><span class="string">&quot;123456789,1,2&quot;</span>,</span><br><span class="line"><span class="string">&quot;3,4,5,6&quot;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大致意思，将str分割，每个片段不能超过length, 连成片的数字不能分开，逗号也算长度</span></span><br></pre></td></tr></table></figure><p>解法如下：</p><h3 id="让console-error-a-1-amp-amp-a-2-amp-amp-a-3-打印结果为true。"><a href="#让console-error-a-1-amp-amp-a-2-amp-amp-a-3-打印结果为true。" class="headerlink" title="让console.error(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3)打印结果为true。"></a>让console.error(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3)打印结果为true。</h3><p>解法如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  <span class="attr">i</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">toString</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.<span class="property">i</span>++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>) <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure><h3 id="给定一个无重复元素的整数数组nums-找出其中没有出现的最小正整数"><a href="#给定一个无重复元素的整数数组nums-找出其中没有出现的最小正整数" class="headerlink" title="给定一个无重复元素的整数数组nums,找出其中没有出现的最小正整数"></a>给定一个无重复元素的整数数组nums,找出其中没有出现的最小正整数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">空间复杂度<span class="title function_">O</span>(<span class="number">1</span>),时间复杂度<span class="title function_">O</span>(n)</span><br><span class="line"></span><br><span class="line">例：<span class="attr">input</span>:[<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>] -&gt; <span class="attr">ouput</span>:<span class="number">3</span></span><br><span class="line"><span class="attr">input</span>:[-<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">5</span>] -&gt; <span class="attr">ouput</span>:<span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="随机打乱数组"><a href="#随机打乱数组" class="headerlink" title="随机打乱数组"></a>随机打乱数组</h3><h3 id="发红包"><a href="#发红包" class="headerlink" title="发红包"></a>发红包</h3><h3 id="大根堆"><a href="#大根堆" class="headerlink" title="大根堆"></a>大根堆</h3><p>给定一个不重复元素的整数数组，来构建最大根二叉树， 二叉树的根节点是数组中的最大值，使用数组最大值左侧的部分构建二叉树的左子树，右侧部分构建二叉树的右子树， 左右子树都是最大根二叉树。<br>例子：input:[1,3,2,6,4,5]<br>ouput:<br>            6<br>        3        5<br>      1      2    4</p><h3 id="💢LazyMan"><a href="#💢LazyMan" class="headerlink" title="💢LazyMan"></a>💢LazyMan</h3><p>实现一个LazyMan,可以按照以下方式调用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">LazyMan</span>(<span class="string">&quot;Hank&quot;</span>) </span><br><span class="line">输出: </span><br><span class="line"><span class="title class_">Hi</span>! <span class="title class_">This</span> is <span class="title class_">Hank</span>!</span><br><span class="line"></span><br><span class="line"><span class="title class_">LazyMan</span>(<span class="string">&quot;Hank&quot;</span>).<span class="title function_">sleep</span>(<span class="number">10</span>).<span class="title function_">eat</span>(<span class="string">&quot;dinner&quot;</span>)</span><br><span class="line">输出</span><br><span class="line"><span class="title class_">Hi</span>! <span class="title class_">This</span> is <span class="title class_">Hank</span>! </span><br><span class="line"><span class="comment">//等待10秒.. </span></span><br><span class="line"><span class="title class_">Wake</span> up after <span class="number">10</span> </span><br><span class="line"><span class="title class_">Eat</span> dinner~ </span><br><span class="line"></span><br><span class="line"><span class="title class_">LazyMan</span>(<span class="string">&quot;Hank&quot;</span>).<span class="title function_">eat</span>(<span class="string">&quot;dinner&quot;</span>).<span class="title function_">eat</span>(<span class="string">&quot;supper&quot;</span>)</span><br><span class="line">输出</span><br><span class="line"><span class="title class_">Hi</span> <span class="title class_">This</span> is <span class="title class_">Hank</span>! </span><br><span class="line"><span class="title class_">Eat</span> dinner~</span><br><span class="line"><span class="title class_">Eat</span> supper~ </span><br><span class="line"></span><br><span class="line"><span class="title class_">LazyMan</span>(<span class="string">&quot;Hank&quot;</span>).<span class="title function_">sleepFirst</span>(<span class="number">5</span>).<span class="title function_">eat</span>(<span class="string">&quot;supper&quot;</span>)</span><br><span class="line">输出</span><br><span class="line"><span class="comment">// 等待5秒</span></span><br><span class="line"><span class="title class_">Wake</span> up after <span class="number">5</span> </span><br><span class="line"><span class="title class_">Hi</span> <span class="title class_">This</span> is <span class="title class_">Hank</span>! </span><br><span class="line"><span class="title class_">Eat</span> supper</span><br></pre></td></tr></table></figure><p>解题：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">LazyMan</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LazyManWrapper</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">LazyManWrapper</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span> = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">push</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hi! This is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>!`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">next</span>();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">next</span>();</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">LazyManWrapper</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">next</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">queue</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> task = <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">shift</span>();</span><br><span class="line">        <span class="title function_">task</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">LazyManWrapper</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sleep</span> = <span class="keyword">function</span> (<span class="params">seconds</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">push</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Wake up after <span class="subst">$&#123;seconds&#125;</span>`</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">next</span>();</span><br><span class="line">        &#125;, seconds * <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">LazyManWrapper</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sleepFirst</span> = <span class="keyword">function</span> (<span class="params">seconds</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">unshift</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Wake up after <span class="subst">$&#123;seconds&#125;</span>`</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">next</span>();</span><br><span class="line">        &#125;, seconds * <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">LazyManWrapper</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">eat</span> = <span class="keyword">function</span> (<span class="params">food</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">push</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Eat <span class="subst">$&#123;food&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">next</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试示例</span></span><br><span class="line"><span class="title class_">LazyMan</span>(<span class="string">&quot;Hank&quot;</span>);</span><br><span class="line"><span class="title class_">LazyMan</span>(<span class="string">&quot;Hank&quot;</span>).<span class="title function_">sleep</span>(<span class="number">5</span>).<span class="title function_">eat</span>(<span class="string">&quot;dinner&quot;</span>);</span><br><span class="line"><span class="title class_">LazyMan</span>(<span class="string">&quot;Hank&quot;</span>).<span class="title function_">eat</span>(<span class="string">&quot;dinner&quot;</span>).<span class="title function_">eat</span>(<span class="string">&quot;supper&quot;</span>);</span><br><span class="line"><span class="title class_">LazyMan</span>(<span class="string">&quot;Hank&quot;</span>).<span class="title function_">sleepFirst</span>(<span class="number">2</span>).<span class="title function_">eat</span>(<span class="string">&quot;supper&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="💥实现一个计数构造函数"><a href="#💥实现一个计数构造函数" class="headerlink" title="💥实现一个计数构造函数"></a>💥实现一个计数构造函数</h3><p>写一个构造函数 Foo，该函数每个实例为一个对象，形如 {id: N}，其中 N 表示第 N 次调用得到的。<br>要求：<br>1、不能使用全局变量<br>2、直接调用 Foo() 也会返回实例化的对象<br>3、实例化的对象必须是 Foo 的实例</p><p>解题：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 判断是否是new调用，如果不是，直接返回一个new出来的实例</span></span><br><span class="line">    <span class="keyword">if</span> (!(<span class="variable language_">this</span> <span class="keyword">instanceof</span> <span class="title class_">Foo</span>)) &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Foo</span>()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 如果是↓</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">id</span> = <span class="title class_">Foo</span>.<span class="property">cnt</span>++</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Foo</span>.<span class="property">cnt</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">5</span> &#125;, <span class="function">() =&gt;</span><span class="keyword">new</span> <span class="title class_">Foo</span>());</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Foo</span>())</span><br></pre></td></tr></table></figure><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230728211809974.png" alt="image-20230728211809974" style="zoom:80%;" /><h3 id="开平方根（整数、小数）"><a href="#开平方根（整数、小数）" class="headerlink" title="开平方根（整数、小数）"></a>开平方根（整数、小数）</h3><h3 id="数字阶乘"><a href="#数字阶乘" class="headerlink" title="数字阶乘"></a>数字阶乘</h3><h3 id="💥各种排序"><a href="#💥各种排序" class="headerlink" title="💥各种排序"></a>💥各种排序</h3><p>冒泡排序$O(n^2)$</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">bubbleSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.<span class="property">length</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; len - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">let</span> temp = arr[j]</span><br><span class="line">                arr[j] = arr[j + <span class="number">1</span>]</span><br><span class="line">                arr[j + <span class="number">1</span>] = temp</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>插入排序$O(n^2)$</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">insertSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.<span class="property">length</span></span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">2</span>)<span class="keyword">return</span> arr</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> prevIdx = i - <span class="number">1</span>,</span><br><span class="line">            curVal = arr[i]</span><br><span class="line">        <span class="keyword">while</span> (prevIdx &gt;= <span class="number">0</span> &amp;&amp; arr[prevIdx] &gt; curVal) &#123;</span><br><span class="line">            arr[prevIdx + <span class="number">1</span>] = arr[prevIdx]</span><br><span class="line">            prevIdx--</span><br><span class="line">        &#125;</span><br><span class="line">        arr[prevIdx + <span class="number">1</span>] = curVal</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>选择排序$O(n^2)$</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">selectSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.<span class="property">length</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> minIdx = i</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[minIdx] &gt; arr[j]) &#123;</span><br><span class="line">                minIdx = j</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        temp = arr[i] <span class="comment">// 每次遍历找到最小数与遍历元素互换位置</span></span><br><span class="line">        arr[i] = arr[minIdx]</span><br><span class="line">        arr[minIdx] = temp</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>快速排序$O(nlog2(n))$</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">quickSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.<span class="property">length</span></span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">2</span>) <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> pivotIdx = <span class="title class_">Math</span>.<span class="title function_">floor</span>(len / <span class="number">2</span>), <span class="comment">// 中间基准值</span></span><br><span class="line">        pivot = arr[pivotIdx]</span><br><span class="line">    <span class="keyword">let</span> left = [], <span class="comment">// 基准值左侧小右侧大</span></span><br><span class="line">        right = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class="line">            left.<span class="title function_">push</span>(arr[i])</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            right.<span class="title function_">push</span>(arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">quickSort</span>(left).<span class="title function_">concat</span>([pivot], <span class="title function_">quickSort</span>(right)) <span class="comment">// 递归</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>希尔排序$O(n^{1.3})$第一个突破$O(n^2)$的排序算法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">shellSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.<span class="property">length</span></span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">2</span>) <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> gap = <span class="title class_">Math</span>.<span class="title function_">floor</span>(len / <span class="number">2</span>) <span class="comment">// 获取中间索引作为两数间隔</span></span><br><span class="line">    <span class="keyword">while</span> (gap &gt;= <span class="number">1</span>) &#123; <span class="comment">// 两数间隔不小于一</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = gap; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> temp = arr[i] <span class="comment">// 缓存gap往后的值</span></span><br><span class="line">            <span class="comment">// 索引前距离gap的元素开始，满足元素值大于缓存值，再往前gap</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; arr[j] &gt; temp; j = j - gap) &#123;</span><br><span class="line">                arr[j + gap] = arr[j] <span class="comment">// 后比较值替换成前(大)比较值</span></span><br><span class="line">            &#125;</span><br><span class="line">            arr[j + gap] = temp <span class="comment">// 把遍历终止处元素值替换为缓存值</span></span><br><span class="line">        &#125;</span><br><span class="line">        gap = <span class="title class_">Math</span>.<span class="title function_">floor</span>(gap / <span class="number">2</span>) <span class="comment">// 不是很能理解这个</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>归并排序$O(nlog2(n))$</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mergeSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.<span class="property">length</span></span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">2</span>) <span class="keyword">return</span> arr</span><br><span class="line">    <span class="keyword">let</span> mid = <span class="title class_">Math</span>.<span class="title function_">floor</span>(len / <span class="number">2</span>),</span><br><span class="line">        left = arr.<span class="title function_">slice</span>(<span class="number">0</span>, mid),</span><br><span class="line">        right = arr.<span class="title function_">slice</span>(mid)</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">merge</span>(<span class="title function_">mergeSort</span>(left), <span class="title function_">mergeSort</span>(right))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">left, right</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    <span class="keyword">while</span> (left.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; right.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (left[<span class="number">0</span>] &lt;= right[<span class="number">0</span>]) &#123;</span><br><span class="line">            res.<span class="title function_">push</span>(left.<span class="title function_">shift</span>())</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.<span class="title function_">push</span>(right.<span class="title function_">shift</span>())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (left.<span class="property">length</span>) &#123;</span><br><span class="line">        res.<span class="title function_">push</span>(left.<span class="title function_">shift</span>())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (right.<span class="property">length</span>) &#123;</span><br><span class="line">        res.<span class="title function_">push</span>(right.<span class="title function_">shift</span>())</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>二分查找法$O(log2(n))$</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 非递归</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">binarySearch</span>(<span class="params">arr, key</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.<span class="property">length</span></span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">2</span>) <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> low = <span class="number">0</span>,</span><br><span class="line">        high = len - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">        <span class="keyword">let</span> mid = <span class="title class_">Math</span>.<span class="title function_">floor</span>((low + high) / <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">if</span> (key === arr[mid]) &#123;</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; arr[mid]) &#123;</span><br><span class="line">            low = mid + <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &lt; arr[mid]) &#123;</span><br><span class="line">            high = mid - <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">binarySearch</span>(<span class="params">arr, low, high, key</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (low &gt; high) <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> mid = <span class="title class_">Math</span>.<span class="title function_">floor</span>((low + high) / <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> (arr[mid] === key) &#123;</span><br><span class="line">        <span class="keyword">return</span> mid</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &gt; key) &#123;</span><br><span class="line">        high = mid - <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">binarySearch</span>(arr, low, high, key)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &lt; key) &#123;</span><br><span class="line">        low = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">binarySearch</span>(arr, low, high, key)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="括号匹配"><a href="#括号匹配" class="headerlink" title="括号匹配"></a>括号匹配</h3><h3 id="最长重复子数组"><a href="#最长重复子数组" class="headerlink" title="最长重复子数组"></a>最长重复子数组</h3><h3 id="二叉树最大深度"><a href="#二叉树最大深度" class="headerlink" title="二叉树最大深度"></a>二叉树最大深度</h3><h3 id="大数相乘"><a href="#大数相乘" class="headerlink" title="大数相乘"></a>大数相乘</h3><h3 id="hardMan"><a href="#hardMan" class="headerlink" title="hardMan()"></a>hardMan()</h3><h3 id="打家劫舍2"><a href="#打家劫舍2" class="headerlink" title="打家劫舍2"></a>打家劫舍2</h3><h3 id="打家劫舍3"><a href="#打家劫舍3" class="headerlink" title="打家劫舍3"></a>打家劫舍3</h3><h3 id="最长字符串链（leecode的1048题）"><a href="#最长字符串链（leecode的1048题）" class="headerlink" title="最长字符串链（leecode的1048题）"></a>最长字符串链（leecode的1048题）</h3><h3 id="子类继承父类"><a href="#子类继承父类" class="headerlink" title="子类继承父类"></a>子类继承父类</h3><h3 id="对列表元素中某一属性进行排序"><a href="#对列表元素中某一属性进行排序" class="headerlink" title="对列表元素中某一属性进行排序"></a>对列表元素中某一属性进行排序</h3><h3 id="实现一个函数，函数有两个参数，第一个参数为一个字符串，第二个参数为一个数字"><a href="#实现一个函数，函数有两个参数，第一个参数为一个字符串，第二个参数为一个数字" class="headerlink" title="实现一个函数，函数有两个参数，第一个参数为一个字符串，第二个参数为一个数字"></a>实现一个函数，函数有两个参数，第一个参数为一个字符串，第二个参数为一个数字</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">例如：输入 abcdefghij 3</span><br><span class="line"></span><br><span class="line">输入的字符串按以下方式排列</span><br><span class="line"></span><br><span class="line">a   e   i</span><br><span class="line">b d f h j</span><br><span class="line">c   g</span><br><span class="line"></span><br><span class="line">你需要按行输出</span><br><span class="line"></span><br><span class="line">你需要输出的字符串形似 aeibdfhjcg</span><br></pre></td></tr></table></figure><p>我是这么想的：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">str, num</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> s = str;</span><br><span class="line">  <span class="keyword">let</span> n = num + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(num).<span class="title function_">fill</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> s) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(s[i]);</span><br><span class="line">    <span class="keyword">if</span> (i % n === num) &#123;</span><br><span class="line">      arr[<span class="number">1</span>] += s[i];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      arr[i % n] += s[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>(<span class="string">&#x27;abcdefghij&#x27;</span>, <span class="number">3</span>)); <span class="comment">// [&quot;aei&quot;, &quot;bdfhj&quot;, &quot;cg&quot;] aeibdfhjcg</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>(<span class="string">&#x27;abcdefghij&#x27;</span>, <span class="number">4</span>)); <span class="comment">// [&quot;af&quot;, &quot;begj&quot;, &quot;ch&quot;, &quot;di&quot;] afbegjchdi</span></span><br></pre></td></tr></table></figure><h3 id="实现-lodash-get"><a href="#实现-lodash-get" class="headerlink" title="实现 lodash.get"></a>实现 lodash.get</h3><h3 id="LC岛屿数量，最大岛屿面积"><a href="#LC岛屿数量，最大岛屿面积" class="headerlink" title="LC岛屿数量，最大岛屿面积"></a>LC岛屿数量，最大岛屿面积</h3><h3 id="2208-将数组和减半的最少操作次数，建个堆吧"><a href="#2208-将数组和减半的最少操作次数，建个堆吧" class="headerlink" title="2208. 将数组和减半的最少操作次数，建个堆吧"></a><a href="https://leetcode.cn/problems/minimum-operations-to-halve-array-sum/">2208. 将数组和减半的最少操作次数</a>，建个堆吧</h3><h1 id="🧮设计模式"><a href="#🧮设计模式" class="headerlink" title="🧮设计模式"></a>🧮设计模式</h1><p>定义：设计模式是针对特定问题的简洁优雅的解决方案。</p><p>设计模式分为三大类：创建、结构、行为规范。</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/image-20230910212901425.png" alt="image-20230910212901425"></p><h2 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h2><h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h3><p>意图：</p><ol><li>确保一个类只有一个实例遵。循真理单点性的观点，遵循单一职责原则（FCC:不可复制不可更改）</li><li>并提供该实例的全局访问点。方便调用访问。</li></ol><p>单例模式禁止通过除特殊构建方法以外的任何方式来创建自身类的对象。该方法可以创建一个新对象，如若该对象已经被创建，那么返回的应是已有的对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Singleton</span>.<span class="property">instance</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Singleton</span>.<span class="property">instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在此处初始化单例对象</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">someProperty</span> = <span class="string">&#x27;This is a singleton instance&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将实例存储在静态属性中，以确保只有一个实例存在</span></span><br><span class="line">    <span class="title class_">Singleton</span>.<span class="property">instance</span> = <span class="variable language_">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 可以在这里定义其他方法和属性</span></span><br><span class="line">  <span class="title function_">someMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">someProperty</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建单例实例</span></span><br><span class="line"><span class="keyword">const</span> instance1 = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line"><span class="keyword">const</span> instance2 = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 由于单例模式，这两个实例应该是相同的</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(instance1 === instance2); <span class="comment">// 输出：true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以访问单例实例的属性和方法</span></span><br><span class="line">instance1.<span class="title function_">someMethod</span>(); <span class="comment">// 输出：This is a singleton instance</span></span><br><span class="line">instance2.<span class="title function_">someMethod</span>(); <span class="comment">// 输出：This is a singleton instance</span></span><br></pre></td></tr></table></figure><p>结构：↑</p><p>案例：以下是对一个单一对象进行设置，从而禁止修改/添加对象中任何内容。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象字面量</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Config</span> = &#123;</span><br><span class="line">    <span class="attr">start</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;haha&#x27;</span>),</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(<span class="title class_">Config</span>) <span class="comment">// 冻结对象，限制添加属性和修改属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Config</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hahaha&#x27;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> <span class="title class_">Config</span>()</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(instance)</span><br></pre></td></tr></table></figure><h3 id="工厂方法"><a href="#工厂方法" class="headerlink" title="工厂方法"></a>工厂方法</h3><p>提供创建对象的接口，对象被创建后可以被修改。将创建对象的逻辑集中在一个地方，简化代码，使更易组织。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 工厂函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Test</span>(<span class="params">name, phrase</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">phrase</span> = phrase</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Test</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">saySth</span> = <span class="function">() =&gt;</span> &#123; <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> : <span class="subst">$&#123;<span class="variable language_">this</span>.phrase&#125;</span>`</span> &#125;</span><br><span class="line"><span class="keyword">const</span> ra = <span class="keyword">new</span> <span class="title class_">Test</span>(<span class="string">&#x27;Ra&#x27;</span>, <span class="string">&#x27;eating&#x27;</span>)</span><br><span class="line">ra.<span class="title function_">saySth</span>() <span class="comment">// =&gt; Ra : eating</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> (name, phrase)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">phrase</span> = phrase</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">saySth</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`It&#x27;s <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> the <span class="subst">$&#123;<span class="variable language_">this</span>.phrase&#125;</span> guy!`</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> liz = <span class="keyword">new</span> <span class="title class_">Test</span>(<span class="string">&#x27;Liz&#x27;</span>, <span class="string">&#x27;coding&#x27;</span>)</span><br><span class="line">liz.<span class="title function_">saySth</span>() <span class="comment">// =&gt; It&#x27;s Liz the coding guy!</span></span><br></pre></td></tr></table></figure><h3 id="抽象工厂"><a href="#抽象工厂" class="headerlink" title="抽象工厂"></a>抽象工厂</h3><p>允许在不指定具体类的情况下生成一系列相关的对象。创建仅共享某些属性方法的对象。</p><p>给客户端提供一个可以交互的抽象工厂，抽象工厂可以通过特定逻辑调用具体工厂，具体工厂返回最终对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 具体工厂</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> () &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Car&quot;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">wheels</span> = <span class="number">4</span></span><br><span class="line">    &#125;</span><br><span class="line">    turnOn = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`DiDi! <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> has <span class="subst">$&#123;<span class="variable language_">this</span>.wheels&#125;</span> wheels.`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Truck</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> () &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Truck&quot;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">wheels</span> = <span class="number">8</span></span><br><span class="line">    &#125;</span><br><span class="line">    turnOn = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Wuuuuuu! <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> has <span class="subst">$&#123;<span class="variable language_">this</span>.wheels&#125;</span> wheels.`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Motorcycle</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> () &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Motorcycle&quot;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">wheels</span> = <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">    turnOn = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`BiBi! <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> has <span class="subst">$&#123;<span class="variable language_">this</span>.wheels&#125;</span> wheels.`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抽象工厂：提供单一交互点和客户端交互</span></span><br><span class="line"><span class="keyword">const</span> vehicleFactory = &#123;</span><br><span class="line">    <span class="attr">createVehicle</span>: <span class="keyword">function</span> (<span class="params">type</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;car&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Car</span>()</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;truck&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Truck</span>()</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;motorcycle&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Motorcycle</span>()</span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> car = vehicleFactory.<span class="title function_">createVehicle</span>(<span class="string">&quot;car&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> truck = vehicleFactory.<span class="title function_">createVehicle</span>(<span class="string">&quot;truck&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> motorcycle = vehicleFactory.<span class="title function_">createVehicle</span>(<span class="string">&quot;motorcycle&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="构造器模式"><a href="#构造器模式" class="headerlink" title="构造器模式"></a>构造器模式</h3><p>构造器模式分步骤创建对象。通过不同的函数和方法对对象添加属性和方法。通过不同的实体分开创建属性和方法。</p><p>通过类或构造函数创建的实例通常继承了所有的属性和方法。但是如果使用构造器，我们可以只应用我们需要的步骤来创建对象，更加灵活。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bug1 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;A the Bug&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> bug2 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;B the Bug&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addFlyAbility</span> = obj =&gt; &#123;</span><br><span class="line">    obj.<span class="property">fly</span> = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;obj.name&#125;</span> is flying`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addJumpAbility</span> = obj =&gt; &#123;</span><br><span class="line">    obj.<span class="property">jump</span> = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;obj.name&#125;</span> is jumping`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">addFlyAbility</span>(bug1)</span><br><span class="line">bug1.<span class="title function_">fly</span>() <span class="comment">// A the Bug is flying</span></span><br><span class="line"><span class="title function_">addJumpAbility</span>(bug2)</span><br><span class="line">bug2.<span class="title function_">jump</span>() <span class="comment">// B the Bug is flying</span></span><br></pre></td></tr></table></figure><h3 id="原型-1"><a href="#原型-1" class="headerlink" title="原型"></a>原型</h3><p>允许将一个对象作为蓝图来创建另一个新对象。新对象继承原对象的属性和方法。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">    <span class="attr">fly</span>: <span class="function">() =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;flyyyyyy&#x27;</span>)&#125;</span><br><span class="line">    <span class="attr">jump</span>: <span class="function">() =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;jumppppp&#x27;</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;raliz&#x27;</span></span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;21&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">setPrototype</span>(obj2, obj1)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(obj2))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">name</span>, obj1.<span class="title function_">lfy</span>()) <span class="comment">// =&gt; raliz flyyyyyy</span></span><br></pre></td></tr></table></figure><h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><h3 id="适配器"><a href="#适配器" class="headerlink" title="适配器"></a>适配器</h3><p>允许两个接口不兼容的对象相互交互。</p><p><img src="../images/%E5%A5%BD%E9%9D%A2%E7%9A%84%E7%B3%96%E7%82%92%E6%A0%97%E5%AD%90/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f33643562383238652d356334642d343864382d613434302d3238316534613865316339322e706e67.png" alt="img"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 旧的温度计类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OldThermometer</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">temperatureFahrenheit</span> = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getTemperature</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">temperatureFahrenheit</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setTemperatureFahrenheit</span>(<span class="params">temperature</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">temperatureFahrenheit</span> = temperature;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新的温度计类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewThermometer</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">temperatureCelsius</span> = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getTemperature</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">temperatureCelsius</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setTemperatureCelsius</span>(<span class="params">temperature</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">temperatureCelsius</span> = temperature;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 适配器类，将OldThermometer适配为NewThermometer接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThermometerAdapter</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">oldThermometer</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">oldThermometer</span> = oldThermometer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getTemperature</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 转换华氏度到摄氏度</span></span><br><span class="line">    <span class="keyword">const</span> temperatureFahrenheit = <span class="variable language_">this</span>.<span class="property">oldThermometer</span>.<span class="title function_">getTemperature</span>();</span><br><span class="line">    <span class="keyword">const</span> temperatureCelsius = (temperatureFahrenheit - <span class="number">32</span>) * <span class="number">5</span>/<span class="number">9</span>;</span><br><span class="line">    <span class="keyword">return</span> temperatureCelsius;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setTemperatureCelsius</span>(<span class="params">temperature</span>) &#123;</span><br><span class="line">    <span class="comment">// 转换摄氏度到华氏度</span></span><br><span class="line">    <span class="keyword">const</span> temperatureFahrenheit = (temperature * <span class="number">9</span>/<span class="number">5</span>) + <span class="number">32</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">oldThermometer</span>.<span class="title function_">setTemperatureFahrenheit</span>(temperatureFahrenheit);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用适配器</span></span><br><span class="line"><span class="keyword">const</span> oldThermometer = <span class="keyword">new</span> <span class="title class_">OldThermometer</span>();</span><br><span class="line"><span class="keyword">const</span> adapter = <span class="keyword">new</span> <span class="title class_">ThermometerAdapter</span>(oldThermometer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用新的温度计接口来获取温度</span></span><br><span class="line">adapter.<span class="title function_">setTemperatureCelsius</span>(<span class="number">30</span>); <span class="comment">// 设置摄氏度</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Temperature in Celsius: <span class="subst">$&#123;adapter.getTemperature()&#125;</span>°C`</span>); <span class="comment">// 获取摄氏度</span></span><br></pre></td></tr></table></figure><h3 id="装饰"><a href="#装饰" class="headerlink" title="装饰"></a>装饰</h3><p>通过一个对象包裹原来的对象，从而给原来的对象增添新的行为。</p><p>可以回想一下React项目中状态管理的配置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">export defualt function ContextProvider = (&#123; children &#125;) =&gt; &#123;</span><br><span class="line">    return(</span><br><span class="line">        &lt;Context.Provider&gt;</span><br><span class="line">        &#123;children&#125;</span><br><span class="line">        &lt;/Context.Provider&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export defualt function APP() &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;ContextProvider&gt;</span><br><span class="line">            &lt;Router&gt;</span><br><span class="line">                &lt;Routes&gt;....&lt;/Routes&gt;</span><br><span class="line">            &lt;/Router&gt;</span><br><span class="line">        &lt;/ContextProvider&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const default function Apage() &#123;</span><br><span class="line">    ....</span><br><span class="line">    const &#123; qvq &#125; = useContext(Context)</span><br><span class="line">    return (....)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="外观"><a href="#外观" class="headerlink" title="外观"></a>外观</h3><p>给库、框架以及其他复杂的类集提供简化的接口。</p><p>想一下很多封装的接口方法，很多组件库封装好的组件。</p><h3 id="代理-1"><a href="#代理-1" class="headerlink" title="代理"></a>代理</h3><p>为另一个对象提供替代或占位符。控制对原始对象的访问，当请求到达原始对象之前/后执行某种操作。</p><p>想一下中间件，我们可以在请求到达前/中/后执行一段代码。</p><h3 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h3><p>它摒弃了在每个对象中保存所有数据的方式， 通过共享多个对象所共有的相同状态， 让你能在有限的内存容量中载入更多对象。</p><h2 id="行为范式"><a href="#行为范式" class="headerlink" title="行为范式"></a>行为范式</h2><h3 id="责任链"><a href="#责任链" class="headerlink" title="责任链"></a>责任链</h3><p>责任链将请求通过处理链传递。（不同的实体协作实行任务）</p><h3 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h3><p>用于遍历集合元素。有很多迭代方法的呃呃。</p><h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><p>允许定义一个订阅机制，通知多个对象，他们正在观察的这一个对象发生的变化事件。</p><p>观察者模式通常是同步的。</p><h3 id="发布-订阅模式"><a href="#发布-订阅模式" class="headerlink" title="发布-订阅模式"></a>发布-订阅模式</h3><p>允许定义一个事件中心(消息代理)，允许发布者和订阅者之间解耦。</p><p>发布订阅模式通常是异步的，发布者发布事件之后不会立即通知订阅者，而是等待订阅者订阅相关事件的时候才会通知。</p><h1 id="😎自我介绍"><a href="#😎自我介绍" class="headerlink" title="😎自我介绍"></a>😎自我介绍</h1><p>首先警告一下你自己，不要出现‘就是就是就是’‘怎么说怎么说’这种口头禅，老可恶了录音里听着！</p><p>然后就是，带耳机！真的很容易听不清面试官的问题。</p><p>静思，感觉说不完整的的不如直接说不知道该怎么叙述。</p><h2 id="面试开头的自我介绍"><a href="#面试开头的自我介绍" class="headerlink" title="面试开头的自我介绍"></a>面试开头的自我介绍</h2><h2 id="为什么选择前端"><a href="#为什么选择前端" class="headerlink" title="为什么选择前端"></a>为什么选择前端</h2><p>所敲即所见，所见即所得</p><h2 id="怎么学习的前端"><a href="#怎么学习的前端" class="headerlink" title="怎么学习的前端"></a>怎么学习的前端</h2><h2 id="为什么选择这个城市"><a href="#为什么选择这个城市" class="headerlink" title="为什么选择这个城市"></a>为什么选择这个城市</h2><h1 id="👔反问"><a href="#👔反问" class="headerlink" title="👔反问"></a>👔反问</h1><p>纯觉得自己菜：</p><h2 id="公司开发部门人员结构，同岗位人员数量，团队氛围，日常技术交流"><a href="#公司开发部门人员结构，同岗位人员数量，团队氛围，日常技术交流" class="headerlink" title="公司开发部门人员结构，同岗位人员数量，团队氛围，日常技术交流"></a>公司开发部门人员结构，同岗位人员数量，团队氛围，日常技术交流</h2><p>对业务感兴趣：</p><h2 id="官网看到…具体是什么样的-询问一些猜想"><a href="#官网看到…具体是什么样的-询问一些猜想" class="headerlink" title="官网看到…具体是什么样的(询问一些猜想)"></a>官网看到…具体是什么样的(询问一些猜想)</h2><p>比较有过的把握：</p><h2 id="培养实习生的路线是怎样的呢？"><a href="#培养实习生的路线是怎样的呢？" class="headerlink" title="培养实习生的路线是怎样的呢？"></a>培养实习生的路线是怎样的呢？</h2><h2 id="分配任务是怎样的呢？"><a href="#分配任务是怎样的呢？" class="headerlink" title="分配任务是怎样的呢？"></a>分配任务是怎样的呢？</h2><h2 id="需要提前准备一些什么？"><a href="#需要提前准备一些什么？" class="headerlink" title="需要提前准备一些什么？"></a>需要提前准备一些什么？</h2>]]></content>
      
      
      <categories>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/post/4a17b156.html"/>
      <url>/post/4a17b156.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>自我介绍</title>
      <link href="/post/7f89b6f6.html"/>
      <url>/post/7f89b6f6.html</url>
      
        <content type="html"><![CDATA[<p>前端开发工程师</p>]]></content>
      
      
      <categories>
          
          <category> 自主 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>友情链接</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
